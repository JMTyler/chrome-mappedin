!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mappedin=e():t.Mappedin=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=135)}([function(t,e,i){var n=t.exports={},r=i(2);n.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},n.crossVZ=function(t,e,i){return n.rotate(t,e,-Math.PI/2),n.scale(t,t,i),t},n.crossZV=function(t,e,i){return n.rotate(t,i,Math.PI/2),n.scale(t,t,e),t},n.rotate=function(t,e,i){if(0!==i){var n=Math.cos(i),r=Math.sin(i),o=e[0],a=e[1];t[0]=n*o-r*a,t[1]=r*o+n*a}else t[0]=e[0],t[1]=e[1]},n.rotate90cw=function(t,e){var i=e[0],n=e[1];t[0]=n,t[1]=-i},n.toLocalFrame=function(t,e,i,r){n.copy(t,e),n.sub(t,t,i),n.rotate(t,t,-r)},n.toGlobalFrame=function(t,e,i,r){n.copy(t,e),n.rotate(t,t,r),n.add(t,t,i)},n.vectorToLocalFrame=function(t,e,i){n.rotate(t,e,-i)},n.vectorToGlobalFrame=function(t,e,i){n.rotate(t,e,i)},n.centroid=function(t,e,i,r){return n.add(t,e,i),n.add(t,t,r),n.scale(t,t,1/3),t},n.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var i=new r.ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,i){return t[0]=e,t[1]=i,t},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},n.sub=n.subtract,n.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},n.mul=n.multiply,n.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},n.div=n.divide,n.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},n.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},n.len=n.length,n.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.normalize=function(t,e){var i=e[0],n=e[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.lerp=function(t,e,i,n){var r=e[0],o=e[1];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t},n.reflect=function(t,e,i){var n=e[0]*i[0]+e[1]*i[1];t[0]=e[0]-2*i[0]*n,t[1]=e[1]-2*i[1]*n},n.getLineSegmentsIntersection=function(t,e,i,r,o){var a=n.getLineSegmentsIntersectionFraction(e,i,r,o);return!(a<0)&&(t[0]=e[0]+a*(i[0]-e[0]),t[1]=e[1]+a*(i[1]-e[1]),!0)},n.getLineSegmentsIntersectionFraction=function(t,e,i,n){var r,o,a=e[0]-t[0],s=e[1]-t[1],l=n[0]-i[0],h=n[1]-i[1];return r=(-s*(t[0]-i[0])+a*(t[1]-i[1]))/(-l*s+a*h),o=(l*(t[1]-i[1])-h*(t[0]-i[0]))/(-l*s+a*h),r>=0&&r<=1&&o>=0&&o<=1?o:-1}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,h=[],c=!1,u=-1;function p(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&d())}function d(){if(!c){var t=s(p);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||c||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){function i(){}t.exports=i,i.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var i=0,n=e.length;i!==n;++i)t.push(e[i])},i.splice=function(t,e,i){i=i||1;for(var n=e,r=t.length-i;n<r;n++)t[n]=t[n+i];t.length=r},"undefined"!=typeof P2_ARRAY_TYPE?i.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?i.ARRAY_TYPE=Float32Array:i.ARRAY_TYPE=Array,i.extend=function(t,e){for(var i in e)t[i]=e[i]},i.defaults=function(t,e){t=t||{};for(var i in e)i in t||(t[i]=e[i]);return t}},function(t,e,i){"use strict";function n(){}i.d(e,"_2",function(){return Yo}),i.d(e,"T",function(){return Ko}),i.d(e,"G",function(){return mr}),i.d(e,"B",function(){return oa}),i.d(e,"x",function(){return ca}),i.d(e,"g",function(){return jo}),i.d(e,"X",function(){return ci}),i.d(e,"Y",function(){return js}),i.d(e,"l",function(){return Bs}),i.d(e,"s",function(){return zs}),i.d(e,"D",function(){return Vl}),i.d(e,"P",function(){return gl}),i.d(e,"y",function(){return dl}),i.d(e,"m",function(){return _l}),i.d(e,"N",function(){return Ho}),i.d(e,"A",function(){return lc}),i.d(e,"f",function(){return On}),i.d(e,"w",function(){return hn}),i.d(e,"z",function(){return pc}),i.d(e,"L",function(){return Ji}),i.d(e,"R",function(){return dc}),i.d(e,"p",function(){return n}),i.d(e,"j",function(){return vc}),i.d(e,"F",function(){return je}),i.d(e,"b",function(){return mi}),i.d(e,"o",function(){return Si}),i.d(e,"_1",function(){return Ge}),i.d(e,"_0",function(){return Ue}),i.d(e,"k",function(){return Ei}),i.d(e,"c",function(){return Cc}),i.d(e,"a",function(){return Rc}),i.d(e,"V",function(){return ul}),i.d(e,"M",function(){return cl}),i.d(e,"u",function(){return Ql}),i.d(e,"Z",function(){return Ta}),i.d(e,"W",function(){return os}),i.d(e,"O",function(){return Bn}),i.d(e,"r",function(){return ns}),i.d(e,"q",function(){return rs}),i.d(e,"d",function(){return Rn}),i.d(e,"Q",function(){return qs}),i.d(e,"U",function(){return ur}),i.d(e,"K",function(){return Ps}),i.d(e,"J",function(){return Cs}),i.d(e,"H",function(){return cr}),i.d(e,"C",function(){return ra}),i.d(e,"t",function(){return yn}),i.d(e,"e",function(){return cn}),i.d(e,"h",function(){return Ks}),i.d(e,"E",function(){return q}),i.d(e,"v",function(){return C}),i.d(e,"n",function(){return O}),i.d(e,"S",function(){return Pt}),i.d(e,"i",function(){return St}),i.d(e,"I",function(){return Bc}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,t)}}}});var r,o,a,s,l,h,c,u,p,d,f,m,v,g,y,_,x,b,w,E,M="91",q={LEFT:0,MIDDLE:1,RIGHT:2},A=0,T=1,P=2,S=1,L=2,C=0,I=1,O=2,R=0,N=1,B=2,D=0,z=1,k=2,F=3,U=4,j=5,V=100,G=101,H=102,W=103,X=104,Y=200,Z=201,J=202,K=203,Q=204,$=205,tt=206,et=207,it=208,nt=209,rt=210,ot=0,at=1,st=2,lt=3,ht=4,ct=5,ut=6,pt=7,dt=0,ft=1,mt=2,vt=0,gt=1,yt=2,_t=3,xt=4,bt=301,wt=302,Et=303,Mt=304,qt=305,At=306,Tt=307,Pt=1e3,St=1001,Lt=1002,Ct=1003,It=1004,Ot=1005,Rt=1006,Nt=1007,Bt=1008,Dt=1009,zt=1010,kt=1011,Ft=1012,Ut=1013,jt=1014,Vt=1015,Gt=1016,Ht=1017,Wt=1018,Xt=1019,Yt=1020,Zt=1021,Jt=1022,Kt=1023,Qt=1024,$t=1025,te=1026,ee=1027,ie=33776,ne=33777,re=33778,oe=33779,ae=35840,se=35841,le=35842,he=35843,ce=36196,ue=37808,pe=37809,de=37810,fe=37811,me=37812,ve=37813,ge=37814,ye=37815,_e=37816,xe=37817,be=37818,we=37819,Ee=37820,Me=37821,qe=2201,Ae=2400,Te=2401,Pe=0,Se=1,Le=2,Ce=3e3,Ie=3001,Oe=3007,Re=3002,Ne=3004,Be=3005,De=3006,ze=3200,ke=3201,Fe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16).toUpperCase();return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Fe.DEG2RAD},radToDeg:function(t){return t*Fe.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Ue(t,e){this.x=t||0,this.y=e||0}function je(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Ve(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function Ge(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function He(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ue.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ue.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(r=new Ue,o=new Ue,function(t,e){return r.set(t,t),o.set(e,e),this.clamp(r,o)}),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}}),Object.assign(je.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,o,a,s,l,h,c,u,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=h,v[10]=c,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new je).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:(p=new Ge,function(t){var e=this.elements,i=t.elements,n=1/p.setFromMatrixColumn(t,0).length(),r=1/p.setFromMatrixColumn(t,1).length(),o=1/p.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var u=o*h,p=o*c,d=a*h,f=a*c;e[0]=s*h,e[4]=-s*c,e[8]=l,e[1]=p+d*l,e[5]=u-f*l,e[9]=-a*s,e[2]=f-u*l,e[6]=d+p*l,e[10]=o*s}else if("YXZ"===t.order){var m=s*h,v=s*c,g=l*h,y=l*c;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*l,e[1]=o*c,e[5]=o*h,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){m=s*h,v=s*c,g=l*h,y=l*c;e[0]=m-y*a,e[4]=-o*c,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*h,e[9]=y-m*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){u=o*h,p=o*c,d=a*h,f=a*c;e[0]=s*h,e[4]=d*l-p,e[8]=u*l+f,e[1]=s*c,e[5]=f*l+u,e[9]=p*l-d,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var _=o*s,x=o*l,b=a*s,w=a*l;e[0]=s*h,e[4]=w-_*c,e[8]=b*c+x,e[1]=c,e[5]=o*h,e[9]=-a*h,e[2]=-l*h,e[6]=x*c+b,e[10]=_-w*c}else if("XZY"===t.order){_=o*s,x=o*l,b=a*s,w=a*l;e[0]=s*h,e[4]=-c,e[8]=l*h,e[1]=_*c+w,e[5]=o*h,e[9]=x*c-b,e[2]=b*c-x,e[6]=a*h,e[10]=w*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t._x,n=t._y,r=t._z,o=t._w,a=i+i,s=n+n,l=r+r,h=i*a,c=i*s,u=i*l,p=n*s,d=n*l,f=r*l,m=o*a,v=o*s,g=o*l;return e[0]=1-(p+f),e[4]=c-g,e[8]=u+v,e[1]=c+g,e[5]=1-(h+f),e[9]=d-m,e[2]=u-v,e[6]=d+m,e[10]=1-(h+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(h=new Ge,c=new Ge,u=new Ge,function(t,e,i){var n=this.elements;return u.subVectors(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),h.crossVectors(i,u),0===h.lengthSq()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),h.crossVectors(i,u)),h.normalize(),c.crossVectors(u,h),n[0]=h.x,n[4]=c.x,n[8]=u.x,n[1]=h.y,n[5]=c.y,n[9]=u.y,n[2]=h.z,n[6]=c.z,n[10]=u.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],h=i[1],c=i[5],u=i[9],p=i[13],d=i[2],f=i[6],m=i[10],v=i[14],g=i[3],y=i[7],_=i[11],x=i[15],b=n[0],w=n[4],E=n[8],M=n[12],q=n[1],A=n[5],T=n[9],P=n[13],S=n[2],L=n[6],C=n[10],I=n[14],O=n[3],R=n[7],N=n[11],B=n[15];return r[0]=o*b+a*q+s*S+l*O,r[4]=o*w+a*A+s*L+l*R,r[8]=o*E+a*T+s*C+l*N,r[12]=o*M+a*P+s*I+l*B,r[1]=h*b+c*q+u*S+p*O,r[5]=h*w+c*A+u*L+p*R,r[9]=h*E+c*T+u*C+p*N,r[13]=h*M+c*P+u*I+p*B,r[2]=d*b+f*q+m*S+v*O,r[6]=d*w+f*A+m*L+v*R,r[10]=d*E+f*T+m*C+v*N,r[14]=d*M+f*P+m*I+v*B,r[3]=g*b+y*q+_*S+x*O,r[7]=g*w+y*A+_*L+x*R,r[11]=g*E+y*T+_*C+x*N,r[15]=g*M+y*P+_*I+x*B,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:(l=new Ge,function(t){for(var e=0,i=t.count;e<i;e++)l.x=t.getX(e),l.y=t.getY(e),l.z=t.getZ(e),l.applyMatrix4(this),t.setXYZ(e,l.x,l.y,l.z);return t}),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],h=t[2],c=t[6],u=t[10],p=t[14];return t[3]*(+r*s*c-n*l*c-r*a*u+i*l*u+n*a*p-i*s*p)+t[7]*(+e*s*p-e*l*u+r*o*u-n*o*p+n*l*h-r*s*h)+t[11]*(+e*l*c-e*a*p-r*o*c+i*o*p+r*a*h-i*l*h)+t[15]*(-n*a*h-e*s*c+e*a*u+n*o*c-i*o*u+i*s*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],h=n[5],c=n[6],u=n[7],p=n[8],d=n[9],f=n[10],m=n[11],v=n[12],g=n[13],y=n[14],_=n[15],x=d*y*u-g*f*u+g*c*m-h*y*m-d*c*_+h*f*_,b=v*f*u-p*y*u-v*c*m+l*y*m+p*c*_-l*f*_,w=p*g*u-v*d*u+v*h*m-l*g*m-p*h*_+l*d*_,E=v*d*c-p*g*c-v*h*f+l*g*f+p*h*y-l*d*y,M=r*x+o*b+a*w+s*E;if(0===M){var q="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(q);return console.warn(q),this.identity()}var A=1/M;return i[0]=x*A,i[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*_-o*f*_)*A,i[2]=(h*y*s-g*c*s+g*a*u-o*y*u-h*a*_+o*c*_)*A,i[3]=(d*c*s-h*f*s-d*a*u+o*f*u+h*a*m-o*c*m)*A,i[4]=b*A,i[5]=(p*y*s-v*f*s+v*a*m-r*y*m-p*a*_+r*f*_)*A,i[6]=(v*c*s-l*y*s-v*a*u+r*y*u+l*a*_-r*c*_)*A,i[7]=(l*f*s-p*c*s+p*a*u-r*f*u-l*a*m+r*c*m)*A,i[8]=w*A,i[9]=(v*d*s-p*g*s-v*o*m+r*g*m+p*o*_-r*d*_)*A,i[10]=(l*g*s-v*h*s+v*o*u-r*g*u-l*o*_+r*h*_)*A,i[11]=(p*h*s-l*d*s-p*o*u+r*d*u+l*o*m-r*h*m)*A,i[12]=E*A,i[13]=(p*g*a-v*d*a+v*o*f-r*g*f-p*o*y+r*d*y)*A,i[14]=(v*h*a-l*g*a-v*o*c+r*g*c+l*o*y-r*h*y)*A,i[15]=(l*d*a-p*h*a+p*o*c-r*d*c-l*o*f+r*h*f)*A,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,a=t.y,s=t.z,l=r*o,h=r*a;return this.set(l*o+i,l*a-n*s,l*s+n*a,0,l*a+n*s,h*a+i,h*s-n*o,0,l*s-n*a,h*s+n*o,r*s*s+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:(a=new Ge,s=new je,function(t,e,i){var n=this.elements,r=a.set(n[0],n[1],n[2]).length(),o=a.set(n[4],n[5],n[6]).length(),l=a.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],s.copy(this);var h=1/r,c=1/o,u=1/l;return s.elements[0]*=h,s.elements[1]*=h,s.elements[2]*=h,s.elements[4]*=c,s.elements[5]*=c,s.elements[6]*=c,s.elements[8]*=u,s.elements[9]*=u,s.elements[10]*=u,e.setFromRotationMatrix(s),i.x=r,i.y=o,i.z=l,this}),makePerspective:function(t,e,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(o+r)/(o-r),p=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,n,r,o){var a=this.elements,s=1/(e-t),l=1/(i-n),h=1/(o-r),c=(e+t)*s,u=(i+n)*l,p=(o+r)*h;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.assign(Ve,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,o,a){var s=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3],u=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(c!==f||s!==u||l!==p||h!==d){var m=1-a,v=s*u+l*p+h*d+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*m+u*b,l=l*m+p*b,h=h*m+d*b,c=c*m+f*b,m===1-a){var w=1/Math.sqrt(s*s+l*l+h*h+c*c);s*=w,l*=w,h*=w,c*=w}}t[e]=s,t[e+1]=l,t[e+2]=h,t[e+3]=c}}),Object.defineProperties(Ve.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Ve.prototype,{set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,l=a(i/2),h=a(n/2),c=a(r/2),u=s(i/2),p=s(n/2),d=s(r/2);return"XYZ"===o?(this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d):"YXZ"===o?(this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d):"ZXY"===o?(this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d):"ZYX"===o?(this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d):"YZX"===o?(this._x=u*h*c+l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c-u*p*d):"XZY"===o&&(this._x=u*h*c-l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c+u*p*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],a=i[1],s=i[5],l=i[9],h=i[2],c=i[6],u=i[10],p=n+s+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(c-l)*e,this._y=(o-h)*e,this._z=(a-r)*e):n>s&&n>u?(e=2*Math.sqrt(1+n-s-u),this._w=(c-l)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+h)/e):s>u?(e=2*Math.sqrt(1+s-n-u),this._w=(o-h)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+u-n-s),this._w=(a-r)/e,this._x=(o+h)/e,this._y=(l+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:(f=new Ge,function(t,e){return void 0===f&&(f=new Ge),(d=t.dot(e)+1)<1e-6?(d=0,Math.abs(t.x)>Math.abs(t.z)?f.set(-t.y,t.x,0):f.set(0,-t.z,t.y)):f.crossVectors(t,e),this._x=f.x,this._y=f.y,this._z=f.z,this._w=d,this.normalize()}),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,h=e._w;return this._x=i*h+o*a+n*l-r*s,this._y=n*h+o*s+r*a-i*l,this._z=r*h+o*l+i*s-n*a,this._w=o*h-i*a-n*s-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(s,a),h=Math.sin((1-e)*l)/s,c=Math.sin(e*l)/s;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=n*h+this._y*c,this._z=r*h+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Ge.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(w=new Ve,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(w.setFromEuler(t))}),applyAxisAngle:(b=new Ve,function(t,e){return this.applyQuaternion(b.setFromAxisAngle(t,e))}),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*n-a*i,h=s*i+a*e-r*n,c=s*n+r*i-o*e,u=-r*e-o*i-a*n;return this.x=l*s+u*-r+h*-a-c*-o,this.y=h*s+u*-o+c*-r-l*-a,this.z=c*s+u*-a+l*-o-h*-r,this},project:(x=new je,function(t){return x.multiplyMatrices(t.projectionMatrix,x.getInverse(t.matrixWorld)),this.applyMatrix4(x)}),unproject:(_=new je,function(t){return _.multiplyMatrices(t.matrixWorld,_.getInverse(t.projectionMatrix)),this.applyMatrix4(_)}),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:(g=new Ge,y=new Ge,function(t,e){return g.set(t,t,t),y.set(e,e,e),this.clamp(g,y)}),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(v=new Ge,function(t){return v.copy(this).projectOnVector(t),this.sub(v)}),reflect:(m=new Ge,function(t){return this.sub(m.copy(t).multiplyScalar(2*this.dot(t)))}),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Fe.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(He.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,o,a,s,l){var h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=r,h[5]=s,h[6]=i,h[7]=o,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:(E=new Ge,function(t){for(var e=0,i=t.count;e<i;e++)E.x=t.getX(e),E.y=t.getY(e),E.z=t.getZ(e),E.applyMatrix3(this),t.setXYZ(e,E.x,E.y,E.z);return t}),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[3],s=i[6],l=i[1],h=i[4],c=i[7],u=i[2],p=i[5],d=i[8],f=n[0],m=n[3],v=n[6],g=n[1],y=n[4],_=n[7],x=n[2],b=n[5],w=n[8];return r[0]=o*f+a*g+s*x,r[3]=o*m+a*y+s*b,r[6]=o*v+a*_+s*w,r[1]=l*f+h*g+c*x,r[4]=l*m+h*y+c*b,r[7]=l*v+h*_+c*w,r[2]=u*f+p*g+d*x,r[5]=u*m+p*y+d*b,r[8]=u*v+p*_+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=t[8];return e*o*h-e*a*l-i*r*h+i*a*s+n*r*l-n*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements,n=this.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],h=i[5],c=i[6],u=i[7],p=i[8],d=p*l-h*u,f=h*c-p*s,m=u*s-l*c,v=r*d+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=d*y,n[1]=(a*u-p*o)*y,n[2]=(h*o-a*l)*y,n[3]=f*y,n[4]=(p*r-a*c)*y,n[5]=(a*s-h*r)*y,n[6]=m*y,n[7]=(o*c-u*r)*y,n[8]=(l*r-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(i*s,i*l,-i*(s*o+l*a)+o+t,-n*l,n*s,-n*(-l*o+s*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],o=n[3],a=n[6],s=n[1],l=n[4],h=n[7];return n[0]=e*r+i*s,n[3]=e*o+i*l,n[6]=e*a+i*h,n[1]=-i*r+e*s,n[4]=-i*o+e*l,n[7]=-i*a+e*h,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var We,Xe,Ye,Ze,Je,Ke,Qe,$e,ti,ei,ii,ni,ri,oi,ai,si,li,hi=0;function ci(t,e,i,n,r,o,a,s,l,h){Object.defineProperty(this,"id",{value:hi++}),this.uuid=Fe.generateUUID(),this.name="",this.image=void 0!==t?t:ci.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:ci.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:St,this.wrapT=void 0!==n?n:St,this.magFilter=void 0!==r?r:Rt,this.minFilter=void 0!==o?o:Bt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Kt,this.type=void 0!==s?s:Dt,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new He,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:Ce,this.version=0,this.onUpdate=null}function ui(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function pi(t,e,i){this.width=t,this.height=e,this.scissor=new ui(0,0,t,e),this.scissorTest=!1,this.viewport=new ui(0,0,t,e),void 0===(i=i||{}).minFilter&&(i.minFilter=Rt),this.texture=new ci(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function di(t,e,i){pi.call(this,t,e,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function fi(t,e,i,n,r,o,a,s,l,h,c,u){ci.call(this,null,o,a,s,l,h,n,r,c,u),this.image={data:t,width:e,height:i},this.magFilter=void 0!==l?l:Ct,this.minFilter=void 0!==h?h:Ct,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function mi(t,e){this.min=void 0!==t?t:new Ge(1/0,1/0,1/0),this.max=void 0!==e?e:new Ge(-1/0,-1/0,-1/0)}function vi(t,e){this.center=void 0!==t?t:new Ge,this.radius=void 0!==e?e:0}function gi(t,e){this.normal=void 0!==t?t:new Ge(1,0,0),this.constant=void 0!==e?e:0}function yi(t,e,i,n,r,o){this.planes=[void 0!==t?t:new gi,void 0!==e?e:new gi,void 0!==i?i:new gi,void 0!==n?n:new gi,void 0!==r?r:new gi,void 0!==o?o:new gi]}ci.DEFAULT_IMAGE=void 0,ci.DEFAULT_MAPPING=300,ci.prototype=Object.assign(Object.create(n.prototype),{constructor:ci,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=Fe.generateUUID()),e||void 0!==t.images[n.uuid]||(t.images[n.uuid]={uuid:n.uuid,url:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,e.height=t.height;var i=e.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(n)}),i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Pt:t.x=t.x-Math.floor(t.x);break;case St:t.x=t.x<0?0:1;break;case Lt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Pt:t.y=t.y-Math.floor(t.y);break;case St:t.y=t.y<0?0:1;break;case Lt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(ci.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ui.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=t.elements,a=o[0],s=o[4],l=o[8],h=o[1],c=o[5],u=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-h)<.01&&Math.abs(l-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+h)<.1&&Math.abs(l+p)<.1&&Math.abs(u+d)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(f+1)/2,y=(s+h)/4,_=(l+p)/4,x=(u+d)/4;return m>v&&m>g?m<.01?(i=0,n=.707106781,r=.707106781):(n=y/(i=Math.sqrt(m)),r=_/i):v>g?v<.01?(i=.707106781,n=0,r=.707106781):(i=y/(n=Math.sqrt(v)),r=x/n):g<.01?(i=.707106781,n=.707106781,r=0):(i=_/(r=Math.sqrt(g)),n=x/r),this.set(i,n,r,e),this}var b=Math.sqrt((d-u)*(d-u)+(l-p)*(l-p)+(h-s)*(h-s));return Math.abs(b)<.001&&(b=1),this.x=(d-u)/b,this.y=(l-p)/b,this.z=(h-s)/b,this.w=Math.acos((a+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===We&&(We=new ui,Xe=new ui),We.set(t,t,t,t),Xe.set(e,e,e,e),this.clamp(We,Xe)},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),pi.prototype=Object.assign(Object.create(n.prototype),{constructor:pi,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),di.prototype=Object.create(pi.prototype),di.prototype.constructor=di,di.prototype.isWebGLRenderTargetCube=!0,fi.prototype=Object.create(ci.prototype),fi.prototype.constructor=fi,fi.prototype.isDataTexture=!0,Object.assign(mi.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var h=t[s],c=t[s+1],u=t[s+2];h<e&&(e=h),c<i&&(i=c),u<n&&(n=u),h>r&&(r=h),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var h=t.getX(s),c=t.getY(s),u=t.getZ(s);h<e&&(e=h),c<i&&(i=c),u<n&&(n=u),h>r&&(r=h),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(Qe=new Ge,function(t,e){var i=Qe.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Ge),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Ge),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,i,n=new Ge;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,i=a.length;e<i;e++)n.copy(a[e]),n.applyMatrix4(r.matrixWorld),t.expandByPoint(n)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,i=s.count;e<i;e++)n.fromBufferAttribute(s,e).applyMatrix4(r.matrixWorld),t.expandByPoint(n)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(r),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Ge),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(Ke=new Ge,function(t){return this.clampPoint(t.center,Ke),Ke.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},intersectsTriangle:function(){var t=new Ge,e=new Ge,i=new Ge,n=new Ge,r=new Ge,o=new Ge,a=new Ge,s=new Ge,l=new Ge,h=new Ge;function c(n){var r,o;for(r=0,o=n.length-3;r<=o;r+=3){a.fromArray(n,r);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),h=t.dot(a),c=e.dot(a),u=i.dot(a);if(Math.max(-Math.max(h,c,u),Math.min(h,c,u))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),i.subVectors(a.c,s),n.subVectors(e,t),r.subVectors(i,e),o.subVectors(t,i);var u=[0,-n.z,n.y,0,-r.z,r.y,0,-o.z,o.y,n.z,0,-n.x,r.z,0,-r.x,o.z,0,-o.x,-n.y,n.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!c(u)&&(!!c(u=[1,0,0,0,1,0,0,0,1])&&(h.crossVectors(n,r),c(u=[h.x,h.y,h.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Ge),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(Je=new Ge,function(t){return Je.copy(t).clamp(this.min,this.max).sub(t).length()}),getBoundingSphere:(Ze=new Ge,function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new vi),this.getCenter(t.center),t.radius=.5*this.getSize(Ze).length(),t}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Ye=[new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge],function(t){return this.isEmpty()?this:(Ye[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ye[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ye[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ye[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ye[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ye[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ye[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ye[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ye),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(vi.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:($e=new mi,function(t,e){var i=this.center;void 0!==e?i.copy(e):$e.setFromPoints(t).getCenter(i);for(var n=0,r=0,o=t.length;r<o;r++)n=Math.max(n,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Ge),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new mi),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(gi.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(ni=new Ge,ri=new Ge,function(t,e,i){var n=ni.subVectors(i,e).cross(ri.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Ge),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:(ii=new Ge,function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Ge);var i=t.delta(ii),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?void 0:e.copy(i).multiplyScalar(r).add(t.start)}),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Ge),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(ti=new Ge,ei=new He,function(t,e){var i=e||ei.getNormalMatrix(t),n=this.coplanarPoint(ti).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(yi.prototype,{set:function(t,e,i,n,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],h=i[6],c=i[7],u=i[8],p=i[9],d=i[10],f=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return e[0].setComponents(a-n,c-s,f-u,y-m).normalize(),e[1].setComponents(a+n,c+s,f+u,y+m).normalize(),e[2].setComponents(a+r,c+l,f+p,y+v).normalize(),e[3].setComponents(a-r,c-l,f-p,y-v).normalize(),e[4].setComponents(a-o,c-h,f-d,y-g).normalize(),e[5].setComponents(a+o,c+h,f+d,y+g).normalize(),this},intersectsObject:(li=new vi,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),li.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(li)}),intersectsSprite:(si=new vi,function(t){return si.center.set(0,0,0),si.radius=.7071067811865476,si.applyMatrix4(t.matrixWorld),this.intersectsSphere(si)}),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:(oi=new Ge,ai=new Ge,function(t){for(var e=this.planes,i=0;i<6;i++){var n=e[i];oi.x=n.normal.x>0?t.min.x:t.max.x,ai.x=n.normal.x>0?t.max.x:t.min.x,oi.y=n.normal.y>0?t.min.y:t.max.y,ai.y=n.normal.y>0?t.max.y:t.min.y,oi.z=n.normal.z>0?t.min.z:t.max.z,ai.z=n.normal.z>0?t.max.z:t.min.z;var r=n.distanceToPoint(oi),o=n.distanceToPoint(ai);if(r<0&&o<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}});var _i,xi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},bi={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ei(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}Object.assign(Ei.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=Fe.euclideanModulo(e,1),i=Fe.clamp(i,0,1),n=Fe.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(a,s,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var h,c=(h=i[1]).length;if(3===c)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(h=wi[t])?this.setHex(h):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,n=this.r,r=this.g,o=this.b,a=Math.max(n,r,o),s=Math.min(n,r,o),l=(s+a)/2;if(s===a)e=0,i=0;else{var h=a-s;switch(i=l<=.5?h/(a+s):h/(2-a-s),a){case n:e=(r-o)/h+(r<o?6:0);break;case r:e=(o-n)/h+2;break;case o:e=(n-r)/h+4}e/=6}return t.h=e,t.s=i,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(_i={},function(t,e,i){return this.getHSL(_i),_i.h+=t,_i.s+=e,_i.l+=i,this.setHSL(_i.h,_i.s,_i.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Mi,qi,Ai={common:{diffuse:{value:new Ei(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new He},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ei(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ei(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new He}}},Ti={basic:{uniforms:bi.merge([Ai.common,Ai.specularmap,Ai.envmap,Ai.aomap,Ai.lightmap,Ai.fog]),vertexShader:xi.meshbasic_vert,fragmentShader:xi.meshbasic_frag},lambert:{uniforms:bi.merge([Ai.common,Ai.specularmap,Ai.envmap,Ai.aomap,Ai.lightmap,Ai.emissivemap,Ai.fog,Ai.lights,{emissive:{value:new Ei(0)}}]),vertexShader:xi.meshlambert_vert,fragmentShader:xi.meshlambert_frag},phong:{uniforms:bi.merge([Ai.common,Ai.specularmap,Ai.envmap,Ai.aomap,Ai.lightmap,Ai.emissivemap,Ai.bumpmap,Ai.normalmap,Ai.displacementmap,Ai.gradientmap,Ai.fog,Ai.lights,{emissive:{value:new Ei(0)},specular:{value:new Ei(1118481)},shininess:{value:30}}]),vertexShader:xi.meshphong_vert,fragmentShader:xi.meshphong_frag},standard:{uniforms:bi.merge([Ai.common,Ai.envmap,Ai.aomap,Ai.lightmap,Ai.emissivemap,Ai.bumpmap,Ai.normalmap,Ai.displacementmap,Ai.roughnessmap,Ai.metalnessmap,Ai.fog,Ai.lights,{emissive:{value:new Ei(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:xi.meshphysical_vert,fragmentShader:xi.meshphysical_frag},points:{uniforms:bi.merge([Ai.points,Ai.fog]),vertexShader:xi.points_vert,fragmentShader:xi.points_frag},dashed:{uniforms:bi.merge([Ai.common,Ai.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xi.linedashed_vert,fragmentShader:xi.linedashed_frag},depth:{uniforms:bi.merge([Ai.common,Ai.displacementmap]),vertexShader:xi.depth_vert,fragmentShader:xi.depth_frag},normal:{uniforms:bi.merge([Ai.common,Ai.bumpmap,Ai.normalmap,Ai.displacementmap,{opacity:{value:1}}]),vertexShader:xi.normal_vert,fragmentShader:xi.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xi.cube_vert,fragmentShader:xi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xi.equirect_vert,fragmentShader:xi.equirect_frag},distanceRGBA:{uniforms:bi.merge([Ai.common,Ai.displacementmap,{referencePosition:{value:new Ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xi.distanceRGBA_vert,fragmentShader:xi.distanceRGBA_frag},shadow:{uniforms:bi.merge([Ai.lights,Ai.fog,{color:{value:new Ei(0)},opacity:{value:1}}]),vertexShader:xi.shadow_vert,fragmentShader:xi.shadow_frag}};function Pi(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r,o,a,s,l,h=e.get(i);void 0===h?e.set(i,function(e,i){var n=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,n,r),e.onUploadCallback();var a=t.FLOAT;return n instanceof Float32Array?a=t.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=t.UNSIGNED_SHORT:n instanceof Int16Array?a=t.SHORT:n instanceof Uint32Array?a=t.UNSIGNED_INT:n instanceof Int32Array?a=t.INT:n instanceof Int8Array?a=t.BYTE:n instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(i,n)):h.version<i.version&&(r=h.buffer,a=n,s=(o=i).array,l=o.updateRange,t.bindBuffer(a,r),!1===o.dynamic?t.bufferData(a,s,t.STATIC_DRAW):-1===l.count?t.bufferSubData(a,0,s):0===l.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(a,l.offset*s.BYTES_PER_ELEMENT,s.subarray(l.offset,l.offset+l.count)),l.count=-1),h.version=i.version)}}}function Si(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||Si.DefaultOrder}function Li(){this.mask=1}Ti.physical={uniforms:bi.merge([Ti.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:xi.meshphysical_vert,fragmentShader:xi.meshphysical_frag},Si.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Si.DefaultOrder="XYZ",Object.defineProperties(Si.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(Si.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=Fe.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],h=r[5],c=r[9],u=r[2],p=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-u,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,h))):"YZX"===e?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,h),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(qi=new je,function(t,e,i){return qi.makeRotationFromQuaternion(t),this.setFromRotationMatrix(qi,e,i)}),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(Mi=new Ve,function(t){return Mi.setFromEuler(this),this.setFromQuaternion(Mi,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Ge(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Li.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var Ci,Ii,Oi,Ri,Ni,Bi,Di,zi,ki,Fi,Ui,ji,Vi,Gi,Hi,Wi,Xi,Yi,Zi=0;function Ji(){Object.defineProperty(this,"id",{value:Zi++}),this.uuid=Fe.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ji.DefaultUp.clone();var t=new Ge,e=new Si,i=new Ve,n=new Ge(1,1,1);e.onChange(function(){i.setFromEuler(e,!1)}),i.onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new je},normalMatrix:{value:new He}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=Ji.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Li,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ki(){Ji.call(this),this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je}function Qi(t,e,i,n,r,o){Ki.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function $i(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new Ge,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new Ei,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}Ji.DefaultUp=new Ge(0,1,0),Ji.DefaultMatrixAutoUpdate=!0,Ji.prototype=Object.assign(Object.create(n.prototype),{constructor:Ji,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Xi=new Ve,function(t,e){return Xi.setFromAxisAngle(t,e),this.quaternion.multiply(Xi),this}),rotateOnWorldAxis:(Wi=new Ve,function(t,e){return Wi.setFromAxisAngle(t,e),this.quaternion.premultiply(Wi),this}),rotateX:(Hi=new Ge(1,0,0),function(t){return this.rotateOnAxis(Hi,t)}),rotateY:(Gi=new Ge(0,1,0),function(t){return this.rotateOnAxis(Gi,t)}),rotateZ:(Vi=new Ge(0,0,1),function(t){return this.rotateOnAxis(Vi,t)}),translateOnAxis:(ji=new Ge,function(t,e){return ji.copy(t).applyQuaternion(this.quaternion),this.position.add(ji.multiplyScalar(e)),this}),translateX:(Ui=new Ge(1,0,0),function(t){return this.translateOnAxis(Ui,t)}),translateY:(Fi=new Ge(0,1,0),function(t){return this.translateOnAxis(Fi,t)}),translateZ:(ki=new Ge(0,0,1),function(t){return this.translateOnAxis(ki,t)}),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(zi=new je,function(t){return t.applyMatrix4(zi.getInverse(this.matrixWorld))}),lookAt:(Bi=new je,Di=new Ge,function(t,e,i){t.isVector3?Di.copy(t):Di.set(t,e,i),this.isCamera?Bi.lookAt(this.position,Di,this.up):Bi.lookAt(Di,this.position,this.up),this.quaternion.setFromRotationMatrix(Bi)}),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Ge),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Ri=new Ge,Ni=new Ge,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ve),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ri,t,Ni),t}),getWorldScale:(Ii=new Ge,Oi=new Ve,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Ge),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ii,Oi,t),t}),getWorldDirection:(Ci=new Ve,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Ge),this.getWorldQuaternion(Ci),t.set(0,0,1).applyQuaternion(Ci)}),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){var e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.matrix=this.matrix.toArray(),void 0!==this.geometry){n.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var h=a[s];r(t.shapes,h)}else r(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(r(t.materials,this.material[s]));n.material=c}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(t).object)}if(e){var u=m(t.geometries),p=m(t.materials),d=m(t.textures),f=m(t.images);a=m(t.shapes);u.length>0&&(i.geometries=u),p.length>0&&(i.materials=p),d.length>0&&(i.textures=d),f.length>0&&(i.images=f),a.length>0&&(i.shapes=a)}return i.object=n,i;function m(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}}),Ki.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Ki,isCamera:!0,copy:function(t,e){return Ji.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:(Yi=new Ve,function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Ge),this.getWorldQuaternion(Yi),t.set(0,0,-1).applyQuaternion(Yi)}),updateMatrixWorld:function(t){Ji.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Qi.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Qi,isOrthographicCamera:!0,copy:function(t,e){return Ki.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,a=n+e,s=n-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;o=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(a-=u*(this.view.offsetY/h))-u*(this.view.height/h)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function(t){var e=Ji.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign($i.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var tn,en,nn,rn,on,an,sn,ln=0;function hn(){Object.defineProperty(this,"id",{value:ln+=2}),this.uuid=Fe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function cn(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function un(t,e,i){cn.call(this,new Int8Array(t),e,i)}function pn(t,e,i){cn.call(this,new Uint8Array(t),e,i)}function dn(t,e,i){cn.call(this,new Uint8ClampedArray(t),e,i)}function fn(t,e,i){cn.call(this,new Int16Array(t),e,i)}function mn(t,e,i){cn.call(this,new Uint16Array(t),e,i)}function vn(t,e,i){cn.call(this,new Int32Array(t),e,i)}function gn(t,e,i){cn.call(this,new Uint32Array(t),e,i)}function yn(t,e,i){cn.call(this,new Float32Array(t),e,i)}function _n(t,e,i){cn.call(this,new Float64Array(t),e,i)}function xn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function bn(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}hn.prototype=Object.assign(Object.create(n.prototype),{constructor:hn,isGeometry:!0,applyMatrix:function(t){for(var e=(new He).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(t)}for(i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(e).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:(sn=new je,function(t){return sn.makeRotationX(t),this.applyMatrix(sn),this}),rotateY:(an=new je,function(t){return an.makeRotationY(t),this.applyMatrix(an),this}),rotateZ:(on=new je,function(t){return on.makeRotationZ(t),this.applyMatrix(on),this}),translate:(rn=new je,function(t,e,i){return rn.makeTranslation(t,e,i),this.applyMatrix(rn),this}),scale:(nn=new je,function(t,e,i){return nn.makeScale(t,e,i),this.applyMatrix(nn),this}),lookAt:(en=new Ji,function(t){en.lookAt(t),en.updateMatrix(),this.applyMatrix(en.matrix)}),fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index.array:void 0,n=t.attributes,r=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var h=[],c=[],u=[],p=0,d=0;p<r.length;p+=3,d+=2)e.vertices.push(new Ge(r[p],r[p+1],r[p+2])),void 0!==o&&h.push(new Ge(o[p],o[p+1],o[p+2])),void 0!==a&&e.colors.push(new Ei(a[p],a[p+1],a[p+2])),void 0!==s&&c.push(new Ue(s[d],s[d+1])),void 0!==l&&u.push(new Ue(l[d],l[d+1]));function f(t,i,n,r){var p=new $i(t,i,n,void 0!==o?[h[t].clone(),h[i].clone(),h[n].clone()]:[],void 0!==a?[e.colors[t].clone(),e.colors[i].clone(),e.colors[n].clone()]:[],r);e.faces.push(p),void 0!==s&&e.faceVertexUvs[0].push([c[t].clone(),c[i].clone(),c[n].clone()]),void 0!==l&&e.faceVertexUvs[1].push([u[t].clone(),u[i].clone(),u[n].clone()])}var m=t.groups;if(m.length>0)for(p=0;p<m.length;p++)for(var v=m[p],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==i?f(i[d],i[d+1],i[d+2],v.materialIndex):f(d,d+1,d+2,v.materialIndex);else if(void 0!==i)for(p=0;p<i.length;p+=3)f(i[p],i[p+1],i[p+2]);else for(p=0;p<r.length/3;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(tn=new Ge,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(tn).negate(),this.translate(tn.x,tn.y,tn.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new je;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new Ge,e=new Ge,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,r,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)a[e]=new Ge;if(t){var s,l,h,c=new Ge,u=new Ge;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],h=this.vertices[o.c],c.subVectors(h,l),u.subVectors(s,l),c.cross(u),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,i=this.vertices.length;e<i;e++)a[e].normalize();for(n=0,r=this.faces.length;n<r;n++){var p=(o=this.faces[n]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var n=(i=this.faces[t]).vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for((r=this.faces[i]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new hn;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)l=new Ge,h={a:new Ge,b:new Ge,c:new Ge},a.push(l),s.push(h)}var l,h,c=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,n=this.faces.length;i<n;i++)r=this.faces[i],l=c.faceNormals[i],h=c.vertexNormals[i],l.copy(r.normal),h.a.copy(r.vertexNormals[0]),h.b.copy(r.vertexNormals[1]),h.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)(r=this.faces[i]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new mi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new vi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,l=t.faces,h=this.faceVertexUvs[0],c=t.faceVertexUvs[0],u=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new He).getNormalMatrix(e));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(d=0,f=p.length;d<f;d++)u.push(p[d].clone());for(d=0,f=l.length;d<f;d++){var v,g,y,_=l[d],x=_.vertexNormals,b=_.vertexColors;(v=new $i(_.a+r,_.b+r,_.c+r)).normal.copy(_.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var w=0,E=x.length;w<E;w++)g=x[w].clone(),void 0!==n&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(w=0,E=b.length;w<E;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+i,s.push(v)}for(d=0,f=c.length;d<f;d++){var M=c[d],q=[];if(void 0!==M){for(w=0,E=M.length;w<E;w++)q.push(M[w].clone());h.push(q)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,i,n,r,o,a,s,l={},h=[],c=[],u=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],void 0===l[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(l[e]=i,h.push(this.vertices[i]),c[i]=h.length-1):c[i]=c[l[e]];var p=[];for(i=0,n=this.faces.length;i<n;i++){(r=this.faces[i]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(i);break}}for(i=p.length-1;i>=0;i--){var f=p[i];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-h.length;return this.vertices=h,m},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new Ge(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===e&&(n=[]),a&&a.length===e&&(r=[]);for(i=0;i<e;i++){var s=t[i]._id;n&&n.push(o[s]),r&&r.push(a[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}for(var n=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];n.push(o.x,o.y,o.z)}var a=[],s=[],l={},h=[],c={},u=[],p={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,_=0;if(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var x=this.faceVertexUvs[0][r];a.push(A(x[0]),A(x[1]),A(x[2]))}if(m&&a.push(M(d.normal)),v){var b=d.vertexNormals;a.push(M(b[0]),M(b[1]),M(b[2]))}if(g&&a.push(q(d.color)),y){var w=d.vertexColors;a.push(q(w[0]),q(w[1]),q(w[2]))}}function E(t,e,i){return i?t|1<<e:t&~(1<<e)}function M(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/3,s.push(t.x,t.y,t.z),l[e])}function q(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=h.length,h.push(t.getHex()),c[e])}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/2,u.push(t.x,t.y),p[e])}return t.data={},t.data.vertices=n,t.data.normals=s,h.length>0&&(t.data.colors=h),u.length>0&&(t.data.uvs=[u]),t.data.faces=a,t},clone:function(){return(new hn).copy(this)},copy:function(t){var e,i,n,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,i=s.length;e<i;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,i=l.length;e<i;e++)this.colors.push(l[e].clone());var h=t.faces;for(e=0,i=h.length;e<i;e++)this.faces.push(h[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=c.length;n<r;n++){var u=c[n],p=[];for(o=0,a=u.length;o<a;o++){var d=u[o];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,i=f.length;e<i;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],n=0,r=f[e].vertices.length;n<r;n++)m.vertices.push(f[e].vertices[n].clone());if(void 0!==f[e].normals)for(m.normals=[],n=0,r=f[e].normals.length;n<r;n++)m.normals.push(f[e].normals[n].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,i=v.length;e<i;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],n=0,r=v[e].vertexNormals.length;n<r;n++){var y=v[e].vertexNormals[n],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],n=0,r=v[e].faceNormals.length;n<r;n++)g.faceNormals.push(v[e].faceNormals[n].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,i=x.length;e<i;e++)this.skinWeights.push(x[e].clone());var b=t.skinIndices;for(e=0,i=b.length;e<i;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,i=w.length;e<i;e++)this.lineDistances.push(w[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var M=t.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(cn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(cn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new Ei),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Ue),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Ge),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new ui),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),un.prototype=Object.create(cn.prototype),un.prototype.constructor=un,pn.prototype=Object.create(cn.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(cn.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(cn.prototype),fn.prototype.constructor=fn,mn.prototype=Object.create(cn.prototype),mn.prototype.constructor=mn,vn.prototype=Object.create(cn.prototype),vn.prototype.constructor=vn,gn.prototype=Object.create(cn.prototype),gn.prototype.constructor=gn,yn.prototype=Object.create(cn.prototype),yn.prototype.constructor=yn,_n.prototype=Object.create(cn.prototype),_n.prototype.constructor=_n,Object.assign(xn.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,n=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var h=0;h<l;h++)e[h]=[];this.morphTargets.position=e}var c,u=t.morphNormals,p=u.length;if(p>0){c=[];for(h=0;h<p;h++)c[h]=[];this.morphTargets.normal=c}var d=t.skinIndices,f=t.skinWeights,m=d.length===n.length,v=f.length===n.length;for(h=0;h<i.length;h++){var g=i[h];this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(x=r[0][h])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new Ue,new Ue,new Ue));if(!0===a)void 0!==(x=r[1][h])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new Ue,new Ue,new Ue));for(var E=0;E<l;E++){var M=s[E].vertices;e[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<p;E++){var q=u[E].vertexNormals[h];c[E].push(q.a,q.b,q.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wn,En,Mn,qn,An,Tn,Pn,Sn,Ln,Cn,In=1;function On(){Object.defineProperty(this,"id",{value:In+=2}),this.uuid=Fe.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Rn(t,e,i,n,r,o){hn.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Nn(t,e,i,n,r,o)),this.mergeVertices()}function Nn(t,e,i,n,r,o){On.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var a=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1;var s=[],l=[],h=[],c=[],u=0,p=0;function d(t,e,i,n,r,o,d,f,m,v,g){var y,_,x=o/m,b=d/v,w=o/2,E=d/2,M=f/2,q=m+1,A=v+1,T=0,P=0,S=new Ge;for(_=0;_<A;_++){var L=_*b-E;for(y=0;y<q;y++){var C=y*x-w;S[t]=C*n,S[e]=L*r,S[i]=M,l.push(S.x,S.y,S.z),S[t]=0,S[e]=0,S[i]=f>0?1:-1,h.push(S.x,S.y,S.z),c.push(y/m),c.push(1-_/v),T+=1}}for(_=0;_<v;_++)for(y=0;y<m;y++){var I=u+y+q*_,O=u+y+q*(_+1),R=u+(y+1)+q*(_+1),N=u+(y+1)+q*_;s.push(I,O,N),s.push(O,R,N),P+=6}a.addGroup(p,P,g),p+=P,u+=T}d("z","y","x",-1,-1,i,e,t,o=Math.floor(o)||1,r,0),d("z","y","x",1,-1,i,e,-t,o,r,1),d("x","z","y",1,1,t,i,e,n,o,2),d("x","z","y",1,-1,t,i,-e,n,o,3),d("x","y","z",1,-1,t,e,i,n,r,4),d("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(s),this.addAttribute("position",new yn(l,3)),this.addAttribute("normal",new yn(h,3)),this.addAttribute("uv",new yn(c,2))}function Bn(t,e,i,n){hn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Dn(t,e,i,n)),this.mergeVertices()}function Dn(t,e,i,n){On.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,o,a=(t=t||1)/2,s=(e=e||1)/2,l=Math.floor(i)||1,h=Math.floor(n)||1,c=l+1,u=h+1,p=t/l,d=e/h,f=[],m=[],v=[],g=[];for(o=0;o<u;o++){var y=o*d-s;for(r=0;r<c;r++){var _=r*p-a;m.push(_,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-o/h)}}for(o=0;o<h;o++)for(r=0;r<l;r++){var x=r+c*o,b=r+c*(o+1),w=r+1+c*(o+1),E=r+1+c*o;f.push(x,b,E),f.push(b,w,E)}this.setIndex(f),this.addAttribute("position",new yn(m,3)),this.addAttribute("normal",new yn(v,3)),this.addAttribute("uv",new yn(g,2))}On.prototype=Object.assign(Object.create(n.prototype),{constructor:On,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(bn(t)>65535?gn:mn)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new cn(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new He).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(Cn=new je,function(t){return Cn.makeRotationX(t),this.applyMatrix(Cn),this}),rotateY:(Ln=new je,function(t){return Ln.makeRotationY(t),this.applyMatrix(Ln),this}),rotateZ:(Sn=new je,function(t){return Sn.makeRotationZ(t),this.applyMatrix(Sn),this}),translate:(Pn=new je,function(t,e,i){return Pn.makeTranslation(t,e,i),this.applyMatrix(Pn),this}),scale:(Tn=new je,function(t,e,i){return Tn.makeScale(t,e,i),this.applyMatrix(Tn),this}),lookAt:(An=new Ji,function(t){An.lookAt(t),An.updateMatrix(),this.applyMatrix(An.matrix)}),center:(qn=new Ge,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(qn).negate(),this.translate(qn.x,qn.y,qn.z),this}),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new yn(3*e.vertices.length,3),n=new yn(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new yn(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new yn(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var n=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(n=void 0,i.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(i);n.verticesNeedUpdate=i.verticesNeedUpdate,n.normalsNeedUpdate=i.normalsNeedUpdate,n.colorsNeedUpdate=i.colorsNeedUpdate,n.uvsNeedUpdate=i.uvsNeedUpdate,n.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=n}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new xn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new cn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new cn(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new cn(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new cn(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new cn(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var a in t.morphTargets){for(var s=[],l=t.morphTargets[a],h=0,c=l.length;h<c;h++){var u=l[h],p=new yn(3*u.length,3);s.push(p.copyVector3sArray(u))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new yn(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new yn(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new mi);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(En=new mi,Mn=new Ge,function(){null===this.boundingSphere&&(this.boundingSphere=new vi);var t=this.attributes.position;if(t){var e=this.boundingSphere.center;En.setFromBufferAttribute(t),En.getCenter(e);for(var i=0,n=0,r=t.count;n<r;n++)Mn.x=t.getX(n),Mn.y=t.getY(n),Mn.z=t.getZ(n),i=Math.max(i,e.distanceToSquared(Mn));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new cn(new Float32Array(n.length),3));else for(var r=e.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var s,l,h,c=e.normal.array,u=new Ge,p=new Ge,d=new Ge,f=new Ge,m=new Ge;if(t){var v=t.array;0===i.length&&this.addGroup(0,v.length);for(var g=0,y=i.length;g<y;++g){var _=i[g],x=_.start;for(o=x,a=x+_.count;o<a;o+=3)s=3*v[o+0],l=3*v[o+1],h=3*v[o+2],u.fromArray(n,s),p.fromArray(n,l),d.fromArray(n,h),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),c[s]+=f.x,c[s+1]+=f.y,c[s+2]+=f.z,c[l]+=f.x,c[l+1]+=f.y,c[l+2]+=f.z,c[h]+=f.x,c[h+1]+=f.y,c[h+2]+=f.z}}else for(o=0,a=n.length;o<a;o+=9)u.fromArray(n,o),p.fromArray(n,o+3),d.fromArray(n,o+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),c[o]=f.x,c[o+1]=f.y,c[o+2]=f.z,c[o+3]=f.x,c[o+4]=f.y,c[o+5]=f.z,c[o+6]=f.x,c[o+7]=f.y,c[o+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n].array,o=t.attributes[n],a=o.array,s=0,l=o.itemSize*e;s<a.length;s++,l++)r[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:(wn=new Ge,function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)wn.x=t.getX(e),wn.y=t.getY(e),wn.z=t.getZ(e),wn.normalize(),t.setXYZ(e,wn.x,wn.y,wn.z)}),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new On,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],o=r.array,a=r.itemSize,s=new o.constructor(e.length*a),l=0,h=0,c=0,u=e.length;c<u;c++){l=e[c]*a;for(var p=0;p<a;p++)s[h++]=o[l++]}t.addAttribute(n,new cn(s,a))}var d=this.groups;for(c=0,u=d.length;c<u;c++){var f=d[c];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var a=o[i];r=Array.prototype.slice.call(a.array);t.data.attributes[i]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new On).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var l=[],h=s[e];for(i=0,n=h.length;i<n;i++)l.push(h[i].clone());this.morphAttributes[e]=l}var c=t.groups;for(i=0,n=c.length;i<n;i++){var u=c[i];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Rn.prototype=Object.create(hn.prototype),Rn.prototype.constructor=Rn,Nn.prototype=Object.create(On.prototype),Nn.prototype.constructor=Nn,Bn.prototype=Object.create(hn.prototype),Bn.prototype.constructor=Bn,Dn.prototype=Object.create(On.prototype),Dn.prototype.constructor=Dn;var zn,kn,Fn,Un,jn,Vn,Gn,Hn,Wn,Xn,Yn,Zn,Jn,Kn,Qn,$n,tr,er,ir,nr,rr,or,ar,sr,lr=0;function hr(){Object.defineProperty(this,"id",{value:lr++}),this.uuid=Fe.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=z,this.side=C,this.flatShading=!1,this.vertexColors=R,this.opacity=1,this.transparent=!1,this.blendSrc=Q,this.blendDst=$,this.blendEquation=V,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lt,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function cr(t){hr.call(this),this.type="MeshBasicMaterial",this.color=new Ei(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ur(t){hr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function pr(t,e){this.origin=void 0!==t?t:new Ge,this.direction=void 0!==e?e:new Ge}function dr(t,e){this.start=void 0!==t?t:new Ge,this.end=void 0!==e?e:new Ge}function fr(t,e,i){this.a=void 0!==t?t:new Ge,this.b=void 0!==e?e:new Ge,this.c=void 0!==i?i:new Ge}function mr(t,e){Ji.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new On,this.material=void 0!==e?e:new cr({color:16777215*Math.random()}),this.drawMode=Pe,this.updateMorphTargets()}function vr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gr(t,e,i,n,r,o,a,s,l,h){t=void 0!==t?t:[],e=void 0!==e?e:bt,ci.call(this,t,e,i,n,r,o,a,s,l,h),this.flipY=!1}hr.prototype=Object.assign(Object.create(n.prototype),{constructor:hr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i)if("shading"!==e){var n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==z&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==C&&(i.side=this.side),this.vertexColors!==R&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){var r=n(t.textures),o=n(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),cr.prototype=Object.create(hr.prototype),cr.prototype.constructor=cr,cr.prototype.isMeshBasicMaterial=!0,cr.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ur.prototype=Object.create(hr.prototype),ur.prototype.constructor=ur,ur.prototype.isShaderMaterial=!0,ur.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=bi.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},ur.prototype.toJSON=function(t){var e=hr.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(pr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Ge),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:(Yn=new Ge,function(t){return this.origin.copy(this.at(t,Yn)),this}),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Ge),e.subVectors(t,this.origin);var i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:(Xn=new Ge,function(t){var e=Xn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Xn.copy(this.direction).multiplyScalar(e).add(this.origin),Xn.distanceToSquared(t))}),distanceSqToSegment:(Gn=new Ge,Hn=new Ge,Wn=new Ge,function(t,e,i,n){Gn.copy(t).add(e).multiplyScalar(.5),Hn.copy(e).sub(t).normalize(),Wn.copy(this.origin).sub(Gn);var r,o,a,s,l=.5*t.distanceTo(e),h=-this.direction.dot(Hn),c=Wn.dot(this.direction),u=-Wn.dot(Hn),p=Wn.lengthSq(),d=Math.abs(1-h*h);if(d>0)if(o=h*c-u,s=l*d,(r=h*u-c)>=0)if(o>=-s)if(o<=s){var f=1/d;a=(r*=f)*(r+h*(o*=f)+2*c)+o*(h*r+o+2*u)+p}else o=l,a=-(r=Math.max(0,-(h*o+c)))*r+o*(o+2*u)+p;else o=-l,a=-(r=Math.max(0,-(h*o+c)))*r+o*(o+2*u)+p;else o<=-s?a=-(r=Math.max(0,-(-h*l+c)))*r+(o=r>0?-l:Math.min(Math.max(-l,-u),l))*(o+2*u)+p:o<=s?(r=0,a=(o=Math.min(Math.max(-l,-u),l))*(o+2*u)+p):a=-(r=Math.max(0,-(h*l+c)))*r+(o=r>0?l:Math.min(Math.max(-l,-u),l))*(o+2*u)+p;else o=h>0?-l:l,a=-(r=Math.max(0,-(h*o+c)))*r+o*(o+2*u)+p;return i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),n&&n.copy(Hn).multiplyScalar(o).add(Gn),a}),intersectSphere:(Vn=new Ge,function(t,e){Vn.subVectors(t.center,this.origin);var i=Vn.dot(this.direction),n=Vn.dot(Vn)-i*i,r=t.radius*t.radius;if(n>r)return null;var o=Math.sqrt(r-n),a=i-o,s=i+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,o,a,s,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,o=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,o=(t.min.y-u.y)*h),i>o||r>n?null:((r>i||i!=i)&&(i=r),(o<n||n!=n)&&(n=o),c>=0?(a=(t.min.z-u.z)*c,s=(t.max.z-u.z)*c):(a=(t.max.z-u.z)*c,s=(t.min.z-u.z)*c),i>s||a>n?null:((a>i||i!=i)&&(i=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:(jn=new Ge,function(t){return null!==this.intersectBox(t,jn)}),intersectTriangle:(zn=new Ge,kn=new Ge,Fn=new Ge,Un=new Ge,function(t,e,i,n,r){kn.subVectors(e,t),Fn.subVectors(i,t),Un.crossVectors(kn,Fn);var o,a=this.direction.dot(Un);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}zn.subVectors(this.origin,t);var s=o*this.direction.dot(Fn.crossVectors(zn,Fn));if(s<0)return null;var l=o*this.direction.dot(kn.cross(zn));if(l<0)return null;if(s+l>a)return null;var h=-o*zn.dot(Un);return h<0?null:this.at(h/a,r)}),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(dr.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Ge),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Ge),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Ge),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Zn=new Ge,Jn=new Ge,function(t,e){Zn.subVectors(t,this.start),Jn.subVectors(this.end,this.start);var i=Jn.dot(Jn),n=Jn.dot(Zn)/i;return e&&(n=Fe.clamp(n,0,1)),n}),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Ge),this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(fr,{getNormal:(er=new Ge,function(t,e,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Ge),n.subVectors(i,e),er.subVectors(t,e),n.cross(er);var r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}),getBarycoord:(Qn=new Ge,$n=new Ge,tr=new Ge,function(t,e,i,n,r){Qn.subVectors(n,e),$n.subVectors(i,e),tr.subVectors(t,e);var o=Qn.dot(Qn),a=Qn.dot($n),s=Qn.dot(tr),l=$n.dot($n),h=$n.dot(tr),c=o*l-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Ge),0===c)return r.set(-2,-1,-1);var u=1/c,p=(l*s-a*h)*u,d=(o*h-a*s)*u;return r.set(1-p-d,d,p)}),containsPoint:(Kn=new Ge,function(t,e,i,n){return fr.getBarycoord(t,e,i,n,Kn),Kn.x>=0&&Kn.y>=0&&Kn.x+Kn.y<=1})}),Object.assign(fr.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:(ar=new Ge,sr=new Ge,function(){return ar.subVectors(this.c,this.b),sr.subVectors(this.a,this.b),.5*ar.cross(sr).length()}),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Ge),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return fr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Ge),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return fr.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return fr.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(ir=new gi,nr=[new dr,new dr,new dr],rr=new Ge,or=new Ge,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Ge);var i=1/0;if(ir.setFromCoplanarPoints(this.a,this.b,this.c),ir.projectPoint(t,rr),!0===this.containsPoint(rr))e.copy(rr);else{nr[0].set(this.a,this.b),nr[1].set(this.b,this.c),nr[2].set(this.c,this.a);for(var n=0;n<nr.length;n++){nr[n].closestPointToPoint(rr,!0,or);var r=rr.distanceToSquared(or);r<i&&(i=r,e.copy(or))}}return e}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),mr.prototype=Object.assign(Object.create(Ji.prototype),{constructor:mr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Ji.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,i,n=this.geometry;if(n.isBufferGeometry){var r=n.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)i=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}},raycast:function(){var t=new je,e=new pr,i=new vi,n=new Ge,r=new Ge,o=new Ge,a=new Ge,s=new Ge,l=new Ge,h=new Ue,c=new Ue,u=new Ue,p=new Ge,d=new Ge,f=new Ge;function m(t,e,i,n,r,o,a){return fr.getBarycoord(t,e,i,n,p),r.multiplyScalar(p.x),o.multiplyScalar(p.y),a.multiplyScalar(p.z),r.add(o).add(a),r.clone()}function v(t,e,i,n,r,o,a,s){if(null===(e.side===I?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,e.side!==O,s)))return null;f.copy(s),f.applyMatrix4(t.matrixWorld);var l=i.ray.origin.distanceTo(f);return l<i.near||l>i.far?null:{distance:l,point:f.clone(),object:t}}function g(t,e,i,a,s,l,p,f){n.fromBufferAttribute(a,l),r.fromBufferAttribute(a,p),o.fromBufferAttribute(a,f);var g=v(t,t.material,e,i,n,r,o,d);if(g){s&&(h.fromBufferAttribute(s,l),c.fromBufferAttribute(s,p),u.fromBufferAttribute(s,f),g.uv=m(d,n,r,o,h,c,u));var y=new $i(l,p,f);fr.getNormal(n,r,o,y.normal),g.face=y,g.faceIndex=l}return g}return function(p,f){var y,_=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===_.boundingSphere&&_.computeBoundingSphere(),i.copy(_.boundingSphere),i.applyMatrix4(b),!1!==p.ray.intersectsSphere(i)&&(t.getInverse(b),e.copy(p.ray).applyMatrix4(t),null===_.boundingBox||!1!==e.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var w,E,M,q,A,T=_.index,P=_.attributes.position,S=_.attributes.uv;if(null!==T)for(q=0,A=T.count;q<A;q+=3)w=T.getX(q),E=T.getX(q+1),M=T.getX(q+2),(y=g(this,p,e,P,S,w,E,M))&&(y.faceIndex=Math.floor(q/3),f.push(y));else if(void 0!==P)for(q=0,A=P.count;q<A;q+=3)(y=g(this,p,e,P,S,w=q,E=q+1,M=q+2))&&(y.index=w,f.push(y))}else if(_.isGeometry){var L,C,I,O,R=Array.isArray(x),N=_.vertices,B=_.faces,D=_.faceVertexUvs[0];D.length>0&&(O=D);for(var z=0,k=B.length;z<k;z++){var F=B[z],U=R?x[F.materialIndex]:x;if(void 0!==U){if(L=N[F.a],C=N[F.b],I=N[F.c],!0===U.morphTargets){var j=_.morphTargets,V=this.morphTargetInfluences;n.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var G=0,H=j.length;G<H;G++){var W=V[G];if(0!==W){var X=j[G].vertices;n.addScaledVector(a.subVectors(X[F.a],L),W),r.addScaledVector(s.subVectors(X[F.b],C),W),o.addScaledVector(l.subVectors(X[F.c],I),W)}}n.add(L),r.add(C),o.add(I),L=n,C=r,I=o}if(y=v(this,U,p,e,L,C,I,d)){if(O&&O[z]){var Y=O[z];h.copy(Y[0]),c.copy(Y[1]),u.copy(Y[2]),y.uv=m(d,L,C,I,h,c,u)}y.face=F,y.faceIndex=z,f.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),gr.prototype=Object.create(ci.prototype),gr.prototype.constructor=gr,gr.prototype.isCubeTexture=!0,Object.defineProperty(gr.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var yr=new ci,_r=new gr;function xr(){this.seq=[],this.map={}}var br=[],wr=[],Er=new Float32Array(16),Mr=new Float32Array(9);function qr(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,o=br[r];if(void 0===o&&(o=new Float32Array(r),br[r]=o),0!==e){n.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=i,t[a].toArray(o,s)}return o}function Ar(t,e){var i=wr[e];void 0===i&&(i=new Int32Array(e),wr[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function Tr(t,e){t.uniform1f(this.addr,e)}function Pr(t,e){t.uniform1i(this.addr,e)}function Sr(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function Lr(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function Cr(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function Ir(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function Or(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(Mr.set(e.elements),t.uniformMatrix3fv(this.addr,!1,Mr))}function Rr(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(Er.set(e.elements),t.uniformMatrix4fv(this.addr,!1,Er))}function Nr(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||yr,n)}function Br(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||_r,n)}function Dr(t,e){t.uniform2iv(this.addr,e)}function zr(t,e){t.uniform3iv(this.addr,e)}function kr(t,e){t.uniform4iv(this.addr,e)}function Fr(t,e){t.uniform1fv(this.addr,e)}function Ur(t,e){t.uniform1iv(this.addr,e)}function jr(t,e){t.uniform2fv(this.addr,qr(e,this.size,2))}function Vr(t,e){t.uniform3fv(this.addr,qr(e,this.size,3))}function Gr(t,e){t.uniform4fv(this.addr,qr(e,this.size,4))}function Hr(t,e){t.uniformMatrix2fv(this.addr,!1,qr(e,this.size,4))}function Wr(t,e){t.uniformMatrix3fv(this.addr,!1,qr(e,this.size,9))}function Xr(t,e){t.uniformMatrix4fv(this.addr,!1,qr(e,this.size,16))}function Yr(t,e,i){var n=e.length,r=Ar(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTexture2D(e[o]||yr,r[o])}function Zr(t,e,i){var n=e.length,r=Ar(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTextureCube(e[o]||_r,r[o])}function Jr(t,e,i){this.id=t,this.addr=i,this.setValue=function(t){switch(t){case 5126:return Tr;case 35664:return Sr;case 35665:return Lr;case 35666:return Cr;case 35674:return Ir;case 35675:return Or;case 35676:return Rr;case 35678:case 36198:return Nr;case 35680:return Br;case 5124:case 35670:return Pr;case 35667:case 35671:return Dr;case 35668:case 35672:return zr;case 35669:case 35673:return kr}}(e.type)}function Kr(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Fr;case 35664:return jr;case 35665:return Vr;case 35666:return Gr;case 35674:return Hr;case 35675:return Wr;case 35676:return Xr;case 35678:return Yr;case 35680:return Zr;case 5124:case 35670:return Ur;case 35667:case 35671:return Dr;case 35668:case 35672:return zr;case 35669:case 35673:return kr}}(e.type)}function Qr(t){this.id=t,xr.call(this)}Qr.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var o=i[n];o.setValue(t,e[o.id])}};var $r=/([\w\d_]+)(\])?(\[|\.)?/g;function to(t,e){t.seq.push(e),t.map[e.id]=e}function eo(t,e,i){var n=t.name,r=n.length;for($r.lastIndex=0;;){var o=$r.exec(n),a=$r.lastIndex,s=o[1],l="]"===o[2],h=o[3];if(l&&(s|=0),void 0===h||"["===h&&a+2===r){to(i,void 0===h?new Jr(s,t,e):new Kr(s,t,e));break}var c=i.map[s];void 0===c&&to(i,c=new Qr(s)),i=c}}function io(t,e,i){xr.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var o=t.getActiveUniform(e,r),a=o.name;eo(o,t.getUniformLocation(e,a),this)}}function no(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),function(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(i)),n}io.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},io.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},io.upload=function(t,e,i,n){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,n)}},io.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var o=t[n];o.id in e&&i.push(o)}return i};var ro=0;function oo(t){switch(t){case Ce:return["Linear","( value )"];case Ie:return["sRGB","( value )"];case Re:return["RGBE","( value )"];case Ne:return["RGBM","( value, 7.0 )"];case Be:return["RGBM","( value, 16.0 )"];case De:return["RGBD","( value, 256.0 )"];case Oe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function ao(t,e){var i=oo(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function so(t){return""!==t}function lo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function ho(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function co(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(t,e){var i=xi[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return co(i)})}function uo(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,i,n){for(var r="",o=parseInt(e);o<parseInt(i);o++)r+=n.replace(/\[ i \]/g,"[ "+o+" ]");return r})}function po(t,e,i,n,r,o){var a=t.context,s=n.defines,l=r.vertexShader,h=r.fragmentShader,c="SHADOWMAP_TYPE_BASIC";o.shadowMapType===S?c="SHADOWMAP_TYPE_PCF":o.shadowMapType===L&&(c="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case bt:case wt:u="ENVMAP_TYPE_CUBE";break;case At:case Tt:u="ENVMAP_TYPE_CUBE_UV";break;case Et:case Mt:u="ENVMAP_TYPE_EQUIREC";break;case qt:u="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case wt:case Mt:p="ENVMAP_MODE_REFRACTION"}switch(n.combine){case dt:d="ENVMAP_BLENDING_MULTIPLY";break;case ft:d="ENVMAP_BLENDING_MIX";break;case mt:d="ENVMAP_BLENDING_ADD"}}var f,m,v,g,y,_,x,b,w=t.gammaFactor>0?t.gammaFactor:1,E=(f=n.extensions,m=o,v=e,[(f=f||{}).derivatives||m.envMapCubeUV||m.bumpMap||m.normalMap||m.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(f.fragDepth||m.logarithmicDepthBuffer)&&v.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",f.drawBuffers&&v.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(f.shaderTextureLOD||m.envMap)&&v.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(so).join("\n")),M=function(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}(s),q=a.createProgram();n.isRawShaderMaterial?((g=[M].filter(so).join("\n")).length>0&&(g+="\n"),(y=[E,M].filter(so).join("\n")).length>0&&(y+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,M,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(so).join("\n"),y=[E,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,M,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+w,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+u:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==vt?"#define TONE_MAPPING":"",o.toneMapping!==vt?xi.tonemapping_pars_fragment:"",o.toneMapping!==vt?function(t,e){var i;switch(e){case gt:i="Linear";break;case yt:i="Reinhard";break;case _t:i="Uncharted2";break;case xt:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?xi.encodings_pars_fragment:"",o.mapEncoding?ao("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?ao("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?ao("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(_="linearToOutputTexel",x=o.outputEncoding,b=oo(x),"vec4 "+_+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(so).join("\n")),l=ho(l=lo(l=co(l),o),o),h=ho(h=lo(h=co(h),o),o);var A=g+(l=uo(l)),T=y+(h=uo(h)),P=no(a,a.VERTEX_SHADER,A),C=no(a,a.FRAGMENT_SHADER,T);a.attachShader(q,P),a.attachShader(q,C),void 0!==n.index0AttributeName?a.bindAttribLocation(q,0,n.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(q,0,"position"),a.linkProgram(q);var I,O,R=a.getProgramInfoLog(q).trim(),N=a.getShaderInfoLog(P).trim(),B=a.getShaderInfoLog(C).trim(),D=!0,z=!0;return!1===a.getProgramParameter(q,a.LINK_STATUS)?(D=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(q,a.VALIDATE_STATUS),"gl.getProgramInfoLog",R,N,B)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==N&&""!==B||(z=!1),z&&(this.diagnostics={runnable:D,material:n,programLog:R,vertexShader:{log:N,prefix:g},fragmentShader:{log:B,prefix:y}}),a.deleteShader(P),a.deleteShader(C),this.getUniforms=function(){return void 0===I&&(I=new io(a,q,t)),I},this.getAttributes=function(){return void 0===O&&(O=function(t,e){for(var i={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var o=t.getActiveAttrib(e,r).name;i[o]=t.getAttribLocation(e,o)}return i}(a,q)),O},this.destroy=function(){a.deleteProgram(q),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ro++,this.code=i,this.usedTimes=1,this.program=q,this.vertexShader=P,this.fragmentShader=C,this}function fo(t,e,i){var n=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding):i=Ce,i===Ce&&e&&(i=Oe),i}this.getParameters=function(e,n,o,s,l,h,c){var u=r[e.type],p=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(i.floatVertexTextures)return 1024;var n=i.maxVertexUniforms,r=Math.floor((n-20)/4),o=Math.min(r,e.length);return o<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+o+"."),0):o}(c):0,d=i.precision;null!==e.precision&&(d=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:i.vertexTextures,outputEncoding:a(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===At||e.envMap.mapping===Tt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:l,numClipIntersection:h,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===O,flipSided:e.side===I,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var a=0;a<o.length;a++)n.push(i[o[a]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.join()},this.acquireProgram=function(i,r,o,a){for(var s,l=0,h=n.length;l<h;l++){var c=n[l];if(c.code===a){++(s=c).usedTimes;break}}return void 0===s&&(s=new po(t,e,a,i,r,o),n.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=n.indexOf(t);n[e]=n[n.length-1],n.pop(),t.destroy()}},this.programs=n}function mo(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function vo(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function go(){var t={};return{get:function(e,i){var n=e.id+","+i.id,r=t[n];return void 0===r&&(r=new function(){var t=[],e=0,i=[],n=[];return{opaque:i,transparent:n,init:function(){e=0,i.length=0,n.length=0},push:function(r,o,a,s,l){var h=t[e];void 0===h?(h={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},t[e]=h):(h.id=r.id,h.object=r,h.geometry=o,h.material=a,h.program=a.program,h.renderOrder=r.renderOrder,h.z=s,h.group=l),(!0===a.transparent?n:i).push(h),e++},sort:function(){i.length>1&&i.sort(mo),n.length>1&&n.sort(vo)}}},t[n]=r),r},dispose:function(){t={}}}}var yo,_o,xo,bo,wo,Eo,Mo,qo,Ao,To,Po,So,Lo,Co,Io,Oo,Ro,No,Bo=0;function Do(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new Ge,color:new Ei,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":i={position:new Ge,direction:new Ge,color:new Ei,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":i={position:new Ge,color:new Ei,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new Ge,skyColor:new Ei,groundColor:new Ei};break;case"RectAreaLight":i={color:new Ei,position:new Ge,halfWidth:new Ge,halfHeight:new Ge}}return t[e.id]=i,i}}},e={id:Bo++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new Ge,n=new je,r=new je;return{setup:function(o,a,s){for(var l=0,h=0,c=0,u=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var _=o[g],x=_.color,b=_.intensity,w=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)l+=x.r*b,h+=x.g*b,c+=x.b*b;else if(_.isDirectionalLight){if((q=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),q.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),q.direction.sub(i),q.direction.transformDirection(v),q.shadow=_.castShadow,_.castShadow){var M=_.shadow;q.shadowBias=M.bias,q.shadowRadius=M.radius,q.shadowMapSize=M.mapSize}e.directionalShadowMap[u]=E,e.directionalShadowMatrix[u]=_.shadow.matrix,e.directional[u]=q,u++}else if(_.isSpotLight)(q=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),q.position.applyMatrix4(v),q.color.copy(x).multiplyScalar(b),q.distance=w,q.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),q.direction.sub(i),q.direction.transformDirection(v),q.coneCos=Math.cos(_.angle),q.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),q.decay=0===_.distance?0:_.decay,q.shadow=_.castShadow,_.castShadow&&(M=_.shadow,q.shadowBias=M.bias,q.shadowRadius=M.radius,q.shadowMapSize=M.mapSize),e.spotShadowMap[d]=E,e.spotShadowMatrix[d]=_.shadow.matrix,e.spot[d]=q,d++;else if(_.isRectAreaLight)(q=t.get(_)).color.copy(x).multiplyScalar(b),q.position.setFromMatrixPosition(_.matrixWorld),q.position.applyMatrix4(v),r.identity(),n.copy(_.matrixWorld),n.premultiply(v),r.extractRotation(n),q.halfWidth.set(.5*_.width,0,0),q.halfHeight.set(0,.5*_.height,0),q.halfWidth.applyMatrix4(r),q.halfHeight.applyMatrix4(r),e.rectArea[f]=q,f++;else if(_.isPointLight)(q=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),q.position.applyMatrix4(v),q.color.copy(_.color).multiplyScalar(_.intensity),q.distance=_.distance,q.decay=0===_.distance?0:_.decay,q.shadow=_.castShadow,_.castShadow&&(M=_.shadow,q.shadowBias=M.bias,q.shadowRadius=M.radius,q.shadowMapSize=M.mapSize,q.shadowCameraNear=M.camera.near,q.shadowCameraFar=M.camera.far),e.pointShadowMap[p]=E,e.pointShadowMatrix[p]=_.shadow.matrix,e.point[p]=q,p++;else if(_.isHemisphereLight){var q;(q=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),q.direction.transformDirection(v),q.direction.normalize(),q.skyColor.copy(_.color).multiplyScalar(b),q.groundColor.copy(_.groundColor).multiplyScalar(b),e.hemi[m]=q,m++}}e.ambient[0]=l,e.ambient[1]=h,e.ambient[2]=c,e.directional.length=u,e.spot.length=d,e.rectArea.length=f,e.point.length=p,e.hemi.length=m,e.hash=e.id+","+u+","+p+","+d+","+f+","+m+","+a.length},state:e}}function zo(){var t={};return{get:function(e,i){var n=e.id+","+i.id,r=t[n];return void 0===r&&(r=new function(){var t=new Do,e=[],i=[],n=[];return{init:function(){e.length=0,i.length=0,n.length=0},state:{lightsArray:e,shadowsArray:i,spritesArray:n,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)},pushSprite:function(t){n.push(t)}}},t[n]=r),r},dispose:function(){t={}}}}function ko(t){hr.call(this),this.type="MeshDepthMaterial",this.depthPacking=ze,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Fo(t){hr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ge,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Uo(t,e,i){for(var n=new yi,r=new je,o=new Ue,a=new Ue(i,i),s=new Ge,l=new Ge,h=1,c=2,u=1+(h|c),p=new Array(u),d=new Array(u),f={},m={0:I,1:C,2:O},v=[new Ge(1,0,0),new Ge(-1,0,0),new Ge(0,0,1),new Ge(0,0,-1),new Ge(0,1,0),new Ge(0,-1,0)],g=[new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,0,1),new Ge(0,0,-1)],y=[new ui,new ui,new ui,new ui,new ui,new ui],_=0;_!==u;++_){var x=0!=(_&h),b=0!=(_&c),w=new ko({depthPacking:ke,morphTargets:x,skinning:b});p[_]=w;var E=new Fo({morphTargets:x,skinning:b});d[_]=E}var M=this;function q(e,i,n,r,o,a){var s=e.geometry,l=null,u=p,v=e.customDepthMaterial;if(n&&(u=d,v=e.customDistanceMaterial),v)l=v;else{var g=!1;i.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=e.isSkinnedMesh&&i.skinning,_=0;g&&(_|=h),y&&(_|=c),l=u[_]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var x=l.uuid,b=i.uuid,w=f[x];void 0===w&&(w={},f[x]=w);var E=w[b];void 0===E&&(E=l.clone(),w[b]=E),l=E}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:m[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function A(i,r,o,a){if(!1!==i.visible){if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);var s=e.update(i),h=i.material;if(Array.isArray(h))for(var c=s.groups,u=0,p=c.length;u<p;u++){var d=c[u],f=h[d.materialIndex];if(f&&f.visible){var m=q(i,f,a,l,o.near,o.far);t.renderBufferDirect(o,null,s,m,i,d)}}else if(h.visible){m=q(i,h,a,l,o.near,o.far);t.renderBufferDirect(o,null,s,m,i,null)}}for(var v=i.children,g=0,y=v.length;g<y;g++)A(v[g],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S,this.render=function(e,i,h){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==e.length){var c,u=t.context,p=t.state;p.disable(u.BLEND),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=e.length;d<f;d++){var m=e[d],_=m.shadow,x=m&&m.isPointLight;if(void 0!==_){var b=_.camera;if(o.copy(_.mapSize),o.min(a),x){var w=o.x,E=o.y;y[0].set(2*w,E,w,E),y[1].set(0,E,w,E),y[2].set(3*w,E,w,E),y[3].set(w,E,w,E),y[4].set(3*w,0,w,E),y[5].set(w,0,w,E),o.x*=4,o.y*=2}if(null===_.map){var q={minFilter:Ct,magFilter:Ct,format:Kt};_.map=new pi(o.x,o.y,q),_.map.texture.name=m.name+".shadowMap",b.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(m);var T=_.map,P=_.matrix;l.setFromMatrixPosition(m.matrixWorld),b.position.copy(l),x?(c=6,P.makeTranslation(-l.x,-l.y,-l.z)):(c=1,s.setFromMatrixPosition(m.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(b.projectionMatrix),P.multiply(b.matrixWorldInverse)),t.setRenderTarget(T),t.clear();for(var S=0;S<c;S++){if(x){s.copy(b.position),s.add(v[S]),b.up.copy(g[S]),b.lookAt(s),b.updateMatrixWorld();var L=y[S];p.viewport(L)}r.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),n.setFromMatrix(r),A(i,h,b,x)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}M.needsUpdate=!1}}}function jo(t,e,i,n,r,o,a,s,l){ci.call(this,t,e,i,n,r,o,a,s,l),this.needsUpdate=!0}function Vo(t,e,i,n,r){var o,a,s,l,h,c,u=new Ge,p=new Ve,d=new Ge;function f(){var t,i,n,u=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),p=new Uint16Array([0,1,2,0,2,3]);o=e.createBuffer(),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,p,e.STATIC_DRAW),t=e.createProgram(),i=e.createShader(e.VERTEX_SHADER),n=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(i),e.compileShader(n),e.attachShader(t,i),e.attachShader(t,n),e.linkProgram(t),s=t,l={position:e.getAttribLocation(s,"position"),uv:e.getAttribLocation(s,"uv")},h={uvOffset:e.getUniformLocation(s,"uvOffset"),uvScale:e.getUniformLocation(s,"uvScale"),rotation:e.getUniformLocation(s,"rotation"),center:e.getUniformLocation(s,"center"),scale:e.getUniformLocation(s,"scale"),color:e.getUniformLocation(s,"color"),map:e.getUniformLocation(s,"map"),opacity:e.getUniformLocation(s,"opacity"),modelViewMatrix:e.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(s,"projectionMatrix"),fogType:e.getUniformLocation(s,"fogType"),fogDensity:e.getUniformLocation(s,"fogDensity"),fogNear:e.getUniformLocation(s,"fogNear"),fogFar:e.getUniformLocation(s,"fogFar"),fogColor:e.getUniformLocation(s,"fogColor"),fogDepth:e.getUniformLocation(s,"fogDepth"),alphaTest:e.getUniformLocation(s,"alphaTest")};var d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=8,d.height=8;var f=d.getContext("2d");f.fillStyle="white",f.fillRect(0,0,8,8),c=new jo(d)}function m(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}this.render=function(r,v,g){if(0!==r.length){void 0===s&&f(),i.useProgram(s),i.initAttributes(),i.enableAttribute(l.position),i.enableAttribute(l.uv),i.disableUnusedAttributes(),i.disable(e.CULL_FACE),i.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(l.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(l.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.uniformMatrix4fv(h.projectionMatrix,!1,g.projectionMatrix.elements),i.activeTexture(e.TEXTURE0),e.uniform1i(h.map,0);var y=0,_=0,x=v.fog;x?(e.uniform3f(h.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(e.uniform1f(h.fogNear,x.near),e.uniform1f(h.fogFar,x.far),e.uniform1i(h.fogType,1),y=1,_=1):x.isFogExp2&&(e.uniform1f(h.fogDensity,x.density),e.uniform1i(h.fogType,2),y=2,_=2)):(e.uniform1i(h.fogType,0),y=0,_=0);for(var b=0,w=r.length;b<w;b++){(q=r[b]).modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,q.matrixWorld),q.z=-q.modelViewMatrix.elements[14]}r.sort(m);var E=[],M=[];for(b=0,w=r.length;b<w;b++){var q,A=(q=r[b]).material;if(!1!==A.visible){q.onBeforeRender(t,v,g,void 0,A,void 0),e.uniform1f(h.alphaTest,A.alphaTest),e.uniformMatrix4fv(h.modelViewMatrix,!1,q.modelViewMatrix.elements),q.matrixWorld.decompose(u,p,d),E[0]=d.x,E[1]=d.y,M[0]=q.center.x-.5,M[1]=q.center.y-.5;var T=0;v.fog&&A.fog&&(T=_),y!==T&&(e.uniform1i(h.fogType,T),y=T),null!==A.map?(e.uniform2f(h.uvOffset,A.map.offset.x,A.map.offset.y),e.uniform2f(h.uvScale,A.map.repeat.x,A.map.repeat.y)):(e.uniform2f(h.uvOffset,0,0),e.uniform2f(h.uvScale,1,1)),e.uniform1f(h.opacity,A.opacity),e.uniform3f(h.color,A.color.r,A.color.g,A.color.b),e.uniform1f(h.rotation,A.rotation),e.uniform2fv(h.center,M),e.uniform2fv(h.scale,E),i.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst,A.blendEquationAlpha,A.blendSrcAlpha,A.blendDstAlpha,A.premultipliedAlpha),i.buffers.depth.setTest(A.depthTest),i.buffers.depth.setMask(A.depthWrite),i.buffers.color.setMask(A.colorWrite),n.setTexture2D(A.map||c,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),q.onAfterRender(t,v,g,void 0,A,void 0)}}i.enable(e.CULL_FACE),i.reset()}}}function Go(t,e,i,n,r,o,a){var s,l="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,h={};function c(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i),n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function u(t){return Fe.isPowerOfTwo(t.width)&&Fe.isPowerOfTwo(t.height)}function p(t,e){return t.generateMipmaps&&e&&t.minFilter!==Ct&&t.minFilter!==Rt}function d(e,i,r,o){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log2(Math.max(r,o))}function f(e){return e===Ct||e===It||e===Ot?t.NEAREST:t.LINEAR}function m(e){var i=e.target;i.removeEventListener("dispose",m),function(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.remove(e)}(i),i.isVideoTexture&&delete h[i.id],a.memory.textures--}function v(e){var i=e.target;i.removeEventListener("dispose",v),function(e){var i=n.get(e),r=n.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[o]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}(i),a.memory.textures--}function g(e,f){var v,g,_,x=n.get(e);if(e.isVideoTexture&&(g=(v=e).id,_=a.render.frame,h[g]!==_&&(h[g]=_,v.update())),e.version>0&&x.__version!==e.version){var b=e.image;if(void 0===b)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==b.complete)return void function(e,n,h){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++);i.activeTexture(t.TEXTURE0+h),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var f=c(n.image,r.maxTextureSize);g=n,(g.wrapS!==St||g.wrapT!==St||g.minFilter!==Ct&&g.minFilter!==Rt)&&!1===u(f)&&(f=(v=f)instanceof HTMLImageElement||v instanceof HTMLCanvasElement||v instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Fe.floorPowerOfTwo(v.width),s.height=Fe.floorPowerOfTwo(v.height),s.getContext("2d").drawImage(v,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+v.width+"x"+v.height+"). Resized to "+s.width+"x"+s.height,v),s):v);var v;var g;var _=u(f),x=o.convert(n.format),b=o.convert(n.type);y(t.TEXTURE_2D,n,_);var w,E=n.mipmaps;if(n.isDepthTexture){var M=t.DEPTH_COMPONENT;if(n.type===Vt){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");M=t.DEPTH_COMPONENT32F}else l&&(M=t.DEPTH_COMPONENT16);n.format===te&&M===t.DEPTH_COMPONENT&&n.type!==Ft&&n.type!==jt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Ft,b=o.convert(n.type)),n.format===ee&&(M=t.DEPTH_STENCIL,n.type!==Yt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Yt,b=o.convert(n.type))),i.texImage2D(t.TEXTURE_2D,0,M,f.width,f.height,0,x,b,null)}else if(n.isDataTexture)if(E.length>0&&_){for(var q=0,A=E.length;q<A;q++)w=E[q],i.texImage2D(t.TEXTURE_2D,q,x,w.width,w.height,0,x,b,w.data);n.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else i.texImage2D(t.TEXTURE_2D,0,x,f.width,f.height,0,x,b,f.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(var q=0,A=E.length;q<A;q++)w=E[q],n.format!==Kt&&n.format!==Jt?i.getCompressedTextureFormats().indexOf(x)>-1?i.compressedTexImage2D(t.TEXTURE_2D,q,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,q,x,w.width,w.height,0,x,b,w.data);e.__maxMipLevel=E.length-1}else if(E.length>0&&_){for(var q=0,A=E.length;q<A;q++)w=E[q],i.texImage2D(t.TEXTURE_2D,q,x,x,b,w);n.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else i.texImage2D(t.TEXTURE_2D,0,x,x,b,f),e.__maxMipLevel=0;p(n,_)&&d(t.TEXTURE_2D,n,f.width,f.height);e.__version=n.version,n.onUpdate&&n.onUpdate(n)}(x,e,f);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}i.activeTexture(t.TEXTURE0+f),i.bindTexture(t.TEXTURE_2D,x.__webglTexture)}function y(i,a,s){var l;if(s?(t.texParameteri(i,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===St&&a.wrapT===St||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(i,t.TEXTURE_MAG_FILTER,f(a.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==Ct&&a.minFilter!==Rt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=e.get("EXT_texture_filter_anisotropic")){if(a.type===Vt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Gt&&null===e.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(t.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function _(e,r,a,s){var l=o.convert(r.texture.format),h=o.convert(r.texture.type);i.texImage2D(s,0,l,r.width,r.height,0,l,h,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function x(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function b(e){var i=n.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===te)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==ee)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),x(i.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),x(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(e,s){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",m),l.__image__webglTextureCube=t.createTexture(),a.memory.textures++),i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e&&e.isCompressedTexture,f=e.image[0]&&e.image[0].isDataTexture,v=[],g=0;g<6;g++)v[g]=h||f?f?e.image[g].image:e.image[g]:c(e.image[g],r.maxCubemapSize);var _=v[0],x=u(_),b=o.convert(e.format),w=o.convert(e.type);for(y(t.TEXTURE_CUBE_MAP,e,x),g=0;g<6;g++)if(h)for(var E,M=v[g].mipmaps,q=0,A=M.length;q<A;q++)E=M[q],e.format!==Kt&&e.format!==Jt?i.getCompressedTextureFormats().indexOf(b)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,q,b,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,q,b,E.width,E.height,0,b,w,E.data);else f?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,v[g].width,v[g].height,0,b,w,v[g].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,b,w,v[g]);l.__maxMipLevel=h?M.length-1:0,p(e,x)&&d(t.TEXTURE_CUBE_MAP,e,_.width,_.height),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=n.get(e),o=n.get(e.texture);e.addEventListener("dispose",v),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,l=u(e);if(s){r.__webglFramebuffer=[];for(var h=0;h<6;h++)r.__webglFramebuffer[h]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){for(i.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,l),h=0;h<6;h++)_(r.__webglFramebuffer[h],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+h);p(e.texture,l)&&d(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,o.__webglTexture),y(t.TEXTURE_2D,e.texture,l),_(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),p(e.texture,l)&&d(t.TEXTURE_2D,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&b(e)},this.updateRenderTargetMipmap=function(e){var r=e.texture;if(p(r,u(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=n.get(r).__webglTexture;i.bindTexture(o,a),d(o,r,e.width,e.height),i.bindTexture(o,null)}}}function Ho(t,e,i,n){Ki.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Wo(t){Ho.call(this),this.cameras=t||[]}function Xo(t){var e=this,i=null,n=null,r=null,o=new je,a=new je;"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData);var s=new je,l=new Ve,h=new Ge,c=new Ho;c.bounds=new ui(0,0,.5,1),c.layers.enable(1);var u=new Ho;u.bounds=new ui(.5,0,.5,1),u.layers.enable(2);var p,d,f=new Wo([c,u]);function m(){if(null!==i&&i.isPresenting){var n=i.getEyeParameters("left"),r=n.renderWidth,o=n.renderHeight;d=t.getPixelRatio(),p=t.getSize(),t.setDrawingBufferSize(2*r,o,1)}else e.enabled&&t.setDrawingBufferSize(p.width,p.height,d)}f.layers.enable(1),f.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",m,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t)},this.setPoseTarget=function(t){void 0!==t&&(r=t)},this.getCamera=function(t){if(null===i)return t;i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(n);var p=i.stageParameters;p?o.fromArray(p.sittingToStandingTransform):o.makeTranslation(0,e.userHeight,0);var d=n.pose,m=null!==r?r:t;if(m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==d.orientation&&(l.fromArray(d.orientation),m.quaternion.multiply(l)),null!==d.position&&(l.setFromRotationMatrix(o),h.fromArray(d.position),h.applyQuaternion(l),m.position.add(h)),m.updateMatrixWorld(),!1===i.isPresenting)return t;c.near=t.near,u.near=t.near,c.far=t.far,u.far=t.far,f.matrixWorld.copy(t.matrixWorld),f.matrixWorldInverse.copy(t.matrixWorldInverse),c.matrixWorldInverse.fromArray(n.leftViewMatrix),u.matrixWorldInverse.fromArray(n.rightViewMatrix),a.getInverse(o),c.matrixWorldInverse.multiply(a),u.matrixWorldInverse.multiply(a);var v=m.parent;null!==v&&(s.getInverse(v.matrixWorld),c.matrixWorldInverse.multiply(s),u.matrixWorldInverse.multiply(s)),c.matrixWorld.getInverse(c.matrixWorldInverse),u.matrixWorld.getInverse(u.matrixWorldInverse),c.projectionMatrix.fromArray(n.leftProjectionMatrix),u.projectionMatrix.fromArray(n.rightProjectionMatrix),f.projectionMatrix.copy(c.projectionMatrix);var g=i.getLayers();if(g.length){var y=g[0];null!==y.leftBounds&&4===y.leftBounds.length&&c.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&u.bounds.fromArray(y.rightBounds)}return f},this.getStandingMatrix=function(){return o},this.submitFrame=function(){i&&i.isPresenting&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",m)}}function Yo(t){console.log("THREE.WebGLRenderer",M);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",c=null,u=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=gt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,f,m,v,g,y,_,x,b,w,E,q,S,L,C,N,B,dt,ft=this,mt=!1,vt=null,yt=null,_t=-1,xt="",bt=null,wt=null,Et=new ui,Mt=new ui,qt=null,At=0,Tt=e.width,qe=e.height,Ae=1,Te=new ui(0,0,Tt,qe),Ce=new ui(0,0,Tt,qe),Ie=!1,Oe=new yi,Re=new function(){var t=this,e=null,i=0,n=!1,r=!1,o=new gi,a=new He,s={value:null,needsUpdate:!1};function l(){s.value!==e&&(s.value=e,s.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(e,i,n,r){var l=null!==e?e.length:0,h=null;if(0!==l){if(h=s.value,!0!==r||null===h){var c=n+4*l,u=i.matrixWorldInverse;a.getNormalMatrix(u),(null===h||h.length<c)&&(h=new Float32Array(c));for(var p=0,d=n;p!==l;++p,d+=4)o.copy(e[p]).applyMatrix4(u,a),o.normal.toArray(h,d),h[d+3]=o.constant}s.value=h,s.needsUpdate=!0}return t.numPlanes=l,h}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){var a=0!==t.length||r||0!==i||n;return n=r,e=h(t,o,0),i=t.length,a},this.beginShadows=function(){r=!0,h(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,o,a,c,u,p){if(!n||null===t||0===t.length||r&&!a)r?h(null):l();else{var d=r?0:i,f=4*d,m=u.clippingState||null;s.value=m,m=h(t,c,f,p);for(var v=0;v!==f;++v)m[v]=e[v];u.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},Ne=!1,Be=!1,De=new je,ze=new Ge;function ke(){return null===vt?Ae:1}try{var Ue={alpha:n,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:h};if(e.addEventListener("webglcontextlost",Ye,!1),e.addEventListener("webglcontextrestored",Ze,!1),null===(p=i||e.getContext("webgl",Ue)||e.getContext("experimental-webgl",Ue)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function Ve(){(d=new function(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}}}(p)).get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_float_linear"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays"),dt=new function(t,e){return{convert:function(i){var n;if(i===Pt)return t.REPEAT;if(i===St)return t.CLAMP_TO_EDGE;if(i===Lt)return t.MIRRORED_REPEAT;if(i===Ct)return t.NEAREST;if(i===It)return t.NEAREST_MIPMAP_NEAREST;if(i===Ot)return t.NEAREST_MIPMAP_LINEAR;if(i===Rt)return t.LINEAR;if(i===Nt)return t.LINEAR_MIPMAP_NEAREST;if(i===Bt)return t.LINEAR_MIPMAP_LINEAR;if(i===Dt)return t.UNSIGNED_BYTE;if(i===Ht)return t.UNSIGNED_SHORT_4_4_4_4;if(i===Wt)return t.UNSIGNED_SHORT_5_5_5_1;if(i===Xt)return t.UNSIGNED_SHORT_5_6_5;if(i===zt)return t.BYTE;if(i===kt)return t.SHORT;if(i===Ft)return t.UNSIGNED_SHORT;if(i===Ut)return t.INT;if(i===jt)return t.UNSIGNED_INT;if(i===Vt)return t.FLOAT;if(i===Gt&&null!==(n=e.get("OES_texture_half_float")))return n.HALF_FLOAT_OES;if(i===Zt)return t.ALPHA;if(i===Jt)return t.RGB;if(i===Kt)return t.RGBA;if(i===Qt)return t.LUMINANCE;if(i===$t)return t.LUMINANCE_ALPHA;if(i===te)return t.DEPTH_COMPONENT;if(i===ee)return t.DEPTH_STENCIL;if(i===V)return t.FUNC_ADD;if(i===G)return t.FUNC_SUBTRACT;if(i===H)return t.FUNC_REVERSE_SUBTRACT;if(i===Y)return t.ZERO;if(i===Z)return t.ONE;if(i===J)return t.SRC_COLOR;if(i===K)return t.ONE_MINUS_SRC_COLOR;if(i===Q)return t.SRC_ALPHA;if(i===$)return t.ONE_MINUS_SRC_ALPHA;if(i===tt)return t.DST_ALPHA;if(i===et)return t.ONE_MINUS_DST_ALPHA;if(i===it)return t.DST_COLOR;if(i===nt)return t.ONE_MINUS_DST_COLOR;if(i===rt)return t.SRC_ALPHA_SATURATE;if((i===ie||i===ne||i===re||i===oe)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(i===ie)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ne)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===re)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===oe)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((i===ae||i===se||i===le||i===he)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(i===ae)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===se)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===le)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===he)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===ce&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((i===ue||i===pe||i===de||i===fe||i===me||i===ve||i===ge||i===ye||i===_e||i===xe||i===be||i===we||i===Ee||i===Me)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return i;if((i===W||i===X)&&null!==(n=e.get("EXT_blend_minmax"))){if(i===W)return n.MIN_EXT;if(i===X)return n.MAX_EXT}return i===Yt&&null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:0}}}(p,d),f=new function(t,e,i){var n;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==i.precision?i.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===i.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,g=!!e.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==n)return n;var i=e.get("EXT_texture_filter_anisotropic");return n=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:h,maxTextureSize:c,maxCubemapSize:u,maxAttributes:p,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(p,d,t),(m=new function(t,e,i){var n=new function(){var e=!1,i=new ui,n=null,r=new ui(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,o,a,s){!0===s&&(e*=a,n*=a,o*=a),i.set(e,n,o,a),!1===r.equals(i)&&(t.clearColor(e,n,o,a),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},r=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?X(t.DEPTH_TEST):Y(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case ot:t.depthFunc(t.NEVER);break;case at:t.depthFunc(t.ALWAYS);break;case st:t.depthFunc(t.LESS);break;case lt:t.depthFunc(t.LEQUAL);break;case ht:t.depthFunc(t.EQUAL);break;case ct:t.depthFunc(t.GEQUAL);break;case ut:t.depthFunc(t.GREATER);break;case pt:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}},o=new function(){var e=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,h=null;return{setTest:function(e){e?X(t.STENCIL_TEST):Y(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,a){n===e&&r===i&&o===a||(t.stencilFunc(e,i,a),n=e,r=i,o=a)},setOp:function(e,i,n){a===e&&s===i&&l===n||(t.stencilOp(e,i,n),a=e,s=i,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,h=null}}},a=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),l=new Uint8Array(a),h=new Uint8Array(a),c={},u=null,p=null,d=null,f=null,m=null,v=null,g=null,y=null,_=null,x=!1,b=null,w=null,E=null,M=null,q=null,S=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1,C=0,R=t.getParameter(t.VERSION);-1!==R.indexOf("WebGL")?(C=parseFloat(/^WebGL\ ([0-9])/.exec(R)[1]),L=C>=1):-1!==R.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(R)[1]),L=C>=2);var N=null,B={},V=new ui,G=new ui;function H(e,i,n){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<n;a++)t.texImage2D(i+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}var W={};function X(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function Y(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}function Z(e,n,r,o,a,s,l,h){if(e!==D?X(t.BLEND):Y(t.BLEND),e!==j){if(e!==d||h!==x)switch(e){case k:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case F:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case U:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}f=null,m=null,v=null,g=null,y=null,_=null}else a=a||n,s=s||r,l=l||o,n===f&&a===g||(t.blendEquationSeparate(i.convert(n),i.convert(a)),f=n,g=a),r===m&&o===v&&s===y&&l===_||(t.blendFuncSeparate(i.convert(r),i.convert(o),i.convert(s),i.convert(l)),m=r,v=o,y=s,_=l);d=e,x=h}function J(e){b!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),b=e)}function K(e){e!==A?(X(t.CULL_FACE),e!==w&&(e===T?t.cullFace(t.BACK):e===P?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Y(t.CULL_FACE),w=e}function Q(e,i,n){e?(X(t.POLYGON_OFFSET_FILL),M===i&&q===n||(t.polygonOffset(i,n),M=i,q=n)):Y(t.POLYGON_OFFSET_FILL)}function $(e){void 0===e&&(e=t.TEXTURE0+S-1),N!==e&&(t.activeTexture(e),N=e)}return W[t.TEXTURE_2D]=H(t.TEXTURE_2D,t.TEXTURE_2D,1),W[t.TEXTURE_CUBE_MAP]=H(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),n.setClear(0,0,0,1),r.setClear(1),o.setClear(0),X(t.DEPTH_TEST),r.setFunc(lt),J(!1),K(T),X(t.CULL_FACE),X(t.BLEND),Z(z),{buffers:{color:n,depth:r,stencil:o},initAttributes:function(){for(var t=0,e=s.length;t<e;t++)s[t]=0},enableAttribute:function(i){s[i]=1,0===l[i]&&(t.enableVertexAttribArray(i),l[i]=1),0!==h[i]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),h[i]=0)},enableAttributeAndDivisor:function(i,n){s[i]=1,0===l[i]&&(t.enableVertexAttribArray(i),l[i]=1),h[i]!==n&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,n),h[i]=n)},disableUnusedAttributes:function(){for(var e=0,i=l.length;e!==i;++e)l[e]!==s[e]&&(t.disableVertexAttribArray(e),l[e]=0)},enable:X,disable:Y,getCompressedTextureFormats:function(){if(null===u&&(u=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)u.push(i[n]);return u},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:Z,setMaterial:function(e,i){e.side===O?Y(t.CULL_FACE):X(t.CULL_FACE);var o=e.side===I;i&&(o=!o),J(o),!0===e.transparent?Z(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Z(D),r.setFunc(e.depthFunc),r.setTest(e.depthTest),r.setMask(e.depthWrite),n.setMask(e.colorWrite),Q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:J,setCullFace:K,setLineWidth:function(e){e!==E&&(L&&t.lineWidth(e),E=e)},setPolygonOffset:Q,setScissorTest:function(e){e?X(t.SCISSOR_TEST):Y(t.SCISSOR_TEST)},activeTexture:$,bindTexture:function(e,i){null===N&&$();var n=B[N];void 0===n&&(n={type:void 0,texture:void 0},B[N]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||W[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===V.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),V.copy(e))},viewport:function(e){!1===G.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),G.copy(e))},reset:function(){for(var e=0;e<l.length;e++)1===l[e]&&(t.disableVertexAttribArray(e),l[e]=0);c={},u=null,N=null,B={},p=null,d=null,b=null,w=null,n.reset(),r.reset(),o.reset()}}}(p,d,dt)).scissor(Mt.copy(Ce).multiplyScalar(Ae)),m.viewport(Et.copy(Te).multiplyScalar(Ae)),v=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(i,n,r){switch(r=r||1,e.calls++,n){case t.TRIANGLES:e.triangles+=r*(i/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=r*(i-2);break;case t.LINES:e.lines+=r*(i/2);break;case t.LINE_STRIP:e.lines+=r*(i-1);break;case t.LINE_LOOP:e.lines+=r*i;break;case t.POINTS:e.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(p),g=new function(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}},y=new Go(p,d,m,g,f,dt,v),_=new Pi(p),x=new function(t,e,i){var n={},r={};function o(t){var a=t.target,s=n[a.id];null!==s.index&&e.remove(s.index);for(var l in s.attributes)e.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete n[a.id];var h=r[a.id];h&&(e.remove(h),delete r[a.id]),(h=r[s.id])&&(e.remove(h),delete r[s.id]),i.memory.geometries--}return{get:function(t,e){var r=n[e.id];return r||(e.addEventListener("dispose",o),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new On).setFromObject(t)),r=e._bufferGeometry),n[e.id]=r,i.memory.geometries++,r)},update:function(i){var n=i.index,r=i.attributes;null!==n&&e.update(n,t.ELEMENT_ARRAY_BUFFER);for(var o in r)e.update(r[o],t.ARRAY_BUFFER);var a=i.morphAttributes;for(var o in a)for(var s=a[o],l=0,h=s.length;l<h;l++)e.update(s[l],t.ARRAY_BUFFER)},getWireframeAttribute:function(i){var n=r[i.id];if(n)return n;var o,a=[],s=i.index,l=i.attributes;if(null!==s)for(var h=0,c=(o=s.array).length;h<c;h+=3){var u=o[h+0],p=o[h+1],d=o[h+2];a.push(u,p,p,d,d,u)}else for(h=0,c=(o=l.position.array).length/3-1;h<c;h+=3)u=h+0,p=h+1,d=h+2,a.push(u,p,p,d,d,u);return n=new(bn(a)>65535?gn:mn)(a,1),e.update(n,t.ELEMENT_ARRAY_BUFFER),r[i.id]=n,n}}}(p,_,v),b=new function(t,e){var i={};return{update:function(n){var r=e.render.frame,o=n.geometry,a=t.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),t.update(a),i[a.id]=r),a},dispose:function(){i={}}}}(x,v),L=new function(t){var e={},i=new Float32Array(8);return{update:function(n,r,o,a){var s=n.morphTargetInfluences,l=s.length,h=e[r.id];if(void 0===h){h=[];for(var c=0;c<l;c++)h[c]=[c,0];e[r.id]=h}var u=o.morphTargets&&r.morphAttributes.position,p=o.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++)0!==(d=h[c])[1]&&(u&&r.removeAttribute("morphTarget"+c),p&&r.removeAttribute("morphNormal"+c));for(c=0;c<l;c++)(d=h[c])[0]=c,d[1]=s[c];for(h.sort(vr),c=0;c<8;c++){var d;if(d=h[c]){var f=d[0],m=d[1];if(m){u&&r.addAttribute("morphTarget"+c,u[f]),p&&r.addAttribute("morphNormal"+c,p[f]),i[c]=m;continue}}i[c]=0}a.getUniforms().setValue(t,"morphTargetInfluences",i)}}}(p),w=new fo(ft,d,f),E=new go,q=new zo,S=new function(t,e,i,n){var r,o,a,s=new Ei(0),l=0;function h(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),h(s,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){h(s,l=t)},render:function(e,n,c,u){var p=n.background;null===p?h(s,l):p&&p.isColor&&(h(p,1),u=!0),(t.autoClear||u)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&p.isCubeTexture?(void 0===a&&((a=new mr(new Nn(1,1,1),new ur({uniforms:Ti.cube.uniforms,vertexShader:Ti.cube.vertexShader,fragmentShader:Ti.cube.fragmentShader,side:I,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},i.update(a.geometry)),a.material.uniforms.tCube.value=p,e.push(a,a.geometry,a.material,0,null)):p&&p.isTexture&&(void 0===r&&(r=new Qi(-1,1,1,-1,0,1),o=new mr(new Dn(2,2),new cr({depthTest:!1,depthWrite:!1,fog:!1})),i.update(o.geometry)),o.material.map=p,t.renderBufferDirect(r,null,o.geometry,o.material,o,null))}}}(ft,m,x,s),C=new function(t,e,i){var n;this.setMode=function(t){n=t},this.render=function(e,r){t.drawArrays(n,e,r),i.update(r,n)},this.renderInstances=function(t,r,o){var a=e.get("ANGLE_instanced_arrays");if(null!==a){var s=t.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(n,0,o,t.maxInstancedCount)):a.drawArraysInstancedANGLE(n,r,o,t.maxInstancedCount),i.update(o,n,t.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(p,d,v),N=new function(t,e,i){var n,r,o;this.setMode=function(t){n=t},this.setIndex=function(t){r=t.type,o=t.bytesPerElement},this.render=function(e,a){t.drawElements(n,a,r,e*o),i.update(a,n)},this.renderInstances=function(t,a,s){var l=e.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(n,s,r,a*o,t.maxInstancedCount),i.update(s,n,t.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(p,d,v),B=new Vo(ft,p,m,y,f),v.programs=w.programs,ft.context=p,ft.capabilities=f,ft.extensions=d,ft.properties=g,ft.renderLists=E,ft.state=m,ft.info=v}Ve();var We=new Xo(ft);this.vr=We;var Xe=new Uo(ft,b,f.maxTextureSize);function Ye(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),mt=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),mt=!1,Ve()}function Je(t){var e,i=t.target;i.removeEventListener("dispose",Je),Ke(e=i),g.remove(e)}function Ke(t){var e=g.get(t).program;t.program=void 0,void 0!==e&&w.releaseProgram(e)}this.shadowMap=Xe,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(t){void 0!==t&&(Ae=t,this.setSize(Tt,qe,!1))},this.getSize=function(){return{width:Tt,height:qe}},this.setSize=function(t,i,n){var r=We.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Tt=t,qe=i,e.width=t*Ae,e.height=i*Ae,!1!==n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(){return{width:Tt*Ae,height:qe*Ae}},this.setDrawingBufferSize=function(t,i,n){Tt=t,qe=i,Ae=n,e.width=t*n,e.height=i*n,this.setViewport(0,0,t,i)},this.getCurrentViewport=function(){return Et},this.setViewport=function(t,e,i,n){Te.set(t,qe-e-n,i,n),m.viewport(Et.copy(Te).multiplyScalar(Ae))},this.setScissor=function(t,e,i,n){Ce.set(t,qe-e-n,i,n),m.scissor(Mt.copy(Ce).multiplyScalar(Ae))},this.setScissorTest=function(t){m.setScissorTest(Ie=t)},this.getClearColor=function(){return S.getClearColor()},this.setClearColor=function(){S.setClearColor.apply(S,arguments)},this.getClearAlpha=function(){return S.getClearAlpha()},this.setClearAlpha=function(){S.setClearAlpha.apply(S,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=p.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=p.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=p.STENCIL_BUFFER_BIT),p.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ye,!1),e.removeEventListener("webglcontextrestored",Ze,!1),E.dispose(),q.dispose(),g.dispose(),b.dispose(),We.dispose(),ni()},this.renderBufferImmediate=function(t,e,i){m.initAttributes();var n=g.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,n.position),p.bufferData(p.ARRAY_BUFFER,t.positionArray,p.DYNAMIC_DRAW),m.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,p.FLOAT,!1,0,0)),t.hasNormals){if(p.bindBuffer(p.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&!0===i.flatShading)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,h=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=h,s[o+2]=c,s[o+3]=l,s[o+4]=h,s[o+5]=c,s[o+6]=l,s[o+7]=h,s[o+8]=c}p.bufferData(p.ARRAY_BUFFER,t.normalArray,p.DYNAMIC_DRAW),m.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,p.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(p.bindBuffer(p.ARRAY_BUFFER,n.uv),p.bufferData(p.ARRAY_BUFFER,t.uvArray,p.DYNAMIC_DRAW),m.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,p.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==R&&(p.bindBuffer(p.ARRAY_BUFFER,n.color),p.bufferData(p.ARRAY_BUFFER,t.colorArray,p.DYNAMIC_DRAW),m.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,p.FLOAT,!1,0,0)),m.disableUnusedAttributes(),p.drawArrays(p.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,o){var a=r.isMesh&&r.matrixWorld.determinant()<0;m.setMaterial(n,a);var s=hi(t,e,n,r),l=i.id+"_"+s.id+"_"+(!0===n.wireframe),h=!1;l!==xt&&(xt=l,h=!0),r.morphTargetInfluences&&(L.update(r,i,n,s),h=!0);var c,u=i.index,f=i.attributes.position,v=1;!0===n.wireframe&&(u=x.getWireframeAttribute(i),v=2);var g=C;null!==u&&(c=_.get(u),(g=N).setIndex(c)),h&&(!function(t,e,i,n){if(i&&i.isInstancedBufferGeometry&&null===d.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0);m.initAttributes();var r=i.attributes,o=e.getAttributes(),a=t.defaultAttributeValues;for(var s in o){var l=o[s];if(l>=0){var h=r[s];if(void 0!==h){var c=h.normalized,u=h.itemSize,f=_.get(h);if(void 0===f)continue;var v=f.buffer,g=f.type,y=f.bytesPerElement;if(h.isInterleavedBufferAttribute){var x=h.data,b=x.stride,w=h.offset;x&&x.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(l,x.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=x.meshPerAttribute*x.count)):m.enableAttribute(l),p.bindBuffer(p.ARRAY_BUFFER,v),p.vertexAttribPointer(l,u,g,c,b*y,(n*b+w)*y)}else h.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(l,h.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=h.meshPerAttribute*h.count)):m.enableAttribute(l),p.bindBuffer(p.ARRAY_BUFFER,v),p.vertexAttribPointer(l,u,g,c,0,n*u*y)}else if(void 0!==a){var E=a[s];if(void 0!==E)switch(E.length){case 2:p.vertexAttrib2fv(l,E);break;case 3:p.vertexAttrib3fv(l,E);break;case 4:p.vertexAttrib4fv(l,E);break;default:p.vertexAttrib1fv(l,E)}}}}m.disableUnusedAttributes()}(n,s,i),null!==u&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==u?y=u.count:void 0!==f&&(y=f.count);var b=i.drawRange.start*v,w=i.drawRange.count*v,E=null!==o?o.start*v:0,M=null!==o?o.count*v:1/0,q=Math.max(b,E),A=Math.min(y,b+w,E+M)-1,T=Math.max(0,A-q+1);if(0!==T){if(r.isMesh)if(!0===n.wireframe)m.setLineWidth(n.wireframeLinewidth*ke()),g.setMode(p.LINES);else switch(r.drawMode){case Pe:g.setMode(p.TRIANGLES);break;case Se:g.setMode(p.TRIANGLE_STRIP);break;case Le:g.setMode(p.TRIANGLE_FAN)}else if(r.isLine){var P=n.linewidth;void 0===P&&(P=1),m.setLineWidth(P*ke()),r.isLineSegments?g.setMode(p.LINES):r.isLineLoop?g.setMode(p.LINE_LOOP):g.setMode(p.LINE_STRIP)}else r.isPoints&&g.setMode(p.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&g.renderInstances(i,q,T):g.render(q,T)}},this.compile=function(t,e){(u=q.get(t,e)).init(),t.traverse(function(t){t.isLight&&(u.pushLight(t),t.castShadow&&u.pushShadow(t))}),u.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)li(e.material[i],t.fog,e);else li(e.material,t.fog,e)})};var Qe,$e,ti,ei=!1,ii=null;function ni(){ei=!1}function ri(){var t=We.getDevice();t&&t.isPresenting?t.requestAnimationFrame(oi):window.requestAnimationFrame(oi)}function oi(t){!1!==ei&&(ii(t),ri())}function ai(t,e,i,n){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,l=a.geometry,h=void 0===n?a.material:n,c=a.group;if(i.isArrayCamera){wt=i;for(var u=i.cameras,p=0,d=u.length;p<d;p++){var f=u[p];if(s.layers.test(f.layers)){var v=f.bounds,g=v.x*Tt,y=v.y*qe,_=v.z*Tt,x=v.w*qe;m.viewport(Et.set(g,y,_,x).multiplyScalar(Ae)),si(s,e,f,l,h,c)}}}else wt=null,si(s,e,i,l,h,c)}}function si(t,e,i,n,r,o){if(t.onBeforeRender(ft,e,i,n,r,o),u=q.get(e,wt||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&t.matrixWorld.determinant()<0;m.setMaterial(r,a);var s=hi(i,e.fog,r,t);xt="",l=s,h=r,t.render(function(t){ft.renderBufferImmediate(t,l,h)})}else ft.renderBufferDirect(i,e.fog,n,r,t,o);var l,h;t.onAfterRender(ft,e,i,n,r,o),u=q.get(e,wt||i)}function li(t,e,i){var n=g.get(t),r=u.state.lights,o=u.state.shadowsArray,a=w.getParameters(t,r.state,o,e,Re.numPlanes,Re.numIntersection,i),s=w.getProgramCode(t,a),l=n.program,h=!0;if(void 0===l)t.addEventListener("dispose",Je);else if(l.code!==s)Ke(t);else if(n.lightsHash!==r.state.hash)g.update(t,"lightsHash",r.state.hash),h=!1;else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var c=Ti[a.shaderID];n.shader={name:t.type,uniforms:bi.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(n.shader,ft),l=w.acquireProgram(t,n.shader,a,s),n.program=l,t.program=l}var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<ft.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(d=0;d<ft.maxMorphNormals;d++)p["morphNormal"+d]>=0&&t.numSupportedMorphNormals++}var f=n.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Re.numPlanes,n.numIntersection=Re.numIntersection,f.clippingPlanes=Re.uniform),n.fog=e,n.lightsHash=r.state.hash,t.lights&&(f.ambientLightColor.value=r.state.ambient,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=n.program.getUniforms(),v=io.seqWithValue(m.seq,f);n.uniformsList=v}function hi(t,e,i,n){At=0;var r=g.get(i),o=u.state.lights;if(Ne&&(Be||t!==bt)){var a=t===bt&&i.id===_t;Re.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,a)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==o.state.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Re.numPlanes&&r.numIntersection===Re.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(li(i,e,n),i.needsUpdate=!1);var s,l,h,c,d,v,y,_,x,b,w,E,M,q,A,T,P=!1,S=!1,L=!1,C=r.program,I=C.getUniforms(),O=r.shader.uniforms;if(m.useProgram(C.program)&&(P=!0,S=!0,L=!0),i.id!==_t&&(_t=i.id,S=!0),P||t!==bt){if(I.setValue(p,"projectionMatrix",t.projectionMatrix),f.logarithmicDepthBuffer&&I.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),bt!==(wt||t)&&(bt=wt||t,S=!0,L=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var R=I.map.cameraPosition;void 0!==R&&R.setValue(p,ze.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&I.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){I.setOptional(p,n,"bindMatrix"),I.setOptional(p,n,"bindMatrixInverse");var N=n.skeleton;if(N){var B=N.bones;if(f.floatVertexTextures){if(void 0===N.boneTexture){var D=Math.sqrt(4*B.length);D=Fe.ceilPowerOfTwo(D),D=Math.max(D,4);var z=new Float32Array(D*D*4);z.set(N.boneMatrices);var k=new fi(z,D,D,Kt,Vt);k.needsUpdate=!0,N.boneMatrices=z,N.boneTexture=k,N.boneTextureSize=D}I.setValue(p,"boneTexture",N.boneTexture),I.setValue(p,"boneTextureSize",N.boneTextureSize)}else I.setOptional(p,N,"boneMatrices")}}return S&&(I.setValue(p,"toneMappingExposure",ft.toneMappingExposure),I.setValue(p,"toneMappingWhitePoint",ft.toneMappingWhitePoint),i.lights&&(T=L,(A=O).ambientLightColor.needsUpdate=T,A.directionalLights.needsUpdate=T,A.pointLights.needsUpdate=T,A.spotLights.needsUpdate=T,A.rectAreaLights.needsUpdate=T,A.hemisphereLights.needsUpdate=T),e&&i.fog&&(q=e,(M=O).fogColor.value=q.color,q.isFog?(M.fogNear.value=q.near,M.fogFar.value=q.far):q.isFogExp2&&(M.fogDensity.value=q.density)),i.isMeshBasicMaterial?ci(O,i):i.isMeshLambertMaterial?(ci(O,i),w=O,(E=i).emissiveMap&&(w.emissiveMap.value=E.emissiveMap)):i.isMeshPhongMaterial?(ci(O,i),i.isMeshToonMaterial?(pi(x=O,b=i),b.gradientMap&&(x.gradientMap.value=b.gradientMap)):pi(O,i)):i.isMeshStandardMaterial?(ci(O,i),i.isMeshPhysicalMaterial?(_=i,(y=O).clearCoat.value=_.clearCoat,y.clearCoatRoughness.value=_.clearCoatRoughness,di(y,_)):di(O,i)):i.isMeshDepthMaterial?(ci(O,i),d=O,(v=i).displacementMap&&(d.displacementMap.value=v.displacementMap,d.displacementScale.value=v.displacementScale,d.displacementBias.value=v.displacementBias)):i.isMeshDistanceMaterial?(ci(O,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(O,i)):i.isMeshNormalMaterial?(ci(O,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale);e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale));e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(O,i)):i.isLineBasicMaterial?(c=i,(h=O).diffuse.value=c.color,h.opacity.value=c.opacity,i.isLineDashedMaterial&&(l=i,(s=O).dashSize.value=l.dashSize,s.totalSize.value=l.dashSize+l.gapSize,s.scale.value=l.scale)):i.isPointsMaterial?function(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Ae,t.scale.value=.5*qe,t.map.value=e.map,null!==e.map){if(!0===e.map.matrixAutoUpdate){var i=e.map.offset,n=e.map.repeat,r=e.map.rotation,o=e.map.center;e.map.matrix.setUvTransform(i.x,i.y,n.x,n.y,r,o.x,o.y)}t.uvTransform.value.copy(e.map.matrix)}}(O,i):i.isShadowMaterial&&(O.color.value=i.color,O.opacity.value=i.opacity),void 0!==O.ltc_1&&(O.ltc_1.value=Ai.LTC_1),void 0!==O.ltc_2&&(O.ltc_2.value=Ai.LTC_2),io.upload(p,r.uniformsList,O,ft)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(io.upload(p,r.uniformsList,O,ft),i.uniformsNeedUpdate=!1),I.setValue(p,"modelViewMatrix",n.modelViewMatrix),I.setValue(p,"normalMatrix",n.normalMatrix),I.setValue(p,"modelMatrix",n.matrixWorld),C}function ci(t,e){var i;if(t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=g.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){if(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate){var n=i.offset,r=i.repeat,o=i.rotation,a=i.center;i.matrix.setUvTransform(n.x,n.y,r.x,r.y,o,a.x,a.y)}t.uvTransform.value.copy(i.matrix)}}function pi(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function di(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}this.animate=function(t){null!==(ii=t)?ei||(ri(),ei=!0):ni()},this.render=function(t,e,i,n){if(e&&e.isCamera){if(!mt){xt="",_t=-1,bt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),We.enabled&&(e=We.getCamera(e)),(u=q.get(t,e)).init(),t.onBeforeRender(ft,t,e,i),De.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Oe.setFromMatrix(De),Be=this.localClippingEnabled,Ne=Re.init(this.clippingPlanes,Be,e),(c=E.get(t,e)).init(),function t(e,i,n){if(!1===e.visible)return;var r=e.layers.test(i.layers);if(r)if(e.isLight)u.pushLight(e),e.castShadow&&u.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!Oe.intersectsSprite(e)||u.pushSprite(e);else if(e.isImmediateRenderObject)n&&ze.setFromMatrixPosition(e.matrixWorld).applyMatrix4(De),c.push(e,null,e.material,ze.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Oe.intersectsObject(e))){n&&ze.setFromMatrixPosition(e.matrixWorld).applyMatrix4(De);var o=b.update(e),a=e.material;if(Array.isArray(a))for(var s=o.groups,l=0,h=s.length;l<h;l++){var p=s[l],d=a[p.materialIndex];d&&d.visible&&c.push(e,o,d,ze.z,p)}else a.visible&&c.push(e,o,a,ze.z,null)}var f=e.children;for(var l=0,h=f.length;l<h;l++)t(f[l],i,n)}(t,e,ft.sortObjects),!0===ft.sortObjects&&c.sort(),Ne&&Re.beginShadows();var r=u.state.shadowsArray;Xe.render(r,t,e),u.setupLights(e),Ne&&Re.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),S.render(c,t,e,n);var o=c.opaque,a=c.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&ai(o,t,e,s),a.length&&ai(a,t,e,s)}else o.length&&ai(o,t,e),a.length&&ai(a,t,e);var l=u.state.spritesArray;B.render(l,t,e),i&&y.updateRenderTargetMipmap(i),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),t.onAfterRender(ft,t,e),We.enabled&&We.submitFrame(),c=null,u=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=At;return t>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+f.maxTextures),At+=1,t},this.setTexture2D=(Qe=!1,function(t,e){t&&t.isWebGLRenderTarget&&(Qe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Qe=!0),t=t.texture),y.setTexture2D(t,e)}),this.setTexture=($e=!1,function(t,e){$e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),$e=!0),y.setTexture2D(t,e)}),this.setTextureCube=(ti=!1,function(t,e){t&&t.isWebGLRenderTargetCube&&(ti||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ti=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,e):y.setTextureCubeDynamic(t,e)}),this.getRenderTarget=function(){return vt},this.setRenderTarget=function(t){vt=t,t&&void 0===g.get(t).__webglFramebuffer&&y.setupRenderTarget(t);var e=null,i=!1;if(t){var n=g.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=n[t.activeCubeFace],i=!0):e=n,Et.copy(t.viewport),Mt.copy(t.scissor),qt=t.scissorTest}else Et.copy(Te).multiplyScalar(Ae),Mt.copy(Ce).multiplyScalar(Ae),qt=Ie;if(yt!==e&&(p.bindFramebuffer(p.FRAMEBUFFER,e),yt=e),m.viewport(Et),m.scissor(Mt),m.setScissorTest(qt),i){var r=g.get(t.texture);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,o){if(t&&t.isWebGLRenderTarget){var a=g.get(t).__webglFramebuffer;if(a){var s=!1;a!==yt&&(p.bindFramebuffer(p.FRAMEBUFFER,a),s=!0);try{var l=t.texture,h=l.format,c=l.type;if(h!==Kt&&dt.convert(h)!==p.getParameter(p.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Dt||dt.convert(c)===p.getParameter(p.IMPLEMENTATION_COLOR_READ_TYPE)||c===Vt&&(d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||c===Gt&&d.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&p.readPixels(e,i,n,r,dt.convert(h),dt.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(p.FRAMEBUFFER,yt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,o=dt.convert(e.format);this.setTexture2D(e,0),p.copyTexImage2D(p.TEXTURE_2D,i||0,o,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,o=e.image.height,a=dt.convert(i.format),s=dt.convert(i.type),l=e.isDataTexture?e.image.data:e.image;this.setTexture2D(i,0),p.texSubImage2D(p.TEXTURE_2D,n||0,t.x,t.y,r,o,a,s,l)}}function Zo(t,e){this.name="",this.color=new Ei(t),this.density=void 0!==e?e:25e-5}function Jo(t,e,i){this.name="",this.color=new Ei(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Ko(){Ji.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Qo(t){hr.call(this),this.type="SpriteMaterial",this.color=new Ei(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function $o(t){Ji.call(this),this.type="Sprite",this.material=void 0!==t?t:new Qo,this.center=new Ue(.5,.5)}function ta(){Ji.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ea(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new je)}}function ia(){Ji.call(this),this.type="Bone"}function na(t,e){mr.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new je,this.bindMatrixInverse=new je;var i=new ea(this.initBones());this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function ra(t){hr.call(this),this.type="LineBasicMaterial",this.color=new Ei(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function oa(t,e,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new aa(t,e);Ji.call(this),this.type="Line",this.geometry=void 0!==t?t:new On,this.material=void 0!==e?e:new ra({color:16777215*Math.random()})}function aa(t,e){oa.call(this,t,e),this.type="LineSegments"}function sa(t,e){oa.call(this,t,e),this.type="LineLoop"}function la(t){hr.call(this),this.type="PointsMaterial",this.color=new Ei(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function ha(t,e){Ji.call(this),this.type="Points",this.geometry=void 0!==t?t:new On,this.material=void 0!==e?e:new la({color:16777215*Math.random()})}function ca(){Ji.call(this),this.type="Group"}function ua(t,e,i,n,r,o,a,s,l){ci.call(this,t,e,i,n,r,o,a,s,l),this.generateMipmaps=!1}function pa(t,e,i,n,r,o,a,s,l,h,c,u){ci.call(this,null,o,a,s,l,h,n,r,c,u),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function da(t,e,i,n,r,o,a,s,l,h){if((h=void 0!==h?h:te)!==te&&h!==ee)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===te&&(i=Ft),void 0===i&&h===ee&&(i=Yt),ci.call(this,null,n,r,o,a,s,h,i,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:Ct,this.minFilter=void 0!==s?s:Ct,this.flipY=!1,this.generateMipmaps=!1}function fa(t){On.call(this),this.type="WireframeGeometry";var e,i,n,r,o,a,s,l,h,c,u=[],p=[0,0],d={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,n=m.length;e<n;e++){var v=m[e];for(i=0;i<3;i++)s=v[f[i]],l=v[f[(i+1)%3]],p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===d[h=p[0]+","+p[1]]&&(d[h]={index1:p[0],index2:p[1]})}for(h in d)a=d[h],c=t.vertices[a.index1],u.push(c.x,c.y,c.z),c=t.vertices[a.index2],u.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,_,x,b,w,E;if(c=new Ge,null!==t.index){for(g=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,o=_.length;r<o;++r)for(e=b=(x=_[r]).start,n=b+x.count;e<n;e+=3)for(i=0;i<3;i++)s=y.getX(e+i),l=y.getX(e+(i+1)%3),p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===d[h=p[0]+","+p[1]]&&(d[h]={index1:p[0],index2:p[1]});for(h in d)a=d[h],c.fromBufferAttribute(g,a.index1),u.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),u.push(c.x,c.y,c.z)}else for(e=0,n=(g=t.attributes.position).count/3;e<n;e++)for(i=0;i<3;i++)w=3*e+i,c.fromBufferAttribute(g,w),u.push(c.x,c.y,c.z),E=3*e+(i+1)%3,c.fromBufferAttribute(g,E),u.push(c.x,c.y,c.z)}this.addAttribute("position",new yn(u,3))}function ma(t,e,i){hn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new va(t,e,i)),this.mergeVertices()}function va(t,e,i){On.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,o=[],a=[],s=[],l=[],h=new Ge,c=new Ge,u=new Ge,p=new Ge,d=new Ge,f=e+1;for(n=0;n<=i;n++){var m=n/i;for(r=0;r<=e;r++){var v=r/e;t(v,m,c),a.push(c.x,c.y,c.z),v-1e-5>=0?(t(v-1e-5,m,u),p.subVectors(c,u)):(t(v+1e-5,m,u),p.subVectors(u,c)),m-1e-5>=0?(t(v,m-1e-5,u),d.subVectors(c,u)):(t(v,m+1e-5,u),d.subVectors(u,c)),h.crossVectors(p,d).normalize(),s.push(h.x,h.y,h.z),l.push(v,m)}}for(n=0;n<i;n++)for(r=0;r<e;r++){var g=n*f+r,y=n*f+r+1,_=(n+1)*f+r+1,x=(n+1)*f+r;o.push(g,y,x),o.push(y,_,x)}this.setIndex(o),this.addAttribute("position",new yn(a,3)),this.addAttribute("normal",new yn(s,3)),this.addAttribute("uv",new yn(l,2))}function ga(t,e,i,n){hn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new ya(t,e,i,n)),this.mergeVertices()}function ya(t,e,i,n){On.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1;var r=[],o=[];function a(t,e,i,n){var r,o,a=Math.pow(2,n),l=[];for(r=0;r<=a;r++){l[r]=[];var h=t.clone().lerp(i,r/a),c=e.clone().lerp(i,r/a),u=a-r;for(o=0;o<=u;o++)l[r][o]=0===o&&r===a?h:h.clone().lerp(c,o/u)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var p=Math.floor(o/2);o%2==0?(s(l[r][p+1]),s(l[r+1][p]),s(l[r][p])):(s(l[r][p+1]),s(l[r+1][p+1]),s(l[r+1][p]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function h(t,e,i,n){n<0&&1===t.x&&(o[e]=t.x-1),0===i.x&&0===i.z&&(o[e]=n/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var i=new Ge,n=new Ge,r=new Ge,o=0;o<e.length;o+=3)l(e[o+0],i),l(e[o+1],n),l(e[o+2],r),a(i,n,r,t)}(n=n||0),function(t){for(var e=new Ge,i=0;i<r.length;i+=3)e.x=r[i+0],e.y=r[i+1],e.z=r[i+2],e.normalize().multiplyScalar(t),r[i+0]=e.x,r[i+1]=e.y,r[i+2]=e.z}(i),function(){for(var t=new Ge,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var i=c(t)/2/Math.PI+.5,n=(a=t,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(i,1-n)}var a;(function(){for(var t=new Ge,e=new Ge,i=new Ge,n=new Ge,a=new Ue,s=new Ue,l=new Ue,u=0,p=0;u<r.length;u+=9,p+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),i.set(r[u+6],r[u+7],r[u+8]),a.set(o[p+0],o[p+1]),s.set(o[p+2],o[p+3]),l.set(o[p+4],o[p+5]),n.copy(t).add(e).add(i).divideScalar(3);var d=c(n);h(a,p+0,t,d),h(s,p+2,e,d),h(l,p+4,i,d)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],i=o[t+2],n=o[t+4],r=Math.max(e,i,n),a=Math.min(e,i,n);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),i<.2&&(o[t+2]+=1),n<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new yn(r,3)),this.addAttribute("normal",new yn(r.slice(),3)),this.addAttribute("uv",new yn(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function _a(t,e){hn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new xa(t,e)),this.mergeVertices()}function xa(t,e){ya.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ba(t,e){hn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new wa(t,e)),this.mergeVertices()}function wa(t,e){ya.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ea(t,e){hn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ma(t,e)),this.mergeVertices()}function Ma(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];ya.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function qa(t,e){hn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Aa(t,e)),this.mergeVertices()}function Aa(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n];ya.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ta(t,e,i,n,r,o){hn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Pa(t,e,i,n,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Pa(t,e,i,n,r){On.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},e=e||64,i=i||1,n=n||8,r=r||!1;var o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Ge,h=new Ge,c=new Ue,u=new Ge,p=[],d=[],f=[],m=[];function v(r){u=t.getPointAt(r/e,u);var a=o.normals[r],c=o.binormals[r];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);h.x=v*a.x+m*c.x,h.y=v*a.y+m*c.y,h.z=v*a.z+m*c.z,h.normalize(),d.push(h.x,h.y,h.z),l.x=u.x+i*h.x,l.y=u.y+i*h.y,l.z=u.z+i*h.z,p.push(l.x,l.y,l.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===r?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=n;s++)c.x=a/e,c.y=s/n,f.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=n;a++){var t=(n+1)*(s-1)+(a-1),i=(n+1)*s+(a-1),r=(n+1)*s+a,o=(n+1)*(s-1)+a;m.push(t,i,o),m.push(i,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new yn(p,3)),this.addAttribute("normal",new yn(d,3)),this.addAttribute("uv",new yn(f,2))}function Sa(t,e,i,n,r,o,a){hn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new La(t,e,i,n,r,o)),this.mergeVertices()}function La(t,e,i,n,r,o){On.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,o=o||3;var a,s,l=[],h=[],c=[],u=[],p=new Ge,d=new Ge,f=new Ge,m=new Ge,v=new Ge,g=new Ge,y=new Ge;for(a=0;a<=i;++a){var _=a/i*r*Math.PI*2;for(T(_,r,o,t,f),T(_+.01,r,o,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=n;++s){var x=s/n*Math.PI*2,b=-e*Math.cos(x),w=e*Math.sin(x);p.x=f.x+(b*y.x+w*v.x),p.y=f.y+(b*y.y+w*v.y),p.z=f.z+(b*y.z+w*v.z),h.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),c.push(d.x,d.y,d.z),u.push(a/i),u.push(s/n)}}for(s=1;s<=i;s++)for(a=1;a<=n;a++){var E=(n+1)*(s-1)+(a-1),M=(n+1)*s+(a-1),q=(n+1)*s+a,A=(n+1)*(s-1)+a;l.push(E,M,A),l.push(M,q,A)}function T(t,e,i,n,r){var o=Math.cos(t),a=Math.sin(t),s=i/e*t,l=Math.cos(s);r.x=n*(2+l)*.5*o,r.y=n*(2+l)*a*.5,r.z=n*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new yn(h,3)),this.addAttribute("normal",new yn(c,3)),this.addAttribute("uv",new yn(u,2))}function Ca(t,e,i,n,r){hn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new Ia(t,e,i,n,r)),this.mergeVertices()}function Ia(t,e,i,n,r){On.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var o,a,s=[],l=[],h=[],c=[],u=new Ge,p=new Ge,d=new Ge;for(o=0;o<=i;o++)for(a=0;a<=n;a++){var f=a/n*r,m=o/i*Math.PI*2;p.x=(t+e*Math.cos(m))*Math.cos(f),p.y=(t+e*Math.cos(m))*Math.sin(f),p.z=e*Math.sin(m),l.push(p.x,p.y,p.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),d.subVectors(p,u).normalize(),h.push(d.x,d.y,d.z),c.push(a/n),c.push(o/i)}for(o=1;o<=i;o++)for(a=1;a<=n;a++){var v=(n+1)*o+a-1,g=(n+1)*(o-1)+a-1,y=(n+1)*(o-1)+a,_=(n+1)*o+a;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.addAttribute("position",new yn(l,3)),this.addAttribute("normal",new yn(h,3)),this.addAttribute("uv",new yn(c,2))}ko.prototype=Object.create(hr.prototype),ko.prototype.constructor=ko,ko.prototype.isMeshDepthMaterial=!0,ko.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Fo.prototype=Object.create(hr.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isMeshDistanceMaterial=!0,Fo.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},jo.prototype=Object.create(ci.prototype),jo.prototype.constructor=jo,Ho.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Ho,isPerspectiveCamera:!0,copy:function(t,e){return Ki.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Fe.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Fe.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fe.RAD2DEG*Math.atan(Math.tan(.5*Fe.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Fe.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/a,e-=o.offsetY*i/s,n*=o.width/a,i*=o.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=Ji.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Wo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Wo,isArrayCamera:!0}),Zo.prototype.isFogExp2=!0,Zo.prototype.clone=function(){return new Zo(this.color.getHex(),this.density)},Zo.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Jo.prototype.isFog=!0,Jo.prototype.clone=function(){return new Jo(this.color.getHex(),this.near,this.far)},Jo.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ko.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Ko,copy:function(t,e){return Ji.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Ji.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Qo.prototype=Object.create(hr.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isSpriteMaterial=!0,Qo.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},$o.prototype=Object.assign(Object.create(Ji.prototype),{constructor:$o,isSprite:!0,raycast:(yo=new Ge,_o=new Ge,xo=new Ge,function(t,e){_o.setFromMatrixPosition(this.matrixWorld),t.ray.closestPointToPoint(_o,yo),xo.setFromMatrixScale(this.matrixWorld);var i=xo.x*xo.y/4;if(!(_o.distanceToSquared(yo)>i)){var n=t.ray.origin.distanceTo(yo);n<t.near||n>t.far||e.push({distance:n,point:yo.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Ji.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),ta.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ta,copy:function(t){Ji.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:(Eo=new Ge,function(t,e){Eo.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(Eo);this.getObjectForDistance(i).raycast(t,e)}),update:(bo=new Ge,wo=new Ge,function(t){var e=this.levels;if(e.length>1){bo.setFromMatrixPosition(t.matrixWorld),wo.setFromMatrixPosition(this.matrixWorld);var i=bo.distanceTo(wo);e[0].object.visible=!0;for(var n=1,r=e.length;n<r&&i>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(;n<r;n++)e[n].object.visible=!1}}),toJSON:function(t){var e=Ji.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var o=i[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(ea.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new je;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i;for(e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(Mo=new je,qo=new je,function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,o=t.length;r<o;r++){var a=t[r]?t[r].matrixWorld:qo;Mo.multiplyMatrices(a,e[r]),Mo.toArray(i,16*r)}void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new ea(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),ia.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ia,isBone:!0}),na.prototype=Object.assign(Object.create(mr.prototype),{constructor:na,isSkinnedMesh:!0,initBones:function(){var t,e,i,n,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,n=this.geometry.bones.length;i<n;i++)e=this.geometry.bones[i],t=new ia,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(i=0,n=this.geometry.bones.length;i<n;i++)-1!==(e=this.geometry.bones[i]).parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[i]):this.add(r[i])}return this.updateMatrixWorld(!0),r},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var i=this.geometry.skinWeights[e];(t=1/i.manhattanLength())!==1/0?i.multiplyScalar(t):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new ui,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)n.x=r.getX(e),n.y=r.getY(e),n.z=r.getZ(e),n.w=r.getW(e),(t=1/n.manhattanLength())!==1/0?n.multiplyScalar(t):n.set(1,0,0,0),r.setXYZW(e,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){mr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ra.prototype=Object.create(hr.prototype),ra.prototype.constructor=ra,ra.prototype.isLineBasicMaterial=!0,ra.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},oa.prototype=Object.assign(Object.create(Ji.prototype),{constructor:oa,isLine:!0,computeLineDistances:(So=new Ge,Lo=new Ge,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,r=e.count;n<r;n++)So.fromBufferAttribute(e,n-1),Lo.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=So.distanceTo(Lo);t.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((i=t.lineDistances)[0]=0,n=1,r=o.length;n<r;n++)i[n]=i[n-1],i[n]+=o[n-1].distanceTo(o[n])}return this}),raycast:(Ao=new je,To=new pr,Po=new vi,function(t,e){var i=t.linePrecision,n=i*i,r=this.geometry,o=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Po.copy(r.boundingSphere),Po.applyMatrix4(o),!1!==t.ray.intersectsSphere(Po)){Ao.getInverse(o),To.copy(t.ray).applyMatrix4(Ao);var a=new Ge,s=new Ge,l=new Ge,h=new Ge,c=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var u=r.index,p=r.attributes.position.array;if(null!==u)for(var d=u.array,f=0,m=d.length-1;f<m;f+=c){var v=d[f],g=d[f+1];a.fromArray(p,3*v),s.fromArray(p,3*g),To.distanceSqToSegment(a,s,h,l)>n||(h.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(h))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else for(f=0,m=p.length/3-1;f<m;f+=c)a.fromArray(p,3*f),s.fromArray(p,3*f+3),To.distanceSqToSegment(a,s,h,l)>n||(h.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(h))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else if(r.isGeometry){var y=r.vertices,_=y.length;for(f=0;f<_-1;f+=c){var x;To.distanceSqToSegment(y[f],y[f+1],h,l)>n||(h.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(h))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),aa.prototype=Object.assign(Object.create(oa.prototype),{constructor:aa,isLineSegments:!0,computeLineDistances:(Co=new Ge,Io=new Ge,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[],n=0,r=e.count;n<r;n+=2)Co.fromBufferAttribute(e,n),Io.fromBufferAttribute(e,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Io);t.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for(i=t.lineDistances,n=0,r=o.length;n<r;n+=2)Co.copy(o[n]),Io.copy(o[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Io)}return this})}),sa.prototype=Object.assign(Object.create(oa.prototype),{constructor:sa,isLineLoop:!0}),la.prototype=Object.create(hr.prototype),la.prototype.constructor=la,la.prototype.isPointsMaterial=!0,la.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},ha.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ha,isPoints:!0,raycast:(Oo=new je,Ro=new pr,No=new vi,function(t,e){var i=this,n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),No.copy(n.boundingSphere),No.applyMatrix4(r),No.radius+=o,!1!==t.ray.intersectsSphere(No)){Oo.getInverse(r),Ro.copy(t.ray).applyMatrix4(Oo);var a=o/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Ge,h=new Ge;if(n.isBufferGeometry){var c=n.index,u=n.attributes.position.array;if(null!==c)for(var p=c.array,d=0,f=p.length;d<f;d++){var m=p[d];l.fromArray(u,3*m),y(l,m)}else{d=0;for(var v=u.length/3;d<v;d++)l.fromArray(u,3*d),y(l,d)}}else{var g=n.vertices;for(d=0,v=g.length;d<v;d++)y(g[d],d)}}function y(n,o){var a=Ro.distanceSqToPoint(n);if(a<s){Ro.closestPointToPoint(n,h),h.applyMatrix4(r);var l=t.ray.origin.distanceTo(h);if(l<t.near||l>t.far)return;e.push({distance:l,distanceToRay:Math.sqrt(a),point:h.clone(),index:o,face:null,object:i})}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ca.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ca,isGroup:!0}),ua.prototype=Object.assign(Object.create(ci.prototype),{constructor:ua,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),pa.prototype=Object.create(ci.prototype),pa.prototype.constructor=pa,pa.prototype.isCompressedTexture=!0,da.prototype=Object.create(ci.prototype),da.prototype.constructor=da,da.prototype.isDepthTexture=!0,fa.prototype=Object.create(On.prototype),fa.prototype.constructor=fa,ma.prototype=Object.create(hn.prototype),ma.prototype.constructor=ma,va.prototype=Object.create(On.prototype),va.prototype.constructor=va,ga.prototype=Object.create(hn.prototype),ga.prototype.constructor=ga,ya.prototype=Object.create(On.prototype),ya.prototype.constructor=ya,_a.prototype=Object.create(hn.prototype),_a.prototype.constructor=_a,xa.prototype=Object.create(ya.prototype),xa.prototype.constructor=xa,ba.prototype=Object.create(hn.prototype),ba.prototype.constructor=ba,wa.prototype=Object.create(ya.prototype),wa.prototype.constructor=wa,Ea.prototype=Object.create(hn.prototype),Ea.prototype.constructor=Ea,Ma.prototype=Object.create(ya.prototype),Ma.prototype.constructor=Ma,qa.prototype=Object.create(hn.prototype),qa.prototype.constructor=qa,Aa.prototype=Object.create(ya.prototype),Aa.prototype.constructor=Aa,Ta.prototype=Object.create(hn.prototype),Ta.prototype.constructor=Ta,Pa.prototype=Object.create(On.prototype),Pa.prototype.constructor=Pa,Sa.prototype=Object.create(hn.prototype),Sa.prototype.constructor=Sa,La.prototype=Object.create(On.prototype),La.prototype.constructor=La,Ca.prototype=Object.create(hn.prototype),Ca.prototype.constructor=Ca,Ia.prototype=Object.create(On.prototype),Ia.prototype.constructor=Ia;var Oa=function(t,e,i){i=i||2;var n,r,o,a,s,l,h,c=e&&e.length,u=c?e[0]*i:t.length,p=Ra(t,0,u,i,!0),d=[];if(!p)return d;if(c&&(p=function(t,e,i,n){var r,o,a,s,l,h=[];for(r=0,o=e.length;r<o;r++)a=e[r]*n,s=r<o-1?e[r+1]*n:t.length,(l=Ra(t,a,s,n,!1))===l.next&&(l.steiner=!0),h.push(Ga(l));for(h.sort(Ua),r=0;r<h.length;r++)ja(h[r],i),i=Na(i,i.next);return i}(t,e,p,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var f=i;f<u;f+=i)s=t[f],l=t[f+1],s<n&&(n=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);h=0!==(h=Math.max(o-n,a-r))?1/h:0}return Ba(p,d,i,n,r,h),d};function Ra(t,e,i,n,r){var o,a;if(r===function(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,i,n)>0)for(o=e;o<i;o+=n)a=Ka(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=Ka(o,t[o],t[o+1],a);return a&&Xa(a,a.next)&&(Qa(a),a=a.next),a}function Na(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!Xa(n,n.next)&&0!==Wa(n.prev,n,n.next))n=n.next;else{if(Qa(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Ba(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=Va(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,l,h=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<h&&(s++,n=n.nextZ);e++);for(l=h;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,h*=2}while(a>1)}(r)}(t,n,r,o);for(var s,l,h=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?za(t,n,r,o):Da(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),Qa(t),t=l.next,h=l.next;else if((t=l)===h){a?1===a?Ba(t=ka(t,e,i),e,i,n,r,o,2):2===a&&Fa(t,e,i,n,r,o):Ba(Na(t),e,i,n,r,o,1);break}}}function Da(t){var e=t.prev,i=t,n=t.next;if(Wa(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Ha(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&Wa(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function za(t,e,i,n){var r=t.prev,o=t,a=t.next;if(Wa(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,h=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=Va(s,l,e,i,n),p=Va(h,c,e,i,n),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&Ha(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Wa(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Ha(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Wa(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function ka(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!Xa(r,o)&&Ya(r,n,n.next,o)&&Za(r,o)&&Za(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),Qa(n),Qa(n.next),n=t=o),n=n.next}while(n!==t);return n}function Fa(t,e,i,n,r,o){var a,s,l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&(s=h,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ya(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(a,s)&&Za(a,s)&&Za(s,a)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(a,s))){var c=Ja(l,h);return l=Na(l,l.next),c=Na(c,c.next),Ba(l,e,i,n,r,o),void Ba(c,e,i,n,r,o)}h=h.next}l=l.next}while(l!==t)}function Ua(t,e){return t.x-e.x}function ja(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var l,h=i,c=i.x,u=i.y,p=1/0;n=i.next;for(;n!==h;)r>=n.x&&n.x>=c&&r!==n.x&&Ha(o<u?r:a,o,c,u,o<u?a:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<p||l===p&&n.x>i.x)&&Za(n,t)&&(i=n,p=l),n=n.next;return i}(t,e)){var i=Ja(e,t);Na(i,i.next)}}function Va(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ga(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function Ha(t,e,i,n,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function Wa(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Xa(t,e){return t.x===e.x&&t.y===e.y}function Ya(t,e,i,n){return!!(Xa(t,e)&&Xa(i,n)||Xa(t,n)&&Xa(i,e))||Wa(t,e,i)>0!=Wa(t,e,n)>0&&Wa(i,n,t)>0!=Wa(i,n,e)>0}function Za(t,e){return Wa(t.prev,t,t.next)<0?Wa(t,e,t.next)>=0&&Wa(t,t.prev,e)>=0:Wa(t,e,t.prev)<0||Wa(t,t.next,e)<0}function Ja(t,e){var i=new $a(t.i,t.x,t.y),n=new $a(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function Ka(t,e,i,n){var r=new $a(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Qa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function $a(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ts={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return ts.area(t)<0},triangulateShape:function(t,e){var i=[],n=[],r=[];es(t),is(i,t);var o=t.length;e.forEach(es);for(var a=0;a<e.length;a++)n.push(o),o+=e[a].length,is(i,e[a]);var s=Oa(i,n);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function es(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function is(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function ns(t,e){hn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new rs(t,e)),this.mergeVertices()}function rs(t,e){void 0!==t&&(On.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function os(t,e){hn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new as(t,e)),this.mergeVertices()}function as(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new hn;var n=i.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),rs.call(this,n,e),this.type="TextBufferGeometry"}function ss(t,e,i,n,r,o,a){hn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ls(t,e,i,n,r,o,a)),this.mergeVertices()}function ls(t,e,i,n,r,o,a){On.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var s,l,h=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,u=[],p=new Ge,d=new Ge,f=[],m=[],v=[],g=[];for(l=0;l<=i;l++){var y=[],_=l/i;for(s=0;s<=e;s++){var x=s/e;p.x=-t*Math.cos(n+x*r)*Math.sin(o+_*a),p.y=t*Math.cos(o+_*a),p.z=t*Math.sin(n+x*r)*Math.sin(o+_*a),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(x,1-_),y.push(c++)}u.push(y)}for(l=0;l<i;l++)for(s=0;s<e;s++){var b=u[l][s+1],w=u[l][s],E=u[l+1][s],M=u[l+1][s+1];(0!==l||o>0)&&f.push(b,w,M),(l!==i-1||h<Math.PI)&&f.push(w,E,M)}this.setIndex(f),this.addAttribute("position",new yn(m,3)),this.addAttribute("normal",new yn(v,3)),this.addAttribute("uv",new yn(g,2))}function hs(t,e,i,n,r,o){hn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new cs(t,e,i,n,r,o)),this.mergeVertices()}function cs(t,e,i,n,r,o){On.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a,s,l,h=[],c=[],u=[],p=[],d=t,f=(e-t)/(n=void 0!==n?Math.max(1,n):1),m=new Ge,v=new Ue;for(s=0;s<=n;s++){for(l=0;l<=i;l++)a=r+l/i*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),c.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<n;s++){var g=s*(i+1);for(l=0;l<i;l++){var y=a=l+g,_=a+i+1,x=a+i+2,b=a+1;h.push(y,_,b),h.push(_,x,b)}}this.setIndex(h),this.addAttribute("position",new yn(c,3)),this.addAttribute("normal",new yn(u,3)),this.addAttribute("uv",new yn(p,2))}function us(t,e,i,n){hn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ps(t,e,i,n)),this.mergeVertices()}function ps(t,e,i,n){On.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=Fe.clamp(n,0,2*Math.PI);var r,o,a,s=[],l=[],h=[],c=1/e,u=new Ge,p=new Ue;for(o=0;o<=e;o++){var d=i+o*c*n,f=Math.sin(d),m=Math.cos(d);for(a=0;a<=t.length-1;a++)u.x=t[a].x*f,u.y=t[a].y,u.z=t[a].x*m,l.push(u.x,u.y,u.z),p.x=o/e,p.y=a/(t.length-1),h.push(p.x,p.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=r=a+o*t.length,g=r+t.length,y=r+t.length+1,_=r+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.addAttribute("position",new yn(l,3)),this.addAttribute("uv",new yn(h,2)),this.computeVertexNormals(),n===2*Math.PI){var x=this.attributes.normal.array,b=new Ge,w=new Ge,E=new Ge;for(r=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)b.x=x[a+0],b.y=x[a+1],b.z=x[a+2],w.x=x[r+a+0],w.y=x[r+a+1],w.z=x[r+a+2],E.addVectors(b,w).normalize(),x[a+0]=x[r+a+0]=E.x,x[a+1]=x[r+a+1]=E.y,x[a+2]=x[r+a+2]=E.z}}function ds(t,e){hn.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new fs(t,e)),this.mergeVertices()}function fs(t,e){On.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],n=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(t))h(t);else for(var l=0;l<t.length;l++)h(t[l]),this.addGroup(a,s,l),a+=s,s=0;function h(t){var a,l,h,c=n.length/3,u=t.extractPoints(e),p=u.shape,d=u.holes;if(!1===ts.isClockWise(p))for(p=p.reverse(),a=0,l=d.length;a<l;a++)h=d[a],!0===ts.isClockWise(h)&&(d[a]=h.reverse());var f=ts.triangulateShape(p,d);for(a=0,l=d.length;a<l;a++)h=d[a],p=p.concat(h);for(a=0,l=p.length;a<l;a++){var m=p[a];n.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var v=f[a],g=v[0]+c,y=v[1]+c,_=v[2]+c;i.push(g,y,_),s+=3}}this.setIndex(i),this.addAttribute("position",new yn(n,3)),this.addAttribute("normal",new yn(r,3)),this.addAttribute("uv",new yn(o,2))}function ms(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var r=t[i];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function vs(t,e){On.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var i,n,r,o,a=[],s=Math.cos(Fe.DEG2RAD*e),l=[0,0],h={},c=["a","b","c"];t.isBufferGeometry?(o=new hn).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var u=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)i=m[c[v]],n=m[c[(v+1)%3]],l[0]=Math.min(i,n),l[1]=Math.max(i,n),void 0===h[r=l[0]+","+l[1]]?h[r]={index1:l[0],index2:l[1],face1:d,face2:void 0}:h[r].face2=d;for(r in h){var g=h[r];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=u[g.index1];a.push(y.x,y.y,y.z),y=u[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new yn(a,3))}function gs(t,e,i,n,r,o,a,s){hn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ys(t,e,i,n,r,o,a,s)),this.mergeVertices()}function ys(t,e,i,n,r,o,a,s){On.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var h=[],c=[],u=[],p=[],d=0,f=[],m=i/2,v=0;function g(i){var r,o,f,g=new Ue,y=new Ge,_=0,x=!0===i?t:e,b=!0===i?1:-1;for(o=d,r=1;r<=n;r++)c.push(0,m*b,0),u.push(0,b,0),p.push(.5,.5),d++;for(f=d,r=0;r<=n;r++){var w=r/n*s+a,E=Math.cos(w),M=Math.sin(w);y.x=x*M,y.y=m*b,y.z=x*E,c.push(y.x,y.y,y.z),u.push(0,b,0),g.x=.5*E+.5,g.y=.5*M*b+.5,p.push(g.x,g.y),d++}for(r=0;r<n;r++){var q=o+r,A=f+r;!0===i?h.push(A,A+1,q):h.push(A+1,A,q),_+=3}l.addGroup(v,_,!0===i?1:2),v+=_}!function(){var o,g,y=new Ge,_=new Ge,x=0,b=(e-t)/i;for(g=0;g<=r;g++){var w=[],E=g/r,M=E*(e-t)+t;for(o=0;o<=n;o++){var q=o/n,A=q*s+a,T=Math.sin(A),P=Math.cos(A);_.x=M*T,_.y=-E*i+m,_.z=M*P,c.push(_.x,_.y,_.z),y.set(T,b,P).normalize(),u.push(y.x,y.y,y.z),p.push(q,1-E),w.push(d++)}f.push(w)}for(o=0;o<n;o++)for(g=0;g<r;g++){var S=f[g][o],L=f[g+1][o],C=f[g+1][o+1],I=f[g][o+1];h.push(S,L,I),h.push(L,C,I),x+=6}l.addGroup(v,x,0),v+=x}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(h),this.addAttribute("position",new yn(c,3)),this.addAttribute("normal",new yn(u,3)),this.addAttribute("uv",new yn(p,2))}function _s(t,e,i,n,r,o,a){gs.call(this,0,t,e,i,n,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function xs(t,e,i,n,r,o,a){ys.call(this,0,t,e,i,n,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function bs(t,e,i,n){hn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new ws(t,e,i,n)),this.mergeVertices()}function ws(t,e,i,n){On.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,o,a=[],s=[],l=[],h=[],c=new Ge,u=new Ue;for(s.push(0,0,0),l.push(0,0,1),h.push(.5,.5),o=0,r=3;o<=e;o++,r+=3){var p=i+o/e*n;c.x=t*Math.cos(p),c.y=t*Math.sin(p),s.push(c.x,c.y,c.z),l.push(0,0,1),u.x=(s[r]/t+1)/2,u.y=(s[r+1]/t+1)/2,h.push(u.x,u.y)}for(r=1;r<=e;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new yn(s,3)),this.addAttribute("normal",new yn(l,3)),this.addAttribute("uv",new yn(h,2))}ns.prototype=Object.create(hn.prototype),ns.prototype.constructor=ns,rs.prototype=Object.create(On.prototype),rs.prototype.constructor=rs,rs.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],i=this.getAttribute("uv"),n=i?Array.prototype.slice.call(i.array):[],r=this.index;return{position:e,uv:n,index:r?Array.prototype.slice.call(r.array):[]}},rs.prototype.addShapeList=function(t,e){var i=t.length;e.arrays=this.getArrays();for(var n=0;n<i;n++){var r=t[n];this.addShape(r,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new yn(e.arrays.position,3)),this.addAttribute("uv",new yn(e.arrays.uv,2))},rs.prototype.addShape=function(t,e){var i,n,r,o,a,s,l,h,c=e.arrays?e.arrays:this.getArrays(),u=c.position,p=c.index,d=c.uv,f=[],m=void 0!==e.amount?e.amount:100,v=void 0!==e.bevelThickness?e.bevelThickness:6,g=void 0!==e.bevelSize?e.bevelSize:v-2,y=void 0!==e.bevelSegments?e.bevelSegments:3,_=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.curveSegments?e.curveSegments:12,b=void 0!==e.steps?e.steps:1,w=e.extrudePath,E=!1,M=void 0!==e.UVGenerator?e.UVGenerator:ns.WorldUVGenerator;w&&(i=w.getSpacedPoints(b),E=!0,_=!1,n=void 0!==e.frames?e.frames:w.computeFrenetFrames(b,!1),r=new Ge,o=new Ge,a=new Ge),_||(y=0,v=0,g=0);var q=this,A=t.extractPoints(x),T=A.shape,P=A.holes;if(!ts.isClockWise(T))for(T=T.reverse(),l=0,h=P.length;l<h;l++)s=P[l],ts.isClockWise(s)&&(P[l]=s.reverse());var S=ts.triangulateShape(T,P),L=T;for(l=0,h=P.length;l<h;l++)s=P[l],T=T.concat(s);function C(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}var I,O,R,N,B,D,z=T.length,k=S.length;function F(t,e,i){var n,r,o,a=t.x-e.x,s=t.y-e.y,l=i.x-t.x,h=i.y-t.y,c=a*a+s*s,u=a*h-s*l;if(Math.abs(u)>Number.EPSILON){var p=Math.sqrt(c),d=Math.sqrt(l*l+h*h),f=e.x-s/p,m=e.y+a/p,v=((i.x-h/d-f)*h-(i.y+l/d-m)*l)/(a*h-s*l),g=(n=f+a*v-t.x)*n+(r=m+s*v-t.y)*r;if(g<=2)return new Ue(n,r);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(h)&&(y=!0),y?(n=-s,r=a,o=Math.sqrt(c)):(n=a,r=s,o=Math.sqrt(c/2))}return new Ue(n/o,r/o)}for(var U=[],j=0,V=L.length,G=V-1,H=j+1;j<V;j++,G++,H++)G===V&&(G=0),H===V&&(H=0),U[j]=F(L[j],L[G],L[H]);var W,X,Y=[],Z=U.concat();for(l=0,h=P.length;l<h;l++){for(s=P[l],W=[],j=0,G=(V=s.length)-1,H=j+1;j<V;j++,G++,H++)G===V&&(G=0),H===V&&(H=0),W[j]=F(s[j],s[G],s[H]);Y.push(W),Z=Z.concat(W)}for(I=0;I<y;I++){for(R=I/y,N=v*Math.cos(R*Math.PI/2),O=g*Math.sin(R*Math.PI/2),j=0,V=L.length;j<V;j++)K((B=C(L[j],U[j],O)).x,B.y,-N);for(l=0,h=P.length;l<h;l++)for(s=P[l],W=Y[l],j=0,V=s.length;j<V;j++)K((B=C(s[j],W[j],O)).x,B.y,-N)}for(O=g,j=0;j<z;j++)B=_?C(T[j],Z[j],O):T[j],E?(o.copy(n.normals[0]).multiplyScalar(B.x),r.copy(n.binormals[0]).multiplyScalar(B.y),a.copy(i[0]).add(o).add(r),K(a.x,a.y,a.z)):K(B.x,B.y,0);for(X=1;X<=b;X++)for(j=0;j<z;j++)B=_?C(T[j],Z[j],O):T[j],E?(o.copy(n.normals[X]).multiplyScalar(B.x),r.copy(n.binormals[X]).multiplyScalar(B.y),a.copy(i[X]).add(o).add(r),K(a.x,a.y,a.z)):K(B.x,B.y,m/b*X);for(I=y-1;I>=0;I--){for(R=I/y,N=v*Math.cos(R*Math.PI/2),O=g*Math.sin(R*Math.PI/2),j=0,V=L.length;j<V;j++)K((B=C(L[j],U[j],O)).x,B.y,m+N);for(l=0,h=P.length;l<h;l++)for(s=P[l],W=Y[l],j=0,V=s.length;j<V;j++)B=C(s[j],W[j],O),E?K(B.x,B.y+i[b-1].y,i[b-1].x+N):K(B.x,B.y,m+N)}function J(t,e){var i,n;for(j=t.length;--j>=0;){i=j,(n=j-1)<0&&(n=t.length-1);var r=0,o=b+2*y;for(r=0;r<o;r++){var a=z*r,s=z*(r+1);$(e+i+a,e+n+a,e+n+s,e+i+s)}}}function K(t,e,i){f.push(t),f.push(e),f.push(i)}function Q(t,e,i){tt(t),tt(e),tt(i);var n=u.length/3,r=M.generateTopUV(q,u,n-3,n-2,n-1);et(r[0]),et(r[1]),et(r[2])}function $(t,e,i,n){tt(t),tt(e),tt(n),tt(e),tt(i),tt(n);var r=u.length/3,o=M.generateSideWallUV(q,u,r-6,r-3,r-2,r-1);et(o[0]),et(o[1]),et(o[3]),et(o[1]),et(o[2]),et(o[3])}function tt(t){p.push(u.length/3),u.push(f[3*t+0]),u.push(f[3*t+1]),u.push(f[3*t+2])}function et(t){d.push(t.x),d.push(t.y)}!function(){var t=u.length/3;if(_){var e=0,i=z*e;for(j=0;j<k;j++)Q((D=S[j])[2]+i,D[1]+i,D[0]+i);for(i=z*(e=b+2*y),j=0;j<k;j++)Q((D=S[j])[0]+i,D[1]+i,D[2]+i)}else{for(j=0;j<k;j++)Q((D=S[j])[2],D[1],D[0]);for(j=0;j<k;j++)Q((D=S[j])[0]+z*b,D[1]+z*b,D[2]+z*b)}q.addGroup(t,u.length/3-t,0)}(),function(){var t=u.length/3,e=0;for(J(L,e),e+=L.length,l=0,h=P.length;l<h;l++)J(s=P[l],e),e+=s.length;q.addGroup(t,u.length/3-t,1)}(),e.arrays||(this.setIndex(p),this.addAttribute("position",new yn(u,3)),this.addAttribute("uv",new yn(d,2)))},ns.WorldUVGenerator={generateTopUV:function(t,e,i,n,r){var o=e[3*i],a=e[3*i+1],s=e[3*n],l=e[3*n+1],h=e[3*r],c=e[3*r+1];return[new Ue(o,a),new Ue(s,l),new Ue(h,c)]},generateSideWallUV:function(t,e,i,n,r,o){var a=e[3*i],s=e[3*i+1],l=e[3*i+2],h=e[3*n],c=e[3*n+1],u=e[3*n+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<.01?[new Ue(a,1-l),new Ue(h,1-u),new Ue(p,1-f),new Ue(m,1-g)]:[new Ue(s,1-l),new Ue(c,1-u),new Ue(d,1-f),new Ue(v,1-g)]}},os.prototype=Object.create(hn.prototype),os.prototype.constructor=os,as.prototype=Object.create(rs.prototype),as.prototype.constructor=as,ss.prototype=Object.create(hn.prototype),ss.prototype.constructor=ss,ls.prototype=Object.create(On.prototype),ls.prototype.constructor=ls,hs.prototype=Object.create(hn.prototype),hs.prototype.constructor=hs,cs.prototype=Object.create(On.prototype),cs.prototype.constructor=cs,us.prototype=Object.create(hn.prototype),us.prototype.constructor=us,ps.prototype=Object.create(On.prototype),ps.prototype.constructor=ps,ds.prototype=Object.create(hn.prototype),ds.prototype.constructor=ds,ds.prototype.toJSON=function(){var t=hn.prototype.toJSON.call(this);return ms(this.parameters.shapes,t)},fs.prototype=Object.create(On.prototype),fs.prototype.constructor=fs,fs.prototype.toJSON=function(){var t=On.prototype.toJSON.call(this);return ms(this.parameters.shapes,t)},vs.prototype=Object.create(On.prototype),vs.prototype.constructor=vs,gs.prototype=Object.create(hn.prototype),gs.prototype.constructor=gs,ys.prototype=Object.create(On.prototype),ys.prototype.constructor=ys,_s.prototype=Object.create(gs.prototype),_s.prototype.constructor=_s,xs.prototype=Object.create(ys.prototype),xs.prototype.constructor=xs,bs.prototype=Object.create(hn.prototype),bs.prototype.constructor=bs,ws.prototype=Object.create(On.prototype),ws.prototype.constructor=ws;var Es=Object.freeze({WireframeGeometry:fa,ParametricGeometry:ma,ParametricBufferGeometry:va,TetrahedronGeometry:_a,TetrahedronBufferGeometry:xa,OctahedronGeometry:ba,OctahedronBufferGeometry:wa,IcosahedronGeometry:Ea,IcosahedronBufferGeometry:Ma,DodecahedronGeometry:qa,DodecahedronBufferGeometry:Aa,PolyhedronGeometry:ga,PolyhedronBufferGeometry:ya,TubeGeometry:Ta,TubeBufferGeometry:Pa,TorusKnotGeometry:Sa,TorusKnotBufferGeometry:La,TorusGeometry:Ca,TorusBufferGeometry:Ia,TextGeometry:os,TextBufferGeometry:as,SphereGeometry:ss,SphereBufferGeometry:ls,RingGeometry:hs,RingBufferGeometry:cs,PlaneGeometry:Bn,PlaneBufferGeometry:Dn,LatheGeometry:us,LatheBufferGeometry:ps,ShapeGeometry:ds,ShapeBufferGeometry:fs,ExtrudeGeometry:ns,ExtrudeBufferGeometry:rs,EdgesGeometry:vs,ConeGeometry:_s,ConeBufferGeometry:xs,CylinderGeometry:gs,CylinderBufferGeometry:ys,CircleGeometry:bs,CircleBufferGeometry:ws,BoxGeometry:Rn,BoxBufferGeometry:Nn});function Ms(t){hr.call(this),this.type="ShadowMaterial",this.color=new Ei(0),this.transparent=!0,this.setValues(t)}function qs(t){ur.call(this,t),this.type="RawShaderMaterial"}function As(t){hr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ei(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ts(t){As.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Ps(t){hr.call(this),this.type="MeshPhongMaterial",this.color=new Ei(16777215),this.specular=new Ei(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ss(t){Ps.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ls(t){hr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Cs(t){hr.call(this),this.type="MeshLambertMaterial",this.color=new Ei(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Is(t){ra.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Ms.prototype=Object.create(hr.prototype),Ms.prototype.constructor=Ms,Ms.prototype.isShadowMaterial=!0,Ms.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this},qs.prototype=Object.create(ur.prototype),qs.prototype.constructor=qs,qs.prototype.isRawShaderMaterial=!0,As.prototype=Object.create(hr.prototype),As.prototype.constructor=As,As.prototype.isMeshStandardMaterial=!0,As.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ts.prototype=Object.create(As.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshPhysicalMaterial=!0,Ts.prototype.copy=function(t){return As.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Ps.prototype=Object.create(hr.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isMeshPhongMaterial=!0,Ps.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ss.prototype=Object.create(Ps.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isMeshToonMaterial=!0,Ss.prototype.copy=function(t){return Ps.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Ls.prototype=Object.create(hr.prototype),Ls.prototype.constructor=Ls,Ls.prototype.isMeshNormalMaterial=!0,Ls.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Cs.prototype=Object.create(hr.prototype),Cs.prototype.constructor=Cs,Cs.prototype.isMeshLambertMaterial=!0,Cs.prototype.copy=function(t){return hr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Is.prototype=Object.create(ra.prototype),Is.prototype.constructor=Is,Is.prototype.isLineDashedMaterial=!0,Is.prototype.copy=function(t){return ra.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Os=Object.freeze({ShadowMaterial:Ms,SpriteMaterial:Qo,RawShaderMaterial:qs,ShaderMaterial:ur,PointsMaterial:la,MeshPhysicalMaterial:Ts,MeshStandardMaterial:As,MeshPhongMaterial:Ps,MeshToonMaterial:Ss,MeshNormalMaterial:Ls,MeshLambertMaterial:Cs,MeshDepthMaterial:ko,MeshDistanceMaterial:Fo,MeshBasicMaterial:cr,LineDashedMaterial:Is,LineBasicMaterial:ra,Material:hr}),Rs={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Ns(t,e,i){var n=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===r&&void 0!==n.onStart&&n.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,a),o===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Bs=new Ns,Ds={};function zs(t){this.manager=void 0!==t?t:Bs}function ks(t){this.manager=void 0!==t?t:Bs,this._parser=null}function Fs(t){this.manager=void 0!==t?t:Bs}function Us(t){this.manager=void 0!==t?t:Bs}function js(t){this.manager=void 0!==t?t:Bs}function Vs(){this.type="Curve",this.arcLengthDivisions=200}function Gs(t,e,i,n,r,o,a,s){Vs.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Hs(t,e,i,n,r,o){Gs.call(this,t,e,i,i,n,r,o),this.type="ArcCurve"}function Ws(){var t=0,e=0,i=0,n=0;function r(r,o,a,s){t=r,e=a,i=-3*r+3*o-2*a-s,n=2*r-2*o+a+s}return{initCatmullRom:function(t,e,i,n,o){r(e,i,o*(i-t),o*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,o,a,s){var l=(e-t)/o-(i-t)/(o+a)+(i-e)/a,h=(i-e)/a-(n-e)/(a+s)+(n-i)/s;r(e,i,l*=a,h*=a)},calc:function(r){var o=r*r;return t+e*r+i*o+n*(o*r)}}}Object.assign(zs.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Rs.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===Ds[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],h=a[3];h=window.decodeURIComponent(h),l&&(h=window.atob(h));try{var c,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(h.length),d=0;d<h.length;d++)p[d]=h.charCodeAt(d);c="blob"===u?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(h,s);break;case"json":c=JSON.parse(h);break;default:c=h}window.setTimeout(function(){e&&e(c),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)},0)}}else{Ds[t]=[],Ds[t].push({onLoad:e,onProgress:i,onError:n});var m=new XMLHttpRequest;m.open("GET",t,!0),m.addEventListener("load",function(e){var i=this.response;Rs.add(t,i);var n=Ds[t];if(delete Ds[t],200===this.status){for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(i)}r.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(i)}r.manager.itemEnd(t)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var i=Ds[t],n=0,r=i.length;n<r;n++){var o=i[n];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var i=Ds[t];delete Ds[t];for(var n=0,o=i.length;n<o;n++){var a=i[n];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(t),m}Ds[t].push({onLoad:e,onProgress:i,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(function(t){this.manager=void 0!==t?t:Bs,this._parser=null}.prototype,{load:function(t,e,i,n){var r=this,o=[],a=new pa;a.image=o;var s=new zs(this.manager);function l(l){s.load(t[l],function(t){var i=r._parser(t,!0);o[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(h+=1)&&(1===i.mipmapCount&&(a.minFilter=Rt),a.format=i.format,a.needsUpdate=!0,e&&e(a))},i,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,c=0,u=t.length;c<u;++c)l(c);else s.load(t,function(t){var i=r._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)o[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+l]),o[s].format=i.format,o[s].width=i.width,o[s].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=Rt),a.format=i.format,a.needsUpdate=!0,e&&e(a)},i,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(ks.prototype,{load:function(t,e,i,n){var r=this,o=new fi,a=new zs(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:St,o.wrapT=void 0!==i.wrapT?i.wrapT:St,o.magFilter=void 0!==i.magFilter?i.magFilter:Rt,o.minFilter=void 0!==i.minFilter?i.minFilter:Bt,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=Rt),o.needsUpdate=!0,e&&e(o,i))},i,n),o}}),Object.assign(Fs.prototype,{crossOrigin:"Anonymous",load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Rs.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Rs.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Us.prototype,{crossOrigin:"Anonymous",load:function(t,e,i,n){var r=new gr,o=new Fs(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(i){o.load(t[i],function(t){r.images[i]=t,6===++a&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}for(var l=0;l<t.length;++l)s(l);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(js.prototype,{crossOrigin:"Anonymous",load:function(t,e,i,n){var r=new ci,o=new Fs(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){r.image=i;var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);r.format=n?Jt:Kt,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Vs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;i<=t;i++)o+=(e=this.getPoint(i/t)).distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e||t*n[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=n[r=Math.floor(s+(l-s)/2)]-i)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(n[r=l]===i)return r/(o-1);var h=n[r];return(r+(i-h)/(n[r+1]-h))/(o-1)},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,o=new Ge,a=[],s=[],l=[],h=new Ge,c=new je;for(i=0;i<=t;i++)n=i/t,a[i]=this.getTangentAt(n),a[i].normalize();s[0]=new Ge,l[0]=new Ge;var u=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=u&&(u=p,o.set(1,0,0)),d<=u&&(u=d,o.set(0,1,0)),f<=u&&o.set(0,0,1),h.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],h),l[0].crossVectors(a[0],s[0]),i=1;i<=t;i++)s[i]=s[i-1].clone(),l[i]=l[i-1].clone(),h.crossVectors(a[i-1],a[i]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(Fe.clamp(a[i-1].dot(a[i]),-1,1)),s[i].applyMatrix4(c.makeRotationAxis(h,r))),l[i].crossVectors(a[i],s[i]);if(!0===e)for(r=Math.acos(Fe.clamp(s[0].dot(s[t]),-1,1)),r/=t,a[0].dot(h.crossVectors(s[0],s[t]))>0&&(r=-r),i=1;i<=t;i++)s[i].applyMatrix4(c.makeRotationAxis(a[i],r*i)),l[i].crossVectors(a[i],s[i]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Gs.prototype=Object.create(Vs.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isEllipseCurve=!0,Gs.prototype.getPoint=function(t,e){for(var i=e||new Ue,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0!==this.aClockwise||o||(r===n?r=-n:r-=n);var a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var h=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=s-this.aX,p=l-this.aY;s=u*h-p*c+this.aX,l=u*c+p*h+this.aY}return i.set(s,l)},Gs.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Gs.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Gs.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Hs.prototype=Object.create(Gs.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isArcCurve=!0;var Xs=new Ge,Ys=new Ws,Zs=new Ws,Js=new Ws;function Ks(t,e,i,n){Vs.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function Qs(t,e,i,n,r){var o=.5*(n-e),a=.5*(r-i),s=t*t;return(2*i-2*n+o+a)*(t*s)+(-3*i+3*n-2*o-a)*s+o*t+i}function $s(t,e,i,n){return(a=1-t)*a*e+2*(1-(o=t))*o*i+(r=t)*r*n;var r,o,a}function tl(t,e,i,n,r){return(h=1-t)*h*h*e+3*(l=1-(s=t))*l*s*i+3*(1-(a=t))*a*a*n+(o=t)*o*o*r;var o,a,s,l,h}function el(t,e,i,n){Vs.call(this),this.type="CubicBezierCurve",this.v0=t||new Ue,this.v1=e||new Ue,this.v2=i||new Ue,this.v3=n||new Ue}function il(t,e,i,n){Vs.call(this),this.type="CubicBezierCurve3",this.v0=t||new Ge,this.v1=e||new Ge,this.v2=i||new Ge,this.v3=n||new Ge}function nl(t,e){Vs.call(this),this.type="LineCurve",this.v1=t||new Ue,this.v2=e||new Ue}function rl(t,e){Vs.call(this),this.type="LineCurve3",this.v1=t||new Ge,this.v2=e||new Ge}function ol(t,e,i){Vs.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ue,this.v1=e||new Ue,this.v2=i||new Ue}function al(t,e,i){Vs.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Ge,this.v1=e||new Ge,this.v2=i||new Ge}function sl(t){Vs.call(this),this.type="SplineCurve",this.points=t||[]}Ks.prototype=Object.create(Vs.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isCatmullRomCurve3=!0,Ks.prototype.getPoint=function(t,e){var i,n,r,o,a=e||new Ge,s=this.points,l=s.length,h=(l-(this.closed?0:1))*t,c=Math.floor(h),u=h-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s.length)+1)*s.length:0===u&&c===l-1&&(c=l-2,u=1),this.closed||c>0?i=s[(c-1)%l]:(Xs.subVectors(s[0],s[1]).add(s[0]),i=Xs),n=s[c%l],r=s[(c+1)%l],this.closed||c+2<l?o=s[(c+2)%l]:(Xs.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Xs),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(i.distanceToSquared(n),p),f=Math.pow(n.distanceToSquared(r),p),m=Math.pow(r.distanceToSquared(o),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),Ys.initNonuniformCatmullRom(i.x,n.x,r.x,o.x,d,f,m),Zs.initNonuniformCatmullRom(i.y,n.y,r.y,o.y,d,f,m),Js.initNonuniformCatmullRom(i.z,n.z,r.z,o.z,d,f,m)}else"catmullrom"===this.curveType&&(Ys.initCatmullRom(i.x,n.x,r.x,o.x,this.tension),Zs.initCatmullRom(i.y,n.y,r.y,o.y,this.tension),Js.initCatmullRom(i.z,n.z,r.z,o.z,this.tension));return a.set(Ys.calc(u),Zs.calc(u),Js.calc(u)),a},Ks.prototype.copy=function(t){Vs.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ks.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Ks.prototype.fromJSON=function(t){Vs.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new Ge).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},el.prototype=Object.create(Vs.prototype),el.prototype.constructor=el,el.prototype.isCubicBezierCurve=!0,el.prototype.getPoint=function(t,e){var i=e||new Ue,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(tl(t,n.x,r.x,o.x,a.x),tl(t,n.y,r.y,o.y,a.y)),i},el.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},el.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},el.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},il.prototype=Object.create(Vs.prototype),il.prototype.constructor=il,il.prototype.isCubicBezierCurve3=!0,il.prototype.getPoint=function(t,e){var i=e||new Ge,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(tl(t,n.x,r.x,o.x,a.x),tl(t,n.y,r.y,o.y,a.y),tl(t,n.z,r.z,o.z,a.z)),i},il.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},il.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},il.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},nl.prototype=Object.create(Vs.prototype),nl.prototype.constructor=nl,nl.prototype.isLineCurve=!0,nl.prototype.getPoint=function(t,e){var i=e||new Ue;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},nl.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},nl.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},nl.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},nl.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},nl.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},rl.prototype=Object.create(Vs.prototype),rl.prototype.constructor=rl,rl.prototype.isLineCurve3=!0,rl.prototype.getPoint=function(t,e){var i=e||new Ge;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},rl.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},rl.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},rl.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},rl.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ol.prototype=Object.create(Vs.prototype),ol.prototype.constructor=ol,ol.prototype.isQuadraticBezierCurve=!0,ol.prototype.getPoint=function(t,e){var i=e||new Ue,n=this.v0,r=this.v1,o=this.v2;return i.set($s(t,n.x,r.x,o.x),$s(t,n.y,r.y,o.y)),i},ol.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ol.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ol.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},al.prototype=Object.create(Vs.prototype),al.prototype.constructor=al,al.prototype.isQuadraticBezierCurve3=!0,al.prototype.getPoint=function(t,e){var i=e||new Ge,n=this.v0,r=this.v1,o=this.v2;return i.set($s(t,n.x,r.x,o.x),$s(t,n.y,r.y,o.y),$s(t,n.z,r.z,o.z)),i},al.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},al.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},al.prototype.fromJSON=function(t){return Vs.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},sl.prototype=Object.create(Vs.prototype),sl.prototype.constructor=sl,sl.prototype.isSplineCurve=!0,sl.prototype.getPoint=function(t,e){var i=e||new Ue,n=this.points,r=(n.length-1)*t,o=Math.floor(r),a=r-o,s=n[0===o?o:o-1],l=n[o],h=n[o>n.length-2?n.length-1:o+1],c=n[o>n.length-3?n.length-1:o+2];return i.set(Qs(a,s.x,l.x,h.x,c.x),Qs(a,s.y,l.y,h.y,c.y)),i},sl.prototype.copy=function(t){Vs.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push(n.clone())}return this},sl.prototype.toJSON=function(){var t=Vs.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var n=this.points[e];t.points.push(n.toArray())}return t},sl.prototype.fromJSON=function(t){Vs.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new Ue).fromArray(n))}return this};var ll=Object.freeze({ArcCurve:Hs,CatmullRomCurve3:Ks,CubicBezierCurve:el,CubicBezierCurve3:il,EllipseCurve:Gs,LineCurve:nl,LineCurve3:rl,QuadraticBezierCurve:ol,QuadraticBezierCurve3:al,SplineCurve:sl});function hl(){Vs.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function cl(t){hl.call(this),this.type="Path",this.currentPoint=new Ue,t&&this.setFromPoints(t)}function ul(t){cl.call(this,t),this.uuid=Fe.generateUUID(),this.type="Shape",this.holes=[]}function pl(t,e){Ji.call(this),this.type="Light",this.color=new Ei(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function dl(t,e,i){pl.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.groundColor=new Ei(e)}function fl(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Ue(512,512),this.map=null,this.matrix=new je}function ml(){fl.call(this,new Ho(50,1,.5,500))}function vl(t,e,i,n,r,o){pl.call(this,t,e),this.type="SpotLight",this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.target=new Ji,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new ml}function gl(t,e,i,n){pl.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new fl(new Ho(90,1,.5,500))}function yl(){fl.call(this,new Qi(-5,5,5,-5,.5,500))}function _l(t,e){pl.call(this,t,e),this.type="DirectionalLight",this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.target=new Ji,this.shadow=new yl}function xl(t,e){pl.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function bl(t,e,i,n){pl.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function wl(t,e,i,n){Ol.call(this,t,e,i,n)}function El(t,e,i){Ol.call(this,t,e,i)}function Ml(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function ql(t,e,i,n){Ml.call(this,t,e,i,n)}function Al(t,e,i,n){Ol.call(this,t,e,i,n)}function Tl(t,e,i,n){Ol.call(this,t,e,i,n)}function Pl(t,e,i,n){Ol.call(this,t,e,i,n)}function Sl(t,e,i,n){Ml.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ll(t,e,i,n){Ml.call(this,t,e,i,n)}function Cl(t,e,i,n){Ml.call(this,t,e,i,n)}hl.prototype=Object.assign(Object.create(Vs.prototype),{constructor:hl,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new nl(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,o=this.curves[n],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=r[n],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),l=0;l<s.length;l++){var h=s[l];e&&e.equals(h)||(i.push(h),e=h)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Vs.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Vs.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++){var n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Vs.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new ll[n.type]).fromJSON(n))}return this}}),cl.prototype=Object.assign(Object.create(hl.prototype),{constructor:cl,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new nl(this.currentPoint.clone(),new Ue(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,n){var r=new ol(this.currentPoint.clone(),new Ue(t,e),new Ue(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(t,e,i,n,r,o){var a=new el(this.currentPoint.clone(),new Ue(t,e),new Ue(i,n),new Ue(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(t){var e=new sl([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,i,n,r,o)},absarc:function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},ellipse:function(t,e,i,n,r,o,a,s){var l=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(t+l,e+h,i,n,r,o,a,s)},absellipse:function(t,e,i,n,r,o,a,s){var l=new Gs(t,e,i,n,r,o,a,s);if(this.curves.length>0){var h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return hl.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=hl.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return hl.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),ul.prototype=Object.assign(Object.create(cl.prototype),{constructor:ul,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){cl.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var t=cl.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){cl.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new cl).fromJSON(n))}return this}}),pl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:pl,isLight:!0,copy:function(t){return Ji.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Ji.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),dl.prototype=Object.assign(Object.create(pl.prototype),{constructor:dl,isHemisphereLight:!0,copy:function(t){return pl.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(fl.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ml.prototype=Object.assign(Object.create(fl.prototype),{constructor:ml,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*Fe.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix())}}),vl.prototype=Object.assign(Object.create(pl.prototype),{constructor:vl,isSpotLight:!0,copy:function(t){return pl.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),gl.prototype=Object.assign(Object.create(pl.prototype),{constructor:gl,isPointLight:!0,copy:function(t){return pl.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),yl.prototype=Object.assign(Object.create(fl.prototype),{constructor:yl}),_l.prototype=Object.assign(Object.create(pl.prototype),{constructor:_l,isDirectionalLight:!0,copy:function(t){return pl.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),xl.prototype=Object.assign(Object.create(pl.prototype),{constructor:xl,isAmbientLight:!0}),bl.prototype=Object.assign(Object.create(pl.prototype),{constructor:bl,isRectAreaLight:!0,copy:function(t){return pl.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=pl.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),wl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:wl,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),El.prototype=Object.assign(Object.create(Ol.prototype),{constructor:El,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Ml.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var o;i:{n:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}o=e.length;break i}if(t>=r)break t;var s=e[1];t<s&&(i=2,r=s);for(a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}o=i,i=0}for(;i<o;){var l=i+o>>>1;t<e[l]?o=l:i=l+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,o=0;o!==n;++o)e[o]=i[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ml.prototype,{beforeStart_:Ml.prototype.copySampleValue_,afterEnd_:Ml.prototype.copySampleValue_}),ql.prototype=Object.assign(Object.create(Ml.prototype),{constructor:ql,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=(i-e)/(n-e),h=s+a;s!==h;s+=4)Ve.slerpFlat(r,0,o,s-a,o,s,l);return r}}),Al.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Al,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new ql(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Tl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Tl,ValueTypeName:"color"}),Pl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Pl,ValueTypeName:"number"}),Sl.prototype=Object.assign(Object.create(Ml.prototype),{constructor:Sl,DefaultSettings_:{endingStart:Ae,endingEnd:Ae},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,o=t+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case Te:r=t,a=2*e-i;break;case 2402:a=e+n[r=n.length-2]-n[r+1];break;default:r=t,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case Te:o=t,s=2*i-e;break;case 2402:o=1,s=i+n[1]-n[0];break;default:o=t-1,s=e}var l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-i),this._offsetPrev=r*h,this._offsetNext=o*h},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(i-e)/(n-e),f=d*d,m=f*d,v=-u*m+2*u*f-u*d,g=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==a;++x)r[x]=v*o[h+x]+g*o[l+x]+y*o[s+x]+_*o[c+x];return r}}),Ll.prototype=Object.assign(Object.create(Ml.prototype),{constructor:Ll,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,h=(i-e)/(n-e),c=1-h,u=0;u!==a;++u)r[u]=o[l+u]*c+o[s+u]*h;return r}}),Cl.prototype=Object.assign(Object.create(Ml.prototype),{constructor:Cl,interpolate_:function(t){return this.copySampleValue_(t-1)}});var Il={arraySlice:function(t,e,i){return Il.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=new Array(e),n=0;n!==e;++n)i[n]=n;return i.sort(function(e,i){return t[e]-t[i]}),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*e,l=0;l!==e;++l)r[a++]=t[s+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(e.push(o.time),i.push.apply(i,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(e.push(o.time),a.toArray(i,i.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(e.push(o.time),i.push(a)),o=t[r++]}while(void 0!==o)}}};function Ol(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Il.convertArray(e,this.TimeBufferType),this.values=Il.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Rl(t,e,i,n){Ol.call(this,t,e,i,n)}function Nl(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=Fe.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Bl(t){this.manager=void 0!==t?t:Bs,this.textures={}}function Dl(t){this.manager=void 0!==t?t:Bs}Object.assign(Ol,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=Ol._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Il.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Il.convertArray(t.times,Array),values:Il.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pl;case"vector":case"vector2":case"vector3":case"vector4":return Rl;case"color":return Tl;case"quaternion":return Al;case"bool":case"boolean":return El;case"string":return wl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(Ol.prototype,{constructor:Ol,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Cl(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ll(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Sl(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",i)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Il.arraySlice(i,r,o),this.values=Il.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==n&&Il.isTypedArray(n)){a=0;for(var l=n.length;a!==l;++a){var h=n[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,o=t.length-1,a=1;a<o;++a){var s=!1,l=t[a];if(l!==t[a+1]&&(1!==a||l!==l[0]))if(n)s=!0;else for(var h=a*i,c=h-i,u=h+i,p=0;p!==i;++p){var d=e[h+p];if(d!==e[c+p]||d!==e[u+p]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];var f=a*i,m=r*i;for(p=0;p!==i;++p)e[m+p]=e[f+p]}++r}}if(o>0){t[r]=t[o];for(f=o*i,m=r*i,p=0;p!==i;++p)e[m+p]=e[f+p];++r}return r!==t.length&&(this.times=Il.arraySlice(t,0,r),this.values=Il.arraySlice(e,0,r*i)),this}}),Rl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Rl,ValueTypeName:"vector"}),Object.assign(Nl,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,o=i.length;r!==o;++r)e.push(Ol.parse(i[r]).scale(n));return new Nl(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,o=i.length;r!==o;++r)e.push(Ol.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var h=Il.getKeyframeOrder(s);s=Il.sortedArray(s,1,h),l=Il.sortedArray(l,1,h),n||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new Pl(".morphTargetInfluences["+e[a].name+"]",s,l).scale(1/i))}return new Nl(t,-1,o)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],l=s.name.match(r);if(l&&l.length>1){var h=n[u=l[1]];h||(n[u]=h=[]),h.push(s)}}var c=[];for(var u in n)c.push(Nl.CreateFromMorphTargetSequence(u,n[u],e,i));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(t,e,i,n,r){if(0!==i.length){var o=[],a=[];Il.flattenJSON(i,o,a,n),0!==o.length&&r.push(new t(e,o,a))}},n=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var h=s[l].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var c={},u=0;u<h.length;u++)if(h[u].morphTargets)for(var p=0;p<h[u].morphTargets.length;p++)c[h[u].morphTargets[p]]=-1;for(var d in c){var f=[],m=[];for(p=0;p!==h[u].morphTargets.length;++p){var v=h[u];f.push(v.time),m.push(v.morphTarget===d?1:0)}n.push(new Pl(".morphTargetInfluence["+d+"]",f,m))}o=c.length*(a||1)}else{var g=".bones["+e[l].name+"]";i(Rl,g+".position",h,"pos",n),i(Al,g+".quaternion",h,"rot",n),i(Rl,g+".scale",h,"scl",n)}}return 0===n.length?null:new Nl(r,o,n)}}),Object.assign(Nl.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(Bl.prototype,{load:function(t,e,i,n){var r=this;new zs(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function i(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var n=new Os[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearCoat&&(n.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(n.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(n.uniforms=t.uniforms),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(n.vertexColors=t.vertexColors),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=i(t.map)),void 0!==t.alphaMap&&(n.alphaMap=i(t.alphaMap),n.transparent=!0),void 0!==t.bumpMap&&(n.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=i(t.normalMap)),void 0!==t.normalScale){var r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new Ue).fromArray(r)}return void 0!==t.displacementMap&&(n.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=i(t.specularMap)),void 0!==t.envMap&&(n.envMap=i(t.envMap)),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.lightMap&&(n.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=i(t.gradientMap)),n}}),Object.assign(Dl.prototype,{load:function(t,e,i,n){var r=this;new zs(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new On,i=t.data.index;if(void 0!==i){var n=new jl[i.type](i.array);e.setIndex(new cn(n,1))}var r=t.data.attributes;for(var o in r){var a=r[o];n=new jl[a.type](a.array);e.addAttribute(o,new cn(n,a.itemSize,a.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var l=0,h=s.length;l!==h;++l){var c=s[l];e.addGroup(c.start,c.count,c.materialIndex)}var u=t.data.boundingSphere;if(void 0!==u){var p=new Ge;void 0!==u.center&&p.fromArray(u.center),e.boundingSphere=new vi(p,u.radius)}return e}});var zl,kl,Fl,Ul,jl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Vl(){}Vl.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],o=e[i+1];if(r.test(t))return o}return null}},Object.assign(Vl.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:(zl={NoBlending:D,NormalBlending:z,AdditiveBlending:k,SubtractiveBlending:F,MultiplyBlending:U,CustomBlending:j},kl=new Ei,Fl=new js,Ul=new Bl,function(t,e,i){var n={};function r(t,r,o,a,s){var l,h=e+t,c=Vl.Handlers.get(h);null!==c?l=c.load(h):(Fl.setCrossOrigin(i),l=Fl.load(h)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=Pt),1!==r[1]&&(l.wrapT=Pt)),void 0!==o&&l.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(l.wrapS=Pt),"mirror"===a[0]&&(l.wrapS=Lt),"repeat"===a[1]&&(l.wrapT=Pt),"mirror"===a[1]&&(l.wrapT=Lt)),void 0!==s&&(l.anisotropy=s);var u=Fe.generateUUID();return n[u]=l,u}var o={uuid:Fe.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=zl[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=kl.fromArray(s).getHex();break;case"colorSpecular":o.specular=kl.fromArray(s).getHex();break;case"colorEmissive":o.emissive=kl.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=r(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=r(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=r(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=r(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=r(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=r(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=r(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=r(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=r(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=r(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=I;break;case"doubleSided":o.side=O;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=B),"face"===s&&(o.vertexColors=N);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ul.setTextures(n),Ul.parse(o)})});var Gl=function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")};function Hl(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Bs,this.withCredentials=!1}Object.assign(Hl.prototype,{load:function(t,e,i,n){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Gl(t),a=new zs(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(i){var n=JSON.parse(i),a=n.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(n,o);e(l.geometry,l.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(){return function(t,e){void 0!==t.data&&(t=t.data),void 0!==t.scale?t.scale=1/t.scale:t.scale=1;var i=new hn;return function(t,e){function i(t,e){return t&1<<e}var n,r,o,a,s,l,h,c,u,p,d,f,m,v,g,y,_,x,b,w,E,M,q,A,T,P=t.faces,S=t.vertices,L=t.normals,C=t.colors,I=t.scale,O=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&O++;for(n=0;n<O;n++)e.faceVertexUvs[n]=[]}for(a=0,s=S.length;a<s;)(x=new Ge).x=S[a++]*I,x.y=S[a++]*I,x.z=S[a++]*I,e.vertices.push(x);for(a=0,s=P.length;a<s;)if(d=i(p=P[a++],0),f=i(p,1),m=i(p,3),v=i(p,4),g=i(p,5),y=i(p,6),_=i(p,7),d){if((w=new $i).a=P[a],w.b=P[a+1],w.c=P[a+3],(E=new $i).a=P[a+1],E.b=P[a+2],E.c=P[a+3],a+=4,f&&(u=P[a++],w.materialIndex=u,E.materialIndex=u),o=e.faces.length,m)for(n=0;n<O;n++)for(A=t.uvs[n],e.faceVertexUvs[n][o]=[],e.faceVertexUvs[n][o+1]=[],r=0;r<4;r++)T=new Ue(A[2*(c=P[a++])],A[2*c+1]),2!==r&&e.faceVertexUvs[n][o].push(T),0!==r&&e.faceVertexUvs[n][o+1].push(T);if(v&&(h=3*P[a++],w.normal.set(L[h++],L[h++],L[h]),E.normal.copy(w.normal)),g)for(n=0;n<4;n++)h=3*P[a++],q=new Ge(L[h++],L[h++],L[h]),2!==n&&w.vertexNormals.push(q),0!==n&&E.vertexNormals.push(q);if(y&&(M=C[l=P[a++]],w.color.setHex(M),E.color.setHex(M)),_)for(n=0;n<4;n++)M=C[l=P[a++]],2!==n&&w.vertexColors.push(new Ei(M)),0!==n&&E.vertexColors.push(new Ei(M));e.faces.push(w),e.faces.push(E)}else{if((b=new $i).a=P[a++],b.b=P[a++],b.c=P[a++],f&&(u=P[a++],b.materialIndex=u),o=e.faces.length,m)for(n=0;n<O;n++)for(A=t.uvs[n],e.faceVertexUvs[n][o]=[],r=0;r<3;r++)T=new Ue(A[2*(c=P[a++])],A[2*c+1]),e.faceVertexUvs[n][o].push(T);if(v&&(h=3*P[a++],b.normal.set(L[h++],L[h++],L[h])),g)for(n=0;n<3;n++)h=3*P[a++],q=new Ge(L[h++],L[h++],L[h]),b.vertexNormals.push(q);if(y&&(l=P[a++],b.color.setHex(C[l])),_)for(n=0;n<3;n++)l=P[a++],b.vertexColors.push(new Ei(C[l]));e.faces.push(b)}}(t,i),function(t,e){var i=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=i){var o=t.skinWeights[n],a=i>1?t.skinWeights[n+1]:0,s=i>2?t.skinWeights[n+2]:0,l=i>3?t.skinWeights[n+3]:0;e.skinWeights.push(new ui(o,a,s,l))}if(t.skinIndices)for(n=0,r=t.skinIndices.length;n<r;n+=i){var h=t.skinIndices[n],c=i>1?t.skinIndices[n+1]:0,u=i>2?t.skinIndices[n+2]:0,p=i>3?t.skinIndices[n+3]:0;e.skinIndices.push(new ui(h,c,u,p))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}(t,i),function(t,e){var i=t.scale;if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){e.morphTargets[n]={},e.morphTargets[n].name=t.morphTargets[n].name,e.morphTargets[n].vertices=[];for(var o=e.morphTargets[n].vertices,a=t.morphTargets[n].vertices,s=0,l=a.length;s<l;s+=3){var h=new Ge;h.x=a[s]*i,h.y=a[s+1]*i,h.z=a[s+2]*i,o.push(h)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=e.faces,u=t.morphColors[0].colors;for(n=0,r=c.length;n<r;n++)c[n].color.fromArray(u,3*n)}}(t,i),function(t,e){var i=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var o=Nl.parseAnimation(n[r],e.bones);o&&i.push(o)}if(e.morphTargets){var a=Nl.CreateClipsFromMorphTargetSequences(e.morphTargets,10);i=i.concat(a)}i.length>0&&(e.animations=i)}(t,i),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:i}:{geometry:i,materials:Vl.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}()}),Object.assign(function(t){this.manager=void 0!==t?t:Bs,this.texturePath=""}.prototype,{load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new zs(r.manager).load(t,function(i){var o=null;try{o=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.")},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseShape(t.shapes),n=this.parseGeometries(t.geometries,i),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,n,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new ul).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new Hl,r=new Dl,o=0,a=t.length;o<a;o++){var s,l=t[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Es[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Es[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Es[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Es[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Es[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Es[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Es[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Es[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Es[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Es[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Es[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Es[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var h=[];for(o=0,a=l.shapes.length;o<a;o++){var c=e[l.shapes[o]];h.push(c)}s=new Es[l.type](h,l.curveSegments);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=n.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),i[l.uuid]=s}return i},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new Bl;n.setTextures(e);for(var r=0,o=t.length;r<o;r++){var a=t[r];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(n.parse(a.materials[l]));i[a.uuid]=s}else i[a.uuid]=n.parse(a)}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=Nl.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){var i=this,n={};function r(t){return i.manager.itemStart(t),o.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemEnd(t),i.manager.itemError(t)})}if(void 0!==t&&t.length>0){var o=new Fs(new Ns(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var l=t[a],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;n[l.uuid]=r(h)}}return n},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=t[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new ci(e[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=i(a.mapping,Xl)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=i(a.wrap[0],Yl),s.wrapT=i(a.wrap[1],Yl)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=i(a.minFilter,Zl)),void 0!==a.magFilter&&(s.magFilter=i(a.magFilter,Zl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),n[a.uuid]=s}return n},parseObject:function(t,e,i){var n;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];void 0===i[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(i[o])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":n=new Ko,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new Ei(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new Jo(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new Zo(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Ho(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new Qi(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new xl(t.color,t.intensity);break;case"DirectionalLight":n=new _l(t.color,t.intensity);break;case"PointLight":n=new gl(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new bl(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new vl(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new dl(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(t.geometry),s=o(t.material);n=a.bones&&a.bones.length>0?new na(a,s):new mr(a,s);break;case"LOD":n=new ta;break;case"Line":n=new oa(r(t.geometry),o(t.material),t.mode);break;case"LineLoop":n=new sa(r(t.geometry),o(t.material));break;case"LineSegments":n=new aa(r(t.geometry),o(t.material));break;case"PointButt":case"Points":n=new ha(r(t.geometry),o(t.material));break;case"Sprite":n=new $o(o(t.material));break;case"Group":n=new ca;break;default:n=new Ji}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var l=t.children,h=0;h<l.length;h++)n.add(this.parseObject(l[h],e,i));if("LOD"===t.type)for(var c=t.levels,u=0;u<c.length;u++){var p=c[u],d=n.getObjectByProperty("uuid",p.object);void 0!==d&&n.addLevel(d,p.distance)}return n}});var Wl,Xl={UVMapping:300,CubeReflectionMapping:bt,CubeRefractionMapping:wt,EquirectangularReflectionMapping:Et,EquirectangularRefractionMapping:Mt,SphericalReflectionMapping:qt,CubeUVReflectionMapping:At,CubeUVRefractionMapping:Tt},Yl={RepeatWrapping:Pt,ClampToEdgeWrapping:St,MirroredRepeatWrapping:Lt},Zl={NearestFilter:Ct,NearestMipMapNearestFilter:It,NearestMipMapLinearFilter:Ot,LinearFilter:Rt,LinearMipMapNearestFilter:Nt,LinearMipMapLinearFilter:Bt};function Jl(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Bs,this.options=void 0}function Kl(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Ql(t){this.type="Font",this.data=t}function $l(t,e,i,n,r,o){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,l,h,c,u,p,d,f,m=new Kl;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=v.length;g<y;){switch(v[g++]){case"m":s=v[g++]*i+n,l=v[g++]*i+r,m.moveTo(s,l);break;case"l":s=v[g++]*i+n,l=v[g++]*i+r,m.lineTo(s,l);break;case"q":h=v[g++]*i+n,c=v[g++]*i+r,u=v[g++]*i+n,p=v[g++]*i+r,m.quadraticCurveTo(u,p,h,c);break;case"b":h=v[g++]*i+n,c=v[g++]*i+r,u=v[g++]*i+n,p=v[g++]*i+r,d=v[g++]*i+n,f=v[g++]*i+r,m.bezierCurveTo(u,p,d,f,h,c)}}return{offsetX:a.ha*i,path:m}}}Jl.prototype={constructor:Jl,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Rs.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(i){Rs.add(t,i),e&&e(i),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Kl.prototype,{moveTo:function(t,e){this.currentPath=new cl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,o){this.currentPath.bezierCurveTo(t,e,i,n,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new ul;o.curves=r.curves,e.push(o)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,o=0;o<i;r=o++){var a=e[r],s=e[o],l=s.x-a.x,h=s.y-a.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(a=e[o],l=-l,s=e[r],h=-h),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=h*(t.x-a.x)-l*(t.y-a.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return n}var r=ts.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return i(o);var a,s,l,h=[];if(1===o.length)return s=o[0],(l=new ul).curves=s.curves,h.push(l),h;var c=!r(o[0].getPoints());c=t?!c:c;var u,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=r(u=(s=o[g]).getPoints()),(a=t?!a:a)?(!c&&f[v]&&v++,f[v]={s:new ul,p:u},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:u[0]});if(!f[0])return i(o);if(f.length>1){for(var _=!1,x=[],b=0,w=f.length;b<w;b++)d[b]=[];for(b=0,w=f.length;b<w;b++)for(var E=m[b],M=0;M<E.length;M++){for(var q=E[M],A=!0,T=0;T<f.length;T++)n(q.p,f[T].p)&&(b!==T&&x.push({froms:b,tos:T,hole:M}),A?(A=!1,d[T].push(q)):_=!0);A&&d[b].push(q)}x.length>0&&(_||(m=d))}g=0;for(var P=f.length;g<P;g++){l=f[g].s,h.push(l);for(var S=0,L=(p=m[g]).length;S<L;S++)l.holes.push(p[S].h)}return h}}),Object.assign(Ql.prototype,{isFont:!0,generateShapes:function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=4);for(var n=[],r=function(t,e,i,n){for(var r=String(t).split(""),o=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,s=[],l=0,h=0,c=0;c<r.length;c++){var u=r[c];if("\n"===u)l=0,h-=a;else{var p=$l(u,i,o,l,h,n);l+=p.offsetX,s.push(p.path)}}return s}(t,e,i,this.data),o=0,a=r.length;o<a;o++)Array.prototype.push.apply(n,r[o].toShapes());return n}}),Object.assign(function(t){this.manager=void 0!==t?t:Bs}.prototype,{load:function(t,e,i,n){var r=this,o=new zs(this.manager);o.setPath(this.path),o.load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var n=r.parse(i);e&&e(n)},i,n)},parse:function(t){return new Ql(t)},setPath:function(t){return this.path=t,this}});var th,eh,ih,nh,rh,oh,ah,sh,lh,hh,ch,uh,ph,dh,fh,mh={getContext:function(){return void 0===Wl&&(Wl=new(window.AudioContext||window.webkitAudioContext)),Wl},setContext:function(t){Wl=t}};function vh(t){this.manager=void 0!==t?t:Bs}function gh(t,e,i){Ji.call(this),this.type="CubeCamera";var n=new Ho(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new Ge(1,0,0)),this.add(n);var r=new Ho(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new Ge(-1,0,0)),this.add(r);var o=new Ho(90,1,t,e);o.up.set(0,0,1),o.lookAt(new Ge(0,1,0)),this.add(o);var a=new Ho(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new Ge(0,-1,0)),this.add(a);var s=new Ho(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new Ge(0,0,1)),this.add(s);var l=new Ho(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new Ge(0,0,-1)),this.add(l);var h={format:Jt,magFilter:Rt,minFilter:Rt};this.renderTarget=new di(i,i,h),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,n,i),i.activeCubeFace=1,t.render(e,r,i),i.activeCubeFace=2,t.render(e,o,i),i.activeCubeFace=3,t.render(e,a,i),i.activeCubeFace=4,t.render(e,s,i),i.texture.generateMipmaps=h,i.activeCubeFace=5,t.render(e,l,i),t.setRenderTarget(null)},this.clear=function(t,e,i,n){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,t.setRenderTarget(r),t.clear(e,i,n);t.setRenderTarget(null)}}function yh(){Ji.call(this),this.type="AudioListener",this.context=mh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function _h(t){Ji.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function xh(t){_h.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function bh(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function wh(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(vh.prototype,{load:function(t,e,i,n){var r=new zs(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){mh.getContext().decodeAudioData(t,function(t){e(t)})},i,n)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ho,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ho,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:(lh=new je,hh=new je,function(t){if(th!==this||eh!==t.focus||ih!==t.fov||nh!==t.aspect*this.aspect||rh!==t.near||oh!==t.far||ah!==t.zoom||sh!==this.eyeSep){th=this,eh=t.focus,ih=t.fov,nh=t.aspect*this.aspect,rh=t.near,oh=t.far,ah=t.zoom;var e,i,n=t.projectionMatrix.clone(),r=(sh=this.eyeSep/2)*rh/eh,o=rh*Math.tan(Fe.DEG2RAD*ih*.5)/ah;hh.elements[12]=-sh,lh.elements[12]=sh,e=-o*nh+r,i=o*nh+r,n.elements[0]=2*rh/(i-e),n.elements[8]=(i+e)/(i-e),this.cameraL.projectionMatrix.copy(n),e=-o*nh-r,i=o*nh-r,n.elements[0]=2*rh/(i-e),n.elements[8]=(i+e)/(i-e),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(hh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(lh)})}),gh.prototype=Object.create(Ji.prototype),gh.prototype.constructor=gh,yh.prototype=Object.assign(Object.create(Ji.prototype),{constructor:yh,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:(ch=new Ge,uh=new Ve,ph=new Ge,dh=new Ge,function(t){Ji.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,i=this.up;this.matrixWorld.decompose(ch,uh,ph),dh.set(0,0,-1).applyQuaternion(uh),e.positionX?(e.positionX.setValueAtTime(ch.x,this.context.currentTime),e.positionY.setValueAtTime(ch.y,this.context.currentTime),e.positionZ.setValueAtTime(ch.z,this.context.currentTime),e.forwardX.setValueAtTime(dh.x,this.context.currentTime),e.forwardY.setValueAtTime(dh.y,this.context.currentTime),e.forwardZ.setValueAtTime(dh.z,this.context.currentTime),e.upX.setValueAtTime(i.x,this.context.currentTime),e.upY.setValueAtTime(i.y,this.context.currentTime),e.upZ.setValueAtTime(i.z,this.context.currentTime)):(e.setPosition(ch.x,ch.y,ch.z),e.setOrientation(dh.x,dh.y,dh.z,i.x,i.y,i.z))})}),_h.prototype=Object.assign(Object.create(Ji.prototype),{constructor:_h,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),xh.prototype=Object.assign(Object.create(_h.prototype),{constructor:xh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:(fh=new Ge,function(t){Ji.prototype.updateMatrixWorld.call(this,t),fh.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(fh.x,fh.y,fh.z)})}),Object.assign(bh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(wh.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)i[r+a]=i[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(i,r,0,s,n)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*e;this._mixBufferRegion(i,n,a,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(i[s]!==i[s+e]){o.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,o=n;r!==o;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var o=0;o!==r;++o)t[e+o]=t[i+o]},_slerp:function(t,e,i,n){Ve.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[i+a]*n}}});var Eh,Mh,qh,Ah,Th,Ph,Sh,Lh,Ch,Ih,Oh,Rh,Nh,Bh,Dh,zh,kh,Fh,Uh,jh,Vh,Gh,Hh,Wh,Xh,Yh,Zh,Jh,Kh,Qh,$h,tc,ec,ic="\\[\\]\\.:\\/";function nc(t,e,i){var n=i||rc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function rc(t,e,i){this.path=e,this.parsedPath=i||rc.parseTrackName(e),this.node=rc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function oc(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,o=new Array(r),a={endingStart:Ae,endingEnd:Ae},s=0;s!==r;++s){var l=n[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ac(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function sc(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function lc(){On.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function hc(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function cc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function uc(t,e,i){cc.call(this,t,e),this.meshPerAttribute=i||1}function pc(t,e,i){cn.call(this,t,e),this.meshPerAttribute=i||1}function dc(t,e,i,n){this.ray=new pr(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointButt:{get:function(){return console.warn("THREE.Raycaster: params.PointButt has been renamed to params.Points."),this.Points}}})}function fc(t,e){return t.distance-e.distance}function mc(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,o=0,a=r.length;o<a;o++)mc(r[o],e,i,!0)}function vc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function gc(t,e){this.min=void 0!==t?t:new Ue(1/0,1/0),this.max=void 0!==e?e:new Ue(-1/0,-1/0)}function yc(t){Ji.call(this),this.material=t,this.render=function(){}}function _c(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new On,h=new yn(2*a*3,3);l.addAttribute("position",h),aa.call(this,l,new ra({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function xc(t,e){Ji.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var i=new On,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}i.addAttribute("position",new yn(n,3));var l=new ra({fog:!1});this.cone=new aa(i,l),this.add(this.cone),this.update()}function bc(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new On,n=[],r=[],o=new Ei(0,0,1),a=new Ei(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.addAttribute("position",new yn(n,3)),i.addAttribute("color",new yn(r,3));var h=new ra({vertexColors:B,depthTest:!1,depthWrite:!1,transparent:!0});aa.call(this,i,h),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function wc(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i;var n=new ls(e,4,2),r=new cr({wireframe:!0,fog:!1});mr.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ec(t,e){Ji.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var i=new ra({fog:!1}),n=new On;n.addAttribute("position",new cn(new Float32Array(15),3)),this.line=new oa(n,i),this.add(this.line),this.update()}function Mc(t,e,i){Ji.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var n=new wa(e);n.rotateY(.5*Math.PI),this.material=new cr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=B);var r=n.getAttribute("position"),o=new Float32Array(3*r.count);n.addAttribute("color",new cn(o,3)),this.add(new mr(n,this.material)),this.update()}function qc(t,e,i,n){t=t||10,e=e||10,i=new Ei(void 0!==i?i:4473924),n=new Ei(void 0!==n?n:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],l=[],h=0,c=0,u=-a;h<=e;h++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);var p=h===r?i:n;p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3}var d=new On;d.addAttribute("position",new yn(s,3)),d.addAttribute("color",new yn(l,3));var f=new ra({vertexColors:B});aa.call(this,d,f)}function Ac(t,e,i,n,r,o){t=t||10,e=e||16,i=i||8,n=n||64,r=new Ei(void 0!==r?r:4473924),o=new Ei(void 0!==o?o:8947848);var a,s,l,h,c,u,p,d=[],f=[];for(h=0;h<=e;h++)l=h/e*(2*Math.PI),a=Math.sin(l)*t,s=Math.cos(l)*t,d.push(0,0,0),d.push(a,0,s),p=1&h?r:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(h=0;h<=i;h++)for(p=1&h?r:o,u=t-t/i*h,c=0;c<n;c++)l=c/n*(2*Math.PI),a=Math.sin(l)*u,s=Math.cos(l)*u,d.push(a,0,s),f.push(p.r,p.g,p.b),l=(c+1)/n*(2*Math.PI),a=Math.sin(l)*u,s=Math.cos(l)*u,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new On;m.addAttribute("position",new yn(d,3)),m.addAttribute("color",new yn(f,3));var v=new ra({vertexColors:B});aa.call(this,m,v)}function Tc(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new On,h=new yn(2*a*3,3);l.addAttribute("position",h),aa.call(this,l,new ra({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Pc(t,e,i){Ji.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1);var n=new On;n.addAttribute("position",new yn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new ra({fog:!1});this.lightPlane=new oa(n,r),this.add(this.lightPlane),(n=new On).addAttribute("position",new yn([0,0,0,0,0,1],3)),this.targetLine=new oa(n,r),this.add(this.targetLine),this.update()}function Sc(t){var e=new On,i=new ra({color:16777215,vertexColors:N}),n=[],r=[],o={},a=new Ei(16755200),s=new Ei(16711680),l=new Ei(43775),h=new Ei(16777215),c=new Ei(3355443);function u(t,e,i){p(t,i),p(e,i)}function p(t,e){n.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(n.length/3-1)}u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",h),u("p","c",c),u("cn1","cn2",c),u("cn3","cn4",c),u("cf1","cf2",c),u("cf3","cf4",c),e.addAttribute("position",new yn(n,3)),e.addAttribute("color",new yn(r,3)),aa.call(this,e,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Lc(t,e){this.object=t,void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new On;r.setIndex(new cn(i,1)),r.addAttribute("position",new cn(n,3)),aa.call(this,r,new ra({color:e})),this.matrixAutoUpdate=!1,this.update()}function Cc(t,e){this.type="Box3Helper",this.box=t;var i=void 0!==e?e:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new On;r.setIndex(new cn(n,1)),r.addAttribute("position",new yn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),aa.call(this,r,new ra({color:i})),this.geometry.computeBoundingSphere()}function Ic(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var n=void 0!==i?i:16776960,r=new On;r.addAttribute("position",new yn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),oa.call(this,r,new ra({color:n}));var o=new On;o.addAttribute("position",new yn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new mr(o,new cr({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function Oc(t,e,i,n,r,o){Ji.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===Qh&&((Qh=new On).addAttribute("position",new yn([0,0,0,0,1,0],3)),($h=new ys(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new oa(Qh,new ra({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mr($h,new cr({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,o)}function Rc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new On;i.addAttribute("position",new yn(e,3)),i.addAttribute("color",new yn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new ra({vertexColors:B});aa.call(this,i,n)}Object.assign(nc.prototype,{getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(rc,{Composite:nc,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new rc.Composite(t,e,i):new rc(t,e,i)},sanitizeNodeName:(Ch=new RegExp("["+ic+"]","g"),function(t){return t.replace(/\s/g,"_").replace(Ch,"")}),parseTrackName:(Eh="[^"+ic+"]",Mh="[^"+ic.replace("\\.","")+"]",qh=/((?:WC+[\/:])*)/.source.replace("WC",Eh),Ah=/(WCOD+)?/.source.replace("WCOD",Mh),Th=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Eh),Ph=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Eh),Sh=new RegExp("^"+qh+Ah+Th+Ph+"$"),Lh=["material","materials","bones"],function(t){var e=Sh.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=i.nodeName.substring(n+1);-1!==Lh.indexOf(r)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=r)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e)return r;var o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(rc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=rc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[n];if(void 0!==s){var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var h=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===r){r=a;break}}}h=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(h=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][l]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(rc.prototype,{_getValue_unbound:rc.prototype.getValue,_setValue_unbound:rc.prototype.setValue}),Object.assign(function(){this.uuid=Fe.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,h=0,c=arguments.length;h!==c;++h){var u=arguments[h],p=u.uuid,d=n[p];if(void 0===d){d=e++,n[p]=d,t.push(u);for(var f=0,m=s;f!==m;++f)a[f].push(new rc(u,r[f],o[f]))}else if(d<i){l=t[d];var v=--i,g=t[v];n[g.uuid]=d,t[d]=g,n[p]=v,t[v]=u;for(f=0,m=s;f!==m;++f){var y=a[f],_=y[v],x=y[d];y[d]=_,void 0===x&&(x=new rc(u,r[f],o[f])),y[v]=x}}else t[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,h=i[l];if(void 0!==h&&h>=e){var c=e++,u=t[c];i[u.uuid]=h,t[h]=u,i[l]=c,t[c]=s;for(var p=0,d=r;p!==d;++p){var f=n[p],m=f[c],v=f[h];f[h]=m,f[c]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,h=n[l];if(void 0!==h)if(delete n[l],h<i){var c=--i,u=t[c],p=t[g=--e];n[u.uuid]=h,t[h]=u,n[p.uuid]=c,t[c]=p,t.pop();for(var d=0,f=o;d!==f;++d){var m=(y=r[d])[c],v=y[g];y[h]=m,y[c]=v,y.pop()}}else{var g;n[(p=t[g=--e]).uuid]=h,t[h]=p,t.pop();for(d=0,f=o;d!==f;++d){var y;(y=r[d])[h]=y[g],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,h=this.nCachedObjects_,c=new Array(l);n=r.length,i[t]=n,o.push(t),a.push(e),r.push(c);for(var u=h,p=s.length;u!==p;++u){var d=s[u];c[u]=new rc(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=i,o[i]=s,o.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}),Object.assign(oc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,o=r/n,a=n/r;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+i,l[0]=t/a,l[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*i;if(o<0||0===i)return;this._startTime=null,e=i*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,h=this._propertyBindings,c=0,u=l.length;c!==u;++c)l[c].evaluate(a),h[c].accumulate(n,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=2202===n;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=i||e<0){var a=Math.floor(e/i);e-=i*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=Te,n.endingEnd=Te):(n.endingStart=t?this.zeroSlopeAtStart?Te:Ae:2402,n.endingEnd=e?this.zeroSlopeAtEnd?Te:Ae:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=i,this}}),ac.prototype=Object.assign(Object.create(n.prototype),{constructor:ac,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,o=t._propertyBindings,a=t._interpolants,s=i.uuid,l=this._bindingsByRootAndName,h=l[s];void 0===h&&(h={},l[s]=h);for(var c=0;c!==r;++c){var u=n[c],p=u.name,d=h[p];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[c].binding.parsedPath;++(d=new wh(rc.create(i,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,s[h]=l,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],o=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[n],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r];t:{for(var h in a)break t;delete o[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new Ll(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Nl.findByName(i,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[n];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var h=new oc(this,r,e);return this._bindAction(h,s),this._addInactiveAction(h,o,n),h},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Nl.findByName(i,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==i;++a){e[a]._update(n,t,r,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var h=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=h,e[h]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete n[i]}},uncacheRoot:function(t){var e=t.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),sc.prototype.clone=function(){return new sc(void 0===this.value.clone?this.value:this.value.clone())},lc.prototype=Object.assign(Object.create(On.prototype),{constructor:lc,isInstancedBufferGeometry:!0,copy:function(t){return On.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(hc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(hc.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Object.defineProperty(cc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(cc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),uc.prototype=Object.assign(Object.create(cc.prototype),{constructor:uc,isInstancedInterleavedBuffer:!0,copy:function(t){return cc.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),pc.prototype=Object.assign(Object.create(cn.prototype),{constructor:pc,isInstancedBufferAttribute:!0,copy:function(t){return cn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(dc.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){var n=i||[];return mc(t,this,n,e),n.sort(fc),n},intersectObjects:function(t,e,i){var n=i||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,o=t.length;r<o;r++)mc(t[r],this,n,e);return n.sort(fc),n}}),Object.assign(vc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Fe.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(gc.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(Oh=new Ue,function(t,e){var i=Oh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ue),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ue),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Ue),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Ue),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(Ih=new Ue,function(t){return Ih.copy(t).clamp(this.min,this.max).sub(t).length()}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),yc.prototype=Object.create(Ji.prototype),yc.prototype.constructor=yc,yc.prototype.isImmediateRenderObject=!0,_c.prototype=Object.create(aa.prototype),_c.prototype.constructor=_c,_c.prototype.update=(Rh=new Ge,Nh=new Ge,Bh=new He,function(){var t=["a","b","c"];this.object.updateMatrixWorld(!0),Bh.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,i=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,o=n.faces,a=0,s=0,l=o.length;s<l;s++)for(var h=o[s],c=0,u=h.vertexNormals.length;c<u;c++){var p=r[h[t[c]]],d=h.vertexNormals[c];Rh.copy(p).applyMatrix4(e),Nh.copy(d).applyMatrix3(Bh).normalize().multiplyScalar(this.size).add(Rh),i.setXYZ(a,Rh.x,Rh.y,Rh.z),a+=1,i.setXYZ(a,Nh.x,Nh.y,Nh.z),a+=1}else if(n&&n.isBufferGeometry){var f=n.attributes.position,m=n.attributes.normal;for(a=0,c=0,u=f.count;c<u;c++)Rh.set(f.getX(c),f.getY(c),f.getZ(c)).applyMatrix4(e),Nh.set(m.getX(c),m.getY(c),m.getZ(c)),Nh.applyMatrix3(Bh).normalize().multiplyScalar(this.size).add(Rh),i.setXYZ(a,Rh.x,Rh.y,Rh.z),a+=1,i.setXYZ(a,Nh.x,Nh.y,Nh.z),a+=1}i.needsUpdate=!0}),xc.prototype=Object.create(Ji.prototype),xc.prototype.constructor=xc,xc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},xc.prototype.update=(Dh=new Ge,zh=new Ge,function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Dh.setFromMatrixPosition(this.light.matrixWorld),zh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zh.sub(Dh)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),bc.prototype=Object.create(aa.prototype),bc.prototype.constructor=bc,bc.prototype.updateMatrixWorld=(kh=new Ge,Fh=new je,Uh=new je,function(t){var e=this.bones,i=this.geometry,n=i.getAttribute("position");Uh.getInverse(this.root.matrixWorld);for(var r=0,o=0;r<e.length;r++){var a=e[r];a.parent&&a.parent.isBone&&(Fh.multiplyMatrices(Uh,a.matrixWorld),kh.setFromMatrixPosition(Fh),n.setXYZ(o,kh.x,kh.y,kh.z),Fh.multiplyMatrices(Uh,a.parent.matrixWorld),kh.setFromMatrixPosition(Fh),n.setXYZ(o+1,kh.x,kh.y,kh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,Ji.prototype.updateMatrixWorld.call(this,t)}),wc.prototype=Object.create(mr.prototype),wc.prototype.constructor=wc,wc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},wc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Ec.prototype=Object.create(Ji.prototype),Ec.prototype.constructor=Ec,Ec.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ec.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,i=this.line.geometry.attributes.position,n=i.array;n[0]=t,n[1]=-e,n[2]=0,n[3]=t,n[4]=e,n[5]=0,n[6]=-t,n[7]=e,n[8]=0,n[9]=-t,n[10]=-e,n[11]=0,n[12]=t,n[13]=-e,n[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Mc.prototype=Object.create(Ji.prototype),Mc.prototype.constructor=Mc,Mc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Mc.prototype.update=(jh=new Ge,Vh=new Ei,Gh=new Ei,function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Vh.copy(this.light.color),Gh.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var r=i<n/2?Vh:Gh;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(jh.setFromMatrixPosition(this.light.matrixWorld).negate())}),qc.prototype=Object.create(aa.prototype),qc.prototype.constructor=qc,Ac.prototype=Object.create(aa.prototype),Ac.prototype.constructor=Ac,Tc.prototype=Object.create(aa.prototype),Tc.prototype.constructor=Tc,Tc.prototype.update=(Hh=new Ge,Wh=new Ge,Xh=new He,function(){this.object.updateMatrixWorld(!0),Xh.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,r=i.faces,o=0,a=0,s=r.length;a<s;a++){var l=r[a],h=l.normal;Hh.copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(t),Wh.copy(h).applyMatrix3(Xh).normalize().multiplyScalar(this.size).add(Hh),e.setXYZ(o,Hh.x,Hh.y,Hh.z),o+=1,e.setXYZ(o,Wh.x,Wh.y,Wh.z),o+=1}e.needsUpdate=!0}),Pc.prototype=Object.create(Ji.prototype),Pc.prototype.constructor=Pc,Pc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Pc.prototype.update=(Yh=new Ge,Zh=new Ge,Jh=new Ge,function(){Yh.setFromMatrixPosition(this.light.matrixWorld),Zh.setFromMatrixPosition(this.light.target.matrixWorld),Jh.subVectors(Zh,Yh),this.lightPlane.lookAt(Jh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jh),this.targetLine.scale.z=Jh.length()}),Sc.prototype=Object.create(aa.prototype),Sc.prototype.constructor=Sc,Sc.prototype.update=function(){var t,e,i=new Ge,n=new Ki;function r(r,o,a,s){i.set(o,a,s).unproject(n);var l=e[r];if(void 0!==l)for(var h=t.getAttribute("position"),c=0,u=l.length;c<u;c++)h.setXYZ(l[c],i.x,i.y,i.z)}return function(){t=this.geometry,e=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Lc.prototype=Object.create(aa.prototype),Lc.prototype.constructor=Lc,Lc.prototype.update=(Kh=new mi,function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Kh.setFromObject(this.object),!Kh.isEmpty()){var e=Kh.min,i=Kh.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),Lc.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Cc.prototype=Object.create(aa.prototype),Cc.prototype.constructor=Cc,Cc.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Ji.prototype.updateMatrixWorld.call(this,t))},Ic.prototype=Object.create(oa.prototype),Ic.prototype.constructor=Ic,Ic.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),Ji.prototype.updateMatrixWorld.call(this,t)},Oc.prototype=Object.create(Ji.prototype),Oc.prototype.constructor=Oc,Oc.prototype.setDirection=(ec=new Ge,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(ec.set(t.z,0,-t.x).normalize(),tc=Math.acos(t.y),this.quaternion.setFromAxisAngle(ec,tc))}),Oc.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},Oc.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Rc.prototype=Object.create(aa.prototype),Rc.prototype.constructor=Rc;var Nc;function Bc(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Dc(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ks.call(this,t),this.type="catmullrom"}Vs.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Vs.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(hl.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new hn,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new Ge(r.x,r.y,r.z||0))}return e}}),Object.assign(cl.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Object.create(Ks.prototype),Object.create(Ks.prototype),Dc.prototype=Object.create(Ks.prototype),Object.assign(Dc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),qc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},bc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Vl.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Gl(t)}}),Object.assign(gc.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(mi.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),dr.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Fe,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Fe.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Fe.ceilPowerOfTwo(t)}}),Object.assign(He.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(je.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return void 0===Nc&&(Nc=new Ge),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),Nc.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,o)}}),gi.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ve.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(pr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(fr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(fr,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),fr.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),fr.getNormal(t,e,i,n)}}),Object.assign(ul.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ns(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ds(this,t)}}),Object.assign(Ue.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ge.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ui.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(hn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Ji.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Ji.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ta.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ea.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Vs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ho.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(pl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(cn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(On.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(On.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(sc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(hr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ei}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(Ps.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ur.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Yo.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Yo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Uo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(pi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Xo.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),_h.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new vh).load(t,function(t){e.setBuffer(t)}),this},bh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},gh.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)}},function(t,e,i){var n=i(52)("wks"),r=i(51),o=i(6).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";e.j=function(t,e){var i=(n=t.map(function(t){return t.object}),r=new s.b,n.forEach(function(t){var e=new s.b;e.setFromObject(t),r.union(e)}),r);var n,r;e&&(i.max.add(new s._1(0,0,e)),i.min.sub(new s._1(0,0,e)));return i},e.q=function(t){t&&t.map&&(t.map.dispose(),t.map=void 0);t.dispose()},e.h=function(){if(!n)try{(n=localStorage.getItem("mi-uuid"))||(n=a()(),localStorage.setItem("mi-uuid",n))}catch(t){n="NLS-"+a()()}return n},e.o=function(){if(!r)try{var t="mi-session";(r=sessionStorage.getItem(t))||(r=a()(),sessionStorage.setItem(t,r))}catch(t){r="NSS-"+a()()}return r},e.m=function(t){return"string"==typeof t?t:t.id},e.l=function(t,e){if(void 0==e)return t;if("string"==typeof t)return e.find(function(e){return e.id==t});return t},e.g=h,e.t=c,e.i=function(t){var e;try{var i=t.georeference[0],n=t.georeference[2],r=new l.LatLonSpherical(i.target.x,i.target.y),o=new l.LatLonSpherical(n.target.x,n.target.y),a=r.distanceTo(o),s=i.control.x-n.control.x,h=i.control.y-n.control.y,c=Math.sqrt(s*s+h*h);e=c/a}catch(i){e=1,console.warn(i),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e},e.k=function(t){var e;try{var i=t.georeference[0],n=t.georeference[2],r=new l.LatLonSpherical(i.target.x,i.target.y),o=new l.LatLonSpherical(n.target.x,n.target.y),a=(r.finalBearingTo(o)+0)*Math.PI/180,s=Math.atan2(n.control.y-i.control.y,n.control.x-i.control.x);e=-(a-s-Math.PI/2)}catch(i){e=0,console.warn(i),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e},e.r=function(t,e,i){var n,r,o,a=null,s=0;i||(i={});var l=function(){s=!1===i.leading?0:Date.now(),a=null,o=t.apply(n,r),a||(n=r=null)};return function(){var h=Date.now();s||!1!==i.leading||(s=h);var c=e-(h-s);return n=this,r=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=h,o=t.apply(n,r),a||(n=r=null)):a||!1===i.trailing||(a=setTimeout(l,c)),o}},e.c=function(t,e,i){var n;return function(){var r=this,o=arguments,a=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||t.apply(r,o)},e),a&&t.apply(r,o)}},e.e=function t(e){return e.reduce(function(e,i){return e.concat(Array.isArray(i)?t(i):i)},[])},e.d=p,e.a=function(t){if(1===p(t.path).length)return!1;return!0},e.f=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=t.path,o=p(r),a=o[0],s=o[o.length-1],l=o.map(function(t){return e.get(t)}),h=null!=t.distance?(v=t,v.instructions.reduce(function(t,e,i){var n=v.instructions[i+1];return"TakeVortex"===e.action.type&&null!=n&&n.node.map!==e.node.map&&(t.push(Object.assign({},e.node,{type:e.atLocation.type,vortex:!0})),t.push(Object.assign({},n.node,{type:e.atLocation.type,vortex:!0}))),t},[])):(f=t,m=void 0,f.path.reduce(function(t,e,i){var n=f.path[i+1];if(null!=n&&!0===n.vortex&&n.map!==e.map){var r=f.directions.find(function(t){return t.node.node===e.node}),o=r.node;t.push({map:o.map,node:o.node,x:o.x,y:o.y,type:r.vortex.type,vortex:!0}),m=r.vortex}else e.vortex&&(t.push(Object.assign({},e,{type:m.type})),m=null);return t},[])),c=void 0,u=void 0;var f,m;var v;return l.reduce(function(e,o,p){if(o.id!==a&&o.id!==s){var f=d(o.id,h),m=f.entry.node||f.entry.id,v=f.exit.node||f.exit.id,g=(_=m,x=v,b=t.path,w=o.mapScale,E=b.indexOf(b.find(function(t){return null!=t.id?t.id===_:t.node===_})),M=b.indexOf(b.find(function(t){return null!=t.id?t.id===x:t.node===x})),(q=b.slice(E,M+1)).reduce(function(t,e,i){if(i>0){var n=q[i-1];t+=(r=e,o=n,parseFloat(Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)).toFixed(2)))}var r,o;return t},0)/w);if(!function(t,e){var i={},n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(l.map===e){if(1===i[e])return!0;i[e]=0}else 0===i[e]&&(i[e]=1)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return!1}(r,o.id)&&!0===n&&f.entry.type===f.exit.type&&g<i){if(null==c){var y={connection:!0,maps:[o.id],elevation:o.mapClass.elevation};e.push(y),c=y}else c.maps.push(o.id);return e}}var _,x,b,w,E,M,q;if(null!=u&&null!=c){c.maps.sort(function(t,e){return l.indexOf(e.id)-l.indexOf(t.id)});var A=d(u.id,h),T=d(o.id,h);c.connectionNodes=[A.exit,T.entry]}return e.push(o.id),u=o,c=null,e},[])},e.s=function(t){var e=[];for(var i in t)e.push(i+": "+t[i]);return e.join("; ")},e.n=function(t,e,i){var n=t*(Math.PI/180)/2,r=e/2;return i*Math.tan(n)/r},e.p=function(t,e,i){var n=t.max.y,r=e/2,o=i/2*Math.PI/180;return r/Math.tan(o)+n},e.b=function(t){var e=t.maps,i=t.width,n=t.height,r=t.camera;return e.map(function(t){for(var e=h(t.object),o=1/0,a=1/0,s=-1/0,l=-1/0,u=c(e),p=0;p<u.length;p++){var d=u[p],f={x:((d=d.project(r)).x+1)/2*i,y:(1-d.y)/2*n};o=Math.min(f.x,o),a=Math.min(f.y,a),s=Math.max(f.x,s),l=Math.max(f.y,l)}var m={x:o,y:a},v={x:s,y:l};return{min:m,max:v}})};var n,r,o=i(189),a=i.n(o),s=i(3),l=i(66);i.n(l);function h(t){return(new s.b).setFromObject(t)}function c(t){var e=t.min,i=t.max;return[new s._1(e.x,e.y,e.z),new s._1(i.x,e.y,e.z),new s._1(e.x,i.y,e.z),new s._1(i.x,i.y,e.z),new s._1(e.x,e.y,i.z),new s._1(i.x,e.y,i.z),new s._1(e.x,i.y,i.z),new s._1(i.x,i.y,i.z)]}function u(t){return t.reduce(function(t,e){return t.includes(e)?t:[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(t),[e])},[])}function p(t){return u(t.map(function(t){return t.map}))}function d(t,e){var i=e.filter(function(e){return e.map===t});return{entry:i[0],exit:i[i.length-1]}}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports=o;var n=i(0),r=i(2);i(11);function o(t,e,i,n){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===n?Number.MAX_VALUE:n,this.bodyA=t,this.bodyB=e,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new r.ARRAY_TYPE(6);for(var a=0;a<6;a++)this.G[a]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}o.prototype.constructor=o,o.DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var t=this.stiffness,e=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(i*i*t*(1+4*e)),this.needsUpdate=!1},o.prototype.gmult=function(t,e,i,n,r){return t[0]*e[0]+t[1]*e[1]+t[2]*i+t[3]*n[0]+t[4]*n[1]+t[5]*r},o.prototype.computeB=function(t,e,i){var n=this.computeGW();return-this.computeGq()*t-n*e-this.computeGiMf()*i};var a=n.create(),s=n.create();o.prototype.computeGq=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=(e.position,i.position,e.angle),r=i.angle;return this.gmult(t,a,n,s,r)+this.offset},o.prototype.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.velocity,r=i.velocity,o=e.angularVelocity,a=i.angularVelocity;return this.gmult(t,n,o,r,a)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.vlambda,r=i.vlambda,o=e.wlambda,a=i.wlambda;return this.gmult(t,n,o,r,a)};var l=n.create(),h=n.create();o.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,i=t.force,r=t.angularForce,o=e.force,a=e.angularForce,s=t.invMassSolve,c=e.invMassSolve,u=t.invInertiaSolve,p=e.invInertiaSolve,d=this.G;return n.scale(l,i,s),n.multiply(l,t.massMultiplier,l),n.scale(h,o,c),n.multiply(h,e.massMultiplier,h),this.gmult(d,l,r*u,h,a*p)},o.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,i=t.invMassSolve,n=e.invMassSolve,r=t.invInertiaSolve,o=e.invInertiaSolve,a=this.G;return a[0]*a[0]*i*t.massMultiplier[0]+a[1]*a[1]*i*t.massMultiplier[1]+a[2]*a[2]*r+a[3]*a[3]*n*e.massMultiplier[0]+a[4]*a[4]*n*e.massMultiplier[1]+a[5]*a[5]*o};var c=n.create(),u=n.create(),p=n.create();n.create(),n.create(),n.create();o.prototype.addToWlambda=function(t){var e=this.bodyA,i=this.bodyB,r=c,o=u,a=p,s=e.invMassSolve,l=i.invMassSolve,h=e.invInertiaSolve,d=i.invInertiaSolve,f=this.G;o[0]=f[0],o[1]=f[1],a[0]=f[3],a[1]=f[4],n.scale(r,o,s*t),n.multiply(r,r,e.massMultiplier),n.add(e.vlambda,e.vlambda,r),e.wlambda+=h*f[2]*t,n.scale(r,a,l*t),n.multiply(r,r,i.massMultiplier),n.add(i.vlambda,i.vlambda,r),i.wlambda+=d*f[5]*t},o.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},function(t,e,i){t.exports=r;var n=i(0);function r(t){t=t||{},this.body=null,this.position=n.fromValues(0,0),t.position&&n.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=r.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}r.idCounter=0,r.CIRCLE=1,r.PARTICLE=2,r.PLANE=4,r.CONVEX=8,r.LINE=16,r.BOX=32,Object.defineProperty(r,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),r.BOX}}),r.CAPSULE=64,r.HEIGHTFIELD=128,r.prototype.computeMomentOfInertia=function(t){},r.prototype.updateBoundingRadius=function(){},r.prototype.updateArea=function(){},r.prototype.computeAABB=function(t,e,i){},r.prototype.raycast=function(t,e,i,n){}},function(t,e){var i=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(0),r=i(91),o=i(29),a=i(70),s=i(40),l=i(39),h=i(41);function c(t){t=t||{},h.call(this),this.id=t.id||++c._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=n.create(),this.position=n.fromValues(0,0),t.position&&n.copy(this.position,t.position),this.interpolatedPosition=n.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=n.fromValues(0,0),this.previousAngle=0,this.velocity=n.fromValues(0,0),t.velocity&&n.copy(this.velocity,t.velocity),this.vlambda=n.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=n.create(),t.force&&n.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=c.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=c.DYNAMIC:this.type=c.STATIC,this.boundingRadius=0,this.aabb=new l,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=c.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}t.exports=c,c.prototype=new h,c.prototype.constructor=c,c._idCounter=0,c.prototype.updateSolveMassProperties=function(){this.sleepState===c.SLEEPING||this.type===c.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},c.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},c.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},c.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var u=new l,p=n.create();c.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,i=p,r=this.angle,o=0;o!==e;o++){var a=t[o],s=a.angle+r;n.rotate(i,a.position,r),n.add(i,i,this.position),a.computeAABB(u,i,s),0===o?this.aabb.copy(u):this.aabb.extend(u)}this.aabbNeedsUpdate=!1},c.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,i=0,r=0;r!==e;r++){var o=t[r],a=n.length(o.position),s=o.boundingRadius;a+s>i&&(i=a+s)}this.boundingRadius=i},c.prototype.addShape=function(t,e,i){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?n.copy(t.position,e):n.set(t.position,0,0),t.angle=i||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},c.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},c.prototype.updateMassProperties=function(){if(this.type===c.STATIC||this.type===c.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,i=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var o=0;o<e;o++){var a=t[o],s=n.squaredLength(a.position);r+=a.computeMomentOfInertia(i)+i*s}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass,n.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};n.create();c.prototype.applyForce=function(t,e){if(n.add(this.force,this.force,t),e){var i=n.crossLength(e,t);this.angularForce+=i}};var d=n.create(),f=n.create(),m=n.create();c.prototype.applyForceLocal=function(t,e){e=e||m;var i=d,n=f;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(n,e),this.applyForce(i,n)};var v=n.create();c.prototype.applyImpulse=function(t,e){if(this.type===c.DYNAMIC){var i=v;if(n.scale(i,t,this.invMass),n.multiply(i,this.massMultiplier,i),n.add(this.velocity,i,this.velocity),e){var r=n.crossLength(e,t);r*=this.invInertia,this.angularVelocity+=r}}};var g=n.create(),y=n.create(),_=n.create();c.prototype.applyImpulseLocal=function(t,e){e=e||_;var i=g,n=y;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(n,e),this.applyImpulse(i,n)},c.prototype.toLocalFrame=function(t,e){n.toLocalFrame(t,e,this.position,this.angle)},c.prototype.toWorldFrame=function(t,e){n.toGlobalFrame(t,e,this.position,this.angle)},c.prototype.vectorToLocalFrame=function(t,e){n.vectorToLocalFrame(t,e,this.angle)},c.prototype.vectorToWorldFrame=function(t,e){n.vectorToGlobalFrame(t,e,this.angle)},c.prototype.fromPolygon=function(t,e){e=e||{};for(var i=this.shapes.length;i>=0;--i)this.removeShape(this.shapes[i]);var a,s=new r.Polygon;if(s.vertices=t,s.makeCCW(),"number"==typeof e.removeCollinearPoints&&s.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!s.isSimple())return!1;this.concavePath=s.vertices.slice(0);for(i=0;i<this.concavePath.length;i++){var l=[0,0];n.copy(l,this.concavePath[i]),this.concavePath[i]=l}a=e.optimalDecomp?s.decomp():s.quickDecomp();var h=n.create();for(i=0;i!==a.length;i++){for(var c=new o({vertices:a[i].vertices}),u=0;u!==c.vertices.length;u++){l=c.vertices[u];n.sub(l,l,c.centerOfMass)}n.scale(h,c.centerOfMass,1),c.updateTriangles(),c.updateCenterOfMass(),c.updateBoundingRadius(),this.addShape(c,h)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};n.fromValues(0,0);var x=n.fromValues(0,0),b=n.fromValues(0,0),w=n.fromValues(0,0);c.prototype.adjustCenterOfMass=function(){var t=x,e=b,i=w,r=0;n.set(e,0,0);for(var o=0;o!==this.shapes.length;o++){var a=this.shapes[o];n.scale(t,a.position,a.area),n.add(e,e,t),r+=a.area}n.scale(i,e,1/r);for(o=0;o!==this.shapes.length;o++){a=this.shapes[o];n.sub(a.position,a.position,i)}n.add(this.position,this.position,i);for(o=0;this.concavePath&&o<this.concavePath.length;o++)n.sub(this.concavePath[o],this.concavePath[o],i);this.updateMassProperties(),this.updateBoundingRadius()},c.prototype.setZeroForce=function(){n.set(this.force,0,0),this.angularForce=0},c.prototype.resetConstraintVelocity=function(){var t=this.vlambda;n.set(t,0,0),this.wlambda=0},c.prototype.addConstraintVelocity=function(){var t=this.velocity;n.add(t,t,this.vlambda),this.angularVelocity+=this.wlambda},c.prototype.applyDamping=function(t){if(this.type===c.DYNAMIC){var e=this.velocity;n.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},c.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=c.AWAKE,this.idleTime=0,t!==c.AWAKE&&this.emit(c.wakeUpEvent)},c.prototype.sleep=function(){this.sleepState=c.SLEEPING,this.angularVelocity=0,this.angularForce=0,n.set(this.velocity,0,0),n.set(this.force,0,0),this.emit(c.sleepEvent)},c.prototype.sleepTick=function(t,e,i){if(this.allowSleep&&this.type!==c.SLEEPING){this.wantsToSleep=!1;this.sleepState;n.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=c.AWAKE):(this.idleTime+=i,this.sleepState=c.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},c.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var E=n.create(),M=n.create();c.prototype.integrate=function(t){var e=this.invMass,i=this.force,r=this.position,o=this.velocity;n.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),n.scale(E,i,t*e),n.multiply(E,this.massMultiplier,E),n.add(o,E,o),this.integrateToTimeOfImpact(t)||(n.scale(M,o,t),n.add(r,r,M),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var q=new a,A=new s({mode:s.ALL}),T=n.create(),P=n.create(),S=n.create(),L=n.create();c.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||n.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;n.normalize(T,this.velocity),n.scale(P,this.velocity,t),n.add(P,P,this.position),n.sub(S,P,this.position);var e,i=this.angularVelocity*t,r=n.length(S),o=1,a=this;if(q.reset(),A.callback=function(t){t.body!==a&&(e=t.body,t.getHitPoint(P,A),n.sub(S,P,a.position),o=n.length(S)/r,t.stop())},n.copy(A.from,this.position),n.copy(A.to,P),A.update(),this.world.raycast(q,A),!e)return!1;var s=this.angle;n.copy(L,this.position);for(var l=0,h=0,c=0,u=o;u>=h&&l<this.ccdIterations;){l++,c=(u-h)/2,n.scale(M,S,o),n.add(this.position,L,M),this.angle=s+i*o,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?h=c:u=c}return o=c,n.copy(this.position,L),this.angle=s,n.scale(M,S,o),n.add(this.position,this.position,M),this.fixedRotation||(this.angle+=i*o),!0},c.prototype.getVelocityAtPoint=function(t,e){return n.crossVZ(t,e,this.angularVelocity),n.subtract(t,this.velocity,t),t},c.sleepyEvent={type:"sleepy"},c.sleepEvent={type:"sleep"},c.wakeUpEvent={type:"wakeup"},c.DYNAMIC=1,c.STATIC=2,c.KINEMATIC=4,c.AWAKE=0,c.SLEEPY=1,c.SLEEPING=2},function(t,e,i){t.exports=r;var n=i(2);function r(t,e,i,r){this.type=i,r=n.defaults(r,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=r.collideConnected,r.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.DISTANCE=1,r.GEAR=2,r.LOCK=3,r.PRISMATIC=4,r.REVOLUTE=5,r.prototype.setStiffness=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var n=e[i];n.stiffness=t,n.needsUpdate=!0}},r.prototype.setRelaxation=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var n=e[i];n.relaxation=t,n.needsUpdate=!0}}},function(t,e,i){var n=i(6),r=i(9),o=i(19),a=i(24),s=i(25),l="prototype",h=function(t,e,i){var c,u,p,d,f=t&h.F,m=t&h.G,v=t&h.S,g=t&h.P,y=t&h.B,_=m?n:v?n[e]||(n[e]={}):(n[e]||{})[l],x=m?r:r[e]||(r[e]={}),b=x[l]||(x[l]={});m&&(i=e);for(c in i)p=((u=!f&&_&&void 0!==_[c])?_:i)[c],d=y&&u?s(p,n):g&&"function"==typeof p?s(Function.call,p):p,_&&a(_,c,p,t&h.U),x[c]!=p&&o(x,c,d),g&&b[c]!=p&&(b[c]=p)};n.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){var n=i(15);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";function n(){}Object.assign(n.prototype,{publish:function(t,e){this.subscribers&&this.subscribers[t]&&this.subscribers[t].forEach(function(t){"function"==typeof t&&t(e)})},on:function(t,e){this.subscribers||(this.subscribers={}),this.subscribers[t]=this.subscribers[t]||[],this.subscribers[t].push(e)},off:function(t,e){if(this.subscribers&&this.subscribers[t]){var i=this.subscribers[t].indexOf(e);-1!==i&&(this.subscribers[t][i]=void 0,this.subscribers[t].splice(i,1))}}}),e.a=n},function(t,e,i){"use strict";var n=i(47),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var o=i(32);o.inherits=i(22);var a=i(124),s=i(77);o.inherits(u,a);for(var l=r(s.prototype),h=0;h<l.length;h++){var c=l[h];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n(e,t)}},function(t,e){},function(t,e,i){var n=i(34),r=i(79);t.exports=i(23)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){function i(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}t.exports=i,i.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},i.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},i.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){t.exports=!i(49)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(6),r=i(19),o=i(35),a=i(51)("src"),s=i(141),l=(""+s).split("toString");i(9).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,i,s){var h="function"==typeof i;h&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(h&&(o(i,a)||r(i,a,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:s?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,i){var n=i(36);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,i){(function(i){var n,r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:a.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var r=this._tweens[i[n]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var o,a=new r;a.Group=r,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"==typeof window&&void 0!==i&&i.hrtime?a.now=function(){var t=i.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?a.now=window.performance.now.bind(window.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?a.now()+parseFloat(t):t:a.now(),this._startTime+=this._delayTime;for(var e in this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===i){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},a.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-a.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*a.Easing.Bounce.In(2*t):.5*a.Easing.Bounce.Out(2*t-1)+.5}}},a.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=a.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[r],t[r+1>i?i:r+1],n-r)},Bezier:function(t,e){for(var i=0,n=t.length-1,r=Math.pow,o=a.Interpolation.Utils.Bernstein,s=0;s<=n;s++)i+=r(1-e,n-s)*r(e,s)*t[s]*o(n,s);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=a.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(r=Math.floor(n=i*(1+e))),o(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],n-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=a.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(o=[1],function(t){var e=1;if(o[t])return o[t];for(var i=t;i>1;i--)e*=i;return o[t]=e,e}),CatmullRom:function(t,e,i,n,r){var o=.5*(i-t),a=.5*(n-e),s=r*r;return(2*e-2*i+o+a)*(r*s)+(-3*e+3*i-2*o-a)*s+o*r+e}}},void 0===(n=function(){return a}.apply(e,[]))||(t.exports=n)}).call(e,i(1))},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(67);if(void 0!==t&&t.exports)var r=i(38);function o(t,e,i){if(!(this instanceof o))return new o(t,e,i);void 0===i&&(i=o.datum.WGS84),this.lat=Number(t),this.lon=Number(e),this.datum=i}o.ellipsoid={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563},Airy1830:{a:6377563.396,b:6356256.909,f:1/299.3249646},AiryModified:{a:6377340.189,b:6356034.448,f:1/299.3249646},Bessel1841:{a:6377397.155,b:6356078.962818,f:1/299.1528128},Clarke1866:{a:6378206.4,b:6356583.8,f:1/294.978698214},Clarke1880IGN:{a:6378249.2,b:6356515,f:1/293.466021294},GRS80:{a:6378137,b:6356752.31414,f:1/298.257222101},Intl1924:{a:6378388,b:6356911.946,f:1/297},WGS72:{a:6378135,b:6356750.5,f:1/298.26}},o.datum={ED50:{ellipsoid:o.ellipsoid.Intl1924,transform:[89.5,93.8,123.1,-1.2,0,0,.156]},Irl1975:{ellipsoid:o.ellipsoid.AiryModified,transform:[-482.53,130.596,-564.557,-8.15,-1.042,-.214,-.631]},NAD27:{ellipsoid:o.ellipsoid.Clarke1866,transform:[8,-160,-176,0,0,0,0]},NAD83:{ellipsoid:o.ellipsoid.GRS80,transform:[1.004,-1.91,-.515,-.0015,.0267,34e-5,.011]},NTF:{ellipsoid:o.ellipsoid.Clarke1880IGN,transform:[168,60,-320,0,0,0,0]},OSGB36:{ellipsoid:o.ellipsoid.Airy1830,transform:[-446.448,125.157,-542.06,20.4894,-.1502,-.247,-.8421]},Potsdam:{ellipsoid:o.ellipsoid.Bessel1841,transform:[-582,-105,-414,-8.3,1.04,.35,-3.08]},TokyoJapan:{ellipsoid:o.ellipsoid.Bessel1841,transform:[148,-507,-685,0,0,0,0]},WGS72:{ellipsoid:o.ellipsoid.WGS72,transform:[0,0,-4.5,-.22,0,0,.554]},WGS84:{ellipsoid:o.ellipsoid.WGS84,transform:[0,0,0,0,0,0,0]}},o.prototype.convertDatum=function(t){var e=this,i=null;if(e.datum==o.datum.WGS84&&(i=t.transform),t==o.datum.WGS84){i=[];for(var n=0;n<7;n++)i[n]=-e.datum.transform[n]}return null==i&&(e=this.convertDatum(o.datum.WGS84),i=t.transform),e.toCartesian().applyTransform(i).toLatLonE(t)},o.prototype.toCartesian=function(){var t=this.lat.toRadians(),e=this.lon.toRadians(),i=this.datum.ellipsoid.a,r=this.datum.ellipsoid.f,o=Math.sin(t),a=Math.cos(t),s=Math.sin(e),l=Math.cos(e),h=2*r-r*r,c=i/Math.sqrt(1-h*o*o);return new n((c+0)*a*l,(c+0)*a*s,(c*(1-h)+0)*o)},n.prototype.toLatLonE=function(t){var e=this.x,i=this.y,n=this.z,r=t.ellipsoid.a,a=t.ellipsoid.b,s=t.ellipsoid.f,l=2*s-s*s,h=l/(1-l),c=Math.sqrt(e*e+i*i),u=a*n/(r*c)*(1+h*a/Math.sqrt(c*c+n*n)),p=u/Math.sqrt(1+u*u),d=p/u,f=isNaN(d)?0:Math.atan2(n+h*a*p*p*p,c-l*r*d*d*d),m=Math.atan2(i,e),v=Math.sin(f);Math.cos(f),Math.sqrt(1-l*v*v);return new o(f.toDegrees(),m.toDegrees(),t)},n.prototype.applyTransform=function(t){var e=this.x,i=this.y,r=this.z,o=t[0],a=t[1],s=t[2],l=t[3]/1e6+1,h=(t[4]/3600).toRadians(),c=(t[5]/3600).toRadians(),u=(t[6]/3600).toRadians();return new n(o+e*l-i*u+r*c,a+e*u+i*l-r*h,s-e*c+i*h+r*l)},o.prototype.toString=function(t,e){return r.toLat(this.lat,t,e)+", "+r.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),void 0!==t&&t.exports&&(t.exports=o,t.exports.Vector3d=n)},function(t,e,i){var n=i(8),r=i(0),o=i(204);i(91);function a(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],i=0;i<e.length;i++){var o=r.create();r.copy(o,e[i]),this.vertices.push(o)}if(this.axes=[],t.axes)for(i=0;i<t.axes.length;i++){var a=r.create();r.copy(a,t.axes[i]),this.axes.push(a)}else for(i=0;i<this.vertices.length;i++){var s=this.vertices[i],l=this.vertices[(i+1)%this.vertices.length],h=r.create();r.sub(h,l,s),r.rotate90cw(h,h),r.normalize(h,h),this.axes.push(h)}if(this.centerOfMass=r.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=n.CONVEX,n.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}t.exports=a,a.prototype=new n,a.prototype.constructor=a;var s=r.create(),l=r.create();a.prototype.projectOntoLocalAxis=function(t,e){for(var i,n,o=null,a=null,l=(t=s,0);l<this.vertices.length;l++)i=this.vertices[l],n=r.dot(i,t),(null===o||n>o)&&(o=n),(null===a||n<a)&&(a=n);if(a>o){var h=a;a=o,o=h}r.set(e,a,o)},a.prototype.projectOntoWorldAxis=function(t,e,i,n){var o=l;this.projectOntoLocalAxis(t,n),0!==i?r.rotate(o,t,i):o=t;var a=r.dot(e,o);r.set(n,n[0]+a,n[1]+a)},a.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var i=this.vertices[e];t.push(i[0],i[1])}var n=o.Triangulate(t);for(e=0;e<n.length;e+=3){var r=n[e],a=n[e+1],s=n[e+2];this.triangles.push([r,a,s])}};var h=r.create(),c=r.create(),u=r.create(),p=r.create(),d=r.create();r.create(),r.create(),r.create(),r.create();a.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,i=this.centerOfMass,n=h,o=u,s=p,l=d,f=c;r.set(i,0,0);for(var m=0,v=0;v!==t.length;v++){var g=t[v];o=e[g[0]],s=e[g[1]],l=e[g[2]];r.centroid(n,o,s,l);var y=a.triangleArea(o,s,l);m+=y,r.scale(f,n,y),r.add(i,i,f)}r.scale(i,i,1/m)},a.prototype.computeMomentOfInertia=function(t){for(var e=0,i=0,n=this.vertices.length,o=n-1,a=0;a<n;o=a,a++){var s=this.vertices[o],l=this.vertices[a],h=Math.abs(r.crossLength(s,l));e+=h*(r.dot(l,l)+r.dot(l,s)+r.dot(s,s)),i+=h}return t/6*(e/i)},a.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,i=0;i!==t.length;i++){var n=r.squaredLength(t[i]);n>e&&(e=n)}this.boundingRadius=Math.sqrt(e)},a.triangleArea=function(t,e,i){return.5*((e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1]))},a.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,i=0;i!==t.length;i++){var n=t[i],r=e[n[0]],o=e[n[1]],s=e[n[2]],l=a.triangleArea(r,o,s);this.area+=l}},a.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)};var f=r.create(),m=r.create(),v=r.create();a.prototype.raycast=function(t,e,i,n){var o=f,a=m,s=v,l=this.vertices;r.toLocalFrame(o,e.from,i,n),r.toLocalFrame(a,e.to,i,n);for(var h=l.length,c=0;c<h&&!t.shouldStop(e);c++){var u=l[c],p=l[(c+1)%h],d=r.getLineSegmentsIntersectionFraction(o,a,u,p);d>=0&&(r.sub(s,p,u),r.rotate(s,s,-Math.PI/2+n),r.normalize(s,s),e.reportIntersection(t,d,s,c))}}},function(t,e,i){var n=i(0),r=i(7);i(2);function o(t,e,i){r.call(this,t,e,-i,i),this.contactPointA=n.create(),this.contactPointB=n.create(),this.t=n.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},o.prototype.getSlipForce=function(){return this.maxForce},o.prototype.computeB=function(t,e,i){this.bodyA,this.bodyB;var r=this.contactPointA,o=this.contactPointB,a=this.t,s=this.G;return s[0]=-a[0],s[1]=-a[1],s[2]=-n.crossLength(r,a),s[3]=a[0],s[4]=a[1],s[5]=n.crossLength(o,a),-this.computeGW()*e-i*this.computeGiMf()}},function(t,e,i){"use strict";(function(t){var n=i(242),r=i(243),o=i(122);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return h(this,t,e,i)}function h(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=p(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,i),r=(t=s(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|d(e.length);return 0===(t=s(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=s(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function p(t,e){var i=e.length<0?0:0|d(e.length);t=s(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return D(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:g(t,e,i,n,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):g(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function g(t,e,i,n,r){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(o=i;o<s;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(i+l>s&&(i=s-l),o=i;o>=0;o--){for(var u=!0,p=0;p<l;p++)if(h(t,o+p)!==h(e,p)){u=!1;break}if(u)return o}return-1}function y(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function _(t,e,i,n){return z(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function x(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function b(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,a,s,l,h=t[r],c=null,u=h>239?4:h>223?3:h>191?2:1;if(r+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&h)<<6|63&o)>127&&(c=l);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&(l=(15&h)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=u}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=w));return i}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return h(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return n=null,o=e,a=i,c(r=t),r<=0?s(n,r):void 0!==o?"string"==typeof a?s(n,r).fill(o,a):s(n,r).fill(o):s(n,r);var n,r,o,a},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var a=t[i];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return q(this,e,i);case"utf8":case"utf-8":return b(this,e,i);case"ascii":return E(this,e,i);case"latin1":case"binary":return M(this,e,i);case"base64":return x(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var o=r-n,a=i-e,s=Math.min(o,a),h=this.slice(n,r),c=t.slice(e,i),u=0;u<s;++u)if(h[u]!==c[u]){o=h[u],a=c[u];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,a,s,l,h,c,u,p,d,f=!1;;)switch(n){case"hex":return y(this,t,e,i);case"utf8":case"utf-8":return p=e,d=i,z(B(t,(u=this).length-p),u,p,d);case"ascii":return _(this,t,e,i);case"latin1":case"binary":return _(this,t,e,i);case"base64":return l=this,h=e,c=i,z(D(t),l,h,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=i,z(function(t,e){for(var i,n,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(t,(o=this).length-a),o,a,s);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function E(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function M(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function q(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=N(t[o]);return r}function A(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function T(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,n,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function S(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function L(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function C(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function I(t,e,i,n,o){return o||C(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function O(t,e,i,n,o){return o||C(t,0,i,8),r.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;i=new l(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=i-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return I(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return I(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return O(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return O(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},l.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=l.isBuffer(t)?t:B(new l(t,n).toString()),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function D(t){return n.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(e,i(10))},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(e,i(31).Buffer)},function(t,e){e.escape=function(t){return'"'+String(t).trim().replace(/"/g,'\\"')+'"'},e.unescape=function(t){return String(t).trim().replace(/"/g,"")},e.argsToArray=function(t){for(var e=[],i=0;i<=arguments.length;i++)void 0!==arguments[i]&&e.push(arguments[i]);return e},e.isUtil=function(t){var e="object";switch(Object.prototype.toString.call(t)){case"[object String]":e="String";break;case"[object Array]":e="Array";break;case"[object Boolean]":e="Boolean"}return e}},function(t,e,i){var n=i(14),r=i(139),o=i(140),a=Object.defineProperty;e.f=i(23)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n={parseDMS:function(t){if("number"==typeof t&&isFinite(t))return Number(t);var e,i=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==i[i.length-1]&&i.splice(i.length-1),""==i)return NaN;switch(i.length){case 3:e=i[0]/1+i[1]/60+i[2]/3600;break;case 2:e=i[0]/1+i[1]/60;break;case 1:e=i[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(e=-e),Number(e)},separator:"",toDMS:function(t,e,i){if(isNaN(t))return null;if(void 0===e&&(e="dms"),void 0===i)switch(e){case"d":case"deg":i=4;break;case"dm":case"deg+min":i=2;break;case"dms":case"deg+min+sec":i=0;break;default:e="dms",i=0}var r,o,a,s;switch(t=Math.abs(t),e){default:case"d":case"deg":(o=t.toFixed(i))<100&&(o="0"+o),o<10&&(o="0"+o),r=o+"Â°";break;case"dm":case"deg+min":o=Math.floor(t),60==(a=(60*t%60).toFixed(i))&&(a=0,o++),o=("000"+o).slice(-3),a<10&&(a="0"+a),r=o+"Â°"+n.separator+a+"â€²";break;case"dms":case"deg+min+sec":o=Math.floor(t),a=Math.floor(3600*t/60)%60,60==(s=(3600*t%60).toFixed(i))&&(s=(0).toFixed(i),a++),60==a&&(a=0,o++),o=("000"+o).slice(-3),a=("00"+a).slice(-2),s<10&&(s="0"+s),r=o+"Â°"+n.separator+a+"â€²"+n.separator+s+"â€³"}return r},toLat:function(t,e,i){var r=n.toDMS(t,e,i);return null===r?"â€“":r.slice(1)+n.separator+(t<0?"S":"N")},toLon:function(t,e,i){var r=n.toDMS(t,e,i);return null===r?"â€“":r+n.separator+(t<0?"W":"E")},toBrng:function(t,e,i){t=(Number(t)+360)%360;var r=n.toDMS(t,e,i);return null===r?"â€“":r.replace("360","0")},compassPoint:function(t,e){void 0===e&&(e=3),t=(t%360+360)%360;var i=4*Math.pow(2,e-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(t*i/360)%i*16/i]}};void 0!==t&&t.exports&&(t.exports=n)},function(t,e,i){var n=i(0);i(2);function r(t){this.lowerBound=n.create(),t&&t.lowerBound&&n.copy(this.lowerBound,t.lowerBound),this.upperBound=n.create(),t&&t.upperBound&&n.copy(this.upperBound,t.upperBound)}t.exports=r;var o=n.create();r.prototype.setFromPoints=function(t,e,i,r){var a=this.lowerBound,s=this.upperBound;"number"!=typeof i&&(i=0),0!==i?n.rotate(a,t[0],i):n.copy(a,t[0]),n.copy(s,a);for(var l=Math.cos(i),h=Math.sin(i),c=1;c<t.length;c++){var u=t[c];if(0!==i){var p=u[0],d=u[1];o[0]=l*p-h*d,o[1]=h*p+l*d,u=o}for(var f=0;f<2;f++)u[f]>s[f]&&(s[f]=u[f]),u[f]<a[f]&&(a[f]=u[f])}e&&(n.add(this.lowerBound,this.lowerBound,e),n.add(this.upperBound,this.upperBound,e)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},r.prototype.copy=function(t){n.copy(this.lowerBound,t.lowerBound),n.copy(this.upperBound,t.upperBound)},r.prototype.extend=function(t){for(var e=2;e--;){var i=t.lowerBound[e];this.lowerBound[e]>i&&(this.lowerBound[e]=i);var n=t.upperBound[e];this.upperBound[e]<n&&(this.upperBound[e]=n)}},r.prototype.overlaps=function(t){var e=this.lowerBound,i=this.upperBound,n=t.lowerBound,r=t.upperBound;return(n[0]<=i[0]&&i[0]<=r[0]||e[0]<=r[0]&&r[0]<=i[0])&&(n[1]<=i[1]&&i[1]<=r[1]||e[1]<=r[1]&&r[1]<=i[1])},r.prototype.containsPoint=function(t){var e=this.lowerBound,i=this.upperBound;return e[0]<=t[0]&&t[0]<=i[0]&&e[1]<=t[1]&&t[1]<=i[1]},r.prototype.overlapsRay=function(t){var e=1/t.direction[0],i=1/t.direction[1],n=(this.lowerBound[0]-t.from[0])*e,r=(this.upperBound[0]-t.from[0])*e,o=(this.lowerBound[1]-t.from[1])*i,a=(this.upperBound[1]-t.from[1])*i,s=Math.max(Math.max(Math.min(n,r),Math.min(o,a))),l=Math.min(Math.min(Math.max(n,r),Math.max(o,a)));return l<0?-1:s>l?-1:s}},function(t,e,i){t.exports=r;var n=i(0);i(70),i(8),i(39);function r(t){t=t||{},this.from=t.from?n.fromValues(t.from[0],t.from[1]):n.create(),this.to=t.to?n.fromValues(t.to[0],t.to[1]):n.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:r.ANY,this.callback=t.callback||function(t){},this.direction=n.create(),this.length=1,this.update()}r.prototype.constructor=r,r.CLOSEST=1,r.ANY=2,r.ALL=4,r.prototype.update=function(){var t=this.direction;n.sub(t,this.to,this.from),this.length=n.length(t),n.normalize(t,t)},r.prototype.intersectBodies=function(t,e){for(var i=0,n=e.length;!t.shouldStop(this)&&i<n;i++){var r=e[i],o=r.getAABB();(o.overlapsRay(this)>=0||o.containsPoint(this.from))&&this.intersectBody(t,r)}};var o=n.create();r.prototype.intersectBody=function(t,e){var i=this.checkCollisionResponse;if(!i||e.collisionResponse)for(var r=o,a=0,s=e.shapes.length;a<s;a++){var l=e.shapes[a];if((!i||l.collisionResponse)&&(0!=(this.collisionGroup&l.collisionMask)&&0!=(l.collisionGroup&this.collisionMask))){n.rotate(r,l.position,e.angle),n.add(r,r,e.position);var h=l.angle+e.angle;if(this.intersectShape(t,l,h,r,e),t.shouldStop(this))break}}},r.prototype.intersectShape=function(t,e,i,r,o){(function(t,e,i){n.sub(a,i,t);var r=n.dot(a,e);return n.scale(s,e,r),n.add(s,s,t),n.squaredDistance(i,s)})(this.from,this.direction,r)>e.boundingRadius*e.boundingRadius||(this._currentBody=o,this._currentShape=e,e.raycast(t,this,r,i),this._currentBody=this._currentShape=null)},r.prototype.getAABB=function(t){var e=this.to,i=this.from;n.set(t.lowerBound,Math.min(e[0],i[0]),Math.min(e[1],i[1])),n.set(t.upperBound,Math.max(e[0],i[0]),Math.max(e[1],i[1]))};n.create();r.prototype.reportIntersection=function(t,e,i,o){this.from,this.to;var a=this._currentShape,s=this._currentBody;if(!(this.skipBackfaces&&n.dot(i,this.direction)>0))switch(this.mode){case r.ALL:t.set(i,a,s,e,o),this.callback(t);break;case r.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(i,a,s,e,o);break;case r.ANY:t.set(i,a,s,e,o)}};var a=n.create(),s=n.create()},function(t,e){var i=function(){};t.exports=i,i.prototype={constructor:i,on:function(t,e,i){e.context=i||this,void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;if(e){if(void 0!==i[t]&&-1!==i[t].indexOf(e))return!0}else if(void 0!==i[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var i=this._listeners,n=i[t].indexOf(e);return-1!==n&&i[t].splice(n,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=e.length;i<n;i++){var r=e[i];r.call(r.context,t)}}return this}}},function(t,e,i){var n=i(0),r=i(11);function o(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=o.AABB}t.exports=o,o.AABB=1,o.BOUNDING_CIRCLE=2,o.prototype.setWorld=function(t){this.world=t},o.prototype.getCollisionPairs=function(t){};var a=n.create();o.boundingRadiusCheck=function(t,e){n.sub(a,t.position,e.position);var i=n.squaredLength(a),r=t.boundingRadius+e.boundingRadius;return i<=r*r},o.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},o.prototype.boundingVolumeCheck=function(t,e){var i;switch(this.boundingVolumeType){case o.BOUNDING_CIRCLE:i=o.boundingRadiusCheck(t,e);break;case o.AABB:i=o.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},o.canCollide=function(t,e){var i=r.KINEMATIC,n=r.STATIC;return(t.type!==n||e.type!==n)&&(!(t.type===i&&e.type===n||t.type===n&&e.type===i)&&((t.type!==i||e.type!==i)&&((t.sleepState!==r.SLEEPING||e.sleepState!==r.SLEEPING)&&!(t.sleepState===r.SLEEPING&&e.type===n||e.sleepState===r.SLEEPING&&t.type===n))))},o.NAIVE=1,o.SAP=2},function(t,e,i){var n=i(8),r=i(0);function o(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=n.CIRCLE,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},o.prototype.computeAABB=function(t,e,i){var n=this.radius;r.set(t.upperBound,n,n),r.set(t.lowerBound,-n,-n),e&&(r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e))};var a=r.create(),s=r.create();o.prototype.raycast=function(t,e,i,n){var o=e.from,l=e.to,h=this.radius,c=Math.pow(l[0]-o[0],2)+Math.pow(l[1]-o[1],2),u=2*((l[0]-o[0])*(o[0]-i[0])+(l[1]-o[1])*(o[1]-i[1])),p=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2)-Math.pow(h,2),d=Math.pow(u,2)-4*c*p,f=a,m=s;if(!(d<0))if(0===d)r.lerp(f,o,l,d),r.sub(m,f,i),r.normalize(m,m),e.reportIntersection(t,d,m,-1);else{var v=Math.sqrt(d),g=1/(2*c),y=(-u-v)*g,_=(-u+v)*g;if(y>=0&&y<=1&&(r.lerp(f,o,l,y),r.sub(m,f,i),r.normalize(m,m),e.reportIntersection(t,y,m,-1),t.shouldStop(e)))return;_>=0&&_<=1&&(r.lerp(f,o,l,_),r.sub(m,f,i),r.normalize(m,m),e.reportIntersection(t,_,m,-1))}}},function(t,e,i){var n=i(7),r=i(0);function o(t,e){n.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=r.create(),this.penetrationVec=r.create(),this.contactPointB=r.create(),this.normalA=r.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeB=function(t,e,i){var n,o,a=this.bodyA,s=this.bodyB,l=this.contactPointA,h=this.contactPointB,c=a.position,u=s.position,p=this.penetrationVec,d=this.normalA,f=this.G,m=r.crossLength(l,d),v=r.crossLength(h,d);return f[0]=-d[0],f[1]=-d[1],f[2]=-m,f[3]=d[0],f[4]=d[1],f[5]=v,r.add(p,u,h),r.sub(p,p,c),r.sub(p,p,l),this.firstImpact&&0!==this.restitution?(o=0,n=1/e*(1+this.restitution)*this.computeGW()):(o=r.dot(d,p)+this.offset,n=this.computeGW()),-o*t-n*e-i*this.computeGiMf()};var a=r.create(),s=r.create(),l=r.create();o.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(a,this.contactPointA),this.bodyB.getVelocityAtPoint(s,this.contactPointB),r.subtract(l,a,s),r.dot(this.normalA,l)}},function(t,e,i){"use strict";var n=function(t){var e,i,n=this,r=document.createElement("div");r.style.display="none!important",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",this.hovering=!1,t.appendChild(r),this.show=function(t){n.hovering||n.setPosition(e,i),n.hovering=!0,r.style.removeProperty("display"),r.textContent=t.toString(),r.className=t.hoverLabelClass},this.hide=function(){n.hovering&&(n.hovering=!1,r.style.setProperty("display","none","important"),r.textContent="")},this.setZIndex=function(t){r.style.zIndex=t},this.setPosition=function(o,a){e=o,i=a,n.hovering&&(a-r.clientHeight>0?(a-=r.clientHeight,o+r.clientWidth>t.clientWidth&&(o-=r.clientWidth)):o=o-r.clientWidth-10,r.style.transform="translate("+o+"px, "+a+"px)")},this.destroy=function(){t.removeChild(r)}};n.MODES={NONE:1,NO_TEXT_LABEL_ONLY:2,ALL:3},e.a=n},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,a,s,l,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(r(i))for(s=Array.prototype.slice.call(arguments,1),a=(h=i.slice()).length,l=0;l<a;l++)h[l].apply(this,s);return!0},i.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,o,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(i=this._events[t]).length,o=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){o=s;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,r)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(e,i(1))},function(t,e,i){var n=i(31),r=n.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(r,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(15),r=i(6).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(9),r=i(6),o="__core-js_shared__",a=r[o]||(r[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(53)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,i){var n=i(143),r=i(80);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(56),r=i(37);t.exports=function(t){return n(r(t))}},function(t,e,i){var n=i(20);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(58),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(52)("keys"),r=i(51);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(37);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(20),r=i(4)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var n=i(34).f,r=i(35),o=i(4)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){"use strict";var n=i(36);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var r=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(o).concat([r]).join("\n")}var a;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(t,e,i){var n,r,o,a={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),l=(o={},function(t){if(void 0===o[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}o[t]=e}return o[t]}),h=null,c=0,u=[],p=i(187);function d(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=a[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(_(n.parts[o],e))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(_(n.parts[o],e));a[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):i.push(n[a]={id:a,parts:[s]})}return i}function m(t,e){var i=l(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),u.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function g(t){var e=document.createElement("style");return t.attrs.type="text/css",y(e,t.attrs),m(t,e),e}function y(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function _(t,e){var i,n,r,o,a,s;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var l=c++;i=h||(h=g(e)),n=w.bind(null,i,l,!1),r=w.bind(null,i,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=e,s=document.createElement("link"),a.attrs.type="text/css",a.attrs.rel="stylesheet",y(s,a.attrs),m(a,s),n=function(t,e,i){var n=i.css,r=i.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(n=p(n));r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,i=s,e),r=function(){v(i),i.href&&URL.revokeObjectURL(i.href)}):(i=g(e),n=function(t,e){var i=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),r=function(){v(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=f(t,e);return d(i,e),function(t){for(var n=[],r=0;r<i.length;r++){var o=i[r];(s=a[o.id]).refs--,n.push(s)}t&&d(f(t,e),e);for(r=0;r<n.length;r++){var s;if(0===(s=n[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var x,b=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function w(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,i){"use strict";e.LatLonSpherical=i(192),e.LatLonEllipsoidal=i(28);var n=i(193);for(var r in n)e.LatLonEllipsoidal[r]=n[r];e.LatLonVectors=i(194),e.Vector3d=i(67),e.Utm=i(88),e.Mgrs=i(195),e.OsGridRef=i(196),e.Dms=i(38)},function(t,e,i){"use strict";function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);this.x=Number(t),this.y=Number(e),this.z=Number(i)}n.prototype.plus=function(t){if(!(t instanceof n))throw new TypeError("v is not Vector3d object");return new n(this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.minus=function(t){if(!(t instanceof n))throw new TypeError("v is not Vector3d object");return new n(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.times=function(t){return t=Number(t),new n(this.x*t,this.y*t,this.z*t)},n.prototype.dividedBy=function(t){return t=Number(t),new n(this.x/t,this.y/t,this.z/t)},n.prototype.dot=function(t){if(!(t instanceof n))throw new TypeError("v is not Vector3d object");return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.cross=function(t){if(!(t instanceof n))throw new TypeError("v is not Vector3d object");return new n(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},n.prototype.negate=function(){return new n(-this.x,-this.y,-this.z)},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.prototype.unit=function(){var t=this.length();return 1==t?this:0==t?this:new n(this.x/t,this.y/t,this.z/t)},n.prototype.angleTo=function(t,e){if(!(t instanceof n))throw new TypeError("v is not Vector3d object");if(!(e instanceof n||void 0==e))throw new TypeError("n is not Vector3d object");var i=void 0==e?1:Math.sign(this.cross(t).dot(e)),r=this.cross(t).length()*i,o=this.dot(t);return Math.atan2(r,o)},n.prototype.rotateAround=function(t,e){if(!(t instanceof n))throw new TypeError("axis is not Vector3d object");for(var i=this.unit(),r=[i.x,i.y,i.z],o=t.unit(),a=Math.sin(e),s=Math.cos(e),l=[[o.x*o.x*(1-s)+s,o.x*o.y*(1-s)-o.z*a,o.x*o.z*(1-s)+o.y*a],[o.y*o.x*(1-s)+o.z*a,o.y*o.y*(1-s)+s,o.y*o.z*(1-s)-o.x*a],[o.z*o.x*(1-s)-o.y*a,o.z*o.y*(1-s)+o.x*a,o.z*o.z*(1-s)+s]],h=[0,0,0],c=0;c<3;c++)for(var u=0;u<3;u++)h[c]+=l[c][u]*r[u];return new n(h[0],h[1],h[2])},n.prototype.toString=function(t){var e=void 0===t?3:Number(t);return"["+this.x.toFixed(e)+","+this.y.toFixed(e)+","+this.z.toFixed(e)+"]"},void 0===Math.sign&&(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}),void 0!==t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";e.a={RESULT:{SUCCESS:"success",FAILED_NO_WEB_GL:"failed_nowebgl",FAILED_NO_AA:"failed_noaa",FAILED_TOO_SLOW:"failed_tooslow",FAILED_TEXTURE_SIZE:"failed_texturesize"},NO_BENCHMARK:null}},function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return S});var n=i(3),r=i(89),o=i.n(r),a=i(214),s=i.n(a),l=i(27),h=i.n(l),c=(i(215),i(216)),u=i(117),p=i(45),d=i(219),f=i.n(d),m=i(220),v=i.n(m),g=i(221),y=i(16),_=i(5),x=i(222),b=i(119),w=i(226),E=i(229),M=i(121),q=i(240),A=i(284),T=i(286),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S={SINGLE_FLOOR:"single_floor",MULTI_FLOOR:"multi_floor"},L={},C={};C.MapView=u.a,C.HoverLabel=p.a,C.CameraControls=c.a,L.VertexShader=f.a,L.FragmentShader=v.a;var I=Math.PI,O=function e(i,r,a){var l=this;Object.assign(this,y.a.prototype),C.MapView.call(this,i,r,a),this.type="MapView3D";var c=!1,u=!1,p=!1,d=!1,f=!1,m=16777215,v=1,g=void 0;function O(t){l.controls.camera.fov=t,l.controls.camera.updateProjectionMatrix()}a&&("ON"==a.antialias||(p="OFF"!=a.antialias&&window.devicePixelRatio<=1),g=void 0===a.markerWorldIslandSplit||a.markerWorldIslandSplit,a.disableHover&&(d=!0),a.disableZoomOnMapSizeChange&&(f=!0),a.backgroundColor&&(m=a.backgroundColor),null!=a.backgroundAlpha&&(v=a.backgroundAlpha),null!=a.loadOptions&&(this.loadOptions=a.loadOptions)),this.viewState=S.SINGLE_FLOOR,this.setViewState=function(t){switch(this.viewState=t,t){case S.MULTI_FLOOR:this.controls.maxTilt=I,O(20),this.controls.enablePedestal=!0,this.controls.enablePan=!1,this.controls.enableRotate=!1,this.controls.enableZoom=!1,this.controls.enablePan=!1,this.controls.setAltitude(0);break;case S.SINGLE_FLOOR:this.controls.maxTilt=1.2,this.controls.setTilt(.3),this.controls.enablePedestal=!1,this.controls.enablePan=!0,this.controls.enableRotate=!0,this.controls.enableZoom=!0,this.controls.enablePan=!0,O(40),this.controls.enabled=!0;break;default:this.controls.maxTilt=1.2,this.controls.setTilt(.3),O(40),this.controls.enabled=!0,this.controls.enablePan=!0,this.controls.enableRotate=!0,this.controls.enableZoom=!0,this.controls.enablePan=!0}};var R,N=!0===a.alpha;try{R=new n._2({alpha:N,antialias:p})}catch(t){return void(a.onWebGLRendererError&&a.onWebGLRendererError(t))}function B(t){a.onWebGLContextCreationError&&a.onWebGLContextCreationError(t)}function D(t){t.preventDefault(),a.onWebGLContextLost&&a.onWebGLContextLost(t),u=!0}function z(){a.onWebGLContextRestored&&a.onWebGLContextRestored(),u=!1}R.domElement.addEventListener("webglcontextcreationerror",B),R.domElement.addEventListener("webglcontextlost",D),R.domElement.addEventListener("webglcontextrestored",z);var k=null,F={};this.scene=new n.T,this.resolutionScale=window.devicePixelRatio;var U=new q.a({width:this.container.clientWidth,height:this.container.clientHeight}),j=new n.N(40,this.container.clientWidth/this.container.clientHeight,50,1e5),V=new n.L;V.add(j);var G=new n.L;G.add(V),this.scene.add(G),j.updateProjectionMatrix(),j.updateMatrixWorld(!0),this.focusZoomFactor=1.1;var H=new w.a,W=!1;function X(){W=!0,tt=!0}function Y(){W=!1,tt=!0}var Z={time:0,clientc:0,clienty:0},J=new o.a.World({applyGravity:!1,emitImpactEvent:!1,islandSplit:g,solver:new o.a.GSSolver}),K=function(t){t.bodyA._mNumCollisions++,t.bodyB._mNumCollisions++},Q=function(t){t.bodyA._mNumCollisions--,t.bodyB._mNumCollisions--};J.on("beginContact",K),J.on("endContact",Q);var $=[],tt=!0,et=new Map,it={},nt={},rt=!1;this.smartLabelOrientationDelay=650;var ot={},at={},st=new E.a(it,J,R,l,this.loadOptions);t.env.__PRODUCTION__||(this.mapManager=st),this.scene.add(st.object);var lt=st.mapObjects,ht=new A.a({collisionEngine:U,cameraObject:j});Object.defineProperty(this,"currentMap",{get:function(){return st.currentMap?st.currentMap.id:st.mapObjects.size>0?Array.from(st.mapObjects)[0].id:(console.error("No maps loaded."),null)}});var ct,ut=new n._0,pt=new n.R,dt=new C.HoverLabel(i),ft=Date.now()+32;function mt(){ut.x=1/0,ut.y=1/0}this.setMap=st.setMap,this.expandMaps=st.expandMaps.bind(st),this.tiltMaps=st.tiltMaps.bind(st),this.contractMaps=st.contractMaps.bind(st),Object.defineProperty(this,"mapsExpanded",{get:function(){return st.expanded}}),this.showEntireMap=function(t){var e;(t||(t={}),t.interactiveOnly)?e=Object.keys(ot):e=lt.get(l.currentMap).object.children.map(function(t){return t.name});return t.polygons=e,this.focusOn(t)},this.resetPanBounds=function(){var t=lt.get(l.currentMap);l.controls.panBounds.min=l.controls.getPosition(),l.controls.panBounds.max=l.controls.getPosition();var e=t.boundingBox;e||(e=(new n.b).setFromObject(t.object),lt.get(l.currentMap).boundingBox=e);st.expandPanBounds(e)},this.addMap=st.addMap,this.removeMap=st.removeMap,this.removeAllMaps=st.removeAllMaps;var vt=function(t){var e,n;e=t,n=i.getBoundingClientRect(),ct={x:(e.clientX-n.left)/(n.right-n.left)*Yt,y:(e.clientY-n.top)/(n.bottom-n.top)*Zt},ut.x=ct.x/Yt*2-1,ut.y=-ct.y/Zt*2+1},gt=function(t){t.preventDefault(),vt(t),("touch"!=t.pointerType||void 0==t.pointerType&&c)&&(Ut(),dt.setPosition(ct.x,ct.y))},yt=function(t){Z={time:Date.now(),clientX:t.clientX,clientY:t.clientY},bt(t)},_t=function(t){c=!0,1==t.touches.length?yt(t.touches[0]):Z=0},xt=function(t){if(t.target.parentNode==i){var e=Math.sqrt(Math.pow(t.clientX-Z.clientX,2)+Math.pow(t.clientY-Z.clientY,2));if(Date.now()<Z.time+300&&e<=30){vt(t);var n=Lt();if(l.viewState===S.MULTI_FLOOR&&"function"==typeof l.onMapClicked){var r=St();if(null!=r&&!l.onMapClicked(r))return}for(var o=0,a=n.length;o<a;++o){var s=n[o];if(ot[s]&&!l.onPolygonClicked(s))return}l.onNothingClicked()}else wt(t),l.touchCount||(l.publish(l.currentInteractionEvent),this.currentInteractionEvent="")}},bt=function(t){window.PointerEvent&&"touch"==t.pointerType&&(l.touchCount=(l.touchCount||0)+1)},wt=function(t){window.PointerEvent&&"touch"==t.pointerType&&(l.touchCount=l.touchCount-1)},Et=function(t){t.preventDefault(),xt(t.changedTouches[0])},Mt=function(){U.resize({width:l.container.clientWidth,height:l.container.clientHeight}),st.resize(),l.tryRendering()};this.focusOnPolygon=function(t,e,i,n){return l.focusOn({polygons:[t],changeZoom:e,duration:i,curve:n})},this.focusOnPath=function(t,e,i,n,r){return l.focusOn({nodes:t,polygons:e,changeZoom:i,duration:n,curve:r})};var qt=void 0;this.focusOn=function(t){if(this.viewState!==S.MULTI_FLOOR&&null!=t){var e=void 0===t.changeZoom||t.changeZoom,i=t.duration||200,o=t.focusZoomFactor||l.focusZoomFactor,a=t.curve,s=t.horizontalFovFactor||1,h=t.verticalFovFactor||1,c=t.callback,u=void 0!==t.minZoom?t.minZoom:l.controls.minZoom,p=t.updateZoomLimits||!0,d=!1,f=[];if(t.nodes)for(var m=t.nodes,v=0,g=m.length;v<g;v++){var y=m[v];"string"==typeof y&&(y=Object(_.l)(y,r.nodes)),void 0!=y.map&&y.map!=l.currentMap||(f.push(l.convertTo3DMapPosition(y)),d=!0)}if(t.debug){qt&&qt.destroy(),qt=new n.L,l.scene.add(qt);var x=new n.d(100,100,100),b=new n.H({color:65280})}if(t.points&&(t.points.forEach(function(t){return f.push(t)}),d=!0),t.boundingBox){var w=t.boundingBox,E=w.min,M=w.max;[new n._1(E.x,E.y,E.z),new n._1(E.x,M.y,E.z),new n._1(M.x,E.y,E.z),new n._1(M.x,M.y,E.z),new n._1(E.x,E.y,M.z),new n._1(E.x,M.y,M.z),new n._1(M.x,E.y,M.z),new n._1(M.x,M.y,M.z)].forEach(function(e){if(t.debug){var i=new n.G(x,b);i.position.set(e.x,e.y,e.z),qt.add(i)}f.push(e)}),d=!0}if(t.polygons){var q=t.polygons;for(v=0,g=q.length;v<g;v++){var A=Object(_.m)(q[v]),T=lt.get(l.currentMap).objectsDictionary[A];if(T){for(var P=T.geometry.attributes?T.geometry.attributes.position:[],L=0,C=P.count;L<C;L++){var I=new n._1;I.set(P.getX(L),P.getY(L),P.getZ(L)),f.push(I)}d=!0}}}if(d){l.tryRendering();var O=t.padding||this.cachedPadding||{top:0,bottom:0,left:0,right:0},R=At(f,s,h,O,!0),N=l.getZoomLevelForCurrentMap(),B=R.zoom;p&&(l.controls.restrictZoomLimits(N),l.controls.expandZoomLimits(B*o));var D={position:R.position,tilt:t.tilt,rotation:t.rotation};return e&&(D.zoom=Math.max(R.zoom*o,u)),l.controls.animateCamera(D,i,a,c)}return l.controls.animateCamera({},i,a,c)}},this.CAMERA_FRAME_PADDING_SIDES=["top","bottom","left","right"],this.CAMERA_FRAME_PADDING_UNITS={PIXELS:"pixels",PORTIONS:"portions"};var At=function(t,e,i,r,o){i&&!isNaN(i)||(i=1),e&&!isNaN(e)||(e=1);var a={position:l.controls.getPosition(),zoom:l.controls.minZoom};if(void 0==t||0==t.length)return a;r||(r={top:0,bottom:0,left:0,right:0,type:l.CAMERA_FRAME_PADDING_UNITS.PIXELS});var s=!0,h=!1,c=void 0;try{for(var u,p=l.CAMERA_FRAME_PADDING_SIDES[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var d=u.value;"number"!=typeof r[d]&&(r[d]=0)}}catch(t){h=!0,c=t}finally{try{!s&&p.return&&p.return()}finally{if(h)throw c}}if(r.type||(r.type=l.CAMERA_FRAME_PADDING_UNITS.PIXELS),r.type===l.CAMERA_FRAME_PADDING_UNITS.PORTIONS&&(r={top:r.top*Zt,bottom:r.bottom*Zt,left:r.left*Yt,right:r.right*Yt,type:l.CAMERA_FRAME_PADDING_UNITS.PIXELS}),r.left+r.right>=Yt||r.top+r.bottom>=Zt)return a;G.updateMatrixWorld();var f=j.matrixWorldInverse,m=j.fov*(Math.PI/180)/2,v=m*i,g=Math.atan(Math.tan(m)*(Yt/Zt))*e;if(1==t.length){var y=t[0].clone();y.applyMatrix4(f);var _=l.controls.minZoom*Math.tan(g)*2,x=l.controls.minZoom*Math.tan(v)*2,b=(r.left-r.right)/2/Yt,w=(r.top-r.bottom)/2/Zt,E=new n._1(-b*_,w*x,0);return y.add(E),y.applyMatrix4(j.matrixWorld),a.position.x=y.x,a.position.y=y.y,a}for(var M,q=new n._1(1/0,1/0,1/0),A=new n._1(-1/0,-1/0,-1/0),T=0,P=t.length;T<P;T++)(M=t[T]).applyMatrix4(f),q.min(M),A.max(M);var S=A.x-q.x,L=A.y-q.y,C=Yt-r.left-r.right,I=Zt-r.top-r.bottom,O=(A.x+q.x)/2,R=(A.y+q.y)/2,N=S/C,B=L/I,D=l.controls.getZoomScaledMin(),z=l.controls.getZoomScaledMax(),k=D*Math.tan(g)*2,F=z*Math.tan(g)*2,U=k/Yt,V=F/Yt,H=Math.max(N,B);o||(H=Math.min(Math.max(H,U),V));var W=C*H,X=I*H,Y={x:O-W/2-r.left*H,y:R-X/2-r.bottom*H},Z={x:O+W/2+r.right*H,y:R+X/2+r.top*H},J=(Y.x+Z.x)/2,K=(Y.y+Z.y)/2,Q=Math.abs(J-Y.x),$=Math.abs(K-Y.y),tt=Q/Math.tan(g),et=$/Math.tan(v),it=new n._1;it.set(J,K,A.z+Math.max(tt,et)),it.applyMatrix4(j.matrixWorld);var nt=new n._1;nt.set(J,K,A.z),nt.applyMatrix4(j.matrixWorld),nt.sub(it);var rt=it.z/nt.z;return a.position.x=it.x-nt.x*rt,a.position.y=it.y-nt.y*rt,nt.set(a.position.x,a.position.y,0),it.sub(nt),a.zoom=it.length(),a};this.setPadding=function(t){this.cachedPadding=t||{top:0,bottom:0,left:0,right:0}},this.getZoomLevelForPolygon=function(t){var e=Object(_.m)(t),i=[],r=lt.get(l.currentMap).objectsDictionary[e];if(r){for(var o=r.geometry.attributes?r.geometry.attributes.position:[],a=0,s=o.count;a<s;a++){var h=new n._1;h.set(o.getX(a),o.getY(a),o.getZ(a)),i.push(h)}return At(i,1,1,this.cachedPadding,!0).zoom}return l.controls.getZoom()},this.getZoomLevelForCurrentMap=function(){var t=lt.get(l.currentMap).object;if(t){var e=lt.get(l.currentMap).boundingBox;if(!e)e=(new n.b).setFromObject(t),lt.get(l.currentMap).boundingBox=e;var i=[e.min.clone(),e.max.clone()];return At(i,1,1,this.cachedPadding,!0).zoom}return l.controls.getZoom()},this.getZoomLevelForObject=function(t){var e;e||(e=(new n.b).setFromObject(t));var i=[e.min.clone(),e.max.clone()];return At(i,1,1,0,!0).zoom},this.resetCamera=function(){var t=l.getZoomLevelForCurrentMap();l.controls.expandZoomLimits(t);l.controls.setMulti({x:0,y:0},t,0,.6)},this.getMapScale=function(){return lt.get(l.currentMap).getMapScale()},this.getNorth=function(){return lt.get(l.currentMap).getNorth()},this.getPositionLatLon=function(t,e,i){i=void 0==i?l.currentMap:Object(_.m)(i);var n=lt.get(i);if(void 0==n)throw new Error("Invalid map: "+i);return n.getPositionLatLon(t,e)};var Tt=function(t,e){t.style.transform="rotate("+(e+t._mRotationOffset)+"rad)"};this.lockNorth=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$.push(t),t._mRotationOffset=e,Tt(t,l.getNorth()+l.controls.getRotation())},this.unlockNorth=function(t){delete t._mRotationOffset,$=$.filter(function(e){return e!=t})};var Pt=function(t,e,i,n){var r=Object(_.m)(t),o=it[r];if(null!=o){o._MIOriginalMaterial||(o._MIOriginalMaterial=o.material),F[r]=r;var a=o.material.clone();a.color.set(e||l.colors.select||5022204),null!=n?(a.transparent=!0,a.opacity=n):a.transparent=!1,o.material=a,!nt[r]||i<=0||nt[r].setColor(i||l.colors.textSelect||16777215),l.tryRendering()}else console.error("Cannot set color of polygon "+r+", could be bad polygon or data mismatch.")};this.setPolygonColor=function(t,e,i,n){var o,a,s,l,h,c=Object(_.m)(t);if(void 0===it[c]){var u=(h=t,Object(_.l)(h,r.polygons));return void 0!=u&&null!=u.map&&null!=lt.get(u.map).object?(o=u,a=e,s=i,l=n,void lt.get(o.map).load().then(function(){Pt(o,a,s,l)})):void console.error("Cannot set color of polygon "+c+", could be bad polygon or data mismatch.")}Pt(t,e,i,n)},this.clearPolygonColor=function(t){var e=Object(_.m)(t),i=it[e];i&&(i._MIOriginalMaterial&&(Object(_.q)(i.material),i.material=i._MIOriginalMaterial.clone(),Object(_.q)(i._MIOriginalMaterial),i._MIOriginalMaterial=void 0),delete F[e],nt[e]&&nt[e].clearColor(),l.tryRendering())},this.clearAllPolygonColors=function(){for(var t=Object.keys(F),e=0,i=t.length;e<i;++e){var n=t[e];l.clearPolygonColor(F[n])}F={},l.tryRendering(),R.renderLists.dispose()};var St=function(){pt.setFromCamera(ut,j);var t=pt.intersectObjects(st.object.children,!0),e=void 0,i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;if(null!=(e=s.object.parent.userData&&"mappedin_map"===s.object.parent.userData.type?s.object.parent.userData.mapId:null))break}}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return e},Lt=function(){pt.setFromCamera(ut,j);var t=pt.intersectObjects(l.scene.children,!0).map(function(t){return t.object.name});s()(t);for(var e=[],i=0,n=t.length;i<n;++i){var r=t[i];r&&ot[r]&&e.push(r)}return e};this.addInteractivePolygon=function(t){var e=Object(_.m)(t);ot[e]=!0},this.removeInteractivePolygon=function(t){var e=Object(_.m)(t);delete ot[e]};var Ct=function(t){var e=Object(_.m)(t);if(it[e])return l.setPolygonColor(e,l.colors.hover,-1),!1},It=function(t){var e=it[t];if(e&&e.material.color.getHex()==l.colors.hover)return l.clearPolygonColor(t),!1};this.createMarker=function(t,i,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};o.collisionEngine=U;var a=new e.Marker(l,Object.assign({html:t,position:i,className:n,map:r},o));if(r&&r.id){var s=lt.get(r.id);a.setPosition(a._mOriginalPosition.clone().add(s.object.position))}return l.addMarker(a),l.tryRendering(),a},this.addMarker=function(t){if(l.container.appendChild(t.div),t._mPosition&&void 0==t._mAnchor){var e=t._mPosition.clone().project(j),i=(e.x+1)/2*Yt,n=(1-e.y)/2*Zt;(isNaN(i)||isNaN(n))&&(i=0,n=0);var r=new o.a.Body({mass:0,position:[i,n],angle:0,velocity:[0,0],angularVelocity:0,collisionResponse:!1,collisionGroup:0});t._mAnchor=r;var a=new o.a.Body({mass:20,position:[i,n],angle:0,damping:.9,velocity:[0,0],angularVelocity:0,collisionResponse:!t._mIgnoreCollisions,fixedRotation:!0});t._mOffsetWidth=t.div.offsetWidth,t._mOffsetHeight=t.div.offsetHeight;var s=new o.a.Box({width:t._mOffsetWidth+2*t._mMarkerBuffer,height:t._mOffsetHeight+2*t._mMarkerBuffer});a.addShape(s),t._mShadowElement=a,a._mNumCollisions=0;var h=new o.a.DistanceConstraint(r,a,{collideConnected:!1,distance:0});h.setStiffness(1e3),t._mConstraint=h}lt.get(t._mMapId).renderCommandQueue.marker.push(t),Ot(t),t.hide()};var Ot=function(t){t._mAnchor&&(J.addBody(t._mAnchor),J.addBody(t._mShadowElement),J.addConstraint(t._mConstraint)),kt(t),l.tryRendering()};this.removeMarker=function(t){var e;t.hide(),(e=t)._mAnchor&&(J.removeConstraint(e._mConstraint),J.removeBody(e._mAnchor),J.removeBody(e._mShadowElement)),l.tryRendering(),t.destroy(),lt.get(t._mMapId).markers=lt.get(t._mMapId).markers.filter(function(e){return t!=e}),lt.get(t._mMapId).renderCommandQueue.marker=lt.get(t._mMapId).renderCommandQueue.marker.filter(function(e){return t!=e}),l.container.contains(t.div)&&l.container.removeChild(t.div),t.div=null,t=null},this.removeAllMarkers=function(){Array.from(lt.values()).forEach(function(t){return t.removeMarkers(!0)})};var Rt=function(){},Nt=function(){setTimeout(function(){l.tryRendering()},l.smartLabelOrientationDelay)};function Bt(t){var e;if(t._mMapId){var i=lt.get(t._mMapId);e=t._mOriginalPosition.clone().applyMatrix4(i.object.matrix).project(j)}else e=t._mPosition.clone().project(j);var n=(e.x+1)/2*Yt-t._mOffsetWidth/2,r=(1-e.y)/2*Zt-t._mOffsetHeight/2;(isNaN(n)||isNaN(r))&&(n=0,r=0),o.a.vec2.set(t._mAnchor.position,n,r),o.a.vec2.set(t._mAnchor.previousPosition,n,r)}function Dt(t){return Math.trunc(100*t)/100}function zt(t){var e=t._mLockToAnchor||!t._mIgnoreCollisions&&!t.isColliding()?t._mAnchor.position:t._mShadowElement.interpolatedPosition,i=Dt(e[0]),n=Dt(e[1]),r=t._mIntitialRotation;t._mRotateWithCamera&&(r+=l.controls.getRotation()),(t.m_translateX!==i||t.m_translateY!==n||t.m_rotateZ!==r)&&t.setTransform({x:i,y:n,rotateZ:r})}this.convertTo3DMapPosition=function(t){var e=lt.get(t.map||l.currentMap).mapClass;return new n._1(t.x-e.width/2,-t.y+e.height/2,1)},this.getPositionPolygon=function(t){var e=Object(_.m)(t),i=lt.get(l.currentMap).objectsDictionary[e];if(i){i.geometry.computeBoundingBox();var r=i.geometry.boundingBox;return new n._1(r.min.x+(r.max.x-r.min.x)/2,r.min.y+(r.max.y-r.min.y)/2,r.max.z)}return null},this.getPositionNode=function(t){var e=t;return"string"==typeof e&&(e=Object(_.l)(t,r.nodes)),l.convertTo3DMapPosition(e)};var kt=function(t){Bt(t),zt(t)};function Ft(t,e,i){var r=(i=i||{}).color||l.colors.path||16745292,o=i.pulseColor||l.colors.pathPulse||16777215,a=i.radius||10,s=i.drawDuration||1500,c=i.curve||h.a.Easing.Circular.InOut,u={vertexes:{type:"f",value:1},resolution:{type:"v2",value:new n._0},complete:{type:"f",value:0},color:{type:"c",value:new n.k(r)},pulseColor:{type:"c",value:new n.k(o)},pulse:{type:"f",value:0},pulseLength:{type:"f",value:.05},pulseBulge:{type:"b",value:!1}},p=new n.h(t);p.curveType="catmullrom",p.tension=0;for(var d=new n.Z(p,30*e.length,a,8,!1),f=(new n.f).fromGeometry(d),m=new Float32Array(f.attributes.position.count),v=e.length;v<m.length;v++)m[v]=v;f.addAttribute("vertexIndex",new n.e(m,1));var g=new n.U({uniforms:u,vertexShader:L.VertexShader,fragmentShader:L.FragmentShader});g.transparent=!0,g.alphaTest=.5,u.resolution.value.x=100,u.resolution.value.y=100,u.vertexes.value=m.length;var y=new n.G(f,g),_=new h.a.Tween(u.pulse).to({value:1},s).easing(c).onUpdate(l.tryRendering),x=new h.a.Tween(u.complete).to({value:1},s).easing(c).onUpdate(l.tryRendering),b={id:y.id,object:y,tween:x,pulseTween:_,reset:function(){u.complete.value=0},resetPulse:function(){u.pulse.value=0}};return ht.add(b,t,{mapObject:lt.get(i.mapId),canvasWidth:Yt,canvasHeight:Zt}),b}this.createFont=e.createFont.bind(this),this.labelPolygon=function(t){if(t.smartLabels)return t.smartLabelOrientationDelay=l.smartLabelOrientationDelay,l.smartLabelPolygon(t);var e=t.font,i=lt.get(t.polygon.map||t.map||l.currentMap),o=void 0;return navigator.userAgent.indexOf("Trident")>-1&&(t.font=M.a,e=t.font),o=e instanceof n.u||t.legacyLabels?new x.a(t,r,i,M.a,it,nt,at,l):new w.b(t,r,i,Jt,it,nt,at,l,H),i.renderCommandQueue.low.push(function(){o.create()}),l.tryRendering(),nt[t.polygon.id]=o,o},this.pinCollisionSpace=[],this.smartLabelPolygon=function(t){var e=lt.get(t.polygon.map||t.map||l.currentMap);rt=!0;var i=new b.a(t,e,it,nt,l,l.pinCollisionSpace,U);return e.renderCommandQueue.low.push(i.create),nt[t.polygon.id]=i,l.tryRendering(),i},this.hideAllLabels=function(){st.mapObjectsSortedByElevation.map(function(t){return t.textObjects.forEach(function(t){return t.hide()})})},this.labelAllLocations=function(t){t||(t={});var e=t.excludeTypes||[],i=t.sortFunction,n=(t.locations||l.venue.locations).filter(function(t){return-1===e.indexOf(t.type)}),r=n;void 0!=i&&(r=n.sort(i));for(var o={},a=[],s=0,h=r.length;s<h;++s)for(var c=r[s],u=c.polygons,p=0,d=u.length;p<d;++p){var f=u[p];if(!o[f.id]){var m=f.canvasBounds;o[f.id]=!0;var v=lt.get(l.currentMap).mapClass,g=0;if(m){var y=m.x-v.width/2,_=-m.y+v.height/2;g=Math.sqrt(Math.pow(y,2)+Math.pow(_,2))}var x=c.name,b=c.shortName,w="";if(c.states&&c.states.length&&(w=c.state&&c.state.name),void 0==i){var E=l.getPrimaryLocationForPolygon(f);x=E.name,b=E.shortName}a.push({polygon:f,text:x,shortText:b,stateText:w,distance:g})}}a.sort(function(t,e){return e.distance-t.distance});for(var M=0,q=a.length;M<q;++M){var A=a[M];if(t.polygon=A.polygon,t.text=A.text,t.shortText=A.shortText,t.stateText=A.stateText,t.smartLabels){var T=void 0,P=!0,S=!1,L=void 0;try{for(var C,I=A.polygon.entrances[Symbol.iterator]();!(P=(C=I.next()).done);P=!0){var O=C.value;(T=l.getPositionNode(O.id))&&(t.position=T,l.smartLabelPolygon(t));break}}catch(t){S=!0,L=t}finally{try{!P&&I.return&&I.return()}finally{if(S)throw L}}}else l.labelPolygon(t)}st.mapObjectsSortedByElevation.forEach(function(t){return t.textObjects.forEach(function(t){return t.show()})})},this.removeLabel=function(t){nt[t].removeSelf(),nt[t]=null},this.removeAllLabels=function(){st.mapObjectsSortedByElevation.forEach(function(t){return t.removeLabels()}),nt={},rt=!1,l.pinCollisionSpace=[],R.renderLists.dispose()},this.enableImageFlippingForAllLocations=function(t){t||(t={});for(var e=t.excludeTypes||[],i=(t.locations||l.venue.locations.slice()).filter(function(t){return-1===e.indexOf(t.type)}),n={},r=0,o=i.length;r<o;++r)for(var a=i[r].polygons,s=0,h=a.length;s<h;++s){var c=a[s];n[c.id]||(n[c.id]=!0,l.enableImageFlippingForPolygon({polygon:c}))}},this.enableImageFlippingForPolygon=function(t){if(!(null==t||null==t.polygon&null==t.polygonId)){var e=t.polygon.id||t.polygonId,i=t.polygon,n=lt.get(t.map||i?i.map:l.currentMap),r=0,o=lt.get(l.currentMap).mapClass.perspectiveId;t.rotation&&!isNaN(t.rotation)?r=t.rotation*(Math.PI/180):o&&i&&i.perspectives&&i.perspectives[o]&&i.perspectives[o].image&&i.perspectives[o].image.rotation&&!isNaN(i.perspectives[o].image.rotation.z)?r=i.perspectives[o].image.rotation.z*(Math.PI/180):t.polygon&&t.polygon.image&&t.polygon.image.rotation&&!isNaN(t.polygon.image.rotation.z)&&(r=t.polygon.image.rotation.z*(Math.PI/180)),e&&n.load().then(function(){n.enableImageFlipping(e,r)})}},this.disableImageFlippingForAllPolygons=function(){for(var t=Object.keys(lt),e=0,i=t.length;e<i;e++){var n=t[e];lt.get(n).disableAllImageFlipping()}},this.getPathLength=function(t){for(var e=0,i=0,n=t.length-1;i<n;++i){var r=t[i],o=t[i+1];r.path.includes(o)&&(e+=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)))}return e},this.drawPath=function(t,e){var i={color:16745292,pulseColor:16777215,pulseIterations:1/0,radius:20,drawDuration:1e3,curve:h.a.Easing.Circular.InOut,drawConnectionSegments:!0},n=Object.assign({color:8246050,pulseColor:16777215,radius:20,drawDuration:1e3,curve:h.a.Easing.Circular.InOut},e.connectionPathOptions),r=Object.assign({},i,e,{connectionPathOptions:n}),o=void 0,a=void 0,s=void 0,c=0,u=t.reduce(function(e,i,n){var h=t[n+1],u=t[n-1];return 0===n?o=i.map:i.map==o&&null!=h||(s=l.drawPathSegment(t.slice(c,null==h?n+1:n),o,r),c=n,e.push(s),null!=a&&(a.tween.chain(s.tween),a.pulseTween.chain(s.pulseTween),a.pulseTween.onComplete(a.resetPulse)),a=s,null!=u&&u.map!=i.map&&!0===r.drawConnectionSegments&&(s=l.drawConnectionPathSegment([u,i],r.connectionPathOptions),e.push(s),null!=a&&(a.tween.chain(s.tween),a.pulseTween.chain(s.pulseTween),a.pulseTween.onComplete(a.resetPulse)),a=s),o=i.map),e},[]),p=u[0],d=u.length>1?u[u.length-1]:p;d.pulseTween.chain(p.pulseTween),p.tween.start(),p.pulseTween.start(),p.pulseTween.onComplete(p.resetPulse);var f=1,m=r.pulseIterations||1/0;return d.pulseTween.onComplete(function(){f>=m?u.forEach(function(t){t.pulseTween.onComplete(function(){}),t.pulseTween.stop(),t.resetPulse(),l.tryRendering()}):d.resetPulse(),f++}),l.tryRendering(),u},this.drawPathSegment=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{color:16745292,pulseColor:16777215,pulseIterations:1/0,radius:10,drawDuration:3e3,curve:h.a.Easing.Circular.InOut},r=e?Object(_.m)(e):l.currentMap,o=i.radius||10,a=[],s=lt.get(r).mapClass,c=0;c<t.length;c++){var u=t[c],p=new n._1(u.x-s.width/2,-u.y+s.height/2,o/2);a.push(p)}a.push(a[a.length-1].clone().setZ(-o)),a.unshift(a[0].clone().setZ(-o));var d=Ft(a,t,Object.assign({},i,{mapId:r}));return et.set(d.id,d),lt.get(r).add(d.object),d},this.drawConnectionPathSegment=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:8246050,pulseColor:16777215,pulseIterations:1/0,radius:20,drawDuration:1500,curve:h.a.Easing.Circular.InOut},i=lt.get(t[0].map),r=lt.get(t[1].map),o=i.mapClass,a=r.mapClass,s=new n._1(t[0].x-o.width/2,-t[0].y+o.height/2,0),c=new n._1(t[1].x-a.width/2,-t[1].y+a.height/2,0),u=Ft([s.clone().applyMatrix4(i.object.matrix),c.clone().applyMatrix4(r.object.matrix)],t,Object.assign({},e,{mapId:i.id}));return et.set(u.id,u),l.scene.add(u.object),u},this.removePathSegment=function(t){t&&(ht.remove(t),t.object.destroy(),t.pulseTween.stop(),t.tween.stop(),t.pulseTween=void 0,t.tween=void 0,et.delete(t.id))},this.removeAllPaths=function(){var t=!0,e=!1,i=void 0;try{for(var n,r=et.values()[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;l.removePathSegment(o)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}et.clear(),ht.clear(),R.renderLists.dispose()},this.setBackgroundColor=function(t,e){N?(e=(e=void 0!==e?+e:1)>=0&&e<=1?e:1,R.setClearColor(t,e)):R.setClearColor(t)};var Ut=function(){if(!d){for(var t=Lt(),e=!1,i=0,n=t.length;i<n;++i){var r=t[i];if(ot[r]){if(r!=k){k&&(It(k),k=null),F[r]||(k=r,Ct(r));var o=nt[Object(_.m)(r)];o&&o.showHoverLabel?dt.show(o):dt.hide()}e=!0;break}}0==e&&(k&&(It(k),k=null),dt.hide())}};this.setSize=function(t,e){Yt=R.domElement.clientWidth,Zt=R.domElement.clientHeight;var i=Math.floor(t*l.resolutionScale),n=Math.floor(e*l.resolutionScale);if(!f){var r=R.domElement.width!==i?R.domElement.width/i:R.domElement.height/n;l.controls.setZoom(r*l.controls.getZoom())}R.setSize(i,n,!1),j.aspect=i/n,j.updateProjectionMatrix(),j.updateMatrixWorld(!0)};var jt=0,Vt=0,Gt=function t(e){if(jt=0,!0!==u&&null!=R&&null!=l.currentMap){if(l.shouldMeasureCanvas){var i=Yt=R.domElement.clientWidth,n=Zt=R.domElement.clientHeight,r=Math.floor(i*l.resolutionScale),o=Math.floor(n*l.resolutionScale);if(R.domElement.width!==r||R.domElement.height!==o){var a=R.domElement.width!==r?R.domElement.width/r:R.domElement.height/o;l.controls.setZoom(a*l.controls.getZoom()),R.setSize(r,o,!1),j.aspect=r/o,j.updateProjectionMatrix()}}l.controls.update(),l.controls.isCameraMoving()&&(k&&(It(k),k=null),dt.hovering&&dt.hide()),R.render(l.scene,j),l.controls.postRender&&l.controls.postRender();for(var s=l.getNorth()+l.controls.getRotation(),h=0,c=$.length;h<c;++h)Tt($[h],s);Wt(),Xt(),tt=!1,--te>0&&0===jt&&(jt=requestAnimationFrame(t));var p=e/1e3;Vt||(Vt=p);var d=p-Vt;J.step(1/30,d,10);var f=!0,m=!1,v=void 0;try{for(var g,y=l.navigator._virtualLayers[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var x=g.value;Bt(x),zt(x)}}catch(t){m=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(m)throw v}}st.visibleMaps.forEach(function(t){t.markers.forEach(Bt),t.markers.forEach(zt);var e=t.renderCommandQueue;if(e.high.length>0||e.low.length>0){do{(e.high.length>0?e.high.pop():e.low.pop())(),l.tryRendering()}while(Date.now()<ft&&(e.high.length>0||e.low.length>0));ft=Date.now()+32}else t.mapLoaded&&P(t.mapLoaded)===("undefined"==typeof Function?"undefined":P(Function))&&(t.mapLoaded(),t.mapLoaded=null);if(0==e.high.length&&e.marker.length>0){for(var i=0;i<e.marker.length;i++){var n=e.marker[i];n._mDeleted||(t.markers.push(n),kt(n),n.show())}e.marker=[],l.tryRendering()}}),rt&&st.mapObjectsSortedByElevation.forEach(function(t){t.textObjects.forEach(function(e){t.visible?(e.enable(),function(t){var e=void 0;if(t.polygon.map){var i=lt.get(t.polygon.map);e=t._mOriginalPosition.clone().applyMatrix4(i.object.matrix).project(j)}t._mOffsetWidth=0,t._mOffsetHeight=0;var n=(e.x+1)/2*Yt-t._mOffsetWidth/2,r=(1-e.y)/2*Zt-t._mOffsetHeight/2,o=Dt(n),a=Dt(r);t.setTransform({x:o,y:a,rotateZ:0})}(e)):e.disable()})});var b=Object(_.e)(st.visibleMaps.map(function(t){return t.renderCommandQueue.high.concat(t.renderCommandQueue.low)}));ht.update(),0===b.length&&U.step(),Ht()}};this.tryRendering=function(){te=15,0===jt&&(jt=requestAnimationFrame(Gt))};var Ht=function(){J.step(.1,1,.1)},Wt=function(){var t=G.rotation.z;(W||tt)&&st.visibleMaps.forEach(function(e){for(var i=e.textObjects,n=0,r=i.length;n<r;++n){i[n].flipIfNeeded(t)}})},Xt=function(){var t=G.rotation.z;(W||tt)&&st.visibleMaps.forEach(function(e){for(var i=e.imagesToFlip,n=0,r=i.length;n<r;++n){i[n].flipIfNeeded(t)}})};i.appendChild(R.domElement),i.style.touchAction="auto",window.PointerEvent?(R.domElement.addEventListener("pointerdown",yt,!1),R.domElement.addEventListener("pointermove",gt,!1),R.domElement.addEventListener("pointerup",xt,!1),R.domElement.addEventListener("pointercancel",xt,!1)):(R.domElement.addEventListener("mousemove",gt,!1),R.domElement.addEventListener("mousedown",yt,!1),R.domElement.addEventListener("mouseup",xt,!1),R.domElement.addEventListener("mouseleave",gt,!1),R.domElement.addEventListener("touchstart",_t,!1),R.domElement.addEventListener("touchend",Et,!1),R.domElement.addEventListener("touchcancel",Et,!1)),window.addEventListener("resize",Mt,!1),i.style.overflow="hidden",R.domElement.style.width="100%",R.domElement.style.height="100%",this.canvasWidth=R.domElement.clientWidth,this.canvasHeight=R.domElement.clientHeight;var Yt=this.canvasWidth,Zt=this.canvasHeight;this.navigator=new T.a(this,st,r,Yt,Zt,j),this.shouldMeasureCanvas=!0,this.setBackgroundColor(m,v),R.setSize(Math.floor(Yt*l.resolutionScale),Math.floor(Zt*l.resolutionScale),!1),R.render(this.scene,j);var Jt="Sans-Serif",Kt=new n.m(16777215,.3);Kt.position.set(-150,-150,350),this.scene.add(Kt);var Qt=new n.y(16777215,16777215,.77);this.scene.add(Qt);var $t,te=0;this.controls=new C.CameraControls(j,R.domElement,this.scene,this),this.controls.enableZoom=!0,this.INTERACTION_EVENTS=this.controls.INTERACTION_EVENTS,this.controls.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,l.tryRendering),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,Rt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,Rt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,X),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,Rt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,mt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,X),this.controls.addEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,Rt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,mt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,Nt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,Nt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,Y),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,Nt),this.controls.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,Y),this.controls.addEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,Nt),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_PAN_EVENT.type,function(){l.currentInteractionEvent="user-pan"}),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_ROTATE_EVENT.type,function(){l.currentInteractionEvent="user-rotate"}),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_DOLLY_EVENT.type,function(){l.currentInteractionEvent="user-zoom"}),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_TILT_EVENT.type,function(){l.currentInteractionEvent="user-tilt"}),this.controls.addEventListener(this.controls.INTERACTION_EVENTS.USER_ZOOM_EVENT.type,function(){l.publish("user-zoom")});var ee=r.maps,ie=r.venue.defaultMap;if(a&&a.firstMap&&(ie=Object(_.m)(a.firstMap)),ie)for(var ne=0,re=ee.length;ne<re;++ne)if(ee[ne].id===ie){$t=ee[ne].id;break}$t||($t=ee[0].id);st.on("render",l.tryRendering),st.on("render:now",function(){R.render(l.scene,j)}),st.on("flippablesNeedUpdating",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];tt=t}),st.on("updateMarkerPosition",kt),st.loadMaps(ee,$t,a.onFirstMapLoaded,a.onDataLoaded,function(){}),this.setPadding(),this.destroy=function(){this.controls.dispose(),st.off("render"),st.off("render:now"),st.off("flippablesNeedUpdating"),st.off("updateMarkerPosition"),R.domElement.removeEventListener("webglcontextcreationerror",B),R.domElement.removeEventListener("webglcontextlost",D),R.domElement.removeEventListener("webglcontextrestored",z),window.PointerEvent?(R.domElement.removeEventListener("pointerdown",yt,!1),R.domElement.removeEventListener("pointermove",gt,!1),R.domElement.removeEventListener("pointerup",xt,!1),R.domElement.removeEventListener("pointercancel",xt,!1)):(R.domElement.removeEventListener("mousemove",gt,!1),R.domElement.removeEventListener("mousedown",yt,!1),R.domElement.removeEventListener("mouseup",xt,!1),R.domElement.removeEventListener("mouseleave",gt,!1),R.domElement.removeEventListener("touchstart",_t,!1),R.domElement.removeEventListener("touchend",Et,!1),R.domElement.removeEventListener("touchcancel",Et,!1)),window.removeEventListener("resize",Mt,!1),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.CHANGE_EVENT.type,l.tryRendering),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,Rt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,Rt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,X),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,Rt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,mt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,X),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.PAN_START_EVENT.type,Rt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.PAN_START_EVENT.type,mt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,Nt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,Nt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,Y),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,Nt),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,Y),l.controls.removeEventListener(l.controls.CAMERA_EVENTS.PAN_END_EVENT.type,Nt),J.off("beginContact",K),J.off("endContact",Q),l.removeAllPaths(),l.removeAllLabels(),l.removeAllMarkers(),l.disableImageFlippingForAllPolygons(),U.destroy(),st.destroy(),l.scene.destroy(),dt.destroy(),ot={},H.dispose(),R.dispose(),i.removeChild(R.domElement),R=void 0}};O.createFont=function(t){return Object(M.b)(t)},O.Marker=g.a,e.b=O}).call(e,i(1))},function(t,e,i){var n=i(0),r=i(40);function o(){this.normal=n.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}t.exports=o,o.prototype.reset=function(){n.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},o.prototype.getHitDistance=function(t){return n.distance(t.from,t.to)*this.fraction},o.prototype.hasHit=function(){return-1!==this.fraction},o.prototype.getHitPoint=function(t,e){n.lerp(t,e.from,e.to,this.fraction)},o.prototype.stop=function(){this.isStopped=!0},o.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===r.ANY},o.prototype.set=function(t,e,i,r,o){n.copy(this.normal,t),this.shape=e,this.body=i,this.fraction=r,this.faceIndex=o}},function(t,e){function i(t){this.id=t||i.idCounter++}t.exports=i,i.idCounter=0},function(t,e,i){i(2);var n=i(41);function r(t,e){t=t||{},n.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};r.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),o.bodies.length=0,e.getBodies(o.bodies),o.bodies.length&&this.solve(t,o))},r.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},r.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},r.prototype.addEquations=function(t){for(var e=0,i=t.length;e!==i;e++){var n=t[e];n.enabled&&this.equations.push(n)}},r.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},r.prototype.removeAllEquations=function(){this.equations.length=0},r.GS=1,r.ISLAND=2},function(t,e,i){var n=i(8),r=i(0);i(2);function o(t){(t=t||{}).type=n.PLANE,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.computeAABB=function(t,e,i){var n=i%(2*Math.PI),o=r.set,a=t.lowerBound,s=t.upperBound;o(a,-1e7,-1e7),o(s,1e7,1e7),0===n?s[1]=0:n===Math.PI/2?a[0]=0:n===Math.PI?a[1]=0:n===3*Math.PI/2&&(s[0]=0)},o.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var a=r.create(),s=(r.create(),r.create(),r.create()),l=r.create();o.prototype.raycast=function(t,e,i,n){var o=e.from,h=e.to,c=e.direction,u=a,p=s,d=l;r.set(p,0,1),r.rotate(p,p,n),r.sub(d,o,i);var f=r.dot(d,p);if(r.sub(d,h,i),!(f*r.dot(d,p)>0||r.squaredDistance(o,h)<f*f)){var m=r.dot(p,c);r.sub(u,o,i);var v=-r.dot(p,u)/m/e.length;e.reportIntersection(t,v,p,-1)}}},function(t,e,i){var n=i(8),r=i(0);function o(t){(t=t||{}).type=n.PARTICLE,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(t,e,i){r.copy(t.lowerBound,e),r.copy(t.upperBound,e)}},function(t,e,i){i(0);var n=i(2);function r(t,e,i){i=n.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=t,this.bodyB=e}t.exports=r,r.prototype.applyForce=function(){}},function(t,e,i){(e=t.exports=i(124)).Stream=e,e.Readable=e,e.Writable=i(77),e.Duplex=i(17),e.Transform=i(128),e.PassThrough=i(249)},function(t,e,i){"use strict";(function(e,n,r){var o=i(47);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o;y.WritableState=g;var h=i(32);h.inherits=i(22);var c={deprecate:i(248)},u=i(125),p=i(48).Buffer,d=r.Uint8Array||function(){};var f,m=i(126);function v(){}function g(t,e){s=s||i(17),t=t||{},this.objectMode=!!t.objectMode,e instanceof s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(d=i,d.writing=!1,d.writecb=null,d.length-=d.writelen,d.writelen=0,e)s=t,h=i,c=n,u=e,p=r,--h.pendingcb,c?(o(p,u),o(M,s,h),s._writableState.errorEmitted=!0,s.emit("error",u)):(p(u),s._writableState.errorEmitted=!0,s.emit("error",u),M(s,h));else{var a=w(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||b(t,i),n?l(x,t,i,a,r):x(t,i,a,r)}var s,h,c,u,p;var d}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||i(17),!(f.call(y,this)||this instanceof s))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function _(t,e,i,n,r,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function x(t,e,i,n){var r,o;i||(r=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),e.pendingcb--,n(),M(t,e)}function b(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var s=0,l=!0;i;)r[s]=i,i.isBuf||(l=!1),i=i.next,s+=1;r.allBuffers=l,_(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e)}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(_(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=i,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var i,n,r=w(e);return r&&(i=t,(n=e).prefinished||n.finalCalled||("function"==typeof i._final?(n.pendingcb++,n.finalCalled=!0,o(E,i,n)):(n.prefinished=!0,i.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}h.inherits(y,u),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||t&&t._writableState instanceof g}})):f=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var n,r,a,s,l,h,c,u,f,m,g,y=this._writableState,x=!1,b=(n=t,(p.isBuffer(n)||n instanceof d)&&!y.objectMode);return b&&!p.isBuffer(t)&&(r=t,t=p.from(r)),"function"==typeof e&&(i=e,e=null),b?e="buffer":e||(e=y.defaultEncoding),"function"!=typeof i&&(i=v),y.ended?(f=this,m=i,g=new Error("write after end"),f.emit("error",g),o(m,g)):(b||(a=this,s=y,h=i,c=!0,u=!1,null===(l=t)?u=new TypeError("May not write null values to stream"):"string"==typeof l||void 0===l||s.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(a.emit("error",u),o(h,u),c=!1),c))&&(y.pendingcb++,x=function(t,e,i,n,r,o){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,i));return e}(e,n,r);n!==a&&(i=!0,r="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,r,o);return l}(this,y,b,t,e,i)),x},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,M(t,e),i&&(e.finished?o(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,i(1),i(246).setImmediate,i(10))},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a=r>=0?arguments[r]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return e=i(o(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),r="/"===a(t,-1);return(t=i(o(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),a=Math.min(r.length,o.length),s=a,l=0;l<a;l++)if(r[l]!==o[l]){s=l;break}var h=[];for(l=s;l<r.length;l++)h.push("..");return(h=h.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=r(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return r(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(1))},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){"use strict";var n=i(53),r=i(13),o=i(24),a=i(19),s=i(26),l=i(157),h=i(62),c=i(160),u=i(4)("iterator"),p=!([].keys&&"next"in[].keys()),d="values",f=function(){return this};t.exports=function(t,e,i,m,v,g,y){l(i,e,m);var _,x,b,w=function(t){if(!p&&t in A)return A[t];switch(t){case"keys":case d:return function(){return new i(this,t)}}return function(){return new i(this,t)}},E=e+" Iterator",M=v==d,q=!1,A=t.prototype,T=A[u]||A["@@iterator"]||v&&A[v],P=T||w(v),S=v?M?w("entries"):P:void 0,L="Array"==e&&A.entries||T;if(L&&(b=c(L.call(new t)))!==Object.prototype&&b.next&&(h(b,E,!0),n||"function"==typeof b[u]||a(b,u,f)),M&&T&&T.name!==d&&(q=!0,P=function(){return T.call(this)}),n&&!y||!p&&!q&&A[u]||a(A,u,P),s[e]=P,s[E]=f,v)if(_={values:M?P:w(d),keys:g?P:w("keys"),entries:S},y)for(x in _)x in A||o(A,x,_[x]);else r(r.P+r.F*(p||q),e,_);return _}},function(t,e,i){var n=i(6).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(4)("unscopables"),r=Array.prototype;void 0==r[n]&&i(19)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){var n=i(14),r=i(36),o=i(4)("species");t.exports=function(t,e){var i,a=n(t).constructor;return void 0===a||void 0==(i=n(a)[o])?e:r(i)}},function(t,e,i){var n,r,o,a=i(25),s=i(170),l=i(82),h=i(50),c=i(6),u=c.process,p=c.setImmediate,d=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,v=0,g={},y="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){_.call(t.data)};p&&d||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},n(v),v},d=function(t){delete g[t]},"process"==i(20)(u)?n=function(t){u.nextTick(a(_,t,1))}:m&&m.now?n=function(t){m.now(a(_,t,1))}:f?(o=(r=new f).port2,r.port1.onmessage=x,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):n=y in h("script")?function(t){l.appendChild(h("script"))[y]=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:p,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(14),r=i(15),o=i(63);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(28);function r(t,e,i,o,a,s,l){if(!(this instanceof r))return new r(t,e,i,o,a,s,l);if(void 0===a&&(a=n.datum.WGS84),void 0===s&&(s=null),void 0===l&&(l=null),!(1<=t&&t<=60))throw new Error("Invalid UTM zone "+t);if(!e.match(/[NS]/i))throw new Error("Invalid UTM hemisphere "+e);this.zone=Number(t),this.hemisphere=e.toUpperCase(),this.easting=Number(i),this.northing=Number(o),this.datum=a,this.convergence=null===s?null:Number(s),this.scale=null===l?null:Number(l)}n.prototype.toUtm=function(){if(isNaN(this.lat)||isNaN(this.lon))throw new Error("Invalid point");if(!(-80<=this.lat&&this.lat<=84))throw new Error("Outside UTM limits");var t=Math.floor((this.lon+180)/6)+1,e=(6*(t-1)-180+3).toRadians(),i="CDEFGHJKLMNPQRSTUVWXX".charAt(Math.floor(this.lat/8+10));31==t&&"V"==i&&this.lon>=3&&(t++,e+=6..toRadians()),32==t&&"X"==i&&this.lon<9&&(t--,e-=6..toRadians()),32==t&&"X"==i&&this.lon>=9&&(t++,e+=6..toRadians()),34==t&&"X"==i&&this.lon<21&&(t--,e-=6..toRadians()),34==t&&"X"==i&&this.lon>=21&&(t++,e+=6..toRadians()),36==t&&"X"==i&&this.lon<33&&(t--,e-=6..toRadians()),36==t&&"X"==i&&this.lon>=33&&(t++,e+=6..toRadians());for(var n=this.lat.toRadians(),o=this.lon.toRadians()-e,a=this.datum.ellipsoid.a,s=this.datum.ellipsoid.f,l=Math.sqrt(s*(2-s)),h=s/(2-s),c=h*h,u=h*c,p=h*u,d=h*p,f=h*d,m=Math.cos(o),v=Math.sin(o),g=Math.tan(o),y=Math.tan(n),_=Math.sinh(l*Math.atanh(l*y/Math.sqrt(1+y*y))),x=y*Math.sqrt(1+_*_)-_*Math.sqrt(1+y*y),b=Math.atan2(x,m),w=Math.asinh(v/Math.sqrt(x*x+m*m)),E=a/(1+h)*(1+.25*c+1/64*p+1/256*f),M=[null,.5*h-2/3*c+5/16*u+41/180*p-127/288*d+7891/37800*f,13/48*c-.6*u+557/1440*p+281/630*d-1983433/1935360*f,61/240*u-103/140*p+15061/26880*d+167603/181440*f,49561/161280*p-179/168*d+6601661/7257600*f,34729/80640*d-3418889/1995840*f,.6650675310896665*f],q=b,A=1;A<=6;A++)q+=M[A]*Math.sin(2*A*b)*Math.cosh(2*A*w);var T=w;for(A=1;A<=6;A++)T+=M[A]*Math.cos(2*A*b)*Math.sinh(2*A*w);var P=.9996*E*T,S=.9996*E*q,L=1;for(A=1;A<=6;A++)L+=2*A*M[A]*Math.cos(2*A*b)*Math.cosh(2*A*w);var C=0;for(A=1;A<=6;A++)C+=2*A*M[A]*Math.sin(2*A*b)*Math.sinh(2*A*w);var I=Math.atan(x/Math.sqrt(1+x*x)*g)+Math.atan2(C,L),O=Math.sin(n),R=.9996*(Math.sqrt(1-l*l*O*O)*Math.sqrt(1+y*y)/Math.sqrt(x*x+m*m))*(E/a*Math.sqrt(L*L+C*C));P+=5e5,S<0&&(S+=1e7),P=Number(P.toFixed(6)),S=Number(S.toFixed(6));var N=Number(I.toDegrees().toFixed(9)),B=Number(R.toFixed(12));return new r(t,this.lat>=0?"N":"S",P,S,this.datum,N,B)},r.prototype.toLatLonE=function(){var t=this.zone,e=this.hemisphere,i=this.easting,r=this.northing;if(isNaN(t)||isNaN(i)||isNaN(r))throw new Error("Invalid coordinate");var o=this.datum.ellipsoid.a,a=this.datum.ellipsoid.f;i-=5e5,r="S"==e?r-1e7:r;for(var s=Math.sqrt(a*(2-a)),l=a/(2-a),h=l*l,c=l*h,u=l*c,p=l*u,d=l*p,f=o/(1+l)*(1+.25*h+1/64*u+1/256*d),m=i/(.9996*f),v=r/(.9996*f),g=[null,.5*l-2/3*h+37/96*c-1/360*u-81/512*p+96199/604800*d,1/48*h+1/15*c-437/1440*u+46/105*p-1118711/3870720*d,17/480*c-37/840*u-209/4480*p+5569/90720*d,4397/161280*u-11/504*p-830251/7257600*d,4583/161280*p-108847/3991680*d,.03233083094085698*d],y=v,_=1;_<=6;_++)y-=g[_]*Math.sin(2*_*v)*Math.cosh(2*_*m);var x=m;for(_=1;_<=6;_++)x-=g[_]*Math.cos(2*_*v)*Math.sinh(2*_*m);var b=Math.sinh(x),w=Math.sin(y),E=Math.cos(y),M=w/Math.sqrt(b*b+E*E),q=M;do{var A=Math.sinh(s*Math.atanh(s*q/Math.sqrt(1+q*q))),T=q*Math.sqrt(1+A*A)-A*Math.sqrt(1+q*q),P=(M-T)/Math.sqrt(1+T*T)*(1+(1-s*s)*q*q)/((1-s*s)*Math.sqrt(1+q*q));q+=P}while(Math.abs(P)>1e-12);var S=q,L=Math.atan(S),C=Math.atan2(b,E),I=1;for(_=1;_<=6;_++)I-=2*_*g[_]*Math.cos(2*_*v)*Math.cosh(2*_*m);var O=0;for(_=1;_<=6;_++)O+=2*_*g[_]*Math.sin(2*_*v)*Math.sinh(2*_*m);var R=Math.atan(Math.tan(y)*Math.tanh(x))+Math.atan2(O,I),N=Math.sin(L),B=.9996*(Math.sqrt(1-s*s*N*N)*Math.sqrt(1+S*S)*Math.sqrt(b*b+E*E))*(f/o/Math.sqrt(I*I+O*O));C+=(6*(t-1)-180+3).toRadians();var D=Number(L.toDegrees().toFixed(11)),z=Number(C.toDegrees().toFixed(11)),k=Number(R.toDegrees().toFixed(9)),F=Number(B.toFixed(12)),U=new n(D,z,this.datum);return U.convergence=k,U.scale=F,U},r.parse=function(t,e){if(void 0===e&&(e=n.datum.WGS84),null==(t=t.trim().match(/\S+/g))||4!=t.length)throw new Error("Invalid UTM coordinate â€˜"+t+"â€™");return new r(t[0],t[1],t[2],t[3],e)},r.prototype.toString=function(t){t=Number(t||0);var e=this.zone<10?"0"+this.zone:this.zone,i=this.hemisphere,n=this.easting,r=this.northing;return isNaN(e)||!i.match(/[NS]/)||isNaN(n)||isNaN(r)?"":e+" "+i+" "+n.toFixed(t)+" "+r.toFixed(t)},void 0===Math.sinh&&(Math.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2}),void 0===Math.cosh&&(Math.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2}),void 0===Math.tanh&&(Math.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}),void 0===Math.asinh&&(Math.asinh=function(t){return Math.log(t+Math.sqrt(1+t*t))}),void 0===Math.atanh&&(Math.atanh=function(t){return Math.log((1+t)/(1-t))/2}),void 0!==t&&t.exports&&(t.exports=r)},function(t,e,i){var n=t.exports={AABB:i(39),AngleLockEquation:i(90),Body:i(11),Broadphase:i(42),Capsule:i(94),Circle:i(43),Constraint:i(12),ContactEquation:i(44),ContactEquationPool:i(95),ContactMaterial:i(96),Convex:i(29),DistanceConstraint:i(97),Equation:i(7),EventEmitter:i(41),FrictionEquation:i(30),FrictionEquationPool:i(98),GearConstraint:i(99),GSSolver:i(100),Heightfield:i(205),Line:i(101),LockConstraint:i(102),Material:i(71),Narrowphase:i(103),NaiveBroadphase:i(206),Particle:i(74),Plane:i(73),Pool:i(21),RevoluteConstraint:i(106),PrismaticConstraint:i(109),Ray:i(40),RaycastResult:i(70),Box:i(105),RotationalVelocityEquation:i(107),SAPBroadphase:i(110),Shape:i(8),Solver:i(72),Spring:i(75),TopDownVehicle:i(207),LinearSpring:i(111),RotationalSpring:i(112),Utils:i(2),World:i(208),vec2:i(0),version:i(113).version};Object.defineProperty(n,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},function(t,e,i){var n=i(7);i(0);function r(t,e,i){i=i||{},n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},r.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},r.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},function(t,e,i){t.exports={Polygon:i(202),Point:i(93)}},function(t,e){function i(){}t.exports=i,i.eq=function(t,e,i){return i=i||0,Math.abs(t-e)<i}},function(t,e){function i(){}t.exports=i,i.area=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},i.left=function(t,e,n){return i.area(t,e,n)>0},i.leftOn=function(t,e,n){return i.area(t,e,n)>=0},i.right=function(t,e,n){return i.area(t,e,n)<0},i.rightOn=function(t,e,n){return i.area(t,e,n)<=0};var n=[],r=[];i.collinear=function(t,e,o,a){if(a){var s=n,l=r;s[0]=e[0]-t[0],s[1]=e[1]-t[1],l[0]=o[0]-e[0],l[1]=o[1]-e[1];var h=s[0]*l[0]+s[1]*l[1],c=Math.sqrt(s[0]*s[0]+s[1]*s[1]),u=Math.sqrt(l[0]*l[0]+l[1]*l[1]);return Math.acos(h/(c*u))<a}return 0==i.area(t,e,o)},i.sqdist=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}},function(t,e,i){var n=i(8),r=i(0);function o(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=n.CAPSULE,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){var e=this.radius,i=this.length+e,n=2*e;return t*(n*n+i*i)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var a=r.create();o.prototype.computeAABB=function(t,e,i){var n=this.radius;r.set(a,this.length/2,0),0!==i&&r.rotate(a,a,i),r.set(t.upperBound,Math.max(a[0]+n,-a[0]+n),Math.max(a[1]+n,-a[1]+n)),r.set(t.lowerBound,Math.min(a[0]-n,-a[0]-n),Math.min(a[1]-n,-a[1]-n)),r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e)};var s=r.create(),l=r.create(),h=r.create(),c=r.create(),u=r.fromValues(0,1);o.prototype.raycast=function(t,e,i,n){for(var o=e.from,a=e.to,p=(e.direction,s),d=l,f=h,m=c,v=this.length/2,g=0;g<2;g++){var y=this.radius*(2*g-1);if(r.set(f,-v,y),r.set(m,v,y),r.toGlobalFrame(f,f,i,n),r.toGlobalFrame(m,m,i,n),(x=r.getLineSegmentsIntersectionFraction(o,a,f,m))>=0&&(r.rotate(d,u,n),r.scale(d,d,2*g-1),e.reportIntersection(t,x,d,-1),t.shouldStop(e)))return}var _=Math.pow(this.radius,2)+Math.pow(v,2);for(g=0;g<2;g++){r.set(f,v*(2*g-1),0),r.toGlobalFrame(f,f,i,n);var x,b=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),w=2*((a[0]-o[0])*(o[0]-f[0])+(a[1]-o[1])*(o[1]-f[1])),E=Math.pow(o[0]-f[0],2)+Math.pow(o[1]-f[1],2)-Math.pow(this.radius,2);if(!((x=Math.pow(w,2)-4*b*E)<0))if(0===x){if(r.lerp(p,o,a,x),r.squaredDistance(p,i)>_&&(r.sub(d,p,f),r.normalize(d,d),e.reportIntersection(t,x,d,-1),t.shouldStop(e)))return}else{var M=Math.sqrt(x),q=1/(2*b),A=(-w-M)*q,T=(-w+M)*q;if(A>=0&&A<=1&&(r.lerp(p,o,a,A),r.squaredDistance(p,i)>_&&(r.sub(d,p,f),r.normalize(d,d),e.reportIntersection(t,A,d,-1),t.shouldStop(e))))return;if(T>=0&&T<=1&&(r.lerp(p,o,a,T),r.squaredDistance(p,i)>_&&(r.sub(d,p,f),r.normalize(d,d),e.reportIntersection(t,T,d,-1),t.shouldStop(e))))return}}}},function(t,e,i){var n=i(44),r=i(21);function o(){r.apply(this,arguments)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.create=function(){return new n},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,i){var n=i(71),r=i(7);function o(t,e,i){if(i=i||{},!(t instanceof n&&e instanceof n))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):r.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):r.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):r.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):r.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}t.exports=o,o.idCounter=0},function(t,e,i){var n=i(12),r=i(7),o=i(0),a=i(2);function s(t,e,i){i=a.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),n.call(this,t,e,n.DISTANCE,i),this.localAnchorA=o.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=o.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var s,l=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var c=o.create(),u=o.create(),p=o.create();o.rotate(c,l,t.angle),o.rotate(u,h,e.angle),o.add(p,e.position,u),o.sub(p,p,c),o.sub(p,p,t.position),this.distance=o.length(p)}s=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var d=new r(t,e,-s,s);this.equations=[d],this.maxForce=s;p=o.create();var f=o.create(),m=o.create(),v=this;d.computeGq=function(){var t=this.bodyA,e=this.bodyB,i=t.position,n=e.position;return o.rotate(f,l,t.angle),o.rotate(m,h,e.angle),o.add(p,n,m),o.sub(p,p,f),o.sub(p,p,i),o.length(p)-v.distance},this.setMaxForce(s),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}t.exports=s,s.prototype=new n,s.prototype.constructor=s;var l=o.create(),h=o.create(),c=o.create();s.prototype.update=function(){var t=this.equations[0],e=this.bodyA,i=this.bodyB,n=(this.distance,e.position),r=i.position,a=this.equations[0],s=t.G;o.rotate(h,this.localAnchorA,e.angle),o.rotate(c,this.localAnchorB,i.angle),o.add(l,r,c),o.sub(l,l,h),o.sub(l,l,n),this.position=o.length(l);var u=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(a.maxForce=0,a.minForce=-this.maxForce,this.distance=this.upperLimit,u=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(a.maxForce=this.maxForce,a.minForce=0,this.distance=this.lowerLimit,u=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||u){a.enabled=!0,o.normalize(l,l);var p=o.crossLength(h,l),d=o.crossLength(c,l);s[0]=-l[0],s[1]=-l[1],s[2]=-p,s[3]=l[0],s[4]=l[1],s[5]=d}else a.enabled=!1},s.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},s.prototype.getMaxForce=function(){return this.equations[0].maxForce}},function(t,e,i){var n=i(30),r=i(21);function o(){r.apply(this,arguments)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.create=function(){return new n},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,i){var n=i(12),r=(i(7),i(90));i(0);function o(t,e,i){i=i||{},n.call(this,t,e,n.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:e.angle-this.ratio*t.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new r(t,e,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},o.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},o.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},function(t,e,i){var n=i(0),r=i(72),o=i(2),a=i(30);function s(t){r.call(this,t,r.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new o.ARRAY_TYPE(this.arrayStep),this.Bs=new o.ARRAY_TYPE(this.arrayStep),this.invCs=new o.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.solve=function(t,e){this.sortEquations();var i=0,r=this.iterations,l=this.frictionIterations,h=this.equations,c=h.length,u=Math.pow(this.tolerance*c,2),p=e.bodies,d=e.bodies.length,f=(n.add,n.set,this.useZeroRHS),m=this.lambda;if(this.usedIterations=0,c)for(var v=0;v!==d;v++){p[v].updateSolveMassProperties()}m.length<c&&(m=this.lambda=new o.ARRAY_TYPE(c+this.arrayStep),this.Bs=new o.ARRAY_TYPE(c+this.arrayStep),this.invCs=new o.ARRAY_TYPE(c+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(m);var g,y,_=this.invCs,x=this.Bs;for(m=this.lambda,v=0;v!==h.length;v++){var b;((b=h[v]).timeStep!==t||b.needsUpdate)&&(b.timeStep=t,b.update()),x[v]=b.computeB(b.a,b.b,t),_[v]=b.computeInvC(b.epsilon)}if(0!==c){for(v=0;v!==d;v++){p[v].resetConstraintVelocity()}if(l){for(i=0;i!==l;i++){for(g=0,y=0;y!==c;y++){b=h[y];var w=s.iterateEquation(y,b,b.epsilon,x,_,m,f,t,i);g+=Math.abs(w)}if(this.usedIterations++,g*g<=u)break}for(s.updateMultipliers(h,m,1/t),y=0;y!==c;y++){var E=h[y];if(E instanceof a){for(var M=0,q=0;q!==E.contactEquations.length;q++)M+=E.contactEquations[q].multiplier;M*=E.frictionCoefficient/E.contactEquations.length,E.maxForce=M,E.minForce=-M}}}for(i=0;i!==r;i++){for(g=0,y=0;y!==c;y++){b=h[y];w=s.iterateEquation(y,b,b.epsilon,x,_,m,f,t,i);g+=Math.abs(w)}if(this.usedIterations++,g*g<=u)break}for(v=0;v!==d;v++)p[v].addConstraintVelocity();s.updateMultipliers(h,m,1/t)}},s.updateMultipliers=function(t,e,i){for(var n=t.length;n--;)t[n].multiplier=e[n]*i},s.iterateEquation=function(t,e,i,n,r,o,a,s,l){var h=n[t],c=r[t],u=o[t],p=e.computeGWlambda(),d=e.maxForce,f=e.minForce;a&&(h=0);var m=c*(h-p-i*u),v=u+m;return v<f*s?m=f*s-u:v>d*s&&(m=d*s-u),o[t]+=m,e.addToWlambda(m),m}},function(t,e,i){var n=i(8),r=i(0);function o(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=n.LINE,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var a=[r.create(),r.create()];o.prototype.computeAABB=function(t,e,i){var n=this.length/2;r.set(a[0],-n,0),r.set(a[1],n,0),t.setFromPoints(a,e,i,0)};r.create();var s=r.create(),l=r.create(),h=r.create(),c=r.fromValues(0,1);o.prototype.raycast=function(t,e,i,n){var o=e.from,a=e.to,u=l,p=h,d=this.length/2;r.set(u,-d,0),r.set(p,d,0),r.toGlobalFrame(u,u,i,n),r.toGlobalFrame(p,p,i,n);var f=r.getLineSegmentsIntersectionFraction(u,p,o,a);if(f>=0){var m=s;r.rotate(m,c,n),e.reportIntersection(t,f,m,-1)}}},function(t,e,i){var n=i(12),r=i(0),o=i(7);function a(t,e,i){i=i||{},n.call(this,t,e,n.LOCK,i);var a=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,s=(i.localAngleB,new o(t,e,-a,a)),l=new o(t,e,-a,a),h=new o(t,e,-a,a),c=r.create(),u=r.create(),p=this;s.computeGq=function(){return r.rotate(c,p.localOffsetB,t.angle),r.sub(u,e.position,t.position),r.sub(u,u,c),u[0]},l.computeGq=function(){return r.rotate(c,p.localOffsetB,t.angle),r.sub(u,e.position,t.position),r.sub(u,u,c),u[1]};var d=r.create(),f=r.create();h.computeGq=function(){return r.rotate(d,p.localOffsetB,e.angle-p.localAngleB),r.scale(d,d,-1),r.sub(u,t.position,e.position),r.add(u,u,d),r.rotate(f,d,-Math.PI/2),r.normalize(f,f),r.dot(u,f)},this.localOffsetB=r.create(),i.localOffsetB?r.copy(this.localOffsetB,i.localOffsetB):(r.sub(this.localOffsetB,e.position,t.position),r.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(s,l,h),this.setMaxForce(a)}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.setMaxForce=function(t){for(var e=this.equations,i=0;i<this.equations.length;i++)e[i].maxForce=t,e[i].minForce=-t},a.prototype.getMaxForce=function(){return this.equations[0].maxForce};var s=r.create(),l=r.create(),h=r.create(),c=r.fromValues(1,0),u=r.fromValues(0,1);a.prototype.update=function(){var t=this.equations[0],e=this.equations[1],i=this.equations[2],n=this.bodyA,o=this.bodyB;r.rotate(s,this.localOffsetB,n.angle),r.rotate(l,this.localOffsetB,o.angle-this.localAngleB),r.scale(l,l,-1),r.rotate(h,l,Math.PI/2),r.normalize(h,h),t.G[0]=-1,t.G[1]=0,t.G[2]=-r.crossLength(s,c),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-r.crossLength(s,u),e.G[4]=1,i.G[0]=-h[0],i.G[1]=-h[1],i.G[3]=h[0],i.G[4]=h[1],i.G[5]=r.crossLength(l,h)}},function(t,e,i){var n=i(0),r=n.sub,o=n.add,a=n.dot,s=(i(2),i(95)),l=i(98),h=i(104),c=i(7),u=(i(44),i(30),i(43)),p=i(29),d=i(8),f=(i(11),i(105));t.exports=N;var m=n.fromValues(0,1),v=n.fromValues(0,0),g=n.fromValues(0,0),y=n.fromValues(0,0),_=n.fromValues(0,0),x=n.fromValues(0,0),b=n.fromValues(0,0),w=n.fromValues(0,0),E=n.fromValues(0,0),M=n.fromValues(0,0),q=n.fromValues(0,0),A=n.fromValues(0,0),T=n.fromValues(0,0),P=n.fromValues(0,0),S=n.fromValues(0,0),L=n.fromValues(0,0),C=n.fromValues(0,0),I=n.fromValues(0,0),O=n.fromValues(0,0),R=[];function N(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new s({size:32}),this.frictionEquationPool=new l({size:64}),this.restitution=0,this.stiffness=c.DEFAULT_STIFFNESS,this.relaxation=c.DEFAULT_RELAXATION,this.frictionStiffness=c.DEFAULT_STIFFNESS,this.frictionRelaxation=c.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new h,this.contactSkinSize=.01}var B=n.create(),D=n.create();function z(t,e){n.set(t.vertices[0],.5*-e.length,-e.radius),n.set(t.vertices[1],.5*e.length,-e.radius),n.set(t.vertices[2],.5*e.length,e.radius),n.set(t.vertices[3],.5*-e.length,e.radius)}N.prototype.bodiesOverlap=function(t,e){for(var i=B,n=D,r=0,o=t.shapes.length;r!==o;r++){var a=t.shapes[r];t.toWorldFrame(i,a.position);for(var s=0,l=e.shapes.length;s!==l;s++){var h=e.shapes[s];if(e.toWorldFrame(n,h.position),this[a.type|h.type](t,a,i,a.angle+t.angle,e,h,n,h.angle+e.angle,!0))return!0}}return!1},N.prototype.collidedLastStep=function(t,e){var i=0|t.id,n=0|e.id;return!!this.collidingBodiesLastStep.get(i,n)},N.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var i=t[e],n=i.bodyA.id,r=i.bodyB.id;this.collidingBodiesLastStep.set(n,r,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},N.prototype.createContactEquation=function(t,e,i,n){var r=this.contactEquationPool.get();return r.bodyA=t,r.bodyB=e,r.shapeA=i,r.shapeB=n,r.restitution=this.restitution,r.firstImpact=!this.collidedLastStep(t,e),r.stiffness=this.stiffness,r.relaxation=this.relaxation,r.needsUpdate=!0,r.enabled=this.enabledEquations,r.offset=this.contactSkinSize,r},N.prototype.createFrictionEquation=function(t,e,i,n){var r=this.frictionEquationPool.get();return r.bodyA=t,r.bodyB=e,r.shapeA=i,r.shapeB=n,r.setSlipForce(this.slipForce),r.frictionCoefficient=this.frictionCoefficient,r.relativeVelocity=this.surfaceVelocity,r.enabled=this.enabledEquations,r.needsUpdate=!0,r.stiffness=this.frictionStiffness,r.relaxation=this.frictionRelaxation,r.contactEquations.length=0,r},N.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return n.copy(e.contactPointA,t.contactPointA),n.copy(e.contactPointB,t.contactPointB),n.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},N.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),r=e.bodyA;e.bodyB;n.set(i.contactPointA,0,0),n.set(i.contactPointB,0,0),n.set(i.t,0,0);for(var o=0;o!==t;o++)(e=this.contactEquations[this.contactEquations.length-1-o]).bodyA===r?(n.add(i.t,i.t,e.normalA),n.add(i.contactPointA,i.contactPointA,e.contactPointA),n.add(i.contactPointB,i.contactPointB,e.contactPointB)):(n.sub(i.t,i.t,e.normalA),n.add(i.contactPointA,i.contactPointA,e.contactPointB),n.add(i.contactPointB,i.contactPointB,e.contactPointA)),i.contactEquations.push(e);var a=1/t;return n.scale(i.contactPointA,i.contactPointA,a),n.scale(i.contactPointB,i.contactPointB,a),n.normalize(i.t,i.t),n.rotate90cw(i.t,i.t),i},N.prototype[d.LINE|d.CONVEX]=N.prototype.convexLine=function(t,e,i,n,r,o,a,s,l){return!l&&0},N.prototype[d.LINE|d.BOX]=N.prototype.lineBox=function(t,e,i,n,r,o,a,s,l){return!l&&0};var k=new f({width:1,height:1}),F=n.create();N.prototype[d.CAPSULE|d.CONVEX]=N.prototype[d.CAPSULE|d.BOX]=N.prototype.convexCapsule=function(t,e,i,r,o,a,s,l,h){var c=F;n.set(c,a.length/2,0),n.rotate(c,c,l),n.add(c,c,s);var u=this.circleConvex(o,a,c,l,t,e,i,r,h,a.radius);n.set(c,-a.length/2,0),n.rotate(c,c,l),n.add(c,c,s);var p=this.circleConvex(o,a,c,l,t,e,i,r,h,a.radius);if(h&&(u||p))return!0;var d=k;return z(d,a),this.convexConvex(t,e,i,r,o,d,s,l,h)+u+p},N.prototype[d.CAPSULE|d.LINE]=N.prototype.lineCapsule=function(t,e,i,n,r,o,a,s,l){return!l&&0};var U=n.create(),j=n.create(),V=new f({width:1,height:1});N.prototype[d.CAPSULE|d.CAPSULE]=N.prototype.capsuleCapsule=function(t,e,i,r,o,a,s,l,h){for(var c=U,u=j,p=0,d=0;d<2;d++){n.set(c,(0===d?-1:1)*e.length/2,0),n.rotate(c,c,r),n.add(c,c,i);for(var f=0;f<2;f++){n.set(u,(0===f?-1:1)*a.length/2,0),n.rotate(u,u,l),n.add(u,u,s),this.enableFrictionReduction&&(y=this.enableFriction,this.enableFriction=!1);var m=this.circleCircle(t,e,c,r,o,a,u,l,h,e.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=y),h&&m)return!0;p+=m}}this.enableFrictionReduction&&(y=this.enableFriction,this.enableFriction=!1);var v=V;z(v,e);var g=this.convexCapsule(t,v,i,r,o,a,s,l,h);if(this.enableFrictionReduction&&(this.enableFriction=y),h&&g)return!0;if(p+=g,this.enableFrictionReduction){var y=this.enableFriction;this.enableFriction=!1}z(v,a);var _=this.convexCapsule(o,v,s,l,t,e,i,r,h);return this.enableFrictionReduction&&(this.enableFriction=y),!(!h||!_)||(p+=_,this.enableFrictionReduction&&p&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p)},N.prototype[d.LINE|d.LINE]=N.prototype.lineLine=function(t,e,i,n,r,o,a,s,l){return!l&&0},N.prototype[d.PLANE|d.LINE]=N.prototype.planeLine=function(t,e,i,s,l,h,c,u,p){var d=v,f=g,q=y,A=_,T=x,P=b,S=w,L=E,C=M,I=R,O=0;n.set(d,-h.length/2,0),n.set(f,h.length/2,0),n.rotate(q,d,u),n.rotate(A,f,u),o(q,q,c),o(A,A,c),n.copy(d,q),n.copy(f,A),r(T,f,d),n.normalize(P,T),n.rotate90cw(C,P),n.rotate(L,m,s),I[0]=d,I[1]=f;for(var N=0;N<I.length;N++){var B=I[N];r(S,B,i);var D=a(S,L);if(D<0){if(p)return!0;var z=this.createContactEquation(t,l,e,h);O++,n.copy(z.normalA,L),n.normalize(z.normalA,z.normalA),n.scale(S,L,D),r(z.contactPointA,B,S),r(z.contactPointA,z.contactPointA,t.position),r(z.contactPointB,B,c),o(z.contactPointB,z.contactPointB,c),r(z.contactPointB,z.contactPointB,l.position),this.contactEquations.push(z),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(z))}}return!p&&(this.enableFrictionReduction||O&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(O)),O)},N.prototype[d.PARTICLE|d.CAPSULE]=N.prototype.particleCapsule=function(t,e,i,n,r,o,a,s,l){return this.circleLine(t,e,i,n,r,o,a,s,l,o.radius,0)},N.prototype[d.CIRCLE|d.LINE]=N.prototype.circleLine=function(t,e,i,s,l,h,c,u,p,d,f){d=d||0,f=void 0!==f?f:e.radius;var m=v,L=g,C=y,I=_,O=x,N=b,B=w,D=E,z=M,k=q,F=A,U=T,j=P,V=S,G=R;n.set(D,-h.length/2,0),n.set(z,h.length/2,0),n.rotate(k,D,u),n.rotate(F,z,u),o(k,k,c),o(F,F,c),n.copy(D,k),n.copy(z,F),r(N,z,D),n.normalize(B,N),n.rotate90cw(O,B),r(U,i,D);var H=a(U,O);r(I,D,c),r(j,i,c);var W=f+d;if(Math.abs(H)<W){n.scale(m,O,H),r(C,i,m),n.scale(L,O,a(O,j)),n.normalize(L,L),n.scale(L,L,d),o(C,C,L);var X=a(B,C),Y=a(B,D),Z=a(B,z);if(X>Y&&X<Z){if(p)return!0;var J=this.createContactEquation(t,l,e,h);return n.scale(J.normalA,m,-1),n.normalize(J.normalA,J.normalA),n.scale(J.contactPointA,J.normalA,f),o(J.contactPointA,J.contactPointA,i),r(J.contactPointA,J.contactPointA,t.position),r(J.contactPointB,C,c),o(J.contactPointB,J.contactPointB,c),r(J.contactPointB,J.contactPointB,l.position),this.contactEquations.push(J),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J)),1}}G[0]=D,G[1]=z;for(var K=0;K<G.length;K++){var Q=G[K];if(r(U,Q,i),n.squaredLength(U)<Math.pow(W,2)){if(p)return!0;J=this.createContactEquation(t,l,e,h);return n.copy(J.normalA,U),n.normalize(J.normalA,J.normalA),n.scale(J.contactPointA,J.normalA,f),o(J.contactPointA,J.contactPointA,i),r(J.contactPointA,J.contactPointA,t.position),r(J.contactPointB,Q,c),n.scale(V,J.normalA,-d),o(J.contactPointB,J.contactPointB,V),o(J.contactPointB,J.contactPointB,c),r(J.contactPointB,J.contactPointB,l.position),this.contactEquations.push(J),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J)),1}}return 0},N.prototype[d.CIRCLE|d.CAPSULE]=N.prototype.circleCapsule=function(t,e,i,n,r,o,a,s,l){return this.circleLine(t,e,i,n,r,o,a,s,l,o.radius)},N.prototype[d.CIRCLE|d.CONVEX]=N.prototype[d.CIRCLE|d.BOX]=N.prototype.circleConvex=function(t,e,i,a,s,l,h,c,u,p){p="number"==typeof p?p:e.radius;for(var d=v,f=g,m=y,b=_,w=x,E=q,M=A,T=P,I=S,O=L,R=C,N=!1,B=Number.MAX_VALUE,D=l.vertices,z=0;z!==D.length+1;z++){var k=D[z%D.length],F=D[(z+1)%D.length];if(n.rotate(d,k,c),n.rotate(f,F,c),o(d,d,h),o(f,f,h),r(m,f,d),n.normalize(b,m),n.rotate90cw(w,b),n.scale(I,w,-e.radius),o(I,I,i),Y(I,l,h,c)){n.sub(O,d,I);var U=Math.abs(n.dot(O,w));U<B&&(n.copy(R,I),B=U,n.scale(T,w,U),n.add(T,T,I),N=!0)}}if(N){if(u)return!0;var j=this.createContactEquation(t,s,e,l);return n.sub(j.normalA,R,i),n.normalize(j.normalA,j.normalA),n.scale(j.contactPointA,j.normalA,p),o(j.contactPointA,j.contactPointA,i),r(j.contactPointA,j.contactPointA,t.position),r(j.contactPointB,T,h),o(j.contactPointB,j.contactPointB,h),r(j.contactPointB,j.contactPointB,s.position),this.contactEquations.push(j),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j)),1}if(p>0)for(z=0;z<D.length;z++){var V=D[z];if(n.rotate(M,V,c),o(M,M,h),r(E,M,i),n.squaredLength(E)<Math.pow(p,2)){if(u)return!0;j=this.createContactEquation(t,s,e,l);return n.copy(j.normalA,E),n.normalize(j.normalA,j.normalA),n.scale(j.contactPointA,j.normalA,p),o(j.contactPointA,j.contactPointA,i),r(j.contactPointA,j.contactPointA,t.position),r(j.contactPointB,M,h),o(j.contactPointB,j.contactPointB,h),r(j.contactPointB,j.contactPointB,s.position),this.contactEquations.push(j),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j)),1}}return 0};var G=n.create(),H=n.create(),W=n.create(),X=n.create();function Y(t,e,i,a){for(var s=G,l=H,h=W,c=X,u=t,p=e.vertices,d=null,f=0;f!==p.length+1;f++){var m=p[f%p.length],v=p[(f+1)%p.length];n.rotate(s,m,a),n.rotate(l,v,a),o(s,s,i),o(l,l,i),r(h,s,u),r(c,l,u);var g=n.crossLength(h,c);if(null===d&&(d=g),g*d<=0)return!1;d=g}return!0}N.prototype[d.PARTICLE|d.CONVEX]=N.prototype[d.PARTICLE|d.BOX]=N.prototype.particleConvex=function(t,e,i,s,l,h,c,u,p){var d=v,f=g,m=y,E=_,M=x,A=b,T=w,S=q,L=P,C=I,R=O,N=Number.MAX_VALUE,B=!1,D=h.vertices;if(!Y(i,h,c,u))return 0;if(p)return!0;for(var z=0;z!==D.length+1;z++){var k=D[z%D.length],F=D[(z+1)%D.length];n.rotate(d,k,u),n.rotate(f,F,u),o(d,d,c),o(f,f,c),r(m,f,d),n.normalize(E,m),n.rotate90cw(M,E),r(S,i,d);a(S,M);r(A,d,c),r(T,i,c),n.sub(C,d,i);var U=Math.abs(n.dot(C,M));U<N&&(N=U,n.scale(L,M,U),n.add(L,L,i),n.copy(R,M),B=!0)}if(B){var j=this.createContactEquation(t,l,e,h);return n.scale(j.normalA,R,-1),n.normalize(j.normalA,j.normalA),n.set(j.contactPointA,0,0),o(j.contactPointA,j.contactPointA,i),r(j.contactPointA,j.contactPointA,t.position),r(j.contactPointB,L,c),o(j.contactPointB,j.contactPointB,c),r(j.contactPointB,j.contactPointB,l.position),this.contactEquations.push(j),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j)),1}return 0},N.prototype[d.CIRCLE]=N.prototype.circleCircle=function(t,e,i,a,s,l,h,c,u,p,d){var f=v;p=p||e.radius,d=d||l.radius;r(f,i,h);var m=p+d;if(n.squaredLength(f)>Math.pow(m,2))return 0;if(u)return!0;var g=this.createContactEquation(t,s,e,l);return r(g.normalA,h,i),n.normalize(g.normalA,g.normalA),n.scale(g.contactPointA,g.normalA,p),n.scale(g.contactPointB,g.normalA,-d),o(g.contactPointA,g.contactPointA,i),r(g.contactPointA,g.contactPointA,t.position),o(g.contactPointB,g.contactPointB,h),r(g.contactPointB,g.contactPointB,s.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},N.prototype[d.PLANE|d.CONVEX]=N.prototype[d.PLANE|d.BOX]=N.prototype.planeConvex=function(t,e,i,s,l,h,c,u,p){var d=v,f=g,_=y,x=0;n.rotate(f,m,s);for(var b=0;b!==h.vertices.length;b++){var w=h.vertices[b];if(n.rotate(d,w,u),o(d,d,c),r(_,d,i),a(_,f)<=0){if(p)return!0;x++;var E=this.createContactEquation(t,l,e,h);r(_,d,i),n.copy(E.normalA,f);var M=a(_,E.normalA);n.scale(_,E.normalA,M),r(E.contactPointB,d,l.position),r(E.contactPointA,d,_),r(E.contactPointA,E.contactPointA,t.position),this.contactEquations.push(E),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(E))}}return this.enableFrictionReduction&&this.enableFriction&&x&&this.frictionEquations.push(this.createFrictionFromAverage(x)),x},N.prototype[d.PARTICLE|d.PLANE]=N.prototype.particlePlane=function(t,e,i,o,s,l,h,c,u){var p=v,d=g;c=c||0,r(p,i,h),n.rotate(d,m,c);var f=a(p,d);if(f>0)return 0;if(u)return!0;var y=this.createContactEquation(s,t,l,e);return n.copy(y.normalA,d),n.scale(p,y.normalA,f),r(y.contactPointA,i,p),r(y.contactPointA,y.contactPointA,s.position),r(y.contactPointB,i,t.position),this.contactEquations.push(y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y)),1},N.prototype[d.CIRCLE|d.PARTICLE]=N.prototype.circleParticle=function(t,e,i,a,s,l,h,c,u){var p=v;if(r(p,h,i),n.squaredLength(p)>Math.pow(e.radius,2))return 0;if(u)return!0;var d=this.createContactEquation(t,s,e,l);return n.copy(d.normalA,p),n.normalize(d.normalA,d.normalA),n.scale(d.contactPointA,d.normalA,e.radius),o(d.contactPointA,d.contactPointA,i),r(d.contactPointA,d.contactPointA,t.position),r(d.contactPointB,h,s.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1};var Z=new u({radius:1}),J=n.create(),K=n.create();n.create();N.prototype[d.PLANE|d.CAPSULE]=N.prototype.planeCapsule=function(t,e,i,r,a,s,l,h,c){var u,p=J,d=K,f=Z;n.set(p,-s.length/2,0),n.rotate(p,p,h),o(p,p,l),n.set(d,s.length/2,0),n.rotate(d,d,h),o(d,d,l),f.radius=s.radius,this.enableFrictionReduction&&(u=this.enableFriction,this.enableFriction=!1);var m=this.circlePlane(a,f,p,0,t,e,i,r,c),v=this.circlePlane(a,f,d,0,t,e,i,r,c);if(this.enableFrictionReduction&&(this.enableFriction=u),c)return m||v;var g=m+v;return this.enableFrictionReduction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},N.prototype[d.CIRCLE|d.PLANE]=N.prototype.circlePlane=function(t,e,i,s,l,h,c,u,p){var d=t,f=e,_=i,x=l,b=c,w=u;w=w||0;var E=v,M=g,q=y;r(E,_,b),n.rotate(M,m,w);var A=a(M,E);if(A>f.radius)return 0;if(p)return!0;var T=this.createContactEquation(x,d,h,e);return n.copy(T.normalA,M),n.scale(T.contactPointB,T.normalA,-f.radius),o(T.contactPointB,T.contactPointB,_),r(T.contactPointB,T.contactPointB,d.position),n.scale(q,T.normalA,A),r(T.contactPointA,E,q),o(T.contactPointA,T.contactPointA,b),r(T.contactPointA,T.contactPointA,x.position),this.contactEquations.push(T),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T)),1},N.prototype[d.CONVEX]=N.prototype[d.CONVEX|d.BOX]=N.prototype[d.BOX]=N.prototype.convexConvex=function(t,e,i,s,l,h,c,u,p,d){var f=v,m=g,b=y,q=_,A=x,T=w,P=E,S=M,L=0;d="number"==typeof d?d:0;if(!N.findSeparatingAxis(e,i,s,h,c,u,f))return 0;r(P,c,i),a(f,P)>0&&n.scale(f,f,-1);var C=N.getClosestEdge(e,s,f,!0),I=N.getClosestEdge(h,u,f);if(-1===C||-1===I)return 0;for(var O=0;O<2;O++){var R,B=C,D=I,z=e,k=h,F=i,U=c,j=s,V=u,G=t,H=l;if(0===O)R=B,B=D,D=R,R=z,z=k,k=R,R=F,F=U,U=R,R=j,j=V,V=R,R=G,G=H,H=R;for(var W=D;W<D+2;W++){var X=k.vertices[(W+k.vertices.length)%k.vertices.length];n.rotate(m,X,V),o(m,m,U);for(var Y=0,Z=B-1;Z<B+2;Z++){var J=z.vertices[(Z+z.vertices.length)%z.vertices.length],K=z.vertices[(Z+1+z.vertices.length)%z.vertices.length];n.rotate(b,J,j),n.rotate(q,K,j),o(b,b,F),o(q,q,F),r(A,q,b),n.rotate90cw(S,A),n.normalize(S,S),r(P,m,b);var Q=a(S,P);(Z===B&&Q<=d||Z!==B&&Q<=0)&&Y++}if(Y>=3){if(p)return!0;var $=this.createContactEquation(G,H,z,k);L++;J=z.vertices[B%z.vertices.length],K=z.vertices[(B+1)%z.vertices.length];n.rotate(b,J,j),n.rotate(q,K,j),o(b,b,F),o(q,q,F),r(A,q,b),n.rotate90cw($.normalA,A),n.normalize($.normalA,$.normalA),r(P,m,b);Q=a($.normalA,P);n.scale(T,$.normalA,Q),r($.contactPointA,m,F),r($.contactPointA,$.contactPointA,T),o($.contactPointA,$.contactPointA,F),r($.contactPointA,$.contactPointA,G.position),r($.contactPointB,m,U),o($.contactPointB,$.contactPointB,U),r($.contactPointB,$.contactPointB,H.position),this.contactEquations.push($),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($))}}}return this.enableFrictionReduction&&this.enableFriction&&L&&this.frictionEquations.push(this.createFrictionFromAverage(L)),L};var Q=n.fromValues(0,0);N.projectConvexOntoAxis=function(t,e,i,r,o){var s,l,h=null,c=null,u=Q;n.rotate(u,r,-i);for(var p=0;p<t.vertices.length;p++)s=t.vertices[p],l=a(s,u),(null===h||l>h)&&(h=l),(null===c||l<c)&&(c=l);if(c>h){var d=c;c=h,h=d}var f=a(e,r);n.set(o,c+f,h+f)};var $=n.fromValues(0,0),tt=n.fromValues(0,0),et=n.fromValues(0,0),it=n.fromValues(0,0),nt=n.fromValues(0,0),rt=n.fromValues(0,0);N.findSeparatingAxis=function(t,e,i,o,a,s,l){var h=null,c=!1,u=!1,p=$,d=tt,m=et,v=it,g=nt,y=rt;if(t instanceof f&&o instanceof f)for(var _=0;2!==_;_++){var x=t,b=i;1===_&&(x=o,b=s);for(var w=0;2!==w;w++){0===w?n.set(v,0,1):1===w&&n.set(v,1,0),0!==b&&n.rotate(v,v,b),N.projectConvexOntoAxis(t,e,i,v,g),N.projectConvexOntoAxis(o,a,s,v,y);var E=g,M=y;g[0]>y[0]&&(M=g,E=y,!0),c=(q=M[0]-E[1])<=0,(null===h||q>h)&&(n.copy(l,v),h=q,u=c)}}else for(_=0;2!==_;_++){x=t,b=i;1===_&&(x=o,b=s);for(w=0;w!==x.vertices.length;w++){n.rotate(d,x.vertices[w],b),n.rotate(m,x.vertices[(w+1)%x.vertices.length],b),r(p,m,d),n.rotate90cw(v,p),n.normalize(v,v),N.projectConvexOntoAxis(t,e,i,v,g),N.projectConvexOntoAxis(o,a,s,v,y);var q;E=g,M=y;g[0]>y[0]&&(M=g,E=y,!0),c=(q=M[0]-E[1])<=0,(null===h||q>h)&&(n.copy(l,v),h=q,u=c)}}return u};var ot=n.fromValues(0,0),at=n.fromValues(0,0),st=n.fromValues(0,0);N.getClosestEdge=function(t,e,i,o){var s=ot,l=at,h=st;n.rotate(s,i,-e),o&&n.scale(s,s,-1);for(var c=-1,u=t.vertices.length,p=-1,d=0;d!==u;d++){r(l,t.vertices[(d+1)%u],t.vertices[d%u]),n.rotate90cw(h,l),n.normalize(h,h);var f=a(h,s);(-1===c||f>p)&&(c=d%u,p=f)}return c};var lt=n.create(),ht=n.create(),ct=n.create(),ut=n.create(),pt=n.create(),dt=n.create(),ft=n.create();N.prototype[d.CIRCLE|d.HEIGHTFIELD]=N.prototype.circleHeightfield=function(t,e,i,a,s,l,h,c,u,p){var d=l.heights,f=(p=p||e.radius,l.elementWidth),m=ht,v=lt,g=pt,y=ft,_=dt,x=ct,b=ut,w=Math.floor((i[0]-p-h[0])/f),E=Math.ceil((i[0]+p-h[0])/f);w<0&&(w=0),E>=d.length&&(E=d.length-1);for(var M=d[w],q=d[E],A=w;A<E;A++)d[A]<q&&(q=d[A]),d[A]>M&&(M=d[A]);if(i[1]-p>M)return!u&&0;var T=!1;for(A=w;A<E;A++){n.set(x,A*f,d[A]),n.set(b,(A+1)*f,d[A+1]),n.add(x,x,h),n.add(b,b,h),n.sub(_,b,x),n.rotate(_,_,Math.PI/2),n.normalize(_,_),n.scale(v,_,-p),n.add(v,v,i),n.sub(m,v,x);var P=n.dot(m,_);if(v[0]>=x[0]&&v[0]<b[0]&&P<=0){if(u)return!0;T=!0,n.scale(m,_,-P),n.add(g,v,m),n.copy(y,_);var S=this.createContactEquation(s,t,l,e);n.copy(S.normalA,y),n.scale(S.contactPointB,S.normalA,-p),o(S.contactPointB,S.contactPointB,i),r(S.contactPointB,S.contactPointB,t.position),n.copy(S.contactPointA,g),n.sub(S.contactPointA,S.contactPointA,s.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S))}}if(T=!1,p>0)for(A=w;A<=E;A++)if(n.set(x,A*f,d[A]),n.add(x,x,h),n.sub(m,i,x),n.squaredLength(m)<Math.pow(p,2)){if(u)return!0;T=!0;S=this.createContactEquation(s,t,l,e);n.copy(S.normalA,m),n.normalize(S.normalA,S.normalA),n.scale(S.contactPointB,S.normalA,-p),o(S.contactPointB,S.contactPointB,i),r(S.contactPointB,S.contactPointB,t.position),r(S.contactPointA,x,h),o(S.contactPointA,S.contactPointA,h),r(S.contactPointA,S.contactPointA,s.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S))}return T?1:0};var mt=n.create(),vt=n.create(),gt=n.create(),yt=new p({vertices:[n.create(),n.create(),n.create(),n.create()]});N.prototype[d.BOX|d.HEIGHTFIELD]=N.prototype[d.CONVEX|d.HEIGHTFIELD]=N.prototype.convexHeightfield=function(t,e,i,r,o,a,s,l,h){var c=a.heights,u=a.elementWidth,p=mt,d=vt,f=gt,m=yt,v=Math.floor((t.aabb.lowerBound[0]-s[0])/u),g=Math.ceil((t.aabb.upperBound[0]-s[0])/u);v<0&&(v=0),g>=c.length&&(g=c.length-1);for(var y=c[v],_=c[g],x=v;x<g;x++)c[x]<_&&(_=c[x]),c[x]>y&&(y=c[x]);if(t.aabb.lowerBound[1]>y)return!h&&0;var b=0;for(x=v;x<g;x++){n.set(p,x*u,c[x]),n.set(d,(x+1)*u,c[x+1]),n.add(p,p,s),n.add(d,d,s);n.set(f,.5*(d[0]+p[0]),.5*(d[1]+p[1]-100)),n.sub(m.vertices[0],d,f),n.sub(m.vertices[1],p,f),n.copy(m.vertices[2],m.vertices[1]),n.copy(m.vertices[3],m.vertices[0]),m.vertices[2][1]-=100,m.vertices[3][1]-=100,b+=this.convexConvex(t,e,i,r,o,m,f,0,h)}return b}},function(t,e,i){var n=i(2);function r(){this.data={},this.keys=[]}t.exports=r,r.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},r.prototype.getByKey=function(t){return t|=0,this.data[t]},r.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},r.prototype.set=function(t,e,i){if(!i)throw new Error("No data!");var n=this.getKey(t,e);return this.data[n]||this.keys.push(n),this.data[n]=i,n},r.prototype.reset=function(){for(var t=this.data,e=this.keys,i=e.length;i--;)delete t[e[i]];e.length=0},r.prototype.copy=function(t){this.reset(),n.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var i=t.keys[e];this.data[i]=t.data[i]}}},function(t,e,i){var n=i(0),r=i(8),o=i(29);function a(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,i=this.height=t.height||1,a=[n.fromValues(-e/2,-i/2),n.fromValues(e/2,-i/2),n.fromValues(e/2,i/2),n.fromValues(-e/2,i/2)],s=[n.fromValues(1,0),n.fromValues(0,1)];t.vertices=a,t.axes=s,t.type=r.BOX,o.call(this,t)}t.exports=a,a.prototype=new o,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(t){var e=this.width,i=this.height;return t*(i*i+e*e)/12},a.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};n.create(),n.create(),n.create(),n.create();a.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)},a.prototype.updateArea=function(){this.area=this.width*this.height}},function(t,e,i){var n=i(12),r=i(7),o=i(107),a=i(108),s=i(0);t.exports=d;var l=s.create(),h=s.create(),c=s.fromValues(1,0),u=s.fromValues(0,1),p=s.create();function d(t,e,i){i=i||{},n.call(this,t,e,n.REVOLUTE,i);var d=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=s.create(),this.pivotB=s.create(),i.worldPivot?(s.sub(this.pivotA,i.worldPivot,t.position),s.sub(this.pivotB,i.worldPivot,e.position),s.rotate(this.pivotA,this.pivotA,-t.angle),s.rotate(this.pivotB,this.pivotB,-e.angle)):(s.copy(this.pivotA,i.localPivotA),s.copy(this.pivotB,i.localPivotB));var f=this.equations=[new r(t,e,-d,d),new r(t,e,-d,d)],m=f[0],v=f[1],g=this;m.computeGq=function(){return s.rotate(l,g.pivotA,t.angle),s.rotate(h,g.pivotB,e.angle),s.add(p,e.position,h),s.sub(p,p,t.position),s.sub(p,p,l),s.dot(p,c)},v.computeGq=function(){return s.rotate(l,g.pivotA,t.angle),s.rotate(h,g.pivotB,e.angle),s.add(p,e.position,h),s.sub(p,p,t.position),s.sub(p,p,l),s.dot(p,u)},v.minForce=m.minForce=-d,v.maxForce=m.maxForce=d,this.motorEquation=new o(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new a(t,e),this.lowerLimitEquation=new a(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}d.prototype=new n,d.prototype.constructor=d,d.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},d.prototype.update=function(){var t,e=this.bodyA,i=this.bodyB,n=this.pivotA,r=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),p=o[1],d=this.upperLimit,f=this.lowerLimit,m=this.upperLimitEquation,v=this.lowerLimitEquation,g=this.angle=i.angle-e.angle;this.upperLimitEnabled&&g>d?(m.angle=d,-1===o.indexOf(m)&&o.push(m)):-1!==(t=o.indexOf(m))&&o.splice(t,1);this.lowerLimitEnabled&&g<f?(v.angle=f,-1===o.indexOf(v)&&o.push(v)):-1!==(t=o.indexOf(v))&&o.splice(t,1);s.rotate(l,n,e.angle),s.rotate(h,r,i.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-s.crossLength(l,c),a.G[3]=1,a.G[4]=0,a.G[5]=s.crossLength(h,c),p.G[0]=0,p.G[1]=-1,p.G[2]=-s.crossLength(l,u),p.G[3]=0,p.G[4]=1,p.G[5]=s.crossLength(h,u)},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},d.prototype.motorIsEnabled=function(){return!!this.motorEnabled},d.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},d.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},function(t,e,i){var n=i(7);i(0);function r(t,e){n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.computeB=function(t,e,i){var n=this.G;n[2]=-1,n[5]=this.ratio;var r=this.computeGiMf();return-this.computeGW()*e-i*r}},function(t,e,i){var n=i(7),r=i(0);function o(t,e,i){i=i||{},n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var r=this.G;r[2]=1,r[5]=-1}t.exports=o,o.prototype=new n,o.prototype.constructor=o;var a=r.create(),s=r.create(),l=r.fromValues(1,0),h=r.fromValues(0,1);o.prototype.computeGq=function(){return r.rotate(a,l,this.bodyA.angle+this.angle),r.rotate(s,h,this.bodyB.angle),r.dot(a,s)}},function(t,e,i){var n=i(12),r=i(44),o=i(7),a=i(0),s=i(108);function l(t,e,i){i=i||{},n.call(this,t,e,n.PRISMATIC,i);var l=a.fromValues(0,0),h=a.fromValues(1,0),c=a.fromValues(0,0);i.localAnchorA&&a.copy(l,i.localAnchorA),i.localAxisA&&a.copy(h,i.localAxisA),i.localAnchorB&&a.copy(c,i.localAnchorB),this.localAnchorA=l,this.localAnchorB=c,this.localAxisA=h;var u=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE,p=new o(t,e,-u,u),d=new a.create,f=new a.create,m=new a.create,v=new a.create;if(p.computeGq=function(){return a.dot(m,v)},p.updateJacobian=function(){var i=this.G,n=t.position,r=e.position;a.rotate(d,l,t.angle),a.rotate(f,c,e.angle),a.add(m,r,f),a.sub(m,m,n),a.sub(m,m,d),a.rotate(v,h,t.angle+Math.PI/2),i[0]=-v[0],i[1]=-v[1],i[2]=-a.crossLength(d,v)+a.crossLength(v,m),i[3]=v[0],i[4]=v[1],i[5]=a.crossLength(f,v)},this.equations.push(p),!i.disableRotationalLock){var g=new s(t,e,-u,u);this.equations.push(g)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==i.lowerLimit,this.upperLimitEnabled=void 0!==i.upperLimit,this.lowerLimit=void 0!==i.lowerLimit?i.lowerLimit:0,this.upperLimit=void 0!==i.upperLimit?i.upperLimit:1,this.upperLimitEquation=new r(t,e),this.lowerLimitEquation=new r(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=u,this.motorEquation=new o(t,e),this.motorEnabled=!1,this.motorSpeed=0;var y=this,_=this.motorEquation;_.computeGW;_.computeGq=function(){return 0},_.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.velocity,r=i.velocity,o=e.angularVelocity,a=i.angularVelocity;return this.gmult(t,n,o,r,a)+y.motorSpeed}}t.exports=l,l.prototype=new n,l.prototype.constructor=l;var h=a.create(),c=a.create(),u=a.create(),p=a.create(),d=a.create(),f=a.create();l.prototype.update=function(){var t=this.equations,e=t[0],i=this.upperLimit,n=this.lowerLimit,r=this.upperLimitEquation,o=this.lowerLimitEquation,s=this.bodyA,l=this.bodyB,m=this.localAxisA,v=this.localAnchorA,g=this.localAnchorB;e.updateJacobian(),a.rotate(h,m,s.angle),a.rotate(p,v,s.angle),a.add(c,p,s.position),a.rotate(d,g,l.angle),a.add(u,d,l.position);var y,_=this.position=a.dot(u,h)-a.dot(c,h);if(this.motorEnabled){var x=this.motorEquation.G;x[0]=h[0],x[1]=h[1],x[2]=a.crossLength(h,d),x[3]=-h[0],x[4]=-h[1],x[5]=-a.crossLength(h,p)}this.upperLimitEnabled&&_>i?(a.scale(r.normalA,h,-1),a.sub(r.contactPointA,c,s.position),a.sub(r.contactPointB,u,l.position),a.scale(f,h,i),a.add(r.contactPointA,r.contactPointA,f),-1===t.indexOf(r)&&t.push(r)):-1!==(y=t.indexOf(r))&&t.splice(y,1);this.lowerLimitEnabled&&_<n?(a.scale(o.normalA,h,1),a.sub(o.contactPointA,c,s.position),a.sub(o.contactPointB,u,l.position),a.scale(f,h,n),a.sub(o.contactPointB,o.contactPointB,f),-1===t.indexOf(o)&&t.push(o)):-1!==(y=t.indexOf(o))&&t.splice(y,1)},l.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},l.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},l.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},function(t,e,i){var n=i(2),r=i(42);function o(){r.call(this,r.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var i=t.axisList.indexOf(e.body);-1!==i&&t.axisList.splice(i,1)}}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.setWorld=function(t){this.axisList.length=0,n.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},o.sortAxisList=function(t,e){e|=0;for(var i=1,n=t.length;i<n;i++){for(var r=t[i],o=i-1;o>=0&&!(t[o].aabb.lowerBound[e]<=r.aabb.lowerBound[e]);o--)t[o+1]=t[o];t[o+1]=r}return t},o.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;o.sortAxisList(t,e)},o.prototype.getCollisionPairs=function(t){var e=this.axisList,i=this.result,n=this.axisIndex;i.length=0;for(var o=e.length;o--;){var a=e[o];a.aabbNeedsUpdate&&a.updateAABB()}this.sortList();for(var s=0,l=0|e.length;s!==l;s++)for(var h=e[s],c=s+1;c<l;c++){var u=e[c];if(!(u.aabb.lowerBound[n]<=h.aabb.upperBound[n]))break;r.canCollide(h,u)&&this.boundingVolumeCheck(h,u)&&i.push(h,u)}return i},o.prototype.aabbQuery=function(t,e,i){i=i||[],this.sortList();var n=this.axisIndex,r="x";1===n&&(r="y"),2===n&&(r="z");for(var o=this.axisList,a=(e.lowerBound[r],e.upperBound[r],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(e)&&i.push(s)}return i}},function(t,e,i){var n=i(0),r=i(75);i(2);function o(t,e,i){i=i||{},r.call(this,t,e,i),this.localAnchorA=n.fromValues(0,0),this.localAnchorB=n.fromValues(0,0),i.localAnchorA&&n.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&n.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var o=n.create(),a=n.create();this.getWorldAnchorA(o),this.getWorldAnchorB(a);var s=n.distance(o,a);this.restLength="number"==typeof i.restLength?i.restLength:s}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},o.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},o.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},o.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var a=n.create(),s=n.create(),l=n.create(),h=n.create(),c=n.create(),u=n.create(),p=n.create(),d=n.create(),f=n.create();o.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restLength,r=this.bodyA,o=this.bodyB,m=a,v=s,g=l,y=h,_=f,x=c,b=u,w=p,E=d;this.getWorldAnchorA(x),this.getWorldAnchorB(b),n.sub(w,x,r.position),n.sub(E,b,o.position),n.sub(m,b,x);var M=n.len(m);n.normalize(v,m),n.sub(g,o.velocity,r.velocity),n.crossZV(_,o.angularVelocity,E),n.add(g,g,_),n.crossZV(_,r.angularVelocity,w),n.sub(g,g,_),n.scale(y,v,-t*(M-i)-e*n.dot(g,v)),n.sub(r.force,r.force,y),n.add(o.force,o.force,y);var q=n.crossLength(w,y),A=n.crossLength(E,y);r.angularForce-=q,o.angularForce+=A}},function(t,e,i){i(0);var n=i(75);function r(t,e,i){i=i||{},n.call(this,t,e,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:e.angle-t.angle}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restAngle,n=this.bodyA,r=this.bodyB,o=-t*(r.angle-n.angle-i)-e*(r.angularVelocity-n.angularVelocity)*0;n.angularForce-=o,r.angularForce+=o}},function(t,e){t.exports={_args:[[{raw:"p2@0.7.1",scope:null,escapedName:"p2",name:"p2",rawSpec:"0.7.1",spec:"0.7.1",type:"version"},"/var/lib/jenkins/workspace/websdk-production"]],_from:"p2@0.7.1",_id:"p2@0.7.1",_inCache:!0,_location:"/p2",_nodeVersion:"4.2.2",_npmUser:{name:"schteppe",email:"schteppe@gmail.com"},_npmVersion:"2.14.7",_phantomChildren:{},_requested:{raw:"p2@0.7.1",scope:null,escapedName:"p2",name:"p2",rawSpec:"0.7.1",spec:"0.7.1",type:"version"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz",_shasum:"25f2474d9bc3a6d3140a1da26a67c9e118ac9543",_shrinkwrap:null,_spec:"p2@0.7.1",_where:"/var/lib/jenkins/workspace/websdk-production",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},dependencies:{"poly-decomp":"0.1.1"},description:"A JavaScript 2D physics engine.",devDependencies:{grunt:"^0.4.5","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0"},directories:{},dist:{shasum:"25f2474d9bc3a6d3140a1da26a67c9e118ac9543",tarball:"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz"},engines:{node:"*"},gitHead:"d83c483f912362fd6e57c74b0634ea3f1f3e0c82",homepage:"https://github.com/schteppe/p2.js#readme",keywords:["p2.js","p2","physics","engine","2d"],licenses:[{type:"MIT"}],main:"./src/p2.js",maintainers:[{name:"schteppe",email:"schteppe@gmail.com"}],name:"p2",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/schteppe/p2.js.git"},scripts:{},version:"0.7.1"}},function(t,e){function i(t,e,i,n){this.shapeA=e,this.shapeB=n,this.bodyA=t,this.bodyB=i}t.exports=i,i.prototype.set=function(t,e,n,r){i.call(this,t,e,n,r)}},function(t,e,i){var n=i(11);function r(){this.equations=[],this.bodies=[]}t.exports=r,r.prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];r.prototype.getBodies=function(t){var e=t||[],i=this.equations;o.length=0;for(var n=0;n!==i.length;n++){var r=i[n];-1===o.indexOf(r.bodyA.id)&&(e.push(r.bodyA),o.push(r.bodyA.id)),-1===o.indexOf(r.bodyB.id)&&(e.push(r.bodyB),o.push(r.bodyB.id))}return e},r.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===n.DYNAMIC&&!e.wantsToSleep)return!1}return!0},r.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},function(t,e){function i(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=i,i.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},function(t,e,i){"use strict";var n=function(t,e,i){var n=this;this.type="MapView",this.controls=null,this.colors={hover:13421772,select:5022204,text:0,path:16745292,pathPulse:16777215,textSelect:16777215},this.venue=e,this.container=t,this.currentMap=null,this.focusZoomFactor=3,this.setMap=function(t){},this.addMap=function(){},this.removeMap=function(){},this.focusOnPolygon=function(t,e,i,n){},this.focusOnPath=function(t,e,i,n,r){},this.focusOn=function(t){},this.showEntireMap=function(t){},this.setPadding=function(t){},this.getZoomLevelForPolygon=function(t){},this.getZoomLevelForCurrentMap=function(){},this.resetCamera=function(){},this.getNorth=function(){return 0},this.lockNorth=function(t,e){},this.unlockNorth=function(t){},this.setPolygonColor=function(t,e,i){},this.clearPolygonColor=function(t){},this.clearAllPolygonColors=function(){},this.addInteractivePolygon=function(t){},this.removeInteractivePolygon=function(t){},this.onPolygonClicked=function(t){},this.onNothingClicked=function(){},this.createMarker=function(t,e,i,n,r){},this.addMarker=function(t){},this.removeMarker=function(t){},this.removeAllMarkers=function(){},this.convertTo3DMapPosition=function(t){},this.getPositionPolygon=function(t){},this.getPositionNode=function(t){},this.labelPolygon=function(t){},this.labelAllLocations=function(t){},this.removeAllLabels=function(){},this.enableImageFlippingForAllLocations=function(t){},this.enableImageFlippingForPolygon=function(t){},this.createFont=function(t){},this.getPathLength=function(t){for(var e=0,i=t[0].map,n=0,r=t.length-1;n<r;++n){var o=t[n],a=t[n+1];a.map==i?e+=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)):i=a.map}return e},this.drawPath=function(t,e){},this.drawPathSegment=function(t,e,i){},this.removePathSegment=function(t){},this.removeAllPaths=function(){},this.setBackgroundColor=function(t,e){},this.tryRendering=function(){},this.resetState=function(){this.removeAllPaths(),this.removeAllMarkers(),this.removeAllLabels(),this.removeAllMaps()},this.getPrimaryLocationForPolygon=function(t){if("string"==typeof t){if(void 0==n.venue||!Array.isArray(n.venue.polygons))return null;t=n.venue.polygons.find(function(e){return e.id==t})}var e=null;if(null!=t&&void 0!=t.locations&&t.locations.length>0){e=t.locations[0];for(var i=0,r=t.locations.length;i<r;i++){for(var o=t.locations[i];void 0!=o.parent;)(o=o.parent).polygons.includes(t)&&(e=o);if(void 0==o.parent&&o.polygons.includes(t))return o}}return e}};n.createFont=function(t){},e.a=n},function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});var n=2*Math.PI,r=Math.PI/2,o=1.5*Math.PI},function(t,e,i){"use strict";var n=i(16),r=i(223),o=i(5),a=i(224),s=(i.n(a),i(3)),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var h={orientation:null,textSize:18,maxTextDivWidth:200,minTextDivWidth:150,textLines:2,borderSize:2,shrinkAmount:0,color:"#000000",markerBuffer:5,textDivHeight:40,textDivWidth:100,textClass:"",pinColor:0,activeColor:"white",inactiveColor:"rgb(128,128,128)",markerClass:"",markerSize:20},c="hide",u=function(){function t(e,i,r,a,s,l,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styles={east:{textAlign:"left"},north:{textAlign:"center",verticalAlign:"bottom"},west:{textAlign:"right"},marker:{textAlign:"center",verticalAlign:"bottom"}},this._updateAction=null,Object.assign(this,n.a.prototype),this.collisionEngine=c,this.mapObject=i,this.mapView=s,this.textLabelsByPolygonId=a,this.polygonMeshesById=r,this.collisionPoints=l,this.id=e.polygonId,this.polygonId=e.polygonId,this.polygon=e.polygon,this._mPosition=e.position,this._mOriginalPosition=e.position,this.heightAbovePolygon=e.heightAbovePolygon>=0?e.heightAbovePolygon:null,this.label=e.label||e.text||"",this._mMapId=e.polygon.map||null,this.isActive=e.isActive||!1,this._misHidden=e.hidden||!1,this.currentOrientation=e.orientation,this.color=e.color||"#000000",this.markerBuffer=e.markerBuffer||5,this.originalColor=e.color||"#000000",this.height=e.height,this.collisionsAgainst={},this.screenRenderBuffer=e.screenRenderBuffer||250,this.rank=e.rank||0,this.borderSize=(e.borderSize||h.borderSize)/window.devicePixelRatio,this.shrinkAmount=e.shrinkAmount||h.shrinkAmount,e.stateText&&(this.label+=" ("+e.stateText+")"),this.textSize=e.textSize||h.textSize,this.maxTextWidth=e.maxTextDivWidth||h.maxTextDivWidth,this.minTextWidth=e.minTextDivWidth||h.minTextDivWidth,this.lineHeight=e.lineHeight||1.2*this.textSize,this.textHeight=e.textDivHeight||h.textDivHeight,this.textWidth=e.textDivWidth||h.textDivWidth,this.textLines=e.textLines||h.textLines,this.textClass=e.textClass||h.textClass,this.pinColor=e.pinColor||h.pinColor,this.activeColor=e.activeColor||h.activeColor,this.inactiveColor=e.inactiveColor||h.inactiveColor,this.markerClass=e.markerClass||h.markerClass,this.markerSize=e.markerSize||h.markerSize,this.options=e,this.m_translateX=0,this.m_translateY=0,this.m_rotateZ=0,this.created=!1,this.isShowing=!1,this._mShowMarker=!1,this._mShowLine=!1,this._mShowLabel=!1,this.type="pin",this.textDiv=null,this.offsets=[],this.previousOrientation=null,this.create=this.create.bind(this),this.destroy=this.destroy.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.setPosition=this.setPosition.bind(this),this.addEventListener=this.addEventListener.bind(this),this.createLineSegment=this.createLineSegment.bind(this),this.calculateHeightOfPolygon=this.calculateHeightOfPolygon.bind(this),this.setColor=this.setColor.bind(this),this.clearColor=this.clearColor.bind(this),this.setOrientation=Object(o.r)(this.setOrientation,e.smartLabelOrientationDelay).bind(this),this.createMarkerDiv=this.createMarkerDiv.bind(this),this.setTransform=this.setTransform.bind(this),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this),this.updateMarkerStyles=this.updateMarkerStyles.bind(this),this.updateTextStyles=this.updateTextStyles.bind(this),this.updateStyles=this.updateStyles.bind(this),this.registerSelf=this.registerSelf.bind(this),this.deregisterSelf=this.deregisterSelf.bind(this),this.updateCollisions=this.updateCollisions.bind(this),this.determineOrientation=this.determineOrientation.bind(this),this.update=this.update.bind(this),this.flipIfNeeded=function(){},this.mapObject.textObjects.push(this)}return l(t,[{key:"updateMarkerStyles",value:function(){this.markerDiv&&(this.markerDiv.style.opacity=this._mShowMarker?1:0,this.markerDiv.style.top=-1*this.borderSize+"px",this.markerDiv.style.border=this.borderSize+"px solid white",this.markerDiv.style.pointerEvents="none",this.markerDiv.style.width=this.markerSize+"px",this.markerDiv.style.height=this.markerSize+"px",this.markerDiv.style.backgroundColor=this.color)}},{key:"updateTextStyles",value:function(){var t=this;if(this.textDiv&&(this.polygon.map!==this.mapView.currentMap&&this._mShowLabel&&(this.textDiv.style.opacity=this._mShowLabel?1:0),this.textDiv.style.opacity=this._mShowLabel?1:0,this.textHeight&&this.orientations)){this.textDiv.style.height=this.textHeight+"px";var e=this.orientations[this.currentOrientation||"north"];this.textDiv.style.transform="translate("+e.x+"px, "+e.y+"px)";var i=this.styles[this.currentOrientation||"north"];Object.keys(i).forEach(function(e){var n=i[e];t.textDiv.style[e]=n})}}},{key:"enable",value:function(){this.isActive=!0,this.collider&&this.collider.enable(),this._updateAction="show"}},{key:"disable",value:function(){this.isActive=!1,this.collider&&this.collider.disable(),this._updateAction=c}},{key:"updateStyles",value:function(){this.updateMarkerStyles(),this.updateTextStyles()}},{key:"createMarkerDiv",value:function(){var t=this.mapView,e=document.createElement("div");return e.className="mappedin-pin-marker "+this.polygon.id+" "+this.markerClass,t.container.contains(e)||t.container.appendChild(e),e}},{key:"createTextDiv",value:function(t){var e=this,i=document.createElement("div");return i.innerHTML=t,i.className="mappedin-pin-marker-text "+this.polygon.id+" "+this.textClass,i.style.lineHeight=this.lineHeight+"px",i.style.fontSize=this.textSize+"px",i.style.maxWidth=this.maxTextWidth+"px",i.style.minWidth=this.minTextWidth+"px",this.markerDiv.contains(i)||this.markerDiv.appendChild(i),this.registered=this.registerSelf(),setTimeout(function(){Object(r.a)(i,e.lineHeight*e.textLines+5);var t=i.getBoundingClientRect();e.textHeight=t.height,e.textWidth=t.width,e.orientations=e._calculateOrientations(),e.updateCollisionAreas(),e.updateStyles()},0),i}},{key:"_calculateOrientations",value:function(){var t=this.markerSize,e=this.markerBuffer,i=this.textWidth,n=this.textHeight,r=this.borderSize,o={};return o.north={x:t/2-i/2,y:-1*n-e},o.east={x:t+e,y:t/2+-1*n/2-r},o.west={x:-1*i-e,y:t/2-n/2-r},o}},{key:"create",value:function(){var t=this.doNotCreate,e=this.label,i=this.inactiveColor,n=this.created;if(!t&&!n){this.color=i,this.polygonHeight=this.calculateHeightOfPolygon();var r=this.height||this.polygonHeight+this.heightAbovePolygon;this.heightAbovePolygon&&(this._mPosition.z=r,this._mOriginalPosition.z=r),this.height=r,this.line=this.createLineSegment(),this.markerDiv=this.createMarkerDiv(),this.textDiv=this.createTextDiv(e),this.updateStyles(),this.mapView.scene.add(this.line.object),this.created=!0,this.hide()}}},{key:"calculateHeightOfPolygon",value:function(){if(this.polygonMeshesById[this.polygon.id]){var t=this.polygonMeshesById[this.polygon.id];return t.geometry.boundingBox||t.geometry.computeBoundingBox(),t.geometry.boundingBox.max.z}return 0}},{key:"createLineSegment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._mPosition,e=new s.f,i=[t.x,t.y,0,t.x,t.y,this.height];e.addAttribute("position",new s.t(i,3));var n=new s.C({color:16777215}),r=new s.B(e,n),o={id:r.id,object:r};return o.object.material.visible=!1,o}},{key:"show",value:function(){this.polygon.map===this.mapView.currentMap&&this.isInScreen&&(this.isShowing||(this._mShowMarker=!0,this._mShowLabel=!0,this.line&&this.line.object&&(this.line.object.material.visible=!0,this._mShowLine=!0),this.color=this.activeColor,this.isShowing=!0,this.updateStyles()))}},{key:"hide",value:function(){this.isShowing&&(this._mShowLabel=!1,this._mShowMarker=!1,this.line&&this.line.object&&(this.line.object.material.visible=!1,this._mShowLine=!1),this.polygon.map!==this.mapView.currentMap&&this.deregisterSelf(),this.color=this.inactiveColor,this.isShowing=!1,this.updateStyles())}},{key:"updateCollisionAreas",value:function(){var t=this.textWidth,e=this.textHeight,i=this.markerSize,n=this.markerBuffer,r={x:this.orientations.north.x-i/2,y:this.orientations.north.y-i/2},o={x:this.orientations.east.x-i/2,y:this.orientations.east.y-i/2},a={x:this.orientations.west.x-i/2,y:this.orientations.west.y-i/2},s=Object.assign({w:t,h:e},r),l=Object.assign({w:t,h:e},o),h=Object.assign({w:t,h:e},a),c={w:i+n,h:i+n,x:-(i+n)/2,y:-(i+n)/2};this.collider.updateHitAreas({north:s,west:h,east:l,marker:c})}},{key:"registerSelf",value:function(){var t=this.polygon.id+"-marker";this.collider=this.collisionEngine.add({hitAreas:{},rank:this.rank,id:t,userData:{label:this}}),this.collider.update(this.m_translateX,this.m_translateY),this.collider.on("collision",this.updateCollisions),this.collider.on("update",this.update),this.collider.on("hide",this.disable),this.collider.on("show",this.enable)}},{key:"updateCollisions",value:function(t){var e={hasCollided:0,collisionCount:0};if(this.collisionsAgainst.collisionCount>=3)this.determineOrientation(this.collisionsAgainst,this.collisionsAgainst);else{for(var i in t){e[i]=0;for(var n=0;n<t[i].length;n++){var r=t[i][n];if(null==r.userData.label||r.userData.label.polygon.map==this.polygon.map)if(this.rank<=r.rank)e[i]||(e.collisionCount+=1),e.hasCollided=1,e[i]=1;else if(null!=r.userData.label){var o=r.userData.label.collisionsAgainst;o.hasCollided=1,o.collisionCount||(o.collisionCount=0),o[i]||(o[i]=1,o.collisionCount+=1)}}}this.determineOrientation(e,this.collisionsAgainst)}}},{key:"update",value:function(){switch(this._updateAction){case"show":this.show();break;case c:this.hide()}}},{key:"determineOrientation",value:function(t,e){var i=this;if(e.hasCollided&&Object.keys(this.orientations).forEach(function(i){null==t[i]&&(t[i]=e[i])}),e.marker)this._updateAction=c;else if(t.collisionCount>=3)this._updateAction=c;else if(this.orientations){var n=!1;Object.keys(this.orientations).forEach(function(e){t[e]||n||(i.setOrientation(e),n=!0)})}this.hasCollided=0,this.collisionsAgainst={}}},{key:"deregisterSelf",value:function(){this.collider&&(this.collider.off("collision",this.updateCollisions),this.collisionEngine.remove(this.collider))}},{key:"setOrientation",value:function(t){return this.currentOrientation=t,this._updateAction="show",t!==this.currentOrientation&&this.mapView.tryRendering(),!0}},{key:"setColor",value:function(t){this.textColor=t}},{key:"clearColor",value:function(){this.setColor(this.originalColor)}},{key:"setPosition",value:function(t){t&&(this._mPosition=t,this.updateStyles(),this.mapView.tryRendering())}},{key:"setTransform",value:function(t){if(this.polygon.map===this.mapView.currentMap&&!1!==this.isActive){this.m_translateX=t.x,this.m_translateY=t.y,this.m_rotateZ=t.rotateZ||"",null!=this.collider&&this.collider.update(this.m_translateX,this.m_translateY);var e="translate("+(t.x-this.markerSize/2)+"px, "+(t.y-this.markerSize/2)+"px)"+" "+("rotate("+t.rotateZ+"rad)");return this.markerDiv&&this.isShowing&&(this.markerDiv.style.transform=e),this.isInScreen=!0,this.publish("update-position",{x:t.x,y:t.y,rotateZ:t.rotateZ}),!0}}},{key:"removeSelf",value:function(){this.line&&this.line.object.destroy&&this.line.object.destroy(),this.mapView.container.contains(this.markerDiv)&&(this.mapView.container.removeChild(this.markerDiv),this.markerDiv=null,this.textDiv=null),this.deregisterSelf(),this.created?this.mapObject.textObjects=this.mapObject.textObjects.filter(function(t){return t!=this}):this.doNotCreate=!0}},{key:"destroy",value:function(){this.removeSelf()}},{key:"addEventListener",value:function(t,e){this.markerDiv.addEventListener(t,e)}}]),t}();e.a=u},function(t,e,i){"use strict";i.d(e,"a",function(){return p});var n=i(3),r=i(66),o=(i.n(r),i(230)),a=i(16),s=i(231),l=i(234),h=i(5),c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var u=new n.L,p=!1,d=function(){function t(e,i,r,o,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flippableImagedById={},this._started=!1,this._loaderPromise=null,this._promiseResolve=null,this.objectsDictionary={},this.north=null,this.mapScale=null,this.object=new n.L,this.textObjects=[],this.imagesToFlip=[],this.markers=[],this.renderCommandQueue={high:[],low:[],marker:[]},this.seenByCamera=!1,Object.assign(this,a.a.prototype),this.mapView=s,this.mapClass=e,this.polygonMeshesById=i,this.markerWorld=r,this._showCount=o,this.loadMode=l,this.id=this.mapClass.id,this._objLoaded=this._objLoaded.bind(this),this.enableImageFlipping=this.enableImageFlipping.bind(this)}return c(t,[{key:"_objLoaded",value:function(t){for(var e=t.children,i=0,n=e.length;i<n;++i){var r=e[i];this.objectsDictionary[r.name]=r,this.polygonMeshesById[r.name]=r}return this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,this.publish("pinsNeedUpdating",!0),this._promiseResolve(this)}},{key:"load",value:function(){var t=this;return this._started||(this._started=!0,this._loaderPromise=new Promise(function(e,i){if(t._promiseResolve=e,null!=t.mapClass.object3D)return t._objLoaded(t.mapClass.object3D);try{var n=p&&t.mapClass._mappedin.polygons.filter(function(e){return e.map===t.mapClass.id}),r=t.mapClass.scene.polygons;if("json"===t.loadMode&&(r||n)){var o=r||n;l.a.load(o,t.mapClass).then(t._objLoaded).catch(function(){var e=t.mapClass.scene.mtl,n=t.mapClass.scene.obj;s.a.load(n,e).then(t._objLoaded).catch(i)})}else{var a=t.mapClass.scene.mtl,h=t.mapClass.scene.obj;s.a.load(h,a).then(t._objLoaded).catch(i)}}catch(e){i("ERROR: No 3D files for map "+(t.mapClass.name||t.mapClass.shortName||t.mapClass.id||t.mapClass))}})),this._loaderPromise}},{key:"_dispose",value:function(t){for(var e=t,i=e.children.length-1;i>=0;i--)this._dispose(e.children[i]);e.destroy(),delete this.objectsDictionary[e.name],delete this.polygonMeshesById[e.name]}},{key:"destroy",value:function(){this.removeLabels(),this.removeMarkers(),this.disableAllImageFlipping(),this._dispose(this.object)}},{key:"add",value:function(t){var e=this;u.add(t),this.load().then(function(){1===u.children.filter(function(e){return e.uuid===t.uuid}).length&&e.object.add(t)})}},{key:"getPositionLatLon",value:function(t,e){var i=this.mapClass.georeference[0],n=new r.LatLonSpherical(i.target.x,i.target.y),o=new r.LatLonSpherical(t,e),a=n.distanceTo(o),s=(n.finalBearingTo(o)+0)*Math.PI/180,l=a*this.getMapScale(this.mapClass),h=s+this.getNorth(this.mapClass),c=Math.sin(h)*l,u=Math.cos(h)*l;return this.mapView.convertTo3DMapPosition({x:i.control.x+c,y:i.control.y-u})}},{key:"getMapScale",value:function(){return null==this.mapScale&&(this.mapScale=Object(h.i)(this.mapClass)),this.mapScale}},{key:"getNorth",value:function(){return null==this.north&&(this.north=Object(h.k)(this.mapClass)),this.north}},{key:"enableImageFlipping",value:function(t,e){if(e=e||0,!this._flippableImagedById[t]&&(this._flippableImagedById[t]=!0,this.object&&Object.keys(this.object).length>0)){var i=this.object.getObjectByName(t+"_image");if(i){var n=new o.a({image:i,rotation:e});this.imagesToFlip.push(n),this.publish("flippablesNeedUpdating"),this.publish("render")}}}},{key:"disableAllImageFlipping",value:function(){for(var t=0,e=this.imagesToFlip.length;t<e;t++)this.imagesToFlip[t].reset();this.imagesToFlip=[],this._flippableImagedById={}}},{key:"addMarkers",value:function(){for(var t=0;t<this.markers.length;t++){var e=this.markers[t];e._mAnchor&&(this.markerWorld.addBody(e._mAnchor),this.markerWorld.addBody(e._mShadowElement),this.markerWorld.addConstraint(e._mConstraint)),this.mapView.container.appendChild(e.div),this.publish("updateMarkerPosition",e),e.show(),this.publish("render")}}},{key:"removeMarkers",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;e<this.markers.length;e++){var i=this.markers[e];i.hide(),i._mAnchor&&(this.markerWorld.removeConstraint(i._mConstraint),this.markerWorld.removeBody(i._mAnchor),this.markerWorld.removeBody(i._mShadowElement)),t&&(this.mapView.container.removeChild(i.div),i.destroy())}if(t){this.markers=[];for(var n=this.renderCommandQueue.marker,r=0;r<n.length;r++){var o=n[r];o.hide(),o._mAnchor&&(this.markerWorld.removeConstraint(o._mConstraint),this.markerWorld.removeBody(o._mAnchor),this.markerWorld.removeBody(o._mShadowElement)),o.destroy()}this.renderCommandQueue.marker=[]}this.publish("render")}},{key:"removeLabels",value:function(){if(Array.isArray(this.textObjects)){for(var t=0,e=this.textObjects.length;t<e;++t){var i=this.textObjects[t];i.removeSelf(!0),i=void 0}this.textObjects=[]}}},{key:"_popinChildObjects",value:function(){var t=this;this.object.traverse(function(e){0==e.children.length&&"Mesh"==e.type&&e.material.map&&(e.visible=!1,t.renderCommandQueue.high.push(function(){e.visible=!0,t._showCount>=1&&(t._showCount=0,t.publish("render:now")),t._showCount++}))})}},{key:"visible",get:function(){return null!=this.object.parent}}]),t}();e.b=d},function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return a});var n=i(3),r=i(238),o=function(t){var e={},i={};Object.keys(t.glyphs).forEach(function(e){i[e]=t.glyphs[e]}),Object.keys(r.glyphs).forEach(function(t){i[t]=r.glyphs[t]}),Object.keys(r).forEach(function(t){e[t]=r[t]}),e.glyphs=i;var o=new n.u(e);o._mSupportedCharacters=Object.keys(e.glyphs).join("");var a=o._mSupportedCharacters.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return o._mInvalidCharacters=new RegExp("[^"+a+"]","g"),o},a=o(r)},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){t.exports=r;var n=i(46).EventEmitter;function r(){n.call(this)}i(22)(r,n),r.Readable=i(76),r.Writable=i(250),r.Duplex=i(251),r.Transform=i(252),r.PassThrough=i(253),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",s),i.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",l),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",c),i.removeListener("close",c),t.removeListener("close",c)}return i.on("error",h),t.on("error",h),i.on("end",c),i.on("close",c),t.on("close",c),t.emit("pipe",i),t}},function(t,e,i){"use strict";(function(e,n){var r=i(47);t.exports=_;var o,a=i(122);_.ReadableState=y;i(46).EventEmitter;var s=function(t,e){return t.listeners(e).length},l=i(125),h=i(48).Buffer,c=e.Uint8Array||function(){};var u=i(32);u.inherits=i(22);var p=i(244),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var f,m=i(245),v=i(126);u.inherits(_,l);var g=["error","close","destroy","pause","resume"];function y(t,e){o=o||i(17),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=i(127).StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||i(17),!(this instanceof _))return new _(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function x(t,e,i,n,r){var o,a,s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,M(t)}(t,l)):(r||(o=function(t,e){var i;n=e,h.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(l,e)),o?t.emit("error",o):l.objectMode||e&&e.length>0?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===h.prototype||(a=e,e=h.from(a)),n?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):b(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!i?(e=l.decoder.write(e),l.objectMode||0!==e.length?b(t,l,e,!1):A(t,l)):b(t,l,e,!1))):n||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function b(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&M(t)),A(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=h.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return f||(f=i(127).StringDecoder),this._readableState.decoder=new f(t),this._readableState.encoding=t,this};var w=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=((i=t)>=w?i=w:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var i}function M(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r(q,t):q(t))}function q(t){d("emit readable"),t.emit("readable"),L(t)}function A(t,e){e.readingMore||(e.readingMore=!0,r(T,t,e))}function T(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function P(t){d("readable nexttick read 0"),t.read(0)}function S(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;t-=r.length;for(;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(a===o.length?r+=o:r+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++n}return e.length-=n,r}(t,e):function(t,e){var i=h.allocUnsafe(t),n=e.head,r=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,a),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function I(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function R(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):M(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&I(this),null;var n,r=e.needReadable;return d("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",r=!0),e.ended||e.reading?d("reading or ended",r=!1):r&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(i,e))),null===(n=t>0?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&I(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:x;function h(e,n){d("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),t.removeListener("close",y),t.removeListener("finish",_),t.removeListener("drain",p),t.removeListener("error",g),t.removeListener("unpipe",h),i.removeListener("end",c),i.removeListener("end",x),i.removeListener("data",v),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||p())}function c(){d("onend"),t.end()}o.endEmitted?r(l):i.once("end",l),t.on("unpipe",h);var u,p=(u=i,function(){var t=u._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(u,"data")&&(t.flowing=!0,L(u))});t.on("drain",p);var f=!1;var m=!1;function v(e){d("ondata"),m=!1,!1!==t.write(e)||m||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==R(o.pipes,t))&&!f&&(d("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,m=!0),i.pause())}function g(e){d("onerror",e),x(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",_),x()}function _(){d("onfinish"),t.removeListener("close",y),x()}function x(){d("unpipe"),i.unpipe(t)}return i.on("data",v),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",g),t.once("close",y),t.once("finish",_),t.emit("pipe",i),o.flowing||(d("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this,i);return this}var a=R(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},_.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&M(this):r(P,this))}return i},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(d("resume"),i.flowing=!0,t=this,(e=i).resumeScheduled||(e.resumeScheduled=!0,r(S,t,e))),this},_.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this._readableState,i=!1,n=this;t.on("end",function(){if(d("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(r){(d("wrapped data"),e.decoder&&(r=e.decoder.write(r)),!e.objectMode||null!==r&&void 0!==r)&&((e.objectMode||r&&r.length)&&(n.push(r)||(i=!0,t.pause())))});for(var r in t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<g.length;o++)t.on(g[o],n.emit.bind(n,g[o]));return n._read=function(e){d("wrapped _read",e),i&&(i=!1,t.resume())},n},_._fromList=C}).call(e,i(10),i(1))},function(t,e,i){t.exports=i(46).EventEmitter},function(t,e,i){"use strict";var n=i(47);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";var n=i(48).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function s(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½".repeat(i);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½".repeat(i+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½".repeat(i+2)}}(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=a(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i)return 0;if((r=a(e[n]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i)return 0;if((r=a(e[n]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=a;var n=i(17),r=i(32);function o(t){this.afterTransform=function(e,i){return function(t,e,i){var n=t._transformState;n.transforming=!1;var r=n.writecb;if(!r)return t.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==i&&void 0!==i&&t.push(i);r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,i){s(e,t,i)}):s(e)})}function s(t,e,i){if(e)return t.emit("error",e);null!==i&&void 0!==i&&t.push(i);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(22),r.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(s(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,o=n.length,a=String(t).replace(r,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),l=n[i];i<o;l=n[++i])m(l)||!x(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(i,r){if(y(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}};var o,a={};function s(t,i){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(i)?n.showHidden=i:i&&e._extend(n,i),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),c(n,t,n.depth)}function l(t,e){var i=s.styles[e];return i?"["+s.colors[i][0]+"m"+t+"["+s.colors[i][1]+"m":t}function h(t,e){return t}function c(t,i,n){if(t.customInspect&&i&&E(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return g(r)||(r=c(t,r,n)),r}var o=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(g(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(v(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,i);if(o)return o;var a,s=Object.keys(i),l=(a={},s.forEach(function(t,e){a[t]=!0}),a);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),w(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(E(i)){var h=i.name?": "+i.name:"";return t.stylize("[Function"+h+"]","special")}if(_(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(b(i))return t.stylize(Date.prototype.toString.call(i),"date");if(w(i))return u(i)}var x,M="",q=!1,A=["{","}"];(d(i)&&(q=!0,A=["[","]"]),E(i))&&(M=" [Function"+(i.name?": "+i.name:"")+"]");return _(i)&&(M=" "+RegExp.prototype.toString.call(i)),b(i)&&(M=" "+Date.prototype.toUTCString.call(i)),w(i)&&(M=" "+u(i)),0!==s.length||q&&0!=i.length?n<0?_(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),x=q?function(t,e,i,n,r){for(var o=[],a=0,s=e.length;a<s;++a)T(e,String(a))?o.push(p(t,e,i,n,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,e,i,n,r,!0))}),o}(t,i,n,l,s):s.map(function(e){return p(t,i,n,l,e,q)}),t.seen.pop(),function(t,e,i){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(x,M,A)):A[0]+M+A[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,n,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),T(n,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=m(i)?c(t,l.value,null):c(t,l.value,i-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),y(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function y(t){return void 0===t}function _(t){return x(t)&&"[object RegExp]"===M(t)}function x(t){return"object"==typeof t&&null!==t}function b(t){return x(t)&&"[object Date]"===M(t)}function w(t){return x(t)&&("[object Error]"===M(t)||t instanceof Error)}function E(t){return"function"==typeof t}function M(t){return Object.prototype.toString.call(t)}function q(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var i=n.pid;a[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=f,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=_,e.isObject=x,e.isDate=b,e.isError=w,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(254);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(t=new Date,i=[q(t.getHours()),q(t.getMinutes()),q(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(255),e._extend=function(t,e){if(!e||!x(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(e,i(10),i(1))},function(t,e,i){"use strict";var n=i(18),r=i(267),o=i(276),a=n.spawnSync;function s(t,e,i){var a,s;return a=r(t,e,i),s=n.spawn(a.command,a.args,a.options),o.hookChildProcess(s,a),s}t.exports=s,t.exports.spawn=s,t.exports.sync=function(t,e,n){var s,l;if(!a)try{a=i(!function(){var t=new Error('Cannot find module "spawn-sync"');throw t.code="MODULE_NOT_FOUND",t}())}catch(t){throw new Error("In order to use spawnSync on node 0.10 or older, you must install spawn-sync:\n\n  npm install spawn-sync --save")}return s=r(t,e,n),(l=a(s.command,s.args,s.options)).error=l.error||o.verifyENOENTSync(l.status,s),l},t.exports._parse=r,t.exports._enoent=o},function(t,e,i){"use strict";t.exports=g;var n,r=i(268),o=i(129),a=i(270),s=(n="function"==typeof Symbol?function(t){return Symbol.for(t)}:function(t){return"_"+t})("max"),l=n("length"),h=n("lengthCalculator"),c=n("allowStale"),u=n("maxAge"),p=n("dispose"),d=n("noDisposeOnSet"),f=n("lruList"),m=n("cache");function v(){return 1}function g(t){if(!(this instanceof g))return new g(t);"number"==typeof t&&(t={max:t}),t||(t={});var e=this[s]=t.max;(!e||"number"!=typeof e||e<=0)&&(this[s]=1/0);var i=t.length||v;"function"!=typeof i&&(i=v),this[h]=i,this[c]=t.stale||!1,this[u]=t.maxAge||0,this[p]=t.dispose,this[d]=t.noDisposeOnSet||!1,this.reset()}function y(t,e,i,n){var r=i.value;x(t,r)&&(w(t,i),t[c]||(r=void 0)),r&&e.call(n,r.value,r.key,t)}function _(t,e,i){var n=t[m].get(e);if(n){var r=n.value;x(t,r)?(w(t,n),t[c]||(r=void 0)):i&&t[f].unshiftNode(n),r&&(r=r.value)}return r}function x(t,e){if(!e||!e.maxAge&&!t[u])return!1;var i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[u]&&i>t[u]}function b(t){if(t[l]>t[s])for(var e=t[f].tail;t[l]>t[s]&&null!==e;){var i=e.prev;w(t,e),e=i}}function w(t,e){if(e){var i=e.value;t[p]&&t[p](i.key,i.value),t[l]-=i.length,t[m].delete(i.key),t[f].removeNode(e)}}Object.defineProperty(g.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this[s]=t,b(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(g.prototype,"allowStale",{set:function(t){this[c]=!!t},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(g.prototype,"maxAge",{set:function(t){(!t||"number"!=typeof t||t<0)&&(t=0),this[u]=t,b(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(g.prototype,"lengthCalculator",{set:function(t){"function"!=typeof t&&(t=v),t!==this[h]&&(this[h]=t,this[l]=0,this[f].forEach(function(t){t.length=this[h](t.value,t.key),this[l]+=t.length},this)),b(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(g.prototype,"length",{get:function(){return this[l]},enumerable:!0}),Object.defineProperty(g.prototype,"itemCount",{get:function(){return this[f].length},enumerable:!0}),g.prototype.rforEach=function(t,e){e=e||this;for(var i=this[f].tail;null!==i;){var n=i.prev;y(this,t,i,e),i=n}},g.prototype.forEach=function(t,e){e=e||this;for(var i=this[f].head;null!==i;){var n=i.next;y(this,t,i,e),i=n}},g.prototype.keys=function(){return this[f].toArray().map(function(t){return t.key},this)},g.prototype.values=function(){return this[f].toArray().map(function(t){return t.value},this)},g.prototype.reset=function(){this[p]&&this[f]&&this[f].length&&this[f].forEach(function(t){this[p](t.key,t.value)},this),this[m]=new r,this[f]=new a,this[l]=0},g.prototype.dump=function(){return this[f].map(function(t){if(!x(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}},this).toArray().filter(function(t){return t})},g.prototype.dumpLru=function(){return this[f]},g.prototype.inspect=function(t,e){var i="LRUCache {",n=!1;this[c]&&(i+="\n  allowStale: true",n=!0);var r=this[s];r&&r!==1/0&&(n&&(i+=","),i+="\n  max: "+o.inspect(r,e),n=!0);var a=this[u];a&&(n&&(i+=","),i+="\n  maxAge: "+o.inspect(a,e),n=!0);var p=this[h];p&&p!==v&&(n&&(i+=","),i+="\n  length: "+o.inspect(this[l],e),n=!0);var d=!1;return this[f].forEach(function(t){d?i+=",\n  ":(n&&(i+=",\n"),d=!0,i+="\n  ");var r=o.inspect(t.key).split("\n").join("\n  "),s={value:t.value};t.maxAge!==a&&(s.maxAge=t.maxAge),p!==v&&(s.length=t.length),x(this,t)&&(s.stale=!0),s=o.inspect(s,e).split("\n").join("\n  "),i+=r+" => "+s}),(d||n)&&(i+="\n"),i+="}"},g.prototype.set=function(t,e,i){var n=(i=i||this[u])?Date.now():0,r=this[h](e,t);if(this[m].has(t)){if(r>this[s])return w(this,this[m].get(t)),!1;var o=this[m].get(t).value;return this[p]&&(this[d]||this[p](t,o.value)),o.now=n,o.maxAge=i,o.value=e,this[l]+=r-o.length,o.length=r,this.get(t),b(this),!0}var a=new function(t,e,i,n,r){this.key=t,this.value=e,this.length=i,this.now=n,this.maxAge=r||0}(t,e,r,n,i);return a.length>this[s]?(this[p]&&this[p](t,e),!1):(this[l]+=a.length,this[f].unshift(a),this[m].set(t,this[f].head),b(this),!0)},g.prototype.has=function(t){return!!this[m].has(t)&&!x(this,this[m].get(t).value)},g.prototype.get=function(t){return _(this,t,!0)},g.prototype.peek=function(t){return _(this,t,!1)},g.prototype.pop=function(){var t=this[f].tail;return t?(w(this,t),t.value):null},g.prototype.del=function(t){w(this,this[m].get(t))},g.prototype.load=function(t){this.reset();for(var e=Date.now(),i=t.length-1;i>=0;i--){var n=t[i],r=n.e||0;if(0===r)this.set(n.k,n.v);else{var o=r-e;o>0&&this.set(n.k,n.v,o)}}},g.prototype.prune=function(){var t=this;this[m].forEach(function(e,i){_(t,i,!1)})}},function(t,e,i){"use strict";(function(e){var n=i(78),r=i(271),o=new(i(131))({max:50,maxAge:3e4});t.exports=function(t,i){var a;if(i=!!i,a=o.get(t+"!"+i),o.has(t))return o.get(t);try{a=i?r.sync(t,{pathExt:n.delimiter+(e.env.PATHEXT||"")}):r.sync(t)}catch(t){}return o.set(t+"!"+i,a),a}}).call(e,i(1))},function(t,e,i){var n=i(130);t.exports=function(t){function e(t,e,i,r){var o=this._options&&this._options.imageMagick,a=this._options&&this._options.appPath||"",s=o?a+"compare":a+"gm",l=["-metric","mse",t,e];o||l.unshift("compare");var h=.4;if("object"==typeof i){if(i.highlightColor&&i.highlightColor.indexOf('"')<0&&(i.highlightColor='"'+i.highlightColor+'"'),i.file){if("string"!=typeof i.file)throw new TypeError("The path for the diff output is invalid");i.highlightColor&&(l.push("-highlight-color"),l.push(i.highlightColor)),i.highlightStyle&&(l.push("-highlight-style"),l.push(i.highlightStyle)),o||l.push("-file"),l.push(i.file)}if(void 0!==i.tolerance){if("number"!=typeof i.tolerance)throw new TypeError("The tolerance value should be a number");h=i.tolerance}}else o&&l.push("null:"),"function"==typeof i?r=i:h=i;var c=n(s,l),u="",p="";c.stdout.on("data",function(t){u+=t}),c.stderr.on("data",function(t){p+=t}),c.on("close",function(i){if(o){if(0===i)return r(null,0<=h,0,u);if(1!==i)return r(p);err=null,u=p}else if(0!==i)return r(p);var n=(o?/\((\d+\.?[\d\-\+e]*)\)/m:/Total: (\d+\.?\d*)/m).exec(u);if(!n)return err=new Error("Unable to parse output.\nGot "+u),r(err);var a=parseFloat(n[1]);r(null,a<=h,a,u,t,e)})}return t&&(t.compare=e),e}},function(t,e,i){(function(t){"use strict";var e=Object.freeze;function i(t){var e,i,n,r;for(i=1,n=arguments.length;i<n;i++){r=arguments[i];for(e in r)t[e]=r[e]}return t}Object.freeze=function(t){return t};var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,i){var n,r,o,a;return a=function(){n=!1,r&&(o.apply(i,r),r=!1)},o=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)}}function l(t,e,i){var n=e[1],r=e[0],o=n-r;return t===n&&i?t:((t-r)%o+o)%o+r}function h(){return!1}function c(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return u(t).split(/\s+/)}function d(t,e){t.hasOwnProperty("options")||(t.options=t.options?n(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function f(t,e,i){var n=[];for(var r in t)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function v(t,e){return t.replace(m,function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var E=window.requestAnimationFrame||x("RequestAnimationFrame")||w,M=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function q(t,e,i){if(!i||E!==w)return E.call(window,r(t,e));t.call(e)}function A(t){t&&M.call(window,t)}var T=(Object.freeze||Object)({freeze:e,extend:i,create:n,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:l,falseFn:h,formatNum:c,trim:u,splitWords:p,setOptions:d,getParamString:f,template:v,isArray:g,indexOf:y,emptyImageUrl:_,requestFn:E,cancelFn:M,requestAnimFrame:q,cancelAnimFrame:A});function P(){}P.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=n(r);o.constructor=e,e.prototype=o;for(var a in this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(n(o.options),t.options)),i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},P.include=function(t){return i(this.prototype,t),this},P.mergeOptions=function(t){return i(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var S={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var r=0,o=(t=p(t)).length;r<o;r++)this._on(t[r],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var r=0,o=(t=p(t)).length;r<o;r++)this._off(t[r],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var r={fn:e,ctx:i},o=n,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===i)return;o.push(r)},_off:function(t,e,i){var n,r,o;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx===i&&a.fn===e)return a.fn=h,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,o=n.length;r<o;r++)n[r].fn=h;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a];l.fn.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=r(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};S.addEventListener=S.on,S.removeEventListener=S.clearAllEventListeners=S.off,S.addOneTimeEventListener=S.once,S.fireEvent=S.fire,S.hasEventListeners=S.listens;var C=P.extend(S);function I(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var O=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,i){return t instanceof I?t:g(t)?new I(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,i)}function N(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function B(t,e){return!t||t instanceof N?t:new N(t,e)}function D(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function z(t,e){return t instanceof D?t:new D(t,e)}function k(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function F(t,e,i){return t instanceof k?t:g(t)&&"object"!=typeof t[0]?3===t.length?new k(t[0],t[1],t[2]):2===t.length?new k(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new k(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new k(t,e,i)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},N.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof I?R(t):B(t))instanceof N?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=B(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>=e.x&&n.x<=i.x,a=r.y>=e.y&&n.y<=i.y;return o&&a},overlaps:function(t){t=B(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>e.x&&n.x<i.x,a=r.y>e.y&&n.y<i.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},D.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast;if(t instanceof k)e=t,i=t;else{if(!(t instanceof D))return t?this.extend(F(t)||z(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new k(e.lat,e.lng),this._northEast=new k(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new D(new k(e.lat-n,e.lng-r),new k(i.lat+n,i.lng+r))},getCenter:function(){return new k((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new k(this.getNorth(),this.getWest())},getSouthEast:function(){return new k(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof k||"lat"in t?F(t):z(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof D?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&n.lat<=i.lat,a=r.lng>=e.lng&&n.lng<=i.lng;return o&&a},overlaps:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&n.lat<i.lat,a=r.lng>e.lng&&n.lng<i.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},k.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,F(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new k(this.lat,this.lng,this.alt)}};var U,j={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new N(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new k(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng;if(0===n&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new D(new k(o.lat-n,o.lng-r),new k(a.lat-n,a.lng-r))}},V=i({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),G={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e);return new I(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new k((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=6378137*Math.PI,new N([-U,-U],[U,U]))};function H(t,e,i,n){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function W(t,e,i,n){return new H(t,e,i,n)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X,Y=i({},V,{code:"EPSG:3857",projection:G,transformation:(X=.5/(Math.PI*G.R),W(X,.5,-X,.5))}),Z=i({},Y,{code:"EPSG:900913"});function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var i,n,r,o,a,s,l="";for(i=0,r=t.length;i<r;i++){for(n=0,o=(a=t[i]).length;n<o;n++)s=a[n],l+=(n?"L":"M")+s.x+" "+s.y;l+=e?Pt?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,tt=$&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=Lt("webkit"),nt=Lt("android"),rt=Lt("android 2")||Lt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=nt&&Lt("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=Lt("chrome"),ht=Lt("gecko")&&!it&&!st&&!$,ct=!lt&&Lt("safari"),ut=Lt("phantom"),pt="OTransition"in Q,dt=0===navigator.platform.indexOf("Win"),ft=$&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,vt="MozPerspective"in Q,gt=!window.L_DISABLE_3D&&(ft||mt||vt)&&!pt&&!ut,yt="undefined"!=typeof orientation||Lt("mobile"),_t=yt&&it,xt=yt&&mt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),Et=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Mt=yt&&st,qt=yt&&ht,At=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=!!document.createElement("canvas").getContext,Pt=!(!document.createElementNS||!J("svg").createSVGRect),St=!Pt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Lt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ct=(Object.freeze||Object)({ie:$,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:at,opera:st,chrome:lt,gecko:ht,safari:ct,phantom:ut,opera12:pt,win:dt,ie3d:ft,webkit3d:mt,gecko3d:vt,any3d:gt,mobile:yt,mobileWebkit:_t,mobileWebkit3d:xt,msPointer:bt,pointer:wt,touch:Et,mobileOpera:Mt,mobileGecko:qt,retina:At,canvas:Tt,svg:Pt,vml:St}),It=bt?"MSPointerDown":"pointerdown",Ot=bt?"MSPointerMove":"pointermove",Rt=bt?"MSPointerUp":"pointerup",Nt=bt?"MSPointerCancel":"pointercancel",Bt=["INPUT","SELECT","OPTION"],Dt={},zt=!1,kt=0;function Ft(t,e,i,n){var o,a,s,l,h,c,u,p,d,f;return"touchstart"===e?(u=t,p=i,d=n,f=r(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Bt.indexOf(t.target.tagName)<0))return;De(t)}Gt(t,p)}),u["_leaflet_touchstart"+d]=f,u.addEventListener(It,f,!1),zt||(document.documentElement.addEventListener(It,Ut,!0),document.documentElement.addEventListener(Ot,jt,!0),document.documentElement.addEventListener(Rt,Vt,!0),document.documentElement.addEventListener(Nt,Vt,!0),zt=!0)):"touchmove"===e?(h=i,c=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Gt(t,h)},(l=t)["_leaflet_touchmove"+n]=c,l.addEventListener(Ot,c,!1)):"touchend"===e&&(a=i,s=function(t){Gt(t,a)},(o=t)["_leaflet_touchend"+n]=s,o.addEventListener(Rt,s,!1),o.addEventListener(Nt,s,!1)),this}function Ut(t){Dt[t.pointerId]=t,kt++}function jt(t){Dt[t.pointerId]&&(Dt[t.pointerId]=t)}function Vt(t){delete Dt[t.pointerId],kt--}function Gt(t,e){t.touches=[];for(var i in Dt)t.touches.push(Dt[i]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":wt?"pointerup":"touchend",Xt="_leaflet_";function Yt(t,e,i){var n,r,o=!1,a=250;function s(t){var e;if(wt){if(!et||"mouse"===t.pointerType)return;e=kt}else e=t.touches.length;if(!(e>1)){var i=Date.now(),s=i-(n||i);r=t.touches?t.touches[0]:t,o=s>0&&s<=a,n=i}}function l(t){if(o&&!r.cancelBubble){if(wt){if(!et||"mouse"===t.pointerType)return;var i,a,s={};for(a in r)i=r[a],s[a]=i&&i.bind?i.bind(r):i;r=s}r.type="dblclick",e(r),n=null}}return t[Xt+Ht+i]=s,t[Xt+Wt+i]=l,t[Xt+"dblclick"+i]=e,t.addEventListener(Ht,s,!1),t.addEventListener(Wt,l,!1),t.addEventListener("dblclick",e,!1),this}function Zt(t,e){var i=t[Xt+Ht+e],n=t[Xt+Wt+e],r=t[Xt+"dblclick"+e];return t.removeEventListener(Ht,i,!1),t.removeEventListener(Wt,n,!1),et||t.removeEventListener("dblclick",r,!1),this}var Jt,Kt,Qt,$t,te,ee=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ie=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ie||"OTransition"===ie?ie+"End":"transitionend";function re(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ae(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function he(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ue(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=me(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function pe(t,e){if(void 0!==t.classList)for(var i=p(e),n=0,r=i.length;n<r;n++)t.classList.add(i[n]);else if(!ue(t,e)){var o=me(t);fe(t,(o?o+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,u((" "+me(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ve(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function ye(t,e,i){var n=e||new I(0,0);t.style[ee]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function _e(t,e){t._leaflet_pos=e,gt?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function xe(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)Jt=function(){Se(window,"selectstart",De)},Kt=function(){Ce(window,"selectstart",De)};else{var be=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jt=function(){if(be){var t=document.documentElement.style;Qt=t[be],t[be]="none"}},Kt=function(){be&&(document.documentElement.style[be]=Qt,Qt=void 0)}}function we(){Se(window,"dragstart",De)}function Ee(){Ce(window,"dragstart",De)}function Me(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(qe(),$t=t,te=t.style.outline,t.style.outline="none",Se(window,"keydown",qe))}function qe(){$t&&($t.style.outline=te,$t=void 0,te=void 0,Ce(window,"keydown",qe))}function Ae(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Pe=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ie,TRANSITION_END:ne,get:re,getStyle:oe,create:ae,remove:se,empty:le,toFront:he,toBack:ce,hasClass:ue,addClass:pe,removeClass:de,setClass:fe,getClass:me,setOpacity:ve,testProp:ge,setTransform:ye,setPosition:_e,getPosition:xe,disableTextSelection:Jt,enableTextSelection:Kt,disableImageDrag:we,enableImageDrag:Ee,preventOutline:Me,restoreOutline:qe,getSizedParentNode:Ae,getScale:Te});function Se(t,e,i,n){if("object"==typeof e)for(var r in e)Ie(t,r,e[r],i);else for(var o=0,a=(e=p(e)).length;o<a;o++)Ie(t,e[o],i,n);return this}var Le="_leaflet_events";function Ce(t,e,i,n){if("object"==typeof e)for(var r in e)Oe(t,r,e[r],i);else if(e)for(var o=0,a=(e=p(e)).length;o<a;o++)Oe(t,e[o],i,n);else{for(var s in t[Le])Oe(t,s,t[Le][s]);delete t[Le]}return this}function Ie(t,e,i,n){var r=e+a(i)+(n?"_"+a(n):"");if(t[Le]&&t[Le][r])return this;var o=function(e){return i.call(n||t,e||window.event)},s=o;wt&&0===e.indexOf("touch")?Ft(t,e,o,r):!Et||"dblclick"!==e||!Yt||wt&&lt?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,We(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&nt&&(o=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=je&&i-je;if(n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated)return void ze(t);je=i,e(t)}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Yt(t,o,r),t[Le]=t[Le]||{},t[Le][r]=o}function Oe(t,e,i,n){var r,o,s,l=e+a(i)+(n?"_"+a(n):""),h=t[Le]&&t[Le][l];if(!h)return this;wt&&0===e.indexOf("touch")?(s=(r=t)["_leaflet_"+(o=e)+l],"touchstart"===o?r.removeEventListener(It,s,!1):"touchmove"===o?r.removeEventListener(Ot,s,!1):"touchend"===o&&(r.removeEventListener(Rt,s,!1),r.removeEventListener(Nt,s,!1))):!Et||"dblclick"!==e||!Zt||wt&&lt?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",h,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,h,!1):"detachEvent"in t&&t.detachEvent("on"+e,h):Zt(t,l),t[Le][l]=null}function Re(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Ne(t){return Ie(t,"mousewheel",Re),this}function Be(t){return Se(t,"mousedown touchstart dblclick",Re),Ie(t,"click",Ge),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ze(t){return De(t),Re(t),this}function ke(t,e){if(!e)return new I(t.clientX,t.clientY);var i=Te(e),n=i.boundingClientRect;return new I((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Fe=dt&&lt?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function Ue(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var je,Ve={};function Ge(t){Ve[t.type]=!0}function He(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function We(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var Xe=(Object.freeze||Object)({on:Se,off:Ce,stopPropagation:Re,disableScrollPropagation:Ne,disableClickPropagation:Be,preventDefault:De,stop:ze,getMousePosition:ke,getWheelDelta:Ue,fakeStop:Ge,skipped:He,isExternalTarget:We,addListener:Se,removeListener:Ce}),Ye=C.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=xe(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),_e(this._el,i),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=C.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ie&&gt&&!Mt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var i=R(e.paddingTopLeft||e.padding||[0,0]),n=R(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=R(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ye,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pe(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!gt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),h=r.distanceTo(n)||1,c=1.42,u=c*c;function p(t){var e=(l*l-s*s+(t?-1:1)*u*u*h*h)/(2*(t?l:s)*u*h),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=p(0);function v(t){return s*(f(m)*(d(e=m+c*t)/f(e))-d(m))/u;var e}var g=Date.now(),y=(p(1)-m)/c,_=i.duration?1e3*i.duration:1e3*y*.8;return this._moveStart(!0,i.noMoveStart),function i(){var o,l,u=(Date.now()-g)/_,p=(o=u,(1-Math.pow(1-o,1.5))*y);u<=1?(this._flyToFrame=q(i,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(v(p)/h)),a),this.getScaleZoom(s/(l=p,s*(f(m)/f(m+c*l))),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,z(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=R(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),h=B([s.min.add(i),s.max.subtract(n)]);if(!h.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),u=R(a.x+c.x,a.y+c.y);(a.x<h.min.x||a.x>h.max.x)&&(u.x=o.x-c.x,c.x>0?u.x+=l.x-i.x:u.x-=l.x-n.x),(a.y<h.min.y||a.y>h.max.y)&&(u.y=o.y-c.y,c.y>0?u.y+=l.y-i.y:u.y-=l.y-n.y),this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),a=n.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),n=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new k(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var r=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(r,n.maxZoom):r)}var o={latlng:e,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");for(t in this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new D(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=z(t),i=R(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),h=B(this.project(s,n),this.project(a,n)).getSize(),c=gt?this.options.zoomSnap:1,u=l.x/h.x,p=l.y/h.y,d=e?Math.max(u,p):Math.min(u,p);return n=this.getScaleZoom(d,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new N(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return ke(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=re(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Se(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,pe(t,"leaflet-container"+(Et?" leaflet-touch":"")+(At?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(t.markerPane,"leaflet-zoom-hide"),pe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new I(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Ce:Se;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((i=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(e,!0)){if(r&&!We(o,t))break;if(n.push(i),r)break}if(o===this._container)break;o=o.parentNode}return n.length||s||r||!We(o,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Me(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=i({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&De(t);var a={originalEvent:t};if("keypress"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,a,!0),a.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return xe(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return B([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),o=new N(n.subtract(r),n.add(r)),a=this._getBoundsOffset(o,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new N(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=B(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),o=n.max.subtract(t.max);return new I(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=gt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ee,i=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r))&&(q(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),q(function(){this._moveEnd(!0)},this))}});var Je=P.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return pe(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ke=function(t){return new Je(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ae("div",e+"control-container",this._container);function n(n,r){var o=e+n+" "+e+r;t[n+r]=ae("div",o,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qe=Je.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Je.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Be(e),Ne(e);var n=this._section=ae("section",t+"-list");i&&(this._map.on("click",this.collapse,this),nt||Se(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ae("a",t+"-toggle",e);r.href="#",r.title="Layers",Et?(Se(r,"click",ze),Se(r,"click",this.expand,this)):Se(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ae("div",t+"-base",n),this._separator=ae("div",t+"-separator",n),this._overlaysList=ae("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(r(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(e),e.layerId=a(t.layer),Se(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return i.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),$e=Je.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ae("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){var o=ae("a",i,n);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Be(o),Se(o,"click",ze),Se(o,"click",r,this),Se(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pe(this._zoomInButton,e)}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))});var ti=Je.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ae("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ae("div",e,i)),t.imperial&&(this._iScale=ae("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,r=3.2808399*t;r>5280?(e=r/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),ei=Je.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Be(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook(function(){this.options.attributionControl&&(new ei).addTo(this)});Je.Layers=Qe,Je.Zoom=$e,Je.Scale=ti,Je.Attribution=ei,Ke.layers=function(t,e,i){return new Qe(t,e,i)},Ke.zoom=function(t){return new $e(t)},Ke.scale=function(t){return new ti(t)},Ke.attribution=function(t){return new ei(t)};var ii=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ii.addTo=function(t,e){return t.addHandler(e,this),this};var ni,ri={Events:S},oi=Et?"touchstart mousedown":"mousedown",ai={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},si={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},li=C.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Se(this._dragStartTarget,oi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(li._dragging===this&&this.finishDrag(),Ce(this._dragStartTarget,oi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ue(this._element,"leaflet-zoom-anim")&&!(li._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(li._dragging=this,this._preventOutline&&Me(this._element),we(),Jt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ae(this._element);this._startPoint=new I(e.clientX,e.clientY),this._parentScale=Te(i),Se(document,si[t.type],this._onMove,this),Se(document,ai[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new I(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=xe(this._element).subtract(i),pe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,A(this._animRequest),this._lastEvent=t,this._animRequest=q(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in si)Ce(document,si[t],this._onMove,this),Ce(document,ai[t],this._onUp,this);Ee(),Kt(),this._moved&&this._moving&&(A(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,li._dragging=!1}});function hi(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,r,o){var a,s,l,h=0;for(s=r+1;s<=o-1;s++)(l=fi(e[s],e[r],e[o],!0))>h&&(a=s,h=l);h>n&&(i[a]=1,t(e,i,n,r,a),t(e,i,n,a,o))}(t,n,e,0,i-1);var r,o=[];for(r=0;r<i;r++)n[r]&&o.push(t[r]);return o}(t=function(t,e){for(var i=[t[0]],n=1,r=0,o=t.length;n<o;n++)a=t[n],s=t[r],void 0,void 0,l=s.x-a.x,h=s.y-a.y,l*l+h*h>e&&(i.push(t[n]),r=n);var a,s,l,h;r<o-1&&i.push(t[o-1]);return i}(t,i),i)}function ci(t,e,i){return Math.sqrt(fi(t,e,i,!0))}function ui(t,e,i,n,r){var o,a,s,l=n?ni:di(t,i),h=di(e,i);for(ni=h;;){if(!(l|h))return[t,e];if(l&h)return!1;s=di(a=pi(t,e,o=l||h,i,r),i),o===l?(t=a,l=s):(e=a,h=s)}}function pi(t,e,i,n,r){var o,a,s=e.x-t.x,l=e.y-t.y,h=n.min,c=n.max;return 8&i?(o=t.x+s*(c.y-t.y)/l,a=c.y):4&i?(o=t.x+s*(h.y-t.y)/l,a=h.y):2&i?(o=c.x,a=t.y+l*(c.x-t.x)/s):1&i&&(o=h.x,a=t.y+l*(h.x-t.x)/s),new I(o,a,r)}function di(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function fi(t,e,i,n){var r,o=e.x,a=e.y,s=i.x-o,l=i.y-a,h=s*s+l*l;return h>0&&((r=((t.x-o)*s+(t.y-a)*l)/h)>1?(o=i.x,a=i.y):r>0&&(o+=s*r,a+=l*r)),s=t.x-o,l=t.y-a,n?s*s+l*l:new I(o,a)}function mi(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mi(t)}var gi=(Object.freeze||Object)({simplify:hi,pointToSegmentDistance:ci,closestPointOnSegment:function(t,e,i){return fi(t,e,i)},clipSegment:ui,_getEdgeIntersection:pi,_getBitCode:di,_sqClosestPointOnSegment:fi,isFlat:mi,_flat:vi});function yi(t,e,i){var n,r,o,a,s,l,h,c,u,p=[1,4,2,8];for(r=0,h=t.length;r<h;r++)t[r]._code=di(t[r],e);for(a=0;a<4;a++){for(c=p[a],n=[],r=0,o=(h=t.length)-1;r<h;o=r++)s=t[r],l=t[o],s._code&c?l._code&c||((u=pi(l,s,c,e,i))._code=di(u,e),n.push(u)):(l._code&c&&((u=pi(l,s,c,e,i))._code=di(u,e),n.push(u)),n.push(s));t=n}return t}var _i,xi=(Object.freeze||Object)({clipPolygon:yi}),bi={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new k(t.y,t.x)},bounds:new N([-180,-90],[180,90])},wi={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=o*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),o/2);return n=-i*Math.log(Math.max(s,1e-10)),new I(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=h=Math.PI/2-2*Math.atan(a*e)-s;return new k(s*i,t.x*i/n)}},Ei=(Object.freeze||Object)({LonLat:bi,Mercator:wi,SphericalMercator:G}),Mi=i({},V,{code:"EPSG:3395",projection:wi,transformation:(_i=.5/(Math.PI*wi.R),W(_i,.5,-_i,.5))}),qi=i({},V,{code:"EPSG:4326",projection:bi,transformation:W(1/180,1,-1/180,.5)}),Ai=i({},j,{projection:bi,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});j.Earth=V,j.EPSG3395=Mi,j.EPSG3857=Y,j.EPSG900913=Z,j.EPSG4326=qi,j.Simple=Ai;var Ti=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?g(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pi=Ti.extend({initialize:function(t,e){var i,n;if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Si=Pi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new D;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Li=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var r=R(n),o=R("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return At&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Ci=Li.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ci.imagePath||(Ci.imagePath=this._detectIconPath()),(this.options.imagePath||Ci.imagePath)+Li.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ii=ii.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new li(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=xe(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=B(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var h=R((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=q(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=xe(e._icon),r=e._map.layerPointToLatLng(n);i&&_e(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Oi=Ti.extend({options:{icon:new Ci,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),pe(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(pe(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ii)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ii(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;ve(this._icon,t),this._shadow&&ve(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Ri=Ti.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ni=Ri.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=F(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Ri.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new N(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Bi=Ni.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),d(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ri.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===V.distance){var r=Math.PI/180,o=this._mRadius/V.R/r,a=i.project([e+o,t]),s=i.project([e-o,t]),l=a.add(s).divideBy(2),h=i.unproject(l).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(h*r))/(Math.cos(e*r)*Math.cos(h*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-i.project([h,t-c]).x,this._radiusY=l.y-a.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});var Di=Ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,o=fi,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],h=1,c=l.length;h<c;h++){var u=o(t,e=l[h-1],i=l[h],!0);u<n&&(n=u,r=o(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,n=0;t<l-1;t++)if(r=s[t],o=s[t+1],(n+=i=r.distanceTo(o))>e)return a=(n-e)/i,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new D,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=mi(t),n=0,r=t.length;n<r;n++)i?(e[n]=F(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new I(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,r,o=t[0]instanceof k,a=t.length;if(o){for(r=[],n=0;n<a;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n]);e.push(r)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,r,o,a,s,l=this._parts;for(e=0,n=0,r=this._rings.length;e<r;e++)for(i=0,o=(s=this._rings[e]).length;i<o-1;i++)(a=ui(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===s[i+1]&&i!==o-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=hi(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((e||0!==n)&&ci(t,s[r],s[n])<=l)return!0;return!1}});Di._flat=vi;var zi=Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s,l,h=this._rings[0],c=h.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)i=h[t],n=h[e],r=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*r,s+=(i.y+n.y)*r,o+=3*r;return l=0===o?h[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Di.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof k&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Di.prototype._setLatLngs.call(this,t),mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new I(e,e);if(t=new N(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,o=this._rings.length;r<o;r++)(n=yi(this._rings[r],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,o,a,s,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)i=e[o],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||Di.prototype._containsPoint.call(this,t,!0)}});var ki=Si.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=g(t)?t:t.features;if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Fi(t,o);return a?(a.feature=Wi(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Fi(t,e){var i,n,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],h=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Ui;if(!s&&!a)return null;switch(a.type){case"Point":return i=c(s),h?h(t,i):new Oi(i);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=c(s[r]),l.push(h?h(t,i):new Oi(i));return new Si(l);case"LineString":case"MultiLineString":return n=ji(s,"LineString"===a.type?0:1,c),new Di(n,e);case"Polygon":case"MultiPolygon":return n=ji(s,"Polygon"===a.type?1:2,c),new zi(n,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var u=Fi({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new Si(l);default:throw new Error("Invalid GeoJSON object.")}}function Ui(t){return new k(t[1],t[0],t[2])}function ji(t,e,i){for(var n,r=[],o=0,a=t.length;o<a;o++)n=e?ji(t[o],e-1,i):(i||Ui)(t[o]),r.push(n);return r}function Vi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Gi(t,e,i,n){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Gi(t[o],e-1,i,n):Vi(t[o],n));return!e&&i&&r.push(r[0]),r}function Hi(t,e){return t.feature?i({},t.feature,{geometry:e}):Wi(e)}function Wi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Xi={toGeoJSON:function(t){return Hi(this,{type:"Point",coordinates:Vi(this.getLatLng(),t)})}};function Yi(t,e){return new ki(t,e)}Oi.include(Xi),Bi.include(Xi),Ni.include(Xi),Di.include({toGeoJSON:function(t){var e=!mi(this._latlngs),i=Gi(this._latlngs,e?1:0,!1,t);return Hi(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),zi.include({toGeoJSON:function(t){var e=!mi(this._latlngs),i=e&&!mi(this._latlngs[0]),n=Gi(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),Hi(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Pi.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Hi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(i)n.push(r.geometry);else{var o=Wi(r);"FeatureCollection"===o.type?n.push.apply(n,o.features):n.push(o)}}}),i?Hi(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Zi=Yi,Ji=Ti.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=z(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&he(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),this.options.className&&pe(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,i,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();_e(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ki=Ji.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),e.onselectstart=h,e.onmousemove=h,e.onloadeddata=r(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=i.length>0?n:[e.src]}else{g(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}});var Qi=Ti.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(r(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&he(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),i=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),$i=Qi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ri||this._source.on("preclick",Re))},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ri||this._source.off("preclick",Re))},getEvents:function(){var t=Qi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",i),Be(i),Ne(this._contentNode),Se(i,"contextmenu",Re),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ae("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Se(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&n>r?(e.height=r+"px",pe(t,o)):de(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();_e(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new I(this._containerLeft,-i-this._containerBottom);r._add(xe(this._container));var o=t.layerPointToContainerPoint(r),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),h=t.getSize(),c=0,u=0;o.x+n+l.x>h.x&&(c=o.x+n-h.x+l.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+i+l.y>h.y&&(u=o.y+i-h.y+l.y),o.y-u-s.y<0&&(u=o.y-s.y),(c||u)&&t.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(t){this._close(),ze(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,i){return t instanceof $i||(t=new $i(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ti.include({bindPopup:function(t,e){return t instanceof $i?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new $i(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Ti||(e=t,t=this),t instanceof Si)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ze(t),e instanceof Ri?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var tn=Qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qi.prototype.getEvents.call(this);return Et&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,a=i.offsetWidth,s=i.offsetHeight,l=R(this.options.offset),h=this._getAnchor();"top"===o?t=t.add(R(-a/2+l.x,-s+l.y+h.y,!0)):"bottom"===o?t=t.subtract(R(a/2-l.x,-l.y,!0)):"center"===o?t=t.subtract(R(a/2+l.x,s/2-h.y+l.y,!0)):"right"===o||"auto"===o&&r.x<n.x?(o="right",t=t.add(R(l.x+h.x,h.y-s/2+l.y,!0))):(o="left",t=t.subtract(R(a+h.x-l.x,s/2-h.y-l.y,!0))),de(i,"leaflet-tooltip-right"),de(i,"leaflet-tooltip-left"),de(i,"leaflet-tooltip-top"),de(i,"leaflet-tooltip-bottom"),pe(i,"leaflet-tooltip-"+o),_e(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ve(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,i){return t instanceof tn||(t=new tn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ti.include({bindTooltip:function(t,e){return t instanceof tn?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new tn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Et&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Ti||(e=t,t=this),t instanceof Si)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var en=Li.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=R(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Li.Default=Ci;var nn=Ti.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){ve(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);ve(r.el,o),o<1?e=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(A(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(se(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],r=this._map;return n||((n=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new I(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),a>n&&this._retainParent(r,o,a,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new I(r,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();gt?ye(t.el,r,n):_e(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*n);return new N(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new N(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var c=this._tiles[h].coords;c.z===this._tileZoom&&l.contains(new I(c.x,c.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var u=r.min.y;u<=r.max.y;u++)for(var p=r.min.x;p<=r.max.x;p++){var d=new I(p,u);if(d.z=this._tileZoom,this._isValidTile(d)){var f=this._tiles[this._tileCoordsToKey(d)];f?f.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(p=0;p<a.length;p++)this._addTile(a[p],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i);return[e.unproject(n,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new D(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new I(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=h,t.onmousemove=h,tt&&this.options.opacity<1&&ve(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&q(r(this._tileReady,this,t,null,o)),_e(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(ve(i.el,0),A(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(pe(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var rn=nn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&At&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Se(i,"load",r(this._tileOnLoad,this,e,i)),Se(i,"error",r(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:At?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return v(this._url,i(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=h,e.onerror=h,e.complete||(e.src=_,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",_),nn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==_))return nn.prototype._tileReady.call(this,t,e,i)}});function on(t,e){return new rn(t,e)}var an=rn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);var o=(e=d(this,e)).detectRetina&&At?2:1,a=this.getTileSize();n.width=a.x*o,n.height=a.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,rn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=B(i.project(e[0]),i.project(e[1])),r=n.min,o=n.max,a=(this._wmsVersion>=1.3&&this._crs===qi?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=rn.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});rn.WMS=an,on.wms=function(t,e){return new an(t,e)};var sn=Ti.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=xe(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-i).add(n).add(r).subtract(a);gt?ye(this._container,s,i):_e(this._container,s)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ln=sn.extend({getEvents:function(){var t=sn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",s(this._onMouseMove,32,this),this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,se(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){sn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=At?2:1;_e(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",At&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){sn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),r=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)o=a[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(Ge(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(pe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function hn(t){return Tt?new ln(t):null}var cn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),un={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=cn("shape");pe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=cn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e||(e=t._stroke=cn("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=g(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=cn("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){he(t._container)},_bringToBack:function(t){ce(t._container)}},pn=St?cn:J,dn=sn.extend({getEvents:function(){var t=sn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=pn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){sn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),_e(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pn("path");t.options.className&&pe(e,t.options.className),t.options.interactive&&pe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){he(t._path)},_bringToBack:function(t){ce(t._path)}});function fn(t){return Pt||St?new dn(t):null}St&&dn.include(un),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&hn(t)||fn(t)}});var mn=zi.extend({initialize:function(t,e){zi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});dn.create=pn,dn.pointsToPath=K,ki.geometryToLayer=Fi,ki.coordsToLatLng=Ui,ki.coordsToLatLngs=ji,ki.latLngToCoords=Vi,ki.latLngsToCoords=Gi,ki.getFeature=Hi,ki.asFeature=Wi,Ze.mergeOptions({boxZoom:!0});var vn=ii.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Jt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),i=e.getSize();_e(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Kt(),Ee(),Ce(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ze.addInitHook("addHandler","boxZoom",vn),Ze.mergeOptions({doubleClickZoom:!0});var gn=ii.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ze.addInitHook("addHandler","doubleClickZoom",gn),Ze.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yn=ii.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new li(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,a=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),c=s.multiplyBy(h/l),u=h/(i.inertiaDeceleration*a),p=c.multiplyBy(-u/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),q(function(){e.panBy(p,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",yn),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _n=ii.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},r=this.keyCodes;for(e=0,i=r.left.length;e<i;e++)n[r.left[e]]=[-1*t,0];for(e=0,i=r.right.length;e<i;e++)n[r.right[e]]=[t,0];for(e=0,i=r.down.length;e<i;e++)n[r.down[e]]=[0,t];for(e=0,i=r.up.length;e<i;e++)n[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},r=this.keyCodes;for(e=0,i=r.zoomIn.length;e<i;e++)n[r.zoomIn[e]]=t;for(e=0,i=r.zoomOut.length;e<i;e++)n[r.zoomOut[e]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=R(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}ze(t)}}});Ze.addInitHook("addHandler","keyboard",_n),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xn=ii.extend({addHooks:function(){Se(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ue(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),n),ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(r/i)*i:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ze.addInitHook("addHandler","scrollWheelZoom",xn),Ze.mergeOptions({tap:!0,tapTolerance:15});var bn=ii.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&pe(i,"leaflet-active"),this._holdTimeout=setTimeout(r(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Se(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&de(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});Et&&!wt&&Ze.addInitHook("addHandler","tap",bn),Ze.mergeOptions({touchZoom:Et&&!rt,bounceAtZoomLimits:!0});var wn=ii.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),De(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=q(s,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,A(this._animRequest),Ce(document,"touchmove",this._onTouchMove),Ce(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",wn),Ze.BoxZoom=vn,Ze.DoubleClickZoom=gn,Ze.Drag=yn,Ze.Keyboard=_n,Ze.ScrollWheelZoom=xn,Ze.Tap=bn,Ze.TouchZoom=wn,Object.freeze=e,t.version="1.4.0",t.Control=Je,t.control=Ke,t.Browser=Ct,t.Evented=C,t.Mixin=ri,t.Util=T,t.Class=P,t.Handler=ii,t.extend=i,t.bind=r,t.stamp=a,t.setOptions=d,t.DomEvent=Xe,t.DomUtil=Pe,t.PosAnimation=Ye,t.Draggable=li,t.LineUtil=gi,t.PolyUtil=xi,t.Point=I,t.point=R,t.Bounds=N,t.bounds=B,t.Transformation=H,t.transformation=W,t.Projection=Ei,t.LatLng=k,t.latLng=F,t.LatLngBounds=D,t.latLngBounds=z,t.CRS=j,t.GeoJSON=ki,t.geoJSON=Yi,t.geoJson=Zi,t.Layer=Ti,t.LayerGroup=Pi,t.layerGroup=function(t,e){return new Pi(t,e)},t.FeatureGroup=Si,t.featureGroup=function(t){return new Si(t)},t.ImageOverlay=Ji,t.imageOverlay=function(t,e,i){return new Ji(t,e,i)},t.VideoOverlay=Ki,t.videoOverlay=function(t,e,i){return new Ki(t,e,i)},t.DivOverlay=Qi,t.Popup=$i,t.popup=function(t,e){return new $i(t,e)},t.Tooltip=tn,t.tooltip=function(t,e){return new tn(t,e)},t.Icon=Li,t.icon=function(t){return new Li(t)},t.DivIcon=en,t.divIcon=function(t){return new en(t)},t.Marker=Oi,t.marker=function(t,e){return new Oi(t,e)},t.TileLayer=rn,t.tileLayer=on,t.GridLayer=nn,t.gridLayer=function(t){return new nn(t)},t.SVG=dn,t.svg=fn,t.Renderer=sn,t.Canvas=ln,t.canvas=hn,t.Path=Ri,t.CircleMarker=Ni,t.circleMarker=function(t,e){return new Ni(t,e)},t.Circle=Bi,t.circle=function(t,e,i){return new Bi(t,e,i)},t.Polyline=Di,t.polyline=function(t,e){return new Di(t,e)},t.Polygon=zi,t.polygon=function(t,e){return new zi(t,e)},t.Rectangle=mn,t.rectangle=function(t,e){return new mn(t,e)},t.Map=Ze,t.map=function(t,e){return new Ze(t,e)};var En=window.L;t.noConflict=function(){return window.L=En,this},window.L=t})(e)},function(t,e,i){i(136),i(137),i(148),i(153),i(178),t.exports=i(184)},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},r=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=s(t),e=l(e);var i=this.map[t];this.map[t]=i?i+","+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=l(e)},c.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),h(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),h(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),h(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},m.call(v.prototype),m.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];y.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=v,t.Response=y,t.fetch=function(t,i){return new Promise(function(n,r){var o=new v(t,i),a=new XMLHttpRequest;a.onload=function(){var t,e,i={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}}),e)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new y(r,i))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(i[Symbol.iterator]=function(){return i}),i}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function d(t){var e=new FileReader,i=p(e);return e.readAsArrayBuffer(t),i}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!r(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,i,n=u(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=p(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var i,n,r=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),o.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function y(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,i){i(138),t.exports=i(9).Object.assign},function(t,e,i){var n=i(13);n(n.S+n.F,"Object",{assign:i(142)})},function(t,e,i){t.exports=!i(23)&&!i(49)(function(){return 7!=Object.defineProperty(i(50)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(15);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){t.exports=i(52)("native-function-to-string",Function.toString)},function(t,e,i){"use strict";var n=i(54),r=i(146),o=i(147),a=i(60),s=i(56),l=Object.assign;t.exports=!l||i(49)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var i=a(t),l=arguments.length,h=1,c=r.f,u=o.f;l>h;)for(var p,d=s(arguments[h++]),f=c?n(d).concat(c(d)):n(d),m=f.length,v=0;m>v;)u.call(d,p=f[v++])&&(i[p]=d[p]);return i}:l},function(t,e,i){var n=i(35),r=i(55),o=i(144)(!1),a=i(59)("IE_PROTO");t.exports=function(t,e){var i,s=r(t),l=0,h=[];for(i in s)i!=a&&n(s,i)&&h.push(i);for(;e.length>l;)n(s,i=e[l++])&&(~o(h,i)||h.push(i));return h}},function(t,e,i){var n=i(55),r=i(57),o=i(145);t.exports=function(t){return function(e,i,a){var s,l=n(e),h=r(l.length),c=o(a,h);if(t&&i!=i){for(;h>c;)if((s=l[c++])!=s)return!0}else for(;h>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var n=i(58),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){i(149),t.exports=i(9).String.includes},function(t,e,i){"use strict";var n=i(13),r=i(150);n(n.P+n.F*i(152)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(151),r=i(37);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){var n=i(15),r=i(20),o=i(4)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(4)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){i(154),i(155),i(161),i(164),i(176),i(177),t.exports=i(9).Promise},function(t,e,i){"use strict";var n=i(61),r={};r[i(4)("toStringTag")]="z",r+""!="[object z]"&&i(24)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){"use strict";var n=i(156)(!0);i(81)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){var n=i(58),r=i(37);t.exports=function(t){return function(e,i){var o,a,s=String(r(e)),l=n(i),h=s.length;return l<0||l>=h?t?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===h||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(158),r=i(79),o=i(62),a={};i(19)(a,i(4)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(a,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var n=i(14),r=i(159),o=i(80),a=i(59)("IE_PROTO"),s=function(){},l="prototype",h=function(){var t,e=i(50)("iframe"),n=o.length;for(e.style.display="none",i(82).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h[l][o[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(s[l]=n(t),i=new s,s[l]=null,i[a]=t):i=h(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(34),r=i(14),o=i(54);t.exports=i(23)?Object.defineProperties:function(t,e){r(t);for(var i,a=o(e),s=a.length,l=0;s>l;)n.f(t,i=a[l++],e[i]);return t}},function(t,e,i){var n=i(35),r=i(60),o=i(59)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){for(var n=i(162),r=i(54),o=i(24),a=i(6),s=i(19),l=i(26),h=i(4),c=h("iterator"),u=h("toStringTag"),p=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(d),m=0;m<f.length;m++){var v,g=f[m],y=d[g],_=a[g],x=_&&_.prototype;if(x&&(x[c]||s(x,c,p),x[u]||s(x,u,g),l[g]=p,y))for(v in n)x[v]||o(x,v,n[v],!0)}},function(t,e,i){"use strict";var n=i(83),r=i(163),o=i(26),a=i(55);t.exports=i(81)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n,r,o,a,s=i(53),l=i(6),h=i(25),c=i(61),u=i(13),p=i(15),d=i(36),f=i(165),m=i(166),v=i(84),g=i(85).set,y=i(171)(),_=i(63),x=i(86),b=i(172),w=i(87),E="Promise",M=l.TypeError,q=l.process,A=q&&q.versions,T=A&&A.v8||"",P=l[E],S="process"==c(q),L=function(){},C=r=_.f,I=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[i(4)("species")]=function(t){t(L,L)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==T.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var i=t._c;y(function(){for(var n=t._v,r=1==t._s,o=0,a=function(e){var i,o,a,s=r?e.ok:e.fail,l=e.resolve,h=e.reject,c=e.domain;try{s?(r||(2==t._h&&D(t),t._h=1),!0===s?i=n:(c&&c.enter(),i=s(n),c&&(c.exit(),a=!0)),i===e.promise?h(M("Promise-chain cycle")):(o=O(i))?o.call(i,l,h):l(i)):h(n)}catch(t){c&&!a&&c.exit(),h(t)}};i.length>o;)a(i[o++]);t._c=[],t._n=!1,e&&!t._h&&N(t)})}},N=function(t){g.call(l,function(){var e,i,n,r=t._v,o=B(t);if(o&&(e=x(function(){S?q.emit("unhandledRejection",r,t):(i=l.onunhandledrejection)?i({promise:t,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=S||B(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){g.call(l,function(){var e;S?q.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},z=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},k=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw M("Promise can't be resolved itself");(e=O(t))?y(function(){var n={_w:i,_d:!1};try{e.call(t,h(k,n,1),h(z,n,1))}catch(t){z.call(n,t)}}):(i._v=t,i._s=1,R(i,!1))}catch(t){z.call({_w:i,_d:!1},t)}}};I||(P=function(t){f(this,P,E,"_h"),d(t),n.call(this);try{t(h(k,this,1),h(z,this,1))}catch(t){z.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(173)(P.prototype,{then:function(t,e){var i=C(v(this,P));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=S?q.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&R(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=h(k,t,1),this.reject=h(z,t,1)},_.f=C=function(t){return t===P||t===a?new o(t):r(t)}),u(u.G+u.W+u.F*!I,{Promise:P}),i(62)(P,E),i(174)(E),a=i(9)[E],u(u.S+u.F*!I,E,{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(s||!I),E,{resolve:function(t){return w(s&&this===a?P:this,t)}}),u(u.S+u.F*!(I&&i(175)(function(t){P.all(t).catch(L)})),E,{all:function(t){var e=this,i=C(e),n=i.resolve,r=i.reject,o=x(function(){var i=[],o=0,a=1;m(t,!1,function(t){var s=o++,l=!1;i.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,i[s]=t,--a||n(i))},r)}),--a||n(i)});return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=C(e),n=i.reject,r=x(function(){m(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(25),r=i(167),o=i(168),a=i(14),s=i(57),l=i(169),h={},c={};(e=t.exports=function(t,e,i,u,p){var d,f,m,v,g=p?function(){return t}:l(t),y=n(i,u,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>_;_++)if((v=e?y(a(f=t[_])[0],f[1]):y(t[_]))===h||v===c)return v}else for(m=g.call(t);!(f=m.next()).done;)if((v=r(m,y,f.value,e))===h||v===c)return v}).BREAK=h,e.RETURN=c},function(t,e,i){var n=i(14);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(26),r=i(4)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){var n=i(61),r=i(4)("iterator"),o=i(26);t.exports=i(9).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(6),r=i(85).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,l="process"==i(20)(a);t.exports=function(){var t,e,i,h=function(){var n,r;for(l&&(n=a.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){a.nextTick(h)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);i=function(){c.then(h)}}else i=function(){r.call(n,h)};else{var u=!0,p=document.createTextNode("");new o(h).observe(p,{characterData:!0}),i=function(){p.data=u=!u}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){var n=i(6).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){var n=i(24);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(6),r=i(34),o=i(23),a=i(4)("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(4)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:i=!0}},o[n]=function(){return a},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(13),r=i(9),o=i(6),a=i(84),s=i(87);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then(function(){return i})}:t,i?function(i){return s(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var n=i(13),r=i(63),o=i(86);n(n.S,"Promise",{try:function(t){var e=r.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){i(179),t.exports=i(9).Array.find},function(t,e,i){"use strict";var n=i(13),r=i(180)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(83)("find")},function(t,e,i){var n=i(25),r=i(56),o=i(60),a=i(57),s=i(181);t.exports=function(t,e){var i=1==t,l=2==t,h=3==t,c=4==t,u=6==t,p=5==t||u,d=e||s;return function(e,s,f){for(var m,v,g=o(e),y=r(g),_=n(s,f,3),x=a(y.length),b=0,w=i?d(e,x):l?d(e,0):void 0;x>b;b++)if((p||b in y)&&(v=_(m=y[b],b,g),t))if(i)w[b]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(c)return!1;return u?-1:h||c?c:w}}},function(t,e,i){var n=i(182);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(15),r=i(183),o=i(4)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(20);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(185),r=(i.n(n),i(27)),o=i.n(r),a=i(188),s=i(197),l=i(68),h=i(69),c=i(287),u=i(296),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={};d.MapView=function(){console.error("MapView must be set to 2D or 3D mode! Run Mappedin.test3D, force3D, or force2D first!")},d.Easing=o.a.Easing,d.Tween=o.a.Tween,d.Search=a.a,d.Analytics=s.a,d.TestResults=l.a,d.modes=u.c;var f=null;d.force2D=function(t){d.MapView=c.a,d.MapView2D=d.MapView,f=d.modes["2D"],t&&(void 0===t?"undefined":p(t))===("undefined"==typeof Function?"undefined":p(Function))&&t()},d.force3D=function(t){d.MapView=h.b,d.MapView3D=d.MapView,f=d.modes["3D"],t&&(void 0===t?"undefined":p(t))===("undefined"==typeof Function?"undefined":p(Function))&&t()};var m=function(t){t?d.force3D():d.force2D()};d.forceTest=function(t,e){return Object(u.a)(t,e,m)},d.test3D=function(t,e){return Object(u.d)(t,e,m)},d.getVenue=function(t,e){return Object(u.b)(t,f,e)},d.init=d.getVenue,d.initialize=function(t,e){return new Promise(function(i,n){var r=t.analytics||{};r.key=t.venue.clientId,r.secret=t.venue.clientSecret,r.venue=t.venue.venue;var o=new d.Analytics(r);function a(r,a){if(r)n(r);else{var s={};try{t.firstMapSelector&&(t.mapview.firstMap=t.firstMapSelector(a))}catch(t){console.error("Failure in firstMapSelector! Loading default map instead."),console.error(t),n(t)}try{s.mapview=new d.MapView(e,a,t.mapview)}catch(t){console.error(t)}s.venue=a,t.search&&(s.search=new d.Search({key:t.search.key,secret:t.search.secret,venue:a.venue.slug,baseUrl:t.search.baseUrl})),s.analytics=o,i(s)}}function s(){d.getVenue(t.venue,a)}function l(t,e,i){console.info("Mappedin 3D Test "+(e?"passed":"failed: "+t)+" ("+i+")"),o.mapViewLoaded(e?"3d":"2d",!1,i,t),e?d.force3D(s):d.force2D(s)}if(void 0==t.mapview.mode||t.mode==d.modes.TEST)try{var h=window.localStorage.getItem("mappedin3DTestSuccess");null!=h&&(t.mapview.mode="true"==h?d.modes["3D"]:d.modes["2D"])}catch(e){t.mapview.mode=d.modes.TEST}switch(t.mapview.mode){case d.modes["3D"]:o.mapViewLoaded("3d",!0,null,null),d.force3D(s);break;case d.modes["2D"]:o.mapViewLoaded("2d",!0,null,null),d.force2D(s);break;case d.modes.FORCE_TEST:d.forceTest(e,l);break;case d.modes.TEST:default:d.test3D(e,l)}})},e.default=d},function(t,e,i){var n=i(186);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0};i(65)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(64)(!1)).push([t.i,".mMapviewHoverLabel {\n  background: rgba(255,255,255,0.9);\n  color: #333;\n  padding: 10px;\n  font-size: 14px;\n  font-weight:bold;\n  transition: opacity .3s;\n  font-family: sans-serif;\n}\n\n.map-connection-layer-container {\n  pointer-events: none;\n  font-family: sans-serif;\n  user-select: none;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1px;\n  height: 1px;\n}\n.map-connection-labels {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  color: white;\n}\n.map-connection-layer {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(150, 150, 150, 0.8);\n  flex-shrink: 0;\n  transform: rotateX(65.89014644004466deg) rotateZ(-45.26366581533504deg);\n }\n",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?i+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,i){"use strict";var n=i(5);e.a=function(t){t=t||{},this.ASSET_TYPES={LOCATION:"location",EVENT:"event"};var e=this;e.useSmartSearch=t.smart;var i=t.endpoint||t.baseUrl||(e.useSmartSearch?"https://api-gateway.mappedin.com/search/":"https://search.mappedin.com/"),r=t.venue,o=t.key,a=t.secret,s=e.useSmartSearch?"/search":"/suggest",l={Authorization:"Basic "+btoa(o+":"+a),"mi-context":"web","mi-session":Object(n.o)(),"mi-device":Object(n.h)()},h=function(t){return Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},c=function(t){this.assetType=t.assetType,this.score=t.score,this.name=t.name,this.id=t.id,this.description=t.description,e.useSmartSearch&&(this.strength=t.strength,t.ids?(this.id=t.ids[0],this.assetType="location"):(this.id=t.id,this.assetType="category"))},u=function(t){c.call(this,t),this.categories=t.categories,this.logo=t.logo},p=function(t,i,n){if(this.query=t,this.total=i.total,this.page=n.pn||1,e.useSmartSearch){var r=i.categories,o=i.locations,a={locations:[],categories:[]};a.locations=o.map(function(t){return new u(t)}),a.categories=r.map(function(t){return new function(t){c.call(this,t)}(t)}),this.hits=a}else this.hits=i.hits.map(function(t){switch(t.assetType){case e.ASSET_TYPES.LOCATION:return new u(t);case e.ASSET_TYPES.EVENT:return new function(t){c.call(this,t),this.location=t.location,this.startData=t.startDate,this.endData=t.endDate,this.showDate=t.showDate}(t)}});this.getNextPage=function(){return n.pn+=1,e.search(t,n)},this.hasNextPage=function(){return n.pn*n.ps<i.total}},d=function(t,e){this.query=t,this.total=e.total,this.hits=e.hits.map(function(t){return t.text})};this.search=function(t,n){(n=n||{}).q=t,e.useSmartSearch?(n.ln=void 0==n.ln?20:n.ln,n.cn=void 0==n.cn?5:n.cn,n.lang=void 0==n.lang?"en":n.lang):(n.ps=void 0==n.ps?10:n.ps,n.pn=void 0==n.pn?1:n.pn);var o=i+r+"/search?"+h(n),a={method:"GET",mode:"cors",headers:l};return new Promise(function(e,i){0!=t.length?fetch(o,a).then(function(r){200!=r.status?i({message:r.status+" "+r.statusText,response:r}):r.json().then(function(i){e(new p(t,i,n))},i)},i):i({message:"Empty search",response:{}})})},this.suggest=function(n){if(e.useSmartSearch)return console.warn("Smart Search doesn't support the Suggest API; please use the Search API."),new d(n,{total:0,hits:[]});(t={}).q=n.toLowerCase();var o=i+r+s+"?"+h(t),a={method:"GET",mode:"cors",headers:l};return new Promise(function(t,e){0!=n.length?fetch(o,a).then(function(i){200!=i.status?e({message:i.status+" "+i.statusText,response:i}):i.json().then(function(e){t(new d(n,e))},e)},e):e({message:"Empty query",response:{}})})}}},function(t,e,i){var n=i(190),r=i(191);t.exports=function(t,e,i){var o=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||r(a)}},function(t,e,i){(function(e){var i,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);i=function(){return n.getRandomValues(r),r}}if(!i){var o=new Array(16);i=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=i}).call(e,i(10))},function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(38);function r(t,e){if(!(this instanceof r))return new r(t,e);this.lat=Number(t),this.lon=Number(e)}r.prototype.distanceTo=function(t,e){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var i=e=void 0===e?6371e3:Number(e),n=this.lat.toRadians(),o=this.lon.toRadians(),a=t.lat.toRadians(),s=a-n,l=t.lon.toRadians()-o,h=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2);return i*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},r.prototype.bearingTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),i=t.lat.toRadians(),n=(t.lon-this.lon).toRadians(),o=Math.sin(n)*Math.cos(i),a=Math.cos(e)*Math.sin(i)-Math.sin(e)*Math.cos(i)*Math.cos(n);return(Math.atan2(o,a).toDegrees()+360)%360},r.prototype.finalBearingTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");return(t.bearingTo(this)+180)%360},r.prototype.midpointTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),i=this.lon.toRadians(),n=t.lat.toRadians(),o=(t.lon-this.lon).toRadians(),a=Math.cos(n)*Math.cos(o),s=Math.cos(n)*Math.sin(o),l=Math.sqrt((Math.cos(e)+a)*(Math.cos(e)+a)+s*s),h=Math.sin(e)+Math.sin(n),c=Math.atan2(h,l),u=i+Math.atan2(s,Math.cos(e)+a);return new r(c.toDegrees(),(u.toDegrees()+540)%360-180)},r.prototype.intermediatePointTo=function(t,e){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var i=this.lat.toRadians(),n=this.lon.toRadians(),o=t.lat.toRadians(),a=t.lon.toRadians(),s=Math.sin(i),l=Math.cos(i),h=Math.sin(n),c=Math.cos(n),u=Math.sin(o),p=Math.cos(o),d=Math.sin(a),f=Math.cos(a),m=o-i,v=a-n,g=Math.sin(m/2)*Math.sin(m/2)+Math.cos(i)*Math.cos(o)*Math.sin(v/2)*Math.sin(v/2),y=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),_=Math.sin((1-e)*y)/Math.sin(y),x=Math.sin(e*y)/Math.sin(y),b=_*l*c+x*p*f,w=_*l*h+x*p*d,E=_*s+x*u,M=Math.atan2(E,Math.sqrt(b*b+w*w)),q=Math.atan2(w,b);return new r(M.toDegrees(),(q.toDegrees()+540)%360-180)},r.prototype.destinationPoint=function(t,e,i){i=void 0===i?6371e3:i;var n=Number(t)/Number(i),o=Number(e).toRadians(),a=this.lat.toRadians(),s=this.lon.toRadians(),l=Math.sin(a),h=Math.cos(a),c=Math.sin(n),u=Math.cos(n),p=Math.sin(o),d=l*u+h*c*Math.cos(o),f=Math.asin(d),m=p*c*h,v=u-l*d,g=s+Math.atan2(m,v);return new r(f.toDegrees(),(g.toDegrees()+540)%360-180)},r.intersection=function(t,e,i,n){if(!(t instanceof r))throw new TypeError("p1 is not LatLon object");if(!(i instanceof r))throw new TypeError("p2 is not LatLon object");var o=t.lat.toRadians(),a=t.lon.toRadians(),s=i.lat.toRadians(),l=i.lon.toRadians(),h=Number(e).toRadians(),c=Number(n).toRadians(),u=s-o,p=l-a,d=2*Math.asin(Math.sqrt(Math.sin(u/2)*Math.sin(u/2)+Math.cos(o)*Math.cos(s)*Math.sin(p/2)*Math.sin(p/2)));if(0==d)return null;var f=Math.acos((Math.sin(s)-Math.sin(o)*Math.cos(d))/(Math.sin(d)*Math.cos(o)));isNaN(f)&&(f=0);var m=Math.acos((Math.sin(o)-Math.sin(s)*Math.cos(d))/(Math.sin(d)*Math.cos(s))),v=h-(Math.sin(l-a)>0?f:2*Math.PI-f),g=(Math.sin(l-a)>0?2*Math.PI-m:m)-c;if(0==Math.sin(v)&&0==Math.sin(g))return null;if(Math.sin(v)*Math.sin(g)<0)return null;var y=-Math.cos(v)*Math.cos(g)+Math.sin(v)*Math.sin(g)*Math.cos(d),_=Math.atan2(Math.sin(d)*Math.sin(v)*Math.sin(g),Math.cos(g)+Math.cos(v)*y),x=Math.asin(Math.sin(o)*Math.cos(_)+Math.cos(o)*Math.sin(_)*Math.cos(h)),b=a+Math.atan2(Math.sin(h)*Math.sin(_)*Math.cos(o),Math.cos(_)-Math.sin(o)*Math.sin(x));return new r(x.toDegrees(),(b.toDegrees()+540)%360-180)},r.prototype.crossTrackDistanceTo=function(t,e,i){if(!(t instanceof r))throw new TypeError("â€˜pathStartâ€™ is not LatLon object");if(!(e instanceof r))throw new TypeError("â€˜pathEndâ€™ is not LatLon object");var n=void 0===i?6371e3:Number(i),o=t.distanceTo(this,n)/n,a=t.bearingTo(this).toRadians(),s=t.bearingTo(e).toRadians();return Math.asin(Math.sin(o)*Math.sin(a-s))*n},r.prototype.alongTrackDistanceTo=function(t,e,i){if(!(t instanceof r))throw new TypeError("â€˜pathStartâ€™ is not LatLon object");if(!(e instanceof r))throw new TypeError("â€˜pathEndâ€™ is not LatLon object");var n=void 0===i?6371e3:i,o=t.distanceTo(this,n)/n,a=t.bearingTo(this).toRadians(),s=t.bearingTo(e).toRadians(),l=Math.asin(Math.sin(o)*Math.sin(a-s));return Math.acos(Math.cos(o)/Math.abs(Math.cos(l)))*Math.sign(Math.cos(s-a))*n},r.prototype.maxLatitude=function(t){var e=Number(t).toRadians(),i=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(e)*Math.cos(i))).toDegrees()},r.crossingParallels=function(t,e,i){var n=Number(i).toRadians(),r=t.lat.toRadians(),o=t.lon.toRadians(),a=e.lat.toRadians(),s=e.lon.toRadians()-o,l=Math.sin(r)*Math.cos(a)*Math.cos(n)*Math.sin(s),h=Math.sin(r)*Math.cos(a)*Math.cos(n)*Math.cos(s)-Math.cos(r)*Math.sin(a)*Math.cos(n),c=Math.cos(r)*Math.cos(a)*Math.sin(n)*Math.sin(s);if(c*c>l*l+h*h)return null;var u=Math.atan2(-h,l),p=Math.acos(c/Math.sqrt(l*l+h*h)),d=o+u+p;return{lon1:((o+u-p).toDegrees()+540)%360-180,lon2:(d.toDegrees()+540)%360-180}},r.prototype.rhumbDistanceTo=function(t,e){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var i=e=void 0===e?6371e3:Number(e),n=this.lat.toRadians(),o=t.lat.toRadians(),a=o-n,s=Math.abs(t.lon-this.lon).toRadians();s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),h=Math.abs(l)>1e-11?a/l:Math.cos(n);return Math.sqrt(a*a+h*h*s*s)*i},r.prototype.rhumbBearingTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),i=t.lat.toRadians(),n=(t.lon-this.lon).toRadians();n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(e/2+Math.PI/4));return(Math.atan2(n,o).toDegrees()+360)%360},r.prototype.rhumbDestinationPoint=function(t,e,i){i=void 0===i?6371e3:i;var n=this.lat.toRadians(),o=this.lon.toRadians(),a=Number(e).toRadians(),s=t/i,l=s*Math.cos(a),h=n+l;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),u=Math.abs(c)>1e-11?l/c:Math.cos(n),p=o+s*Math.sin(a)/u;return new r(h.toDegrees(),(p.toDegrees()+540)%360-180)},r.prototype.rhumbMidpointTo=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");var e=this.lat.toRadians(),i=this.lon.toRadians(),n=t.lat.toRadians(),o=t.lon.toRadians();Math.abs(o-i)>Math.PI&&(i+=2*Math.PI);var a=(e+n)/2,s=Math.tan(Math.PI/4+e/2),l=Math.tan(Math.PI/4+n/2),h=Math.tan(Math.PI/4+a/2),c=((o-i)*Math.log(h)+i*Math.log(l)-o*Math.log(s))/Math.log(l/s);return isFinite(c)||(c=(i+o)/2),r(a.toDegrees(),(c.toDegrees()+540)%360-180)},r.areaOf=function(t,e){var i=void 0===e?6371e3:Number(e),n=t[0].equals(t[t.length-1]);n||t.push(t[0]);for(var r=t.length-1,o=0,a=0;a<r;a++){var s=t[a].lat.toRadians(),l=t[a+1].lat.toRadians(),h=(t[a+1].lon-t[a].lon).toRadians();o+=2*Math.atan2(Math.tan(h/2)*(Math.tan(s/2)+Math.tan(l/2)),1+Math.tan(s/2)*Math.tan(l/2))}(function(t){for(var e=0,i=t[0].bearingTo(t[1]),n=0;n<t.length-1;n++){var r=t[n].bearingTo(t[n+1]),o=t[n].finalBearingTo(t[n+1]);e+=(r-i+540)%360-180,e+=(o-r+540)%360-180,i=o}var r=t[0].bearingTo(t[1]);return e+=(r-i+540)%360-180,Math.abs(e)<90})(t)&&(o=Math.abs(o)-2*Math.PI);var c=Math.abs(o*i*i);return n||t.pop(),c},r.prototype.equals=function(t){if(!(t instanceof r))throw new TypeError("point is not LatLon object");return this.lat==t.lat&&this.lon==t.lon},r.prototype.toString=function(t,e){return n.toLat(this.lat,t,e)+", "+n.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),void 0!==t&&t.exports&&(t.exports=r)},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(28);n.prototype.distanceTo=function(t){if(!(t instanceof n))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).distance.toFixed(3))}catch(t){return NaN}},n.prototype.initialBearingTo=function(t){if(!(t instanceof n))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).initialBearing.toFixed(9))}catch(t){return NaN}},n.prototype.finalBearingTo=function(t){if(!(t instanceof n))throw new TypeError("point is not LatLon object");try{return Number(this.inverse(t).finalBearing.toFixed(9))}catch(t){return NaN}},n.prototype.destinationPoint=function(t,e){return this.direct(Number(t),Number(e)).point},n.prototype.finalBearingOn=function(t,e){return Number(this.direct(Number(t),Number(e)).finalBearing.toFixed(9))},n.prototype.direct=function(t,e){var i,r,o,a,s=this.lat.toRadians(),l=this.lon.toRadians(),h=e.toRadians(),c=t,u=this.datum.ellipsoid.a,p=this.datum.ellipsoid.b,d=this.datum.ellipsoid.f,f=Math.sin(h),m=Math.cos(h),v=(1-d)*Math.tan(s),g=1/Math.sqrt(1+v*v),y=v*g,_=Math.atan2(v,m),x=g*f,b=1-x*x,w=b*(u*u-p*p)/(p*p),E=1+w/16384*(4096+w*(w*(320-175*w)-768)),M=w/1024*(256+w*(w*(74-47*w)-128)),q=c/(p*E),A=0;do{i=Math.cos(2*_+q),a=q,q=c/(p*E)+M*(r=Math.sin(q))*(i+M/4*((o=Math.cos(q))*(2*i*i-1)-M/6*i*(4*r*r-3)*(4*i*i-3)))}while(Math.abs(q-a)>1e-12&&++A<100);if(A>=100)throw new Error("Formula failed to converge");var T=y*r-g*o*m,P=Math.atan2(y*o+g*r*m,(1-d)*Math.sqrt(x*x+T*T)),S=d/16*b*(4+d*(4-3*b)),L=(l+(Math.atan2(r*f,g*o-y*r*m)-(1-S)*d*x*(q+S*r*(i+S*o*(2*i*i-1))))+3*Math.PI)%(2*Math.PI)-Math.PI,C=Math.atan2(x,-T);return C=(C+2*Math.PI)%(2*Math.PI),{point:new n(P.toDegrees(),L.toDegrees(),this.datum),finalBearing:C.toDegrees(),iterations:A}},n.prototype.inverse=function(t){var e=t;-180==this.lon&&(this.lon=180);var i,n,r,o,a,s,l=this.lat.toRadians(),h=this.lon.toRadians(),c=e.lat.toRadians(),u=e.lon.toRadians(),p=this.datum.ellipsoid.a,d=this.datum.ellipsoid.b,f=this.datum.ellipsoid.f,m=u-h,v=(1-f)*Math.tan(l),g=1/Math.sqrt(1+v*v),y=v*g,_=(1-f)*Math.tan(c),x=1/Math.sqrt(1+_*_),b=_*x,w=0,E=0,M=0,q=0,A=0,T=m,P=0,S=Math.abs(m)>Math.PI;do{if(0==(r=x*(i=Math.sin(T))*(x*i)+(g*b-y*x*(n=Math.cos(T)))*(g*b-y*x*n)))break;if(w=Math.sqrt(r),E=y*b+g*x*n,M=Math.atan2(w,E),s=T,T=m+(1-(a=f/16*(q=1-(o=g*x*i/w)*o)*(4+f*(4-3*q))))*f*o*(M+a*w*((A=0!=q?E-2*y*b/q:0)+a*E*(2*A*A-1))),(S?Math.abs(T)-Math.PI:Math.abs(T))>Math.PI)throw new Error("Î» > Ï€")}while(Math.abs(T-s)>1e-12&&++P<1e3);if(P>=1e3)throw new Error("Formula failed to converge");var L=q*(p*p-d*d)/(d*d),C=L/1024*(256+L*(L*(74-47*L)-128)),I=d*(1+L/16384*(4096+L*(L*(320-175*L)-768)))*(M-C*w*(A+C/4*(E*(2*A*A-1)-C/6*A*(4*w*w-3)*(4*A*A-3)))),O=Math.atan2(x*i,g*b-y*x*n),R=Math.atan2(g*i,-y*x+g*b*n);return O=(O+2*Math.PI)%(2*Math.PI),R=(R+2*Math.PI)%(2*Math.PI),{distance:I,initialBearing:0==I?NaN:O.toDegrees(),finalBearing:0==I?NaN:R.toDegrees(),iterations:P}},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),void 0!==t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(67);if(void 0!==t&&t.exports)var r=i(38);function o(t,e){if(!(this instanceof o))return new o(t,e);this.lat=Number(t),this.lon=Number(e)}o.prototype.toVector=function(){var t=this.lat.toRadians(),e=this.lon.toRadians(),i=Math.cos(t)*Math.cos(e),r=Math.cos(t)*Math.sin(e),o=Math.sin(t);return new n(i,r,o)},n.prototype.toLatLonS=function(){var t=Math.atan2(this.z,Math.sqrt(this.x*this.x+this.y*this.y)),e=Math.atan2(this.y,this.x);return new o(t.toDegrees(),e.toDegrees())},o.prototype.greatCircle=function(t){var e=this.lat.toRadians(),i=this.lon.toRadians(),r=Number(t).toRadians(),o=Math.sin(i)*Math.cos(r)-Math.sin(e)*Math.cos(i)*Math.sin(r),a=-Math.cos(i)*Math.cos(r)-Math.sin(e)*Math.sin(i)*Math.sin(r),s=Math.cos(e)*Math.sin(r);return new n(o,a,s)},n.prototype.greatCircle=function(t){var e=Number(t).toRadians(),i=new n(0,0,1).cross(this),r=this.cross(i),o=i.times(Math.cos(e)/i.length());return r.times(Math.sin(e)/r.length()).minus(o)},o.prototype.distanceTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");e=void 0===e?6371e3:Number(e);var i=this.toVector(),n=t.toVector();return i.angleTo(n)*e},o.prototype.bearingTo=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var e=this.toVector(),i=t.toVector(),r=new n(0,0,1),a=e.cross(i),s=e.cross(r);return(a.angleTo(s,e).toDegrees()+360)%360},o.prototype.midpointTo=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var e=this.toVector(),i=t.toVector();return e.plus(i).unit().toLatLonS()},o.prototype.intermediatePointTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var i=this.toVector(),r=t.toVector(),a=i.cross(r).length(),s=i.dot(r),l=Math.atan2(a,s)*Number(e),h=Math.sin(l),c=Math.cos(l),u=i.cross(r).unit().cross(i),p=i.times(c).plus(u.times(h));return new n(p.x,p.y,p.z).toLatLonS()},o.prototype.intermediatePointOnChordTo=function(t,e){if(!(t instanceof o))throw new TypeError("point is not LatLon object");var i=this.toVector(),r=t.toVector(),a=i.plus(r.minus(i).times(Number(e)));return new n(a.x,a.y,a.z).toLatLonS()},o.prototype.destinationPoint=function(t,e,i){i=void 0===i?6371e3:Number(i);var r=this.toVector(),o=Number(t)/i,a=Number(e).toRadians(),s=new n(0,0,1).cross(r).unit(),l=r.cross(s),h=s.times(Math.sin(a)),c=l.times(Math.cos(a)).plus(h),u=r.times(Math.cos(o)),p=c.times(Math.sin(o));return u.plus(p).toLatLonS()},o.intersection=function(t,e,i,n){if(!(t instanceof o))throw new TypeError("path1start is not LatLon object");if(!(i instanceof o))throw new TypeError("path2start is not LatLon object");if(!(e instanceof o)&&isNaN(e))throw new TypeError("path1brngEnd is not LatLon object or bearing");if(!(n instanceof o)&&isNaN(n))throw new TypeError("path2brngEnd is not LatLon object or bearing");var r,a,s,l,h=t.toVector(),c=i.toVector();e instanceof o?(r=h.cross(e.toVector()),s="endpoint"):(r=t.greatCircle(Number(e)),s="bearing"),n instanceof o?(a=c.cross(n.toVector()),l="endpoint"):(a=i.greatCircle(Number(n)),l="bearing");var u=r.cross(a),p=a.cross(r),d=null;switch(s+"+"+l){case"bearing+bearing":switch(Math.sign(r.cross(h).dot(u))+Math.sign(a.cross(c).dot(u))){case 2:d=u;break;case-2:d=p;break;case 0:d=h.plus(c).dot(u)>0?p:u}break;case"bearing+endpoint":d=Math.sign(r.cross(h).dot(u))>0?u:p;break;case"endpoint+bearing":d=Math.sign(a.cross(c).dot(u))>0?u:p;break;case"endpoint+endpoint":d=h.plus(c).plus(e.toVector()).plus(n.toVector()).dot(u)>0?u:p}return d.toLatLonS()},o.prototype.crossTrackDistanceTo=function(t,e,i){if(!(t instanceof o))throw new TypeError("pathStart is not LatLon object");var n=void 0===i?6371e3:Number(i),r=this.toVector();return((e instanceof o?t.toVector().cross(e.toVector()):t.greatCircle(Number(e))).angleTo(r)-Math.PI/2)*n},o.prototype.alongTrackDistanceTo=function(t,e,i){if(!(t instanceof o))throw new TypeError("pathStart is not LatLon object");var n=void 0===i?6371e3:Number(i),r=this.toVector(),a=e instanceof o?t.toVector().cross(e.toVector()):t.greatCircle(Number(e)),s=a.cross(r).cross(a);return t.toVector().angleTo(s,a)*n},o.prototype.nearestPointOnSegment=function(t,e){var i=null;if(this.isBetween(t,e)){var n=this.toVector(),r=t.toVector(),o=e.toVector(),a=r.cross(o),s=n.cross(a);i=a.cross(s).toLatLonS()}else{i=this.distanceTo(t)<this.distanceTo(e)?t:e}return i},o.prototype.isBetween=function(t,e){var i=this.toVector(),n=t.toVector(),r=e.toVector(),o=i.minus(n),a=r.minus(n),s=i.minus(r),l=n.minus(r),h=o.dot(a),c=s.dot(l),u=h>=0&&c>=0,p=i.dot(n)>=0&&i.dot(r)>=0;return u&&p},o.prototype.enclosedBy=function(t){var e=t[0].equals(t[t.length-1]);e||t.push(t[0]);for(var i=t.length-1,n=this.toVector(),r=[],o=0;o<i;o++)r[o]=n.minus(t[o].toVector());r.push(r[0]);var a=0;for(o=0;o<i;o++)a+=r[o].angleTo(r[o+1],n);var s=Math.abs(a)>Math.PI;return e||t.pop(),s},o.areaOf=function(t,e){var i=void 0==e?6371e3:Number(e),n=t[0].equals(t[t.length-1]);n||t.push(t[0]);for(var r=t.length-1,o=[],a=0;a<r;a++){var s=t[a].toVector(),l=t[a+1].toVector();o[a]=s.cross(l)}o.push(o[0]);var h=t[0].toVector(),c=0;for(a=0;a<r;a++)c+=o[a].angleTo(o[a+1],h);var u=(r*Math.PI-Math.abs(c)-(r-2)*Math.PI)*i*i;return n||t.pop(),u},o.meanOf=function(t){for(var e=new n(0,0,0),i=0;i<t.length;i++)e=e.plus(t[i].toVector());return e.unit().toLatLonS()},o.prototype.equals=function(t){if(!(t instanceof o))throw new TypeError("point is not LatLon object");return this.lat==t.lat&&this.lon==t.lon},o.prototype.toString=function(t,e){return r.toLat(this.lat,t,e)+", "+r.toLon(this.lon,t,e)},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),void 0===Math.sign&&(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}),void 0!==t&&t.exports&&(t.exports=o,t.exports.Vector3d=n)},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(88);if(void 0!==t&&t.exports)var r=i(28);function o(t,e,i,n,a,s,l){if(!(this instanceof o))return new o(t,e,i,n,a,s,l);if(void 0===l&&(l=r.datum.WGS84),!(1<=t&&t<=60))throw new Error("Invalid MGRS grid reference (zone â€˜"+t+"â€™)");if(1!=e.length)throw new Error("Invalid MGRS grid reference (band â€˜"+e+"â€™)");if(-1==o.latBands.indexOf(e))throw new Error("Invalid MGRS grid reference (band â€˜"+e+"â€™)");if(1!=i.length)throw new Error("Invalid MGRS grid reference (e100k â€˜"+i+"â€™)");if(1!=n.length)throw new Error("Invalid MGRS grid reference (n100k â€˜"+n+"â€™)");this.zone=Number(t),this.band=e,this.e100k=i,this.n100k=n,this.easting=Number(a),this.northing=Number(s),this.datum=l}o.latBands="CDEFGHJKLMNPQRSTUVWXX",o.e100kLetters=["ABCDEFGH","JKLMNPQR","STUVWXYZ"],o.n100kLetters=["ABCDEFGHJKLMNPQRSTUV","FGHJKLMNPQRSTUVABCDE"],n.prototype.toMgrs=function(){if(isNaN(this.zone+this.easting+this.northing))throw new Error("Invalid UTM coordinate â€˜"+this.toString()+"â€™");var t=this.zone,e=this.toLatLonE(),i=o.latBands.charAt(Math.floor(e.lat/8+10)),n=Math.floor(this.easting/1e5),r=o.e100kLetters[(t-1)%3].charAt(n-1),a=Math.floor(this.northing/1e5)%20,s=o.n100kLetters[(t-1)%2].charAt(a),l=this.easting%1e5,h=this.northing%1e5;return new o(t,i,r,s,l=Number(l.toFixed(6)),h=Number(h.toFixed(6)))},o.prototype.toUtm=function(){for(var t=this.zone,e=this.band,i=this.e100k,a=this.n100k,s=this.easting,l=this.northing,h=e>="N"?"N":"S",c=1e5*(o.e100kLetters[(t-1)%3].indexOf(i)+1),u=1e5*o.n100kLetters[(t-1)%2].indexOf(a),p=8*(o.latBands.indexOf(e)-10),d=1e5*Math.floor(new r(p,0).toUtm().northing/1e5),f=0;f+u+l<d;)f+=2e6;return new n(t,h,c+s,f+u+l,this.datum)},o.parse=function(t){if(!(t=t.trim()).match(/\s/)){var e=t.slice(5);e=e.slice(0,e.length/2)+" "+e.slice(-e.length/2),t=t.slice(0,3)+" "+t.slice(3,5)+" "+e}if(null==(t=t.match(/\S+/g))||4!=t.length)throw new Error("Invalid MGRS grid reference â€˜"+t+"â€™");var i=t[0],n=i.slice(0,2),r=i.slice(2,3),a=t[1],s=a.slice(0,1),l=a.slice(1,2),h=t[2],c=t[3];return new o(n,r,s,l,h=h.length>=5?h:(h+"00000").slice(0,5),c=c.length>=5?c:(c+"00000").slice(0,5))},o.prototype.toString=function(t){if(t=void 0===t?10:Number(t),-1==[2,4,6,8,10].indexOf(t))throw new Error("Invalid precision â€˜"+t+"â€™");var e=("00"+this.zone).slice(-2),i=this.band,n=this.e100k,r=this.n100k,o=Math.floor(this.easting/Math.pow(10,5-t/2)),a=Math.floor(this.northing/Math.pow(10,5-t/2));return e+i+" "+n+r+" "+("00000"+o).slice(-t/2)+" "+("00000"+a).slice(-t/2)},void 0!==t&&t.exports&&(t.exports=o)},function(t,e,i){"use strict";if(void 0!==t&&t.exports)var n=i(28);function r(t,e){if(!(this instanceof r))return new r(t,e);this.easting=Number(t),this.northing=Number(e)}r.latLonToOsGrid=function(t){if(!(t instanceof n))throw new TypeError("point is not LatLon object");t.datum!=n.datum.OSGB36&&(t=t.convertDatum(n.datum.OSGB36));var e=t.lat.toRadians(),i=t.lon.toRadians(),o=6377563.396,a=6356256.909,s=.9996012717,l=49..toRadians(),h=(-2).toRadians(),c=.006670540074149134,u=(o-a)/(o+a),p=u*u,d=u*u*u,f=Math.cos(e),m=Math.sin(e),v=o*s/Math.sqrt(1-c*m*m),g=o*s*(1-c)/Math.pow(1-c*m*m,1.5),y=v/g-1,_=a*s*(1.0016767257673973*(e-l)-.0050280722824740985*Math.sin(e-l)*Math.cos(e+l)+(15/8*p+15/8*d)*Math.sin(2*(e-l))*Math.cos(2*(e+l))-35/24*d*Math.sin(3*(e-l))*Math.cos(3*(e+l))),x=f*f*f,b=x*f*f,w=Math.tan(e)*Math.tan(e),E=w*w,M=i-h,q=M*M,A=q*M,T=A*M,P=T*M,S=_+-1e5+v/2*m*f*q+v/24*m*x*(5-w+9*y)*T+v/720*m*b*(61-58*w+E)*(P*M),L=4e5+v*f*M+v/6*x*(v/g-w)*A+v/120*b*(5-18*w+E+14*y-58*w*y)*P;return S=Number(S.toFixed(3)),new r(L=Number(L.toFixed(3)),S)},r.osGridToLatLon=function(t,e){if(!(t instanceof r))throw new TypeError("gridref is not OsGridRef object");void 0===e&&(e=n.datum.WGS84);var i=t.easting,o=t.northing,a=6377563.396,s=6356256.909,l=.9996012717,h=49..toRadians(),c=(-2).toRadians(),u=.006670540074149134,p=(a-s)/(a+s),d=p*p,f=p*p*p,m=h,v=0;do{v=s*l*(1.0016767257673973*((m=(o- -1e5-v)/(a*l)+m)-h)-.0050280722824740985*Math.sin(m-h)*Math.cos(m+h)+(15/8*d+15/8*f)*Math.sin(2*(m-h))*Math.cos(2*(m+h))-35/24*f*Math.sin(3*(m-h))*Math.cos(3*(m+h)))}while(o- -1e5-v>=1e-5);var g=Math.cos(m),y=Math.sin(m),_=a*l/Math.sqrt(1-u*y*y),x=a*l*(1-u)/Math.pow(1-u*y*y,1.5),b=_/x-1,w=Math.tan(m),E=w*w,M=E*E,q=1/g,A=_*_*_,T=A*_*_,P=i-4e5,S=P*P,L=S*P,C=S*S,I=L*S,O=c+q/_*P-q/(6*A)*(_/x+2*E)*L+q/(120*T)*(5+28*E+24*M)*I-q/(5040*(T*_*_))*(61+662*E+1320*M+720*(M*E))*(I*S),R=new n((m=m-w/(2*x*_)*S+w/(24*x*A)*(5+3*E+b-9*E*b)*C-w/(720*x*T)*(61+90*E+45*M)*(C*S)).toDegrees(),O.toDegrees(),n.datum.OSGB36);return e!=n.datum.OSGB36&&(R=R.convertDatum(e)),R},r.parse=function(t){var e=(t=String(t).trim()).match(/^(\d+),\s*(\d+)$/);if(e)return new r(e[1],e[2]);if(!(e=t.match(/^[A-Z]{2}\s*[0-9]+\s*[0-9]+$/i)))throw new Error("Invalid grid reference");var i=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),n=t.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);i>7&&i--,n>7&&n--;var o=(i-2)%5*5+n%5,a=19-5*Math.floor(i/5)-Math.floor(n/5),s=t.slice(2).trim().split(/\s+/);if(1==s.length&&(s=[s[0].slice(0,s[0].length/2),s[0].slice(s[0].length/2)]),o<0||o>6||a<0||a>12)throw new Error("Invalid grid reference");if(2!=s.length)throw new Error("Invalid grid reference");if(s[0].length!=s[1].length)throw new Error("Invalid grid reference");return s[0]=(s[0]+"00000").slice(0,5),s[1]=(s[1]+"00000").slice(0,5),new r(o+s[0],a+s[1])},r.prototype.toString=function(t){if(t=void 0===t?10:Number(t),isNaN(t)||t%2!=0||t>16)throw new RangeError("Invalid precision â€˜"+t+"â€™");var e=this.easting,i=this.northing;if(isNaN(e)||isNaN(i))throw new Error("Invalid grid reference");if(0==t){var n=Math.floor(e),r=e-n,o=Math.floor(i),a=i-o;return("000000"+n).slice(-6)+(r>0?r.toFixed(3).slice(1):"")+","+((o<1e6?("000000"+o).slice(-6):o)+(a>0?a.toFixed(3).slice(1):""))}var s=Math.floor(e/1e5),l=Math.floor(i/1e5);if(s<0||s>6||l<0||l>12)return"";var h=19-l-(19-l)%5+Math.floor((s+10)/5),c=5*(19-l)%25+s%5;h>7&&h++,c>7&&c++;var u=String.fromCharCode(h+"A".charCodeAt(0),c+"A".charCodeAt(0));return e=Math.floor(e%1e5/Math.pow(10,5-t/2)),i=Math.floor(i%1e5/Math.pow(10,5-t/2)),u+" "+(e=("00000000"+e).slice(-t/2))+" "+(i=("00000000"+i).slice(-t/2))},void 0!==t&&t.exports&&(t.exports=r)},function(t,e,i){"use strict";var n=i(5),r=i(198),o=i.n(r);e.a=function(t){var e=(t=t||{}).url||t.baseUrl||"https://web-proxy.mappedin.com/a/";e+=t.venue+"/";var i=t.key,r=t.secret,a=!1,s="web"==t.context?"web":"websdk",l=Object(n.h)(),h=Object(n.o)(),c=function(t,n){var c=Object.assign({},n,{g:a}),u=e+t+"?"+o.a.stringify(c),p={method:"GET",mode:"cors",headers:{"mi-context":s,"mi-session":h,"mi-device":l,Authorization:"Basic "+btoa(i+":"+r)}};fetch(u,p)};this.locationSelected=function(t){var e=t.id||t;c("select-location",{id:e})},this.categorySelected=function(t){var e=t.id||t;c("select-category",{id:e})},this.mapViewLoaded=function(t,e,i,n){c("load-mapview",{type:t,force:e,benchmark:i,reason:n}),delete this.mapViewLoaded},this.getDirections=function(t,e){c("query-directions",{start:t,end:e,type:"location_to_location"})},this.getSessionID=function(){return h},this.getDeviceID=function(){return l},this.setGeolocationMode=function(t){a=t}}},function(t,e,i){"use strict";var n=i(199),r=i(200),o=i(201);function a(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function s(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function l(t,e){var i=function(t){var e;switch(t.arrayFormat){case"index":return function(t,i,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=i):n[t]=i};case"bracket":return function(t,i,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=[i]:n[t]=i};default:return function(t,e,i){void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}(e=r({arrayFormat:"none"},e)),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),r=e.shift(),a=e.length>0?e.join("="):void 0;a=void 0===a?null:o(a),i(o(r),a,n)}),Object.keys(n).sort().reduce(function(t,e){var i=n[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(i):t[e]=i,t},Object.create(null))):n}e.extract=s,e.parse=l,e.stringify=function(t,e){!1===(e=r({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var i=function(t){switch(t.arrayFormat){case"index":return function(e,i,n){return null===i?[a(e,t),"[",n,"]"].join(""):[a(e,t),"[",a(n,t),"]=",a(i,t)].join("")};case"bracket":return function(e,i){return null===i?a(e,t):[a(e,t),"[]=",a(i,t)].join("")};default:return function(e,i){return null===i?a(e,t):[a(e,t),"=",a(i,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(n){var r=t[n];if(void 0===r)return"";if(null===r)return a(n,e);if(Array.isArray(r)){var o=[];return r.slice().forEach(function(t){void 0!==t&&o.push(i(n,t,o.length))}),o.join("&")}return a(n,e)+"="+a(r,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:l(s(t),e)}}},function(t,e,i){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var h in i)r.call(i,h)&&(s[h]=i[h]);if(n){a=n(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(s[a[c]]=i[a[c]])}}return s}},function(t,e,i){"use strict";var n="%[a-f0-9]{2}",r=new RegExp(n,"gi"),o=new RegExp("("+n+")+","gi");function a(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],a(i),a(n))}function s(t){try{return decodeURIComponent(t)}catch(n){for(var e=t.match(r),i=1;i<e.length;i++)e=(t=a(e,i).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},i=o.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var n=s(i[0]);n!==i[0]&&(e[i[0]]=n)}i=o.exec(t)}e["%C2"]="ï¿½";for(var r=Object.keys(e),a=0;a<r.length;a++){var l=r[a];t=t.replace(new RegExp(l,"g"),e[l])}return t}(t)}}},function(t,e,i){var n=i(203),r=i(93),o=i(92);function a(){this.vertices=[]}t.exports=a,a.prototype.at=function(t){var e=this.vertices,i=e.length;return e[t<0?t%i+i:t%i]},a.prototype.first=function(){return this.vertices[0]},a.prototype.last=function(){return this.vertices[this.vertices.length-1]},a.prototype.clear=function(){this.vertices.length=0},a.prototype.append=function(t,e,i){if(void 0===e)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<e)throw new Error("lol1");if(i>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var n=e;n<i;n++)this.vertices.push(t.vertices[n])},a.prototype.makeCCW=function(){for(var t=0,e=this.vertices,i=1;i<this.vertices.length;++i)(e[i][1]<e[t][1]||e[i][1]==e[t][1]&&e[i][0]>e[t][0])&&(t=i);r.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},a.prototype.reverse=function(){for(var t=[],e=0,i=this.vertices.length;e!==i;e++)t.push(this.vertices.pop());this.vertices=t},a.prototype.isReflex=function(t){return r.right(this.at(t-1),this.at(t),this.at(t+1))};var s=[],l=[];function h(t,e,i,n,r){r=r||0;var a=e[1]-t[1],s=t[0]-e[0],l=a*t[0]+s*t[1],h=n[1]-i[1],c=i[0]-n[0],u=h*i[0]+c*i[1],p=a*c-h*s;return o.eq(p,0,r)?[0,0]:[(c*l-s*u)/p,(a*u-h*l)/p]}a.prototype.canSee=function(t,e){var i,o,a=s,h=l;if(r.leftOn(this.at(t+1),this.at(t),this.at(e))&&r.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;o=r.sqdist(this.at(t),this.at(e));for(var c=0;c!==this.vertices.length;++c)if((c+1)%this.vertices.length!==t&&c!==t&&r.leftOn(this.at(t),this.at(e),this.at(c+1))&&r.rightOn(this.at(t),this.at(e),this.at(c))&&(a[0]=this.at(t),a[1]=this.at(e),h[0]=this.at(c),h[1]=this.at(c+1),i=n.lineInt(a,h),r.sqdist(this.at(t),i)<o))return!1;return!0},a.prototype.copy=function(t,e,i){var n=i||new a;if(n.clear(),t<e)for(var r=t;r<=e;r++)n.vertices.push(this.vertices[r]);else{for(r=0;r<=e;r++)n.vertices.push(this.vertices[r]);for(r=t;r<this.vertices.length;r++)n.vertices.push(this.vertices[r])}return n},a.prototype.getCutEdges=function(){for(var t=[],e=[],i=[],n=new a,r=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var s=0;s<this.vertices.length;++s)if(this.canSee(o,s)){e=this.copy(o,s,n).getCutEdges(),i=this.copy(s,o,n).getCutEdges();for(var l=0;l<i.length;l++)e.push(i[l]);e.length<r&&(t=e,r=e.length,t.push([this.at(o),this.at(s)]))}return t},a.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},a.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],i=0;i<t.length;i++)for(var n=t[i],r=0;r<e.length;r++){var o=e[r].slice(n);if(o){e.splice(r,1),e.push(o[0],o[1]);break}}return e}n=t,i=this.vertices.indexOf(n[0]),r=this.vertices.indexOf(n[1]);return-1!=i&&-1!=r&&[this.copy(i,r),this.copy(r,i)]},a.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var i=0;i<e-1;i++)if(n.segmentsIntersect(t[e],t[e+1],t[i],t[i+1]))return!1;for(e=1;e<t.length-2;e++)if(n.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},a.prototype.quickDecomp=function(t,e,i,n,o,s){o=o||100,s=s||0,n=n||25,t=void 0!==t?t:[],e=e||[],i=i||[];var l=[0,0],c=[0,0],u=[0,0],p=0,d=0,f=0,m=0,v=0,g=0,y=0,_=new a,x=new a,b=this,w=this.vertices;if(w.length<3)return t;if(++s>o)return console.warn("quickDecomp: max level ("+o+") reached."),t;for(var E=0;E<this.vertices.length;++E)if(b.isReflex(E)){e.push(b.vertices[E]),p=d=Number.MAX_VALUE;for(var M=0;M<this.vertices.length;++M)r.left(b.at(E-1),b.at(E),b.at(M))&&r.rightOn(b.at(E-1),b.at(E),b.at(M-1))&&(u=h(b.at(E-1),b.at(E),b.at(M),b.at(M-1)),r.right(b.at(E+1),b.at(E),u)&&(f=r.sqdist(b.vertices[E],u))<d&&(d=f,c=u,g=M)),r.left(b.at(E+1),b.at(E),b.at(M+1))&&r.rightOn(b.at(E+1),b.at(E),b.at(M))&&(u=h(b.at(E+1),b.at(E),b.at(M),b.at(M+1)),r.left(b.at(E-1),b.at(E),u)&&(f=r.sqdist(b.vertices[E],u))<p&&(p=f,l=u,v=M));if(g==(v+1)%this.vertices.length)u[0]=(c[0]+l[0])/2,u[1]=(c[1]+l[1])/2,i.push(u),E<v?(_.append(b,E,v+1),_.vertices.push(u),x.vertices.push(u),0!=g&&x.append(b,g,b.vertices.length),x.append(b,0,E+1)):(0!=E&&_.append(b,E,b.vertices.length),_.append(b,0,v+1),_.vertices.push(u),x.vertices.push(u),x.append(b,g,E+1));else{if(g>v&&(v+=this.vertices.length),m=Number.MAX_VALUE,v<g)return t;for(M=g;M<=v;++M)r.leftOn(b.at(E-1),b.at(E),b.at(M))&&r.rightOn(b.at(E+1),b.at(E),b.at(M))&&(f=r.sqdist(b.at(E),b.at(M)))<m&&(m=f,y=M%this.vertices.length);E<y?(_.append(b,E,y+1),0!=y&&x.append(b,y,w.length),x.append(b,0,E+1)):(0!=E&&_.append(b,E,w.length),_.append(b,0,y+1),x.append(b,y,E+1))}return _.vertices.length<x.vertices.length?(_.quickDecomp(t,e,i,n,o,s),x.quickDecomp(t,e,i,n,o,s)):(x.quickDecomp(t,e,i,n,o,s),_.quickDecomp(t,e,i,n,o,s)),t}return t.push(this),t},a.prototype.removeCollinearPoints=function(t){for(var e=0,i=this.vertices.length-1;this.vertices.length>3&&i>=0;--i)r.collinear(this.at(i-1),this.at(i),this.at(i+1),t)&&(this.vertices.splice(i%this.vertices.length,1),i--,e++);return e}},function(t,e,i){var n=i(92);function r(){}t.exports=r,r.lineInt=function(t,e,i){i=i||0;var r,o,a,s,l,h,c,u=[0,0];return r=t[1][1]-t[0][1],o=t[0][0]-t[1][0],a=r*t[0][0]+o*t[0][1],s=e[1][1]-e[0][1],l=e[0][0]-e[1][0],h=s*e[0][0]+l*e[0][1],c=r*l-s*o,n.eq(c,0,i)||(u[0]=(l*a-o*h)/c,u[1]=(r*h-s*a)/c),u},r.segmentsIntersect=function(t,e,i,n){var r=e[0]-t[0],o=e[1]-t[1],a=n[0]-i[0],s=n[1]-i[1];if(a*o-s*r==0)return!1;var l=(r*(i[1]-t[1])+o*(t[0]-i[0]))/(a*o-s*r),h=(a*(t[1]-i[1])+s*(i[0]-t[0]))/(s*r-a*o);return l>=0&&l<=1&&h>=0&&h<=1}},function(t,e){var i={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,i=0,n=0;n<e;n+=2)i+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-(i+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var n=[],r=[],o=0;o<e;o++)r.push(o);o=0;for(var a=e;a>3;){var s=r[(o+0)%a],l=r[(o+1)%a],h=r[(o+2)%a],c=t[2*s],u=t[2*s+1],p=t[2*l],d=t[2*l+1],f=t[2*h],m=t[2*h+1],v=!1;if(i._convex(c,u,p,d,f,m)){v=!0;for(var g=0;g<a;g++){var y=r[g];if(y!=s&&y!=l&&y!=h&&i._PointInTriangle(t[2*y],t[2*y+1],c,u,p,d,f,m)){v=!1;break}}}if(v)n.push(s,l,h),r.splice((o+1)%a,1),a--,o=0;else if(o++>3*a)break}return n.push(r[0],r[1],r[2]),n},_PointInTriangle:function(t,e,i,n,r,o,a,s){var l=a-i,h=s-n,c=r-i,u=o-n,p=t-i,d=e-n,f=l*l+h*h,m=l*c+h*u,v=l*p+h*d,g=c*c+u*u,y=c*p+u*d,_=1/(f*g-m*m),x=(g*v-m*y)*_,b=(f*y-m*v)*_;return x>=0&&b>=0&&x+b<1},_convex:function(t,e,i,n,r,o){return(e-n)*(r-i)+(i-t)*(o-n)>=0}};t.exports=i},function(t,e,i){var n=i(8),r=i(0);i(2);function o(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=n.HEIGHTFIELD,n.call(this,t)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],i=t[0],n=0;n!==t.length;n++){var r=t[n];r>e&&(e=r),r<i&&(i=r)}this.maxValue=e,this.minValue=i},o.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.updateArea=function(){for(var t=this.heights,e=0,i=0;i<t.length-1;i++)e+=(t[i]+t[i+1])/2*this.elementWidth;this.area=e};var a=[r.create(),r.create(),r.create(),r.create()];o.prototype.computeAABB=function(t,e,i){r.set(a[0],0,this.maxValue),r.set(a[1],this.elementWidth*this.heights.length,this.maxValue),r.set(a[2],this.elementWidth*this.heights.length,this.minValue),r.set(a[3],0,this.minValue),t.setFromPoints(a,e,i)},o.prototype.getLineSegment=function(t,e,i){var n=this.heights,o=this.elementWidth;r.set(t,i*o,n[i]),r.set(e,(i+1)*o,n[i+1])},o.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},o.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return e=Math.min(this.heights.length,Math.max(e,0))};r.create();var s=r.create(),l=r.create(),h=r.create(),c=r.create(),u=r.create();r.fromValues(0,1);o.prototype.raycast=function(t,e,i,n){var o=e.from,a=e.to,p=(e.direction,s),d=l,f=h,m=c,v=u;r.toLocalFrame(m,o,i,n),r.toLocalFrame(v,a,i,n);var g=this.getClampedSegmentIndex(m),y=this.getClampedSegmentIndex(v);if(g>y){var _=g;g=y,y=_}for(var x=0;x<this.heights.length-1;x++){this.getLineSegment(d,f,x);var b=r.getLineSegmentsIntersectionFraction(m,v,d,f);if(b>=0&&(r.sub(p,f,d),r.rotate(p,p,n+Math.PI/2),r.normalize(p,p),e.reportIntersection(t,b,p,-1),t.shouldStop(e)))return}}},function(t,e,i){i(43),i(73),i(8),i(74);var n=i(42);i(0);function r(){n.call(this,n.NAIVE)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.getCollisionPairs=function(t){var e=t.bodies,i=this.result;i.length=0;for(var r=0,o=e.length;r!==o;r++)for(var a=e[r],s=0;s<r;s++){var l=e[s];n.canCollide(a,l)&&this.boundingVolumeCheck(a,l)&&i.push(a,l)}return i},r.prototype.aabbQuery=function(t,e,i){i=i||[];for(var n=t.bodies,r=0;r<n.length;r++){var o=n[r];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(e)&&i.push(o)}return i}},function(t,e,i){var n=i(0),r=(i(2),i(12)),o=i(30),a=i(11);function s(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new a({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function l(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new o(t.chassisBody,t.groundBody),this.sideEquation=new o(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=n.fromValues(0,1),e.localForwardVector&&n.copy(this.localForwardVector,e.localForwardVector),this.localPosition=n.fromValues(0,0),e.localPosition&&n.copy(this.localPosition,e.localPosition),r.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}t.exports=s,s.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.addConstraint(i)}},s.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.removeConstraint(i)}this.world=null},s.prototype.addWheel=function(t){var e=new l(this,t);return this.wheels.push(e),e},s.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},l.prototype=new r,l.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},l.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var h=n.create(),c=n.create();l.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(c,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(h,c),n.dot(h,c)};var u=n.create();l.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),n.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),n.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),n.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),n.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),n.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),n.normalize(u,this.forwardEquation.t),n.scale(u,u,this.engineForce),this.vehicle.chassisBody.applyForce(u,this.forwardEquation.contactPointA)}},function(t,e,i){var n=i(100),r=(i(72),i(40),i(0)),o=i(43),a=i(29),s=(i(101),i(73)),l=i(94),h=i(74),c=i(41),u=i(11),p=(i(8),i(111),i(71)),d=i(96),f=(i(97),i(12),i(102),i(106),i(109),i(99),i(113),i(42),i(39)),m=i(110),v=i(103),g=i(2),y=i(209),_=i(211);i(112);function x(t){c.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new n,this.narrowphase=new v(this),this.islandManager=new _,this.gravity=r.fromValues(0,-9.78),t.gravity&&r.copy(this.gravity,t.gravity),this.frictionGravity=r.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new m,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new p,this.defaultContactMaterial=new d(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=x.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new y}t.exports=x,x.prototype=new Object(c.prototype),x.prototype.constructor=x,x.NO_SLEEPING=1,x.BODY_SLEEPING=2,x.ISLAND_SLEEPING=4,x.prototype.addConstraint=function(t){this.constraints.push(t)},x.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},x.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&g.splice(this.contactMaterials,e,1)},x.prototype.getContactMaterial=function(t,e){for(var i=this.contactMaterials,n=0,r=i.length;n!==r;n++){var o=i[n];if(o.materialA.id===t.id&&o.materialB.id===e.id||o.materialA.id===e.id&&o.materialB.id===t.id)return o}return!1},x.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&g.splice(this.constraints,e,1)};r.create(),r.create(),r.create(),r.create(),r.create(),r.create();var b=r.create(),w=r.fromValues(0,0),E=r.fromValues(0,0);r.fromValues(0,0),r.fromValues(0,0);x.prototype.step=function(t,e,i){if(i=i||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var n=0;this.accumulator>=t&&n<i;)this.internalStep(t),this.time+=t,this.accumulator-=t,n++;for(var o=this.accumulator%t/t,a=0;a!==this.bodies.length;a++){var s=this.bodies[a];r.lerp(s.interpolatedPosition,s.previousPosition,s.position,o),s.interpolatedAngle=s.previousAngle+o*(s.angle-s.previousAngle)}}};var M=[];x.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,i=this.springs,n=this.bodies,o=this.gravity,a=this.solver,s=this.bodies.length,l=this.broadphase,h=this.narrowphase,c=this.constraints,p=b,d=(r.scale,r.add),f=(r.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var m=r.length(this.gravity);0===m&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=m)}if(this.applyGravity)for(var v=0;v!==s;v++){var y=(_=n[v]).force;_.type===u.DYNAMIC&&_.sleepState!==u.SLEEPING&&(r.scale(p,o,_.mass*_.gravityScale),d(y,y,p))}if(this.applySpringForces)for(v=0;v!==e;v++){i[v].applyForce()}if(this.applyDamping)for(v=0;v!==s;v++){var _;(_=n[v]).type===u.DYNAMIC&&_.applyDamping(t)}var w=l.getCollisionPairs(this),E=this.disabledBodyCollisionPairs;for(v=E.length-2;v>=0;v-=2)for(var q=w.length-2;q>=0;q-=2)(E[v]===w[q]&&E[v+1]===w[q+1]||E[v+1]===w[q]&&E[v]===w[q+1])&&w.splice(q,2);var A=c.length;for(v=0;v!==A;v++){var T=c[v];if(!T.collideConnected)for(q=w.length-2;q>=0;q-=2)(T.bodyA===w[q]&&T.bodyB===w[q+1]||T.bodyB===w[q]&&T.bodyA===w[q+1])&&w.splice(q,2)}this.postBroadphaseEvent.pairs=w,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,h.reset(this);v=0;for(var P=w.length;v!==P;v+=2)for(var S=w[v],L=w[v+1],C=0,I=S.shapes.length;C!==I;C++)for(var O=S.shapes[C],R=O.position,N=O.angle,B=0,D=L.shapes.length;B!==D;B++){var z=L.shapes[B],k=z.position,F=z.angle,U=this.defaultContactMaterial;if(O.material&&z.material){var j=this.getContactMaterial(O.material,z.material);j&&(U=j)}this.runNarrowphase(h,S,O,R,N,L,z,k,F,U,this.frictionGravity)}for(v=0;v!==s;v++){(W=n[v])._wakeUpAfterNarrowphase&&(W.wakeUp(),W._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(M);var V=this.endContactEvent;for(B=M.length;B--;){var G=M[B];V.shapeA=G.shapeA,V.shapeB=G.shapeB,V.bodyA=G.bodyA,V.bodyB=G.bodyB,this.emit(V)}M.length=0}var H=this.preSolveEvent;H.contactEquations=h.contactEquations,H.frictionEquations=h.frictionEquations,this.emit(H),H.contactEquations=H.frictionEquations=null;A=c.length;for(v=0;v!==A;v++)c[v].update();if(h.contactEquations.length||h.frictionEquations.length||A)if(this.islandSplit){for(f.equations.length=0,g.appendArray(f.equations,h.contactEquations),g.appendArray(f.equations,h.frictionEquations),v=0;v!==A;v++)g.appendArray(f.equations,c[v].equations);f.split(this);for(v=0;v!==f.islands.length;v++){(Z=f.islands[v]).equations.length&&a.solveIsland(t,Z)}}else{for(a.addEquations(h.contactEquations),a.addEquations(h.frictionEquations),v=0;v!==A;v++)a.addEquations(c[v].equations);this.solveConstraints&&a.solve(t,this),a.removeAllEquations()}for(v=0;v!==s;v++){var W;(W=n[v]).integrate(t)}for(v=0;v!==s;v++)n[v].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var X=this.impactEvent;for(v=0;v!==h.contactEquations.length;v++){var Y=h.contactEquations[v];Y.firstImpact&&(X.bodyA=Y.bodyA,X.bodyB=Y.bodyB,X.shapeA=Y.shapeA,X.shapeB=Y.shapeB,X.contactEquation=Y,this.emit(X))}}if(this.sleepMode===x.BODY_SLEEPING)for(v=0;v!==s;v++)n[v].sleepTick(this.time,!1,t);else if(this.sleepMode===x.ISLAND_SLEEPING&&this.islandSplit){for(v=0;v!==s;v++)n[v].sleepTick(this.time,!0,t);for(v=0;v<this.islandManager.islands.length;v++){var Z;(Z=this.islandManager.islands[v]).wantsToSleep()&&Z.sleep()}}this.stepping=!1;var J=this.bodiesToBeRemoved;for(v=0;v!==J.length;v++)this.removeBody(J[v]);J.length=0,this.emit(this.postStepEvent)},x.prototype.runNarrowphase=function(t,e,i,n,o,a,s,l,h,c,p){if(0!=(i.collisionGroup&s.collisionMask)&&0!=(s.collisionGroup&i.collisionMask)){r.rotate(w,n,e.angle),r.rotate(E,l,a.angle),r.add(w,w,e.position),r.add(E,E,a.position);var d,f=o+e.angle,m=h+a.angle;t.enableFriction=c.friction>0,t.frictionCoefficient=c.friction,d=e.type===u.STATIC||e.type===u.KINEMATIC?a.mass:a.type===u.STATIC||a.type===u.KINEMATIC?e.mass:e.mass*a.mass/(e.mass+a.mass),t.slipForce=c.friction*p*d,t.restitution=c.restitution,t.surfaceVelocity=c.surfaceVelocity,t.frictionStiffness=c.frictionStiffness,t.frictionRelaxation=c.frictionRelaxation,t.stiffness=c.stiffness,t.relaxation=c.relaxation,t.contactSkinSize=c.contactSkinSize,t.enabledEquations=e.collisionResponse&&a.collisionResponse&&i.collisionResponse&&s.collisionResponse;var v=t[i.type|s.type],g=0;if(v){var y=i.sensor||s.sensor,_=t.frictionEquations.length;g=i.type<s.type?v.call(t,e,i,w,f,a,s,E,m,y):v.call(t,a,s,E,m,e,i,w,f,y);var x=t.frictionEquations.length-_;if(g){if(e.allowSleep&&e.type===u.DYNAMIC&&e.sleepState===u.SLEEPING&&a.sleepState===u.AWAKE&&a.type!==u.STATIC)r.squaredLength(a.velocity)+Math.pow(a.angularVelocity,2)>=2*Math.pow(a.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(a.allowSleep&&a.type===u.DYNAMIC&&a.sleepState===u.SLEEPING&&e.sleepState===u.AWAKE&&e.type!==u.STATIC)r.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(a._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,i,a,s),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,s)){var b=this.beginContactEvent;if(b.shapeA=i,b.shapeB=s,b.bodyA=e,b.bodyB=a,b.contactEquations.length=0,"number"==typeof g)for(var M=t.contactEquations.length-g;M<t.contactEquations.length;M++)b.contactEquations.push(t.contactEquations[M]);this.emit(b)}if("number"==typeof g&&x>1)for(M=t.frictionEquations.length-x;M<t.frictionEquations.length;M++){var q=t.frictionEquations[M];q.setSlipForce(q.getSlipForce()/x)}}}}},x.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},x.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&g.splice(this.springs,e,1)},x.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},x.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(g.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},x.prototype.getBodyById=function(t){for(var e=this.bodies,i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}return!1},x.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},x.prototype.enableBodyCollision=function(t,e){for(var i=this.disabledBodyCollisionPairs,n=0;n<i.length;n+=2)if(i[n]===t&&i[n+1]===e||i[n+1]===t&&i[n]===e)return void i.splice(n,2)},x.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var i=this.bodies;for(e=i.length-1;e>=0;e--)this.removeBody(i[e]);var n=this.springs;for(e=n.length-1;e>=0;e--)this.removeSpring(n[e]);var r=this.contactMaterials;for(e=r.length-1;e>=0;e--)this.removeContactMaterial(r[e]);x.apply(this)};var q=r.create(),A=(r.fromValues(0,0),r.fromValues(0,0));x.prototype.hitTest=function(t,e,i){i=i||0;var n=new u({position:t}),c=new h,p=t,d=q,f=A;n.addShape(c);for(var m=this.narrowphase,v=[],g=0,y=e.length;g!==y;g++)for(var _=e[g],x=0,b=_.shapes.length;x!==b;x++){var w=_.shapes[x];r.rotate(d,w.position,_.angle),r.add(d,d,_.position);var E=w.angle+_.angle;(w instanceof o&&m.circleParticle(_,w,d,E,n,c,p,0,!0)||w instanceof a&&m.particleConvex(n,c,p,0,_,w,d,E,!0)||w instanceof s&&m.particlePlane(n,c,p,0,_,w,d,E,!0)||w instanceof l&&m.particleCapsule(n,c,p,0,_,w,d,E,!0)||w instanceof h&&r.squaredLength(r.sub(f,d,t))<i*i)&&v.push(_)}return v},x.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,i=0;i!==e.length;i++)for(var n=e[i],r=0;r!==n.equations.length;r++){var o=n.equations[r];o.stiffness=t,o.needsUpdate=!0}var a=this.contactMaterials;for(i=0;i!==a.length;i++){(n=a[i]).stiffness=n.frictionStiffness=t}(n=this.defaultContactMaterial).stiffness=n.frictionStiffness=t},x.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var i=this.constraints[e],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.relaxation=t,r.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(i=this.contactMaterials[e]).relaxation=i.frictionRelaxation=t}(i=this.defaultContactMaterial).relaxation=i.frictionRelaxation=t};var T=new f,P=[];x.prototype.raycast=function(t,e){return e.getAABB(T),this.broadphase.aabbQuery(this,T,P),e.intersectBodies(t,P),P.length=0,t.hasHit()}},function(t,e,i){var n=i(104),r=(i(114),i(210));i(2);function o(){this.overlappingShapesLastState=new n,this.overlappingShapesCurrentState=new n,this.recordPool=new r({size:16}),this.tmpDict=new n,this.tmpArray1=[]}t.exports=o,o.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,i=t.keys.length;i--;){var n=t.keys[i],r=t.getByKey(n);e.getByKey(n);r&&this.recordPool.release(r)}t.reset(),t.copy(e),e.reset()},o.prototype.setOverlapping=function(t,e,i,n){this.overlappingShapesLastState;var r=this.overlappingShapesCurrentState;if(!r.get(e.id,n.id)){var o=this.recordPool.get();o.set(t,e,i,n),r.set(e.id,n.id,o)}},o.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},o.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},o.prototype.bodiesAreOverlapping=function(t,e){for(var i=this.overlappingShapesCurrentState,n=i.keys.length;n--;){var r=i.keys[n],o=i.data[r];if(o.bodyA===t&&o.bodyB===e||o.bodyA===e&&o.bodyB===t)return!0}return!1},o.prototype.getDiff=function(t,e,i){var n=t,r=e;(i=i||[]).length=0;for(var o=r.keys.length;o--;){var a=r.keys[o],s=r.data[a];if(!s)throw new Error("Key "+a+" had no data!");n.data[a]||i.push(s)}return i},o.prototype.isNewOverlap=function(t,e){var i=0|t.id,n=0|e.id,r=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!r.get(i,n)&&!!o.get(i,n)},o.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getBodyDiff=function(t,e){e=e||[];for(var i=this.tmpDict,n=t.length;n--;){var r=t[n];i.set(0|r.bodyA.id,0|r.bodyB.id,r)}for(n=i.keys.length;n--;){(r=i.getByKey(i.keys[n]))&&e.push(r.bodyA,r.bodyB)}return i.reset(),e}},function(t,e,i){var n=i(114),r=i(21);function o(){r.apply(this,arguments)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.create=function(){return new n},o.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},function(t,e,i){i(0),i(115),i(116);var n=i(212),r=i(213),o=i(11);function a(t){this.nodePool=new n({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t.exports=a,a.getUnvisitedNode=function(t){for(var e=t.length,i=0;i!==e;i++){var n=t[i];if(!n.visited&&n.body.type===o.DYNAMIC)return n}return!1},a.prototype.visit=function(t,e,i){e.push(t.body);for(var n=t.equations.length,r=0;r!==n;r++){var o=t.equations[r];-1===i.indexOf(o)&&i.push(o)}},a.prototype.bfs=function(t,e,i){var n=this.queue;for(n.length=0,n.push(t),t.visited=!0,this.visit(t,e,i);n.length;)for(var r,s=n.pop();r=a.getUnvisitedNode(s.neighbors);)r.visited=!0,this.visit(r,e,i),r.body.type===o.DYNAMIC&&n.push(r)},a.prototype.split=function(t){for(var e=t.bodies,i=this.nodes,n=this.equations;i.length;)this.nodePool.release(i.pop());for(var r=0;r!==e.length;r++){var o=this.nodePool.get();o.body=e[r],i.push(o)}for(var s=0;s!==n.length;s++){var l=n[s],h=(r=e.indexOf(l.bodyA),e.indexOf(l.bodyB)),c=i[r],u=i[h];c.neighbors.push(u),u.neighbors.push(c),c.equations.push(l),u.equations.push(l)}var p,d=this.islands;for(r=0;r<d.length;r++)this.islandPool.release(d[r]);for(d.length=0;p=a.getUnvisitedNode(i);){var f=this.islandPool.get();this.bfs(p,f.bodies,f.equations),d.push(f)}return d}},function(t,e,i){var n=i(116),r=i(21);function o(){r.apply(this,arguments)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.create=function(){return new n},o.prototype.destroy=function(t){return t.reset(),this}},function(t,e,i){var n=i(115),r=i(21);function o(){r.apply(this,arguments)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.create=function(){return new n},o.prototype.destroy=function(t){return t.reset(),this}},function(t,e,i){"use strict";t.exports=function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var e=t.length,i=-1;i++<e;)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t},t.exports.immutable=function(e){if(!Array.isArray(e))throw new TypeError("array-unique expects an array.");for(var i=e.length,n=new Array(i),r=0;r<i;r++)n[r]=e[r];return t.exports(n)}},function(t,e,i){"use strict";var n=i(3),r=i(5);n.L.prototype.destroy=function(){for(var t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.parent&&this.parent.remove(this),this.texture&&(this.texture.dispose(),this.texture=void 0),Array.isArray(this.material)?this.material.forEach(function(t){Object(r.q)(t)}):void 0!==this.material&&Object(r.q)(this.material),this.material=void 0};n.L},function(t,e,i){"use strict";var n=i(3),r=i(217),o=i(218),a=i(5),s=i(69),l=i(27),h="chain",c="cancel";e.a=function(t,e,i,u){var p;Object.assign(this,n.p.prototype),this.camera=t,this.canvas=e,this.elevation=t.parent,this.orbit=this.elevation.parent;var d=2*Math.PI;this.zoomSpeed=5,this.rotateSpeed=100,this.enabled=!0,this.enableZoom=!0,this.enablePan=!0,this.enablePedestal=!1,this.maxPedestal=1/0,this.minPedestal=-1/0,this.enableRotate=!0,this.minZoom=375,this.maxZoom=1e4,this.initialMinZoom=375,this.initialMaxZoom=1e4,this.ignoreZoomLimits=!1,this.minExpandedZoom=375,this.maxExpandedZoom=1e5,this.zoomFactor=1,this.panBounds={margin:1.25,min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0},center:{x:0,y:0},radius:200},this.minTilt=0,this.maxTilt=1.2,this.mouseButtons={ORBIT:n.E.RIGHT,ZOOM:n.E.MIDDLE,PAN:n.E.LEFT};var f=this,m=new n.O(1e6,1e6),v=new n.H({color:0,visible:!1}),g=new n.G(m,v),y=new n.R;i.add(g);var _,x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,WHEEL_ZOOM:3,TOUCH_TILT:4,TOUCH_DOLLY:5,TOUCH_PAN:6,MULTI:7,PEDESTAL:8,TOUCH_PEDESTAL:9},b=x.NONE,w=new n._0,E=[],M={offsetLeft:0,offsetTop:0},q=new n._0,A=new n._0,T=new n._0,P=new n._0,S=new n._0,L=new n._0,C=new n._1,I=new n._1,O=new n._0,R=new n._0,N=new n._0,B=!1,D=new n.j(!0),z=0,k=1e4;this.CAMERA_EVENTS={},this.CAMERA_EVENTS.CHANGE_EVENT={type:"change"},this.CAMERA_EVENTS.PAN_START_EVENT={type:"panStart"},this.CAMERA_EVENTS.PAN_END_EVENT={type:"panEnd"},this.CAMERA_EVENTS.PEDESTAL_START_EVENT={type:"pedestalStart"},this.CAMERA_EVENTS.PEDESTAL_END_EVENT={type:"pedestalEnd"},this.CAMERA_EVENTS.ROTATE_START_EVENT={type:"rotateStart"},this.CAMERA_EVENTS.ROTATE_END_EVENT={type:"rotateEnd"},this.CAMERA_EVENTS.ZOOM_START_EVENT={type:"zoomStart"},this.CAMERA_EVENTS.ZOOM_END_EVENT={type:"zoomEnd"},this.CAMERA_EVENTS.MULTI_START_EVENT={type:"multiStart"},this.CAMERA_EVENTS.MULTI_END_EVENT={type:"multiEnd"},this.INTERACTION_EVENTS={},this.INTERACTION_EVENTS.USER_PAN_EVENT={type:"userPan"},this.INTERACTION_EVENTS.USER_PEDESTAL_EVENT={type:"userPedestal"},this.INTERACTION_EVENTS.USER_ROTATE_EVENT={type:"userRotate"},this.INTERACTION_EVENTS.USER_DOLLY_EVENT={type:"userDolly"},this.INTERACTION_EVENTS.USER_ZOOM_EVENT={type:"userZoom"},this.INTERACTION_EVENTS.USER_TILT_EVENT={type:"userTilt"};var F=this.CAMERA_EVENTS.CHANGE_EVENT,U=this.CAMERA_EVENTS.PAN_START_EVENT,j=this.CAMERA_EVENTS.PAN_END_EVENT,V=this.CAMERA_EVENTS.ROTATE_START_EVENT,G=this.CAMERA_EVENTS.ROTATE_END_EVENT,H=this.CAMERA_EVENTS.ZOOM_START_EVENT,W=this.CAMERA_EVENTS.ZOOM_END_EVENT,X=this.CAMERA_EVENTS.MULTI_START_EVENT,Y=this.CAMERA_EVENTS.MULTI_END_EVENT,Z=this.INTERACTION_EVENTS.USER_PAN_EVENT,J=this.INTERACTION_EVENTS.USER_ROTATE_EVENT,K=this.INTERACTION_EVENTS.USER_DOLLY_EVENT,Q=this.INTERACTION_EVENTS.USER_ZOOM_EVENT,$=this.INTERACTION_EVENTS.USER_TILT_EVENT;this.pan=function(t,e){isNaN(t)||isNaN(e)||f.setPosition(f.orbit.position.x+t,f.orbit.position.y+e)},this.setPosition=function(t,e){if(!isNaN(t)&&!isNaN(e)){b==x.NONE&&f.dispatchEvent(U);var i=t-f.panBounds.center.x,n=e-f.panBounds.center.y;if(Math.sqrt(i*i+n*n)>f.panBounds.radius){var r=Math.atan2(n,i),o={x:Math.cos(r)*f.panBounds.radius+f.panBounds.center.x,y:Math.sin(r)*f.panBounds.radius+f.panBounds.center.y};f.orbit.position.x=o.x,f.orbit.position.y=o.y}else f.orbit.position.x=t,f.orbit.position.y=e;f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(j)}},this.setRotation=function(t){isNaN(t)||(b==x.NONE&&f.dispatchEvent(V),f.orbit.rotation.z=t%d,f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(G))},this.rotate=function(t){isNaN(t)||(b==x.NONE&&f.dispatchEvent(V),f.orbit.rotation.z=(f.orbit.rotation.z+t)%d,f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(G))},this.setTilt=function(t){isNaN(t)||(b==x.NONE&&f.dispatchEvent(V),f.elevation.rotation.x=Math.max(Math.min(t,f.maxTilt),f.minTilt),f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(G))},this.tilt=function(t){isNaN(t)||(b==x.NONE&&f.dispatchEvent(V),f.elevation.rotation.x=Math.max(Math.min(t+f.getTilt(),f.maxTilt),f.minTilt),f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(G))},this.setZoom=function(t){if(!isNaN(t)){b==x.NONE&&f.dispatchEvent(H);var e=Math.min(Math.max(t,f.getZoomScaledMin()),f.getZoomScaledMax());f.camera.position.z=e,f.camera.near=e/100,f.camera.far=100*e,f.camera.updateProjectionMatrix(),f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(W)}},this.zoom=function(t){if(!isNaN(t)){b==x.NONE&&f.dispatchEvent(H);var e=f.getZoom()-t;f.camera.position.z=Math.min(Math.max(e,f.minZoom*f.zoomFactor),f.maxZoom*f.zoomFactor),f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(W)}},this.zoomIn=function(t,e,i){var n=this.getZoom();this.animateCamera({zoom:n/1.5},t,e,i)},this.zoomOut=function(t,e,i){var n=this.getZoom();this.animateCamera({zoom:1.5*n},t,e,i)},this.expandZoomLimits=function(t,e){e||(e=1.2),t*e>f.maxZoom&&(f.maxZoom=Math.min(t*e,f.maxExpandedZoom)),t/e<f.minZoom&&(f.minZoom=Math.max(t/e,f.minExpandedZoom))},this.restrictZoomLimits=function(t,e){e||(e=1.2),t*e>f.initialMaxZoom&&t*e<f.maxZoom&&(f.maxZoom=Math.max(f.getZoom(),t*e)),t/e<f.initialMinZoom&&t/e>f.minZoom&&(f.minZoom=Math.min(f.getZoom(),t/e))},this.getPosition=function(){return{x:f.orbit.position.x,y:f.orbit.position.y,z:f.orbit.position.z}},this.getAltitude=function(){return f.orbit.position.z},this.setAltitude=function(t){"number"!=typeof t||isNaN(t)||(f.orbit.position.z=t,u.tryRendering())},this.getRotation=function(){return f.orbit.rotation.z},this.getTilt=function(){return f.elevation.rotation.x},this.getZoom=function(){return f.camera.position.z},this.isCameraMoving=function(){return b!=x.NONE},this.getZoomScaledMin=function(){return f.minZoom*f.zoomFactor},this.getZoomScaledMax=function(){var t=f.minZoom*f.zoomFactor;return Math.max(f.maxZoom,1.5*t)};var tt=new Set;function et(t){t.isPlaying?t.stop():t.end(),tt.delete(t)}function it(t){var e={x:t.clientX,y:t.clientY};f.initialShiftPos=e,f.initialAltitude=f.getAltitude(),f.pedestalScaleFactor=Object(a.n)(f.camera.fov,f.canvas.clientHeight,f.getZoom())}function nt(t){t.clientX;var e=t.clientY,i=f.initialAltitude+f.pedestalScaleFactor*(e-f.initialShiftPos.y);i>=f.minPedestal&&i<=f.maxPedestal&&f.setAltitude(i)}function rt(t){var e=0;return void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e}function ot(t){var e=rt(t),i=f.getZoom();return!(e<0&&i==f.getZoomScaledMax()||e>0&&i==f.getZoomScaledMin())}function at(t){if(!1!==f.enabled){if(vt(t),t.preventDefault(),b==x.WHEEL_ZOOM&&f.dispatchEvent(W),t.button===f.mouseButtons.ORBIT){if(!1===f.enableRotate)return;n=t,q.set(n.clientX,n.clientY),f.dispatchEvent(V),f.dispatchEvent(J),b=x.ROTATE}else if(t.button===f.mouseButtons.ZOOM){if(!1===f.enableZoom)return;i=t,O.set(i.clientX,i.clientY),f.dispatchEvent(H),f.dispatchEvent(K),b=x.DOLLY}else t.button===f.mouseButtons.PAN&&(f.enablePan?(e=mt(w),P.set(e.x,e.y),S.set(f.orbit.position.x,f.orbit.position.y),f.dispatchEvent(U),f.dispatchEvent(Z),b=x.PAN):f.enablePedestal&&(it(t),b=x.PEDESTAL));var e,i,n;b!==x.NONE&&(f.canvas.addEventListener("mousemove",st,!1),window.addEventListener("mouseup",lt,!1),window.addEventListener("mouseout",lt,!1))}}function st(t){var e,i,n;if(!1!==f.enabled)if(t.preventDefault(),vt(t),b===x.ROTATE){if(!1===f.enableRotate)return;n=t,A.set(n.clientX,n.clientY),T.subVectors(A,q),f.rotate(-T.x/f.rotateSpeed),f.setTilt(f.getTilt()-T.y/f.rotateSpeed),q.copy(A),f.dispatchEvent(F)}else if(b===x.DOLLY){if(!1===f.enableZoom)return;i=t,R.set(i.clientX,i.clientY),N.subVectors(R,O),f.setZoom(N.y*f.zoomSpeed),O.copy(R),f.dispatchEvent(F)}else if(b===x.PAN){if(!1===f.enablePan)return;e=mt(w),L.set(e.x,e.y),C.subVectors(L,P),f.setPosition(S.x-C.x,S.y-C.y),f.dispatchEvent(F)}else b===x.WHEEL_ZOOM?(B=!0,b=x.NONE):b===x.PEDESTAL&&nt(t)}function lt(){if(!1!==f.enabled){switch(document.removeEventListener("mousemove",st,!1),window.removeEventListener("mouseup",lt,!1),window.removeEventListener("mouseout",lt,!1),b){case x.PAN:f.dispatchEvent(f.CAMERA_EVENTS.PAN_END_EVENT);break;case x.DOLLY:f.dispatchEvent(f.CAMERA_EVENTS.ZOOM_END_EVENT);break;case x.ROTATE:f.dispatchEvent(f.CAMERA_EVENTS.ROTATE_END_EVENT);break;case x.PEDESTAL:f.dispatchEvent(f.CAMERA_EVENTS.PEDESTAL_END_EVENT)}b=x.NONE}}function ht(t){!1===f.enabled||!1===f.enableZoom||b!==x.NONE&&b!==x.WHEEL_ZOOM||(t.preventDefault(),t.stopPropagation(),vt(t),ot(t)&&(z=D.getElapsedTime()),b!=x.WHEEL_ZOOM&&ot(t)&&(f.canvas.addEventListener("mousemove",st,!1),b=x.WHEEL_ZOOM,_=f.getZoom(),I=mt(w),S.set(f.orbit.position.x,f.orbit.position.y),f.dispatchEvent(H)),function(t){if(!ot(t))return z>0&&(f.dispatchEvent(W),f.dispatchEvent(Q)),z=0,void(b=x.NONE);var e=f.getZoom(),i=e-rt(t)*e/k*f.zoomSpeed;f.setZoom(i);var n=i/_;C.subVectors(I,S).multiplyScalar(1-n),f.setPosition(S.x+C.x,S.y+C.y),f.dispatchEvent(F)}(t))}function ct(){f.touchInputs.update(E[0],E[1]);var t=f.touchInputs.first,e=f.touchInputs.second;f.touchAnchor1.viewCoordinate={x:t.x,y:t.y},f.touchAnchor2.viewCoordinate={x:e.x,y:e.y};var i=function(t,e){f.orbit.updateMatrixWorld(),f.camera.updateProjectionMatrix();var i=f.camera.projectionMatrix.clone(),r=t.worldCoordinate,o=e.worldCoordinate,a=t.reUnproject(),s=e.reUnproject(),l=t.viewCoordinate,h=e.viewCoordinate,c=o.x-r.x,u=o.y-r.y,p=Math.atan2(u,c),d=s.x-a.x,m=s.y-a.y,v=Math.atan2(m,d),g=(v-p+Math.PI)%(2*Math.PI)+2*Math.PI%(2*Math.PI)-Math.PI,y=new n.F;y.makeRotationZ(-g);var _=y.clone();_.multiply(t.snapHolderMatrix);var x=function(t,e,i){return t.elements[4*(e-1)+i-1]},b=x(i,1,1)*x(_,1,1)-l.x*x(i,3,4)*x(_,3,1),w=x(i,1,1)*x(_,1,2)-l.x*x(i,3,4)*x(_,3,2),E=x(i,1,1)*x(_,1,3)-l.x*x(i,3,4)*x(_,3,3),M=r.x*b+r.y*w+r.z*E,q=x(i,2,2)*x(_,2,1)-l.y*x(i,3,4)*x(_,3,1),A=x(i,2,2)*x(_,2,2)-l.y*x(i,3,4)*x(_,3,2),T=x(i,2,2)*x(_,2,3)-l.y*x(i,3,4)*x(_,3,3),P=r.x*q+r.y*A+r.z*T,S=x(i,1,1)*x(_,1,1)-h.x*x(i,3,4)*x(_,3,1),L=x(i,1,1)*x(_,1,2)-h.x*x(i,3,4)*x(_,3,2),C=x(i,1,1)*x(_,1,3)-h.x*x(i,3,4)*x(_,3,3),I=o.x*S+o.y*L+o.z*C,O=x(i,2,2)*x(_,2,1)-h.y*x(i,3,4)*x(_,3,1),R=x(i,2,2)*x(_,2,2)-h.y*x(i,3,4)*x(_,3,2),N=x(i,2,2)*x(_,2,3)-h.y*x(i,3,4)*x(_,3,3),B=o.x*O+o.y*R+o.z*N,D=Math.abs(S-b),z=Math.abs(L-w),k=Math.abs(C-E),F=Math.abs(S-q),U=Math.abs(L-A),j=Math.abs(C-T),V=Math.abs(O-b),G=Math.abs(R-w),H=Math.abs(N-E),W=Math.abs(O-q),X=Math.abs(R-A),Y=Math.abs(N-T),Z=Math.min(D+z+k,F+U+j),J=Math.min(V+G+H,W+X+Y);Z<J&&(S=O,L=R,C=N,I=B);var K=q*E-b*T,Q=A*E-w*T,$=P*E-M*T,tt=S*T-q*C,et=L*T-A*C,it=I*T-P*C,nt=(it*Q-$*et)/(tt*Q-K*et),rt=(it*K-$*tt)/(et*K-Q*tt),ot=A*b-w*q,at=L*q-A*S,st=((I*q-P*S)*ot-(P*b-M*q)*at)/((C*q-T*S)*ot-(T*b-E*q)*at),lt=_.clone();return lt.elements[12]=nt,lt.elements[13]=rt,lt.elements[14]=st,st>0?lt:null}(f.touchAnchor1,f.touchAnchor2);i&&function(t){f.orbit.updateMatrixWorld();var e=new n.o;e.setFromRotationMatrix(t,"ZYX");var i=t.elements[14]/Math.cos(e.x),r=e.z,o=new n._1(0,0,1);o.applyEuler(e),o.setLength(i);var a=new n._1;a.setFromMatrixPosition(t),a.sub(o),f.setPosition(a.x,a.y),f.setZoom(i),f.setRotation(r)}(i),f.orbit.updateMatrixWorld(),f.touchAnchor1.updateAnchorState(f.camera,t),f.touchAnchor2.updateAnchorState(f.camera,e)}function ut(t){if(!1!==f.enabled){var e,i,n,a;switch(e=f.canvas,M.offsetLeft=e.getBoundingClientRect().left,M.offsetTop=e.getBoundingClientRect().top,gt(t),t.touches.length){case 1:f.enablePedestal?(it(t.touches[0]),b=x.TOUCH_PEDESTAL):f.enableRotate&&(a=mt((n=t).x?n:E[0]),P.set(a.x,a.y),S.set(f.orbit.position.x,f.orbit.position.y),f.dispatchEvent(Z),f.dispatchEvent(U),b=x.TOUCH_PAN);break;case 2:if(!1===f.enableZoom)return;!function(){f.touchInputs=new o.a(E[0],E[1]);var t=E[0].x-E[1].x,e=E[0].y-E[1].y;_=f.getZoom();var i={x:E[0].x-t/2,y:E[0].y-e/2};I=mt(i),f.orbit.updateMatrixWorld(),f.touchAnchor1=new r.a(E[0],f.camera,g),f.touchAnchor2=new r.a(E[1],f.camera,g),S.set(f.orbit.position.x,f.orbit.position.y),f.dispatchEvent(K),f.dispatchEvent(X)}(),b=x.TOUCH_DOLLY;break;case 3:if(!1===f.enablePan)return;i=t,q.set(i.touches[1].clientX,i.touches[1].clientY),f.dispatchEvent($),f.dispatchEvent(V),b=x.TOUCH_TILT;break;default:b=x.NONE}x.NONE}}function pt(t){var e,i,n;if(!1!==f.enabled)switch(t.preventDefault(),t.stopPropagation(),gt(t),t.touches.length){case 3:if(!1===f.enableRotate)return;if(b!==x.TOUCH_TILT)return;n=t,A.set(n.touches[1].clientX,n.touches[1].clientY),T.subVectors(A,q),f.setTilt(f.getTilt()-T.y/f.rotateSpeed),q.copy(A);break;case 2:if(!1===f.enableZoom)return;if(b!==x.TOUCH_DOLLY)return;ct();break;case 1:f.enablePedestal&&b===x.TOUCH_PEDESTAL?nt(t.touches[0]):f.enablePan&&b===x.TOUCH_PAN&&(i=mt((e=t).x?e:E[0]),L.set(i.x,i.y),C.subVectors(L,P),f.setPosition(S.x-C.x,S.y-C.y),f.dispatchEvent(F));break;default:b=x.NONE}}function dt(t){!1!==f.enabled&&(b=x.NONE)}function ft(t){t.preventDefault()}function mt(e){y.setFromCamera(e,t);var i=y.intersectObject(g,!1)[0];return i?i.point:new n._1}function vt(t){var e,i=(f.canvas,{x:(e=t).offsetX,y:e.offsetY});return w.x=i.x/f.canvas.width*u.resolutionScale*2-1,w.y=-i.y/f.canvas.height*u.resolutionScale*2+1,w}function gt(t){E=[];for(var e=0,i=t.touches.length;e<i;e++){var r=t.touches[e],o=(f.canvas,{x:(a=r).clientX-M.offsetLeft,y:a.clientY-M.offsetTop});E.push(new n._0(o.x/f.canvas.width*u.resolutionScale*2-1,-o.y/f.canvas.height*u.resolutionScale*2+1))}var a;w=E[0]}this.animateCamera=function(t,e,i,n,r){var o=Object.assign({mode:c},r),a={},p={},d=f.getPosition();null!=t.position&&(void 0!==t.position.x&&(a.x=d.x,p.x=t.position.x),void 0!==t.position.y&&(a.y=d.y,p.y=t.position.y),void 0!==t.position.z&&(a.z=d.z,p.z=t.position.z)),void 0!==t.zoom&&(a.zoom=Math.min(Math.max(f.getZoom(),f.getZoomScaledMin()),f.getZoomScaledMax()),f.viewState===s.a.MULTI_FLOOR?p.zoom=t.zoom:p.zoom=Math.min(Math.max(t.zoom,f.getZoomScaledMin()),f.getZoomScaledMax())),void 0!==t.rotation&&(a.rotation=f.getRotation(),p.rotation=t.rotation%(2*Math.PI)),void 0!==t.tilt&&(a.tilt=f.getTilt(),f.viewState===s.a.MULTI_FLOOR?p.tilt=t.tilt:p.tilt=Math.max(Math.min(t.tilt,f.maxTilt),f.minTilt));var m=new l.Tween(a).to(p,e).onUpdate(function(t){f.setMulti({x:t.x,y:t.y,z:t.z},t.zoom,t.rotation,t.tilt)}).onComplete(function(){n&&n(),et(m)}).onStart(function(){b!=x.MULTI&&(b=x.MULTI,f.dispatchEvent(X)),f.dispatchEvent(F)}),v=Array.from(tt),g=v[v.length-1],y=!1;return null!=g&&(o.mode===h?(y=!0,g.chain(m)):(et(g),g=null)),tt.add(m),i?m.easing(i):m.easing(l.Easing.Quadratic.In),t.doNotAutoStart||y||(m.start(),u.tryRendering()),m._mMapAnimation=!0,m},this.setMulti=function(t,e,i,n){b==x.NONE&&f.dispatchEvent(X),null!=t&&(void 0===t.x||isNaN(t.x)||(f.orbit.position.x=t.x),void 0===t.y||isNaN(t.y)||(f.orbit.position.y=t.y),void 0===t.z||isNaN(t.z)||(f.orbit.position.z=t.z)),void 0===e||isNaN(e)||(f.camera.position.z=Math.min(Math.max(e,f.getZoomScaledMin()),f.getZoomScaledMax()),f.viewState===s.a.MULTI_FLOOR?e>1e4&&(f.camera.near=e-1e4,f.camera.far=e+1e4):(f.camera.near=e/100,f.camera.far=100*e),f.camera.updateProjectionMatrix()),void 0===i||isNaN(i)||(f.orbit.rotation.z=i),void 0===n||isNaN(n)||(f.elevation.rotation.x=Math.max(Math.min(n,f.maxTilt),f.minTilt)),f.dispatchEvent(F),b==x.NONE&&f.dispatchEvent(Y)},this.getProjectionScaleFactor=a.n,this.postRender=function(){b!=x.PAN&&b!=x.TOUCH_PAN||(y.setFromCamera(w,t),(p=y.intersectObject(g,!1)[0])&&(P.set(p.point.x,p.point.y),S.set(f.orbit.position.x,f.orbit.position.y))),b==x.WHEEL_ZOOM&&B&&(B=!1,_=f.getZoom(),I=mt(w),S.set(f.orbit.position.x,f.orbit.position.y)),b==x.MULTI&&0==l.getAll().some(function(t){return t._mMapAnimation})&&(b=x.NONE,f.dispatchEvent(Y))},this.update=function(){l.update(),z>0&&b==x.WHEEL_ZOOM&&D.getElapsedTime()-z>.2&&(z=0,b=x.NONE,f.dispatchEvent(W),f.dispatchEvent(Q),f.canvas.removeEventListener("mousemove",st,!1))},this.dispose=function(){f.canvas.removeEventListener("contextmenu",ft,!1),f.canvas.removeEventListener("mousedown",at,!1),f.canvas.removeEventListener("mousewheel",ht,!1),f.canvas.removeEventListener("MozMousePixelScroll",ht,!1),f.canvas.removeEventListener("touchstart",ut,!1),f.canvas.removeEventListener("touchend",dt,!1),f.canvas.removeEventListener("touchmove",pt,!1),f.canvas.removeEventListener("mousemove",st,!1),window.removeEventListener("mouseup",lt,!1),window.removeEventListener("mouseout",lt,!1),i.remove(g)},this.canvas.addEventListener("contextmenu",ft,!1),this.canvas.addEventListener("mousedown",at,!1),this.canvas.addEventListener("mousewheel",ht,!1),this.canvas.addEventListener("MozMousePixelScroll",ht,!1),this.canvas.addEventListener("touchstart",ut,!1),this.canvas.addEventListener("touchend",dt,!1),this.canvas.addEventListener("touchmove",pt,!1)}},function(t,e,i){"use strict";var n=i(3);e.a=function(t,e,i){this.touch=t,this.camera=e,this.cameraPlane=i,this.viewCoordinate={x:t.x,y:t.y},this.camera.updateMatrixWorld(),this.camera.updateMatrix(),this.snapHolderMatrix=this.camera.matrixWorld.clone(),this.snapCamera=this.camera.clone(),this.snapshotCameraState=function(){this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraPosition=this.camera.position;var t=new n._1(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster=this.raycaster||new n.R,this.raycaster.setFromCamera(t,this.snapCamera);var e=this.raycaster.intersectObject(this.cameraPlane,!1);this.worldCoordinate=e&&e[0]&&e[0].point,this.snapshotted=!0},this.updateAnchorState=function(t,e){this.camera=t,this.snapCamera=t.clone(),this.snapHolderMatrix=t.matrixWorld.clone(),this.updateViewCoordinate(e),this.snapshotCameraState()},this.updateViewCoordinate=function(t){this.viewCoordinate={x:t.x,y:t.y}},this.reUnproject=function(){var t=new n._1(this.viewCoordinate.x,this.viewCoordinate.y,1);return this.raycaster.setFromCamera(t,this.snapCamera),this.raycaster.intersectObject(this.cameraPlane,!1)[0].point},this.snapshotCameraState()}},function(t,e,i){"use strict";function n(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function r(t,e){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function o(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}e.a=function(t,e){this.input1=t,this.input2=e,this.lastAngle=n(t,e),this.lastDistance=r(t,e),this.first=t,this.second=e,this.update=function(t,e){var i=r(t,e);this.input1=t,this.input2=e;var a=n(t,e);this.lastAngle=a,this.lastDistance=i,this.first=o(this.first,t),this.second=o(this.second,e)}}},function(t,e){t.exports="uniform vec2 uvScale;\nuniform float vertexes;\nuniform float complete;\nattribute float vertexIndex;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pulseBulge;\n//varying vec2 vUv;\n//varying float opacity;\nvarying float location;\nvoid main() {\n\t//vUv = uv;\n\n\tfloat offset = vertexes * 0.1;\n\tlocation = (vertexIndex + offset) / (vertexes + offset);\n\n\tif (pulseBulge) {\n\t\tfloat pulseLevel = 1.0 - smoothstep(0.0, pulseLength, abs(location - pulse));\n\t\tvec3 newPosition = position + normal * pulseLevel * 10.0;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0);\n\t} else {\n\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n}\n"},function(t,e){t.exports="uniform float complete;\nuniform vec2 resolution;\nuniform vec3 color;\nvarying vec2 vUv;\n//varying float opacity;\nuniform vec3 pulseColor;\nuniform float pulse;\nuniform float pulseLength;\nvarying float location;\nvoid main(void) {\n\t//vec2 position = vUv / resolution.xy;\n\t//vec2 position = (gl_FragCoord.xy / resolution.xy);\n\t// float red = abs(sin(position.x * position.y + time / 5.0)) + 0.5;\n\t// float green = abs(sin(position.x * position.y + time / 4.0));\n\t// float blue = abs(sin(position.x * position.y + time / 3.0));\n\t// float alpha = abs(sin(position.x * position.y + time / 5.0));\n\tfloat isComplete = location - complete;\n\tfloat opacity = mix(0.0, 1.0, 1.0 - isComplete * 10.0);\n\n\tfloat pulseLevel = 1.0 - smoothstep(0.0, pulseLength, abs(location - pulse));\n\tgl_FragColor = vec4(mix(color.r, pulseColor.r, pulseLevel), mix(color.g, pulseColor.g, pulseLevel), mix(color.b, pulseColor.b, pulseLevel), opacity);\n\t//gl_FragColor = vec4( vec3( vUv, 0. ), 1. );\n}\n"},function(t,e,i){"use strict";var n=i(89),r=i.n(n),o=i(16),a=function(t){t.stopPropagation()};e.a=function(t,e){Object.assign(this,o.a.prototype);var i=this,n=document.createElement("div"),s=void 0;if(i.div=n,i._mMapId=e.map?e.map.id||e.map:t.currentMap,i._mMarkerBuffer=e.markerBuffer||2,i._mLockToAnchor=1==e.lockToAnchor,i._mIgnoreCollisions=1==e.ignoreCollisions,i._mRotateWithCamera=1==e.rotateWithCamera,i._mIntitialRotation=e.rotation?e.rotation:0,i.m_translateX=0,i.m_translateY=0,i.m_rotateZ=0,n.className=e.className||e.class,n.innerHTML=e.html,e.position&&(n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.willChange="transform",e.polygon)){var l=t.getPositionPolygon(e.polygon);l&&(e.position.z=l.z)}n.addEventListener("mousedown",a),i._oldPointerEvents=n.style.pointerEvents,i._mPosition=e.position,i._mOriginalPosition=e.position,i._mProjectedPosition=[0,0],this.destroy=function(){this.publish("destroy"),n.removeEventListener("mousedown",a);for(var t in this.subscribers)for(var e=this.subscribers[t],r=e.length-1;r>=0;--r)i.off(t,e[r]);this.__alive=!1},this.isColliding=function(){return!i._mIgnoreCollisions&&i._mShadowElement._mNumCollisions>0},this.show=function(){1==i._mHidden&&(i._mHidden=!1,i._mAnchor&&r.a.vec2.copy(i._mShadowElement.position,i._mAnchor.position),n.style.opacity=i._oldOpacity,n.style.pointerEvents=i._oldPointerEvents)},this.hide=function(){1!=i._mHidden&&(i._mHidden=!0,i._oldOpacity=n.style.opacity,n.style.opacity=0,i._oldPointerEvents=n.style.pointerEvents,n.style.pointerEvents="none")},this.setCollisionAreas=function(t){null==s?(s=e.collisionEngine.add({hitAreas:t})).on("collision",i.publishCollisions):s.updateHitAreas(t)},this.setPosition=function(e){e&&e.x&&e.y&&(i._mPosition=e,t.tryRendering())},this.setTransform=function(t){i.m_translateX=t.x,i.m_translateY=t.y,i.m_rotateZ=t.rotateZ;var e="translate("+t.x+"px, "+t.y+"px) rotate("+t.rotateZ+"rad)";null!=s&&s.update(i.m_translateX,i.m_translateY),i.div.style.transform=e,i.publish("update-position",{x:t.x,y:t.y,rotateZ:t.rotateZ})},this.publishCollisions=function(t){i.publish("collision",t)},this.addEventListener=function(t,e){i.div.addEventListener(t,e)},this.isVisible=function(){return!i._mHidden},this.getMap=function(e){return"id"===e?i._mMapId:t.venue.maps.find(function(t){return t.id===i._mMapId})}}},function(t,e,i){"use strict";var n=i(3),r=i(5),o=i(45),a=i(118);e.a=function(t,e,i,s,l,h,c,u){var p=t.polygonId||Object(r.m)(t.polygon,e.polygons),d=Object(r.l)(t.polygon,e.polygons),f=i.getMapScale()||1,m=t.canvasBounds||d.canvasBounds,v=Number(t.height)||null,g=t.stateText?" ("+t.stateText+")":"",y=t.shortText||t.text,_=t.text,x=(t.margin||2)*f,b=(t.heightMargin||.5)*f,w=void 0==t.multiline||t.multiline,E=t.color||u.colors.text||0,M=(t.fontSize||12)/8,q=(t.size||M)*f,A=t.font||s,T=t.scaleMin||.25,P=t.scaleStep>0?t.scaleStep:.25,S=t.hoverLabelMode3D||o.a.MODES.ALL;this.hoverLabelClass=t.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=S==o.a.MODES.ALL||S==o.a.MODES.NO_TEXT_LABEL_ONLY;var L,C,I,O,R=S==o.a.MODES.ALL||S==o.a.MODES.NO_TEXT_LABEL_ONLY,N=this,B=!1,D=!1,z=0,k=!1;null==(I=c[E])&&(I=new n.H({color:E}),c[E]=I),this.invalid=!1,this.message="",i.textObjects.push(N),this.create=function(){if(N.invalid=!0,N.showHoverLabel=S==o.a.MODES.ALL,!k){if(null==m)return N.invalid=!0,N.message="No Canvas Bounds. Can't draw text '"+y+"'",void(N.showHoverLabel=R);A instanceof n.u==0&&(console.error("Invalid font for '"+y+"'. Make sure you provide a Mappedin.Font or Font object. Using default instead."),A=s);var t,e,r,a=[y+g,y],h=A.data.glyphs[" "].ha/(A.data.resolution/q),c=(A.data.ascender-A.data.descender)/(A.data.resolution/q);if(a.forEach(function(i){if(N.invalid){for(var n=(i=(i=i.replace(A._mInvalidCharacters,"")).trim()).split(" "),o=m.maxWidth-2*x,a=m.maxHeight-2*b,s=(1-T)/P,l=n.map(function(t){return{word:t,width:t.split("").reduce(function(t,e){return A.data.glyphs[e].ha+t},0)/(A.data.resolution/q)}}),u=0,p=0,d=l.length;p<d;p++){var f=l[p].width,v=Math.ceil((f-o)/(f*P));u=Math.max(v,u)}t:for(e=u;e<=s;e++){r=1-e*P;var g=l[0].width*r;t=[{text:l[0].word,scaledWidth:g}];for(var y=1;y<l.length;y++){var _=l[y],E=(_.width+h)*r;if(g+E<o)t[t.length-1].text+=" "+_.word,t[t.length-1].scaledWidth+=E,g+=E;else{if(!w)continue t;t[t.length-1].scaledWidth=g,g=_.width*r,t.push({text:_.word,scaledWidth:g})}}if(t.length*c*r<=a){N.invalid=!1;break}}}}),N.invalid)return N.message="Could not draw '"+y+"' on "+d.id+": Too small",void(N.showHoverLabel=R);A._cache||(A._cache={},A._cacheDefaultSize=q);var _=new n.w,E=0,M=0;t.forEach(function(t){E=-t.scaledWidth/2,t.text.split("").forEach(function(t){A._cache[t]||(A._cache[t]=new n.r(A.generateShapes(t,A._cacheDefaultSize),{curveSegments:1,bevelThickness:0,bevelSize:0,bevelEnabled:!1,amount:1/12*f}));var e=A._cache[t],i=r*(q/A._cacheDefaultSize);1!==i&&e.scale(i,i,1),e.translate(E,M,0),_.merge(e),e.translate(-E,-M,0),1!==i&&e.scale(1/i,1/i,1),E+=A.data.glyphs[t].ha/(A.data.resolution/q)*r}),M-=c*r}),_.center(),(O=new n.G(_,I)).geometry.computeBoundingBox();var F=O.geometry.boundingBox;if((C=new n.L).add(O),"left"==m.align?C.translateX((F.max.x-F.min.x)/2+x):"right"==m.align?C.translateX(-(F.max.x-F.min.x)/2-x):"center"==m.align&&C.translateX(m.maxWidth/2),(L=new n.L).add(C),null==v)if(l[p]){var U=l[p];U.geometry.boundingBox||U.geometry.computeBoundingBox(),v=U.geometry.boundingBox.max.z}else v=0;var j=i.mapClass;L.translateX(m.x-j.width/2),L.translateY(-m.y+j.height/2),L.translateZ(v),z=-m.rotation*Math.PI/180,L.rotation.z=z,L.updateMatrix(),D&&(C.visible=!1),B=!0,N.flipIfNeeded(u.controls.getRotation()),i.add(L),u.tryRendering()}};this.flipIfNeeded=function(t){var e=(z-t)%a.c;B&&(e>a.a&&e<a.b||e<-a.a&&e>-a.b)&&(z=(z+Math.PI)%a.c,L.rotation.z=z,C.position.x=-C.position.x)},this.removeSelf=function(t){O&&O.destroy&&O.destroy(),C&&C.destroy&&C.destroy(),L&&L.destroy&&L.destroy(),B?t||(this.mapObject.textObjects=this.mapObject.textObjects.filter(function(t){return t!=N}),Object.keys(h).forEach(function(t){h[t]==self&&delete h[t]})):k=!0},this.setColor=function(t){null==(I=c[t])&&(I=new n.H({color:t}),c[t]=I),B&&(O.material=I,u.tryRendering())},this.hide=function(){B&&C?C.visible=!1:D=!0},this.show=function(){B&&C?C.visible=!0:D=!1},this.clearColor=function(){this.setColor(E)},this.toString=function(){return _}}},function(t,e,i){"use strict";e.a=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw Error("maxHeight is required");var n="string"==typeof t?document.querySelectorAll(t):t;if(n){var r=i.character||"â€¦",o=i.classname||"js-shave",a="boolean"!=typeof i.spaces||i.spaces,s='<span class="js-shave-char">'.concat(r,"</span>");"length"in n||(n=[n]);for(var l=0;l<n.length;l+=1){var h=n[l],c=h.style,u=h.querySelector(".".concat(o)),p=void 0===h.textContent?"innerText":"textContent";u&&(h.removeChild(h.querySelector(".js-shave-char")),h[p]=h[p]);var d=h[p],f=a?d.split(" "):d;if(!(f.length<2)){var m=c.height;c.height="auto";var v=c.maxHeight;if(c.maxHeight="none",h.offsetHeight<=e)c.height=m,c.maxHeight=v;else{for(var g=f.length-1,y=0,_=void 0;y<g;)_=y+g+1>>1,h[p]=a?f.slice(0,_).join(" "):f.slice(0,_),h.insertAdjacentHTML("beforeend",s),h.offsetHeight>e?g=a?_-1:_-2:y=_;h[p]=a?f.slice(0,g).join(" "):f.slice(0,g),h.insertAdjacentHTML("beforeend",s);var x=a?" ".concat(f.slice(g).join(" ")):f.slice(g);h.insertAdjacentHTML("beforeend",'<span class="'.concat(o,'" style="display:none;">').concat(x,"</span>")),c.height=m,c.maxHeight=v}}}}}},function(t,e,i){var n=i(225);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0};i(65)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(64)(!1)).push([t.i,".mappedin-pin-marker {\n  transition: opacity 150ms linear, transform 0ms linear;\n  position: absolute;\n  will-change: transform, opacity;\n  border-radius: 50%;\n}\n\n.mappedin-pin-marker-text {\n  text-shadow: 1px 1px 0px #FFFFFF, -1px -1px 0px #FFFFFF, 1px -1px 0px #FFFFFF, -1px 1px 0px #FFFFFF;\n  font-family: Helvetica, Arial, sans-serif;\n  font-weight: 500;\n  position: absolute;\n  pointer-events: none;\n  padding: 1px;\n  will-change: transform;\n}\n",""])},function(t,e,i){"use strict";i.d(e,"a",function(){return y}),i.d(e,"b",function(){return _});var n=i(3),r=i(5),o=i(45),a=i(227),s=i.n(a),l=i(228),h=i.n(l),c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=2,d=.5,f=64,m=function(){function t(){u(this,t),this.x=0,this.y=0,this.width=0,this.height=0,this.layer=null,this.index=null}return c(t,[{key:"layout",value:function(t,e,i,n,r,o){var a=this.canvasBounds.rotation*Math.PI/180,s=this.width*this.pixelsPerMu,l=this.height*this.pixelsPerMu,h=void 0;"left"==this.canvasBounds.align?h=this.margin:"right"==this.canvasBounds.align?h=this.canvasBounds.maxWidth-s-this.margin:"center"==this.canvasBound.align&&(h=(this.canvasBounds.maxWidth-s-this.margin)/2);var c=h*Math.cos(a),u=-h*Math.sin(a),p=this.index;e.setXYZ(p,this.canvasBounds.x-t.width/2+c,-this.canvasBounds.y+t.height/2+u,this.z+.1),i.setXY(p,s,l),n.setX(p,a);var d=this.layer.canvas;r.setXYZW(p,this.x/d.width,1-this.y/d.height,this.width/d.width,this.height/d.height),o.setXYZ(p,this.color.r,this.color.g,this.color.b),e.needsUpdate=!0,i.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0,o.needsUpdate=!0}}]),t}(),v=function(){function t(e,i,n,r){u(this,t),this.x=e,this.y=i,this.width=n,this.height=r}return c(t,[{key:"leftOverSpace",value:function(t){return this.width<t.width||this.height<t.height?null:this.height*(this.width-t.width)+this.width*(this.height-t.height)}},{key:"split",value:function(e,i,n){e.x=this.x,e.y=this.y,this.width-e.height<16&&this.height-e.height<16?i.splice(n,1):this.width===e.width?i.splice(n,1,new t(this.x,this.y+e.height,this.width,this.height-e.height)):this.height===e.height?i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,this.height)):i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,e.height),new t(this.x,this.y+e.height,this.width,this.height-e.height))}}]),t}(),g=function(){function t(e,i,r,o){u(this,t);for(var a=5;Math.pow(2,a)<o;)a+=1;for(o=Math.pow(2,a),a=10;Math.pow(2,a)<r;)a+=1;r=Math.pow(2,a),this.atlas=e,this.map=i,this.canvas=document.createElement("canvas"),this.canvas.width=r,this.canvas.height=o,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.spaces=[new v(0,0,this.canvas.width,this.canvas.height)],this.free=[],this.labels=[],this.count=f;var l=new Float32Array(3*this.count),c=new Float32Array(2*this.count),p=new Float32Array(this.count),d=new Float32Array(4*this.count),m=new Float32Array(3*this.count);this.uv=new n.z(d,4,!1,1),this.uv.setArray(d),this.uv.needsUpdate=!0,this.origin=new n.z(l,3,!1,1),this.origin.setArray(l),this.origin.needsUpdate=!0,this.size=new n.z(c,2,!1,1),this.size.setArray(c),this.size.needsUpdate=!0,this.rotation=new n.z(p,1,!1,1),this.rotation.setArray(p),this.rotation.needsUpdate=!0,this.color=new n.z(m,3,!0,1),this.color.setArray(m),this.color.needsUpdate=!0;for(var g=0;g<this.count;g++)this.zero(g);var y=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]);this.geometry=new n.A,this.geometry.setIndex([0,3,1,3,2,1]),this.geometry.addAttribute("position",new n.e(y,3)),this.geometry.addAttribute("size",this.size),this.geometry.addAttribute("origin",this.origin),this.geometry.addAttribute("rotation",this.rotation),this.geometry.addAttribute("uv",this.uv),this.geometry.addAttribute("color",this.color),this.texture=new n.g(this.canvas),this.texture.anisotropy=16,this.material=new n.Q,this.material.vertexShader=h.a,this.material.fragmentShader=s.a,this.material.uniforms={textureLabel:{value:this.texture}},this.material.transparent=!0,this.mesh=new n.G(this.geometry,this.material),this.obj=new n.L,this.obj.add(this.mesh),this.obj.frustumCulled=!1,this.mesh.frustumCulled=!1,this.map.add(this.obj)}return c(t,[{key:"space",value:function(){return this.spaces.map(function(t){return t.width*t.height}).reduce(function(t,e){return t+e})}},{key:"zero",value:function(t){this.origin.array[3*t+0]=0,this.origin.array[3*t+1]=0,this.origin.array[3*t+2]=0,this.size.array[2*t+0]=0,this.size.array[2*t+1]=0,this.rotation.array[t]=0,this.uv.array[4*t+0]=0,this.uv.array[4*t+1]=0,this.uv.array[4*t+2]=0,this.uv.array[4*t+3]=0,this.color.array[3*t+0]=0,this.color.array[3*t+1]=0,this.color.array[3*t+2]=0,this.origin.needsUpdate=!0,this.size.needsUpdate=!0,this.rotation.needsUpdate=!0,this.uv.needsUpdate=!0,this.color.needsUpdate=!0}},{key:"findSpace",value:function(t){if(0!=this.free.length&&this.labels.length==this.count)return!1;for(var e=-1,i=0;i<this.spaces.length;i++){var n=this.spaces[i].leftOverSpace(t);null!==n&&((-1===e||this.spaces[i].leftOverSpace(t)<n)&&(e=i))}return-1!==e&&(this.spaces[e].split(t,this.spaces,e),t.layer=this,0===this.free.length?(t.index=this.labels.length,this.labels.push(t)):(t.index=this.free.pop(),this.labels[t.index]=t)),-1!=e}},{key:"remove",value:function(t){if(void 0!==t.index){this.zero(t.index),this.context.clearRect(t.x,t.y,t.width,t.height),this.spaces.push(new v(t.x,t.y,t.width,t.height)),this.free.push(t.index),this.labels[t.index]=null;var e=!0,i=!0,n=!1,r=void 0;try{for(var o,a=this.labels[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;if(!(e=e&&null!=s))break}}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}e&&(this.cleanup(),this.atlas.removeLayer(this))}}},{key:"render",value:function(t){this.context.save(),this.context.rect(t.x+1,t.y+1,t.width-2,t.height-2),this.context.clip(),this.context.font=t.size+"px "+t.font;var e=!0,i=!1,n=void 0;try{for(var r,o=t.lines[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;this.context.fillText(a.text,a.x+t.x+4,a.y+t.y+a.height+4)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.texture.needsUpdate=!0,this.context.restore()}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.texture.dispose()}}]),t}(),y=function(){function t(){u(this,t),this.layers=[],this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return c(t,[{key:"addLabel",value:function(t,e,i,n,r,o){var a=0,s=0,l=!0,h=!1,c=void 0;try{for(var u,p=e[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var d=u.value;s=Math.max(Math.ceil(d.width+d.x),s),a=Math.max(Math.ceil(d.height+d.y),a)}}catch(t){h=!0,c=t}finally{try{!l&&p.return&&p.return()}finally{if(h)throw c}}var f,v=new m;v.map=t,v.width=s+8,v.height=a+8,v.lines=e,v.font=i,v.size=n,v.canvasBounds=r.canvasBounds,v.margin=r.margin,v.heightMargin=r.heightMargin,v.pixelsPerMu=o,v.z=r.height,v.view=r,v.color=r.color;var y=!0,_=!1,x=void 0;try{for(var b,w=this.layers[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){if((f=b.value).map===t){if(f.findSpace(v))break;f=null}else f=null}}catch(t){_=!0,x=t}finally{try{!y&&w.return&&w.return()}finally{if(_)throw x}}if(null==f){if(f=new g(this,t,v.width,v.height),this.layers.push(f),!f.findSpace(v))return;this.layers.sort(function(t,e){return e.space()-t.space()})}return f.render(v),v.layout(t.mapClass,f.origin,f.size,f.rotation,f.uv,f.color),v.layer=f,v}},{key:"removeLayer",value:function(t){var e=this.layers.indexOf(t);-1!=e&&this.layers.splice(e,1)}},{key:"measure",value:function(t,e,i){return this.context.font=i+"px "+e,this.context.measureText(t)}},{key:"dispose",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,r=this.layers[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){n.value.dispose()}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}}]),t}(),_=function(){function t(e,i,a,s,l,h,c,f,m){u(this,t);var v=Object(r.l)(e.polygon,i.polygons);this.text=(e.shortText||e.text).trim(),this.stateText=e.stateText?" ("+e.stateText+")":"",this.font=e.font||s,this.atlas=m,this.canvasBounds=e.canvasBounds||v.canvasBounds,this.mapScale=a.getMapScale()||1,this.margin=(e.margin||p)*this.mapScale,this.heightMargin=(e.heightMargin||d)*this.mapScale,this.scaleMin=e.scaleMin||.25,this.scaleStep=e.scaleStep>0?e.scaleStep:.25,this.multiline=void 0==e.multiline||e.multiline,this.height=Number(e.height)||null,this.polygonMeshesById=l,this.polyId=e.polygonId||Object(r.m)(e.polygon,i.polygons),this.map=a,this.color=new n.k(e.color||f.colors.text||0),this.baseColor=this.color,this.hideOnCreate=!1,this.hoverLabelText=e.text.trim(),this.hoverLabelMode=e.hoverLabelMode3D||o.a.MODES.ALL,this.hoverLabelClass=e.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=this.hoverLabelMode==o.a.MODES.ALL||this.hoverLabelMode==o.a.MODES.NO_TEXT_LABEL_ONLY,this.hoverIfLabelFails=this.hoverLabelMode==o.a.MODES.ALL||this.hoverLabelMode==o.a.MODES.NO_TEXT_LABEL_ONLY}return c(t,[{key:"create",value:function(){var t=this;if(null==t.canvasBounds)return t.invalid=!0,t.message="No Canvas Bounds. Can't draw text '"+t.text+"'",void(t.showHoverLabel=t.hoverIfLabelFails);t.showHoverLabel=this.hoverLabelMode==o.a.MODES.ALL;var e=1/28*this.mapScale,i=28/this.mapScale,n=[this.text];this.stateText.length&&n.unshift(this.text+this.stateText);var r=!0,a=!1,s=void 0;try{for(var l,h=n[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){for(var c,u,p,d=l.value.split(" ").map(function(e){return{width:t.atlas.measure(e,t.font,56).width,word:e}}),f=(this.canvasBounds.maxWidth-2*this.margin)*i,m=(this.canvasBounds.maxHeight-2*this.heightMargin)*i,v=(1-this.scaleMin)/this.scaleStep,g=0,y=this.atlas.measure(" ",this.font,56).width,_=b("56px "+this.font),x=0,w=d.length;x<w;x++){var E=d[x].width,M=Math.ceil((E-f)/(E*this.scaleStep));g=Math.max(M,g)}if(null==this.height)if(this.polygonMeshesById[this.polyId]){var q=this.polygonMeshesById[this.polyId];q.geometry.boundingBox||q.geometry.computeBoundingBox(),this.height=q.geometry.boundingBox.max.z}else this.height=0;var A=this.scaleStep;t:for(u=g;u<=v;u++){p=1-u*A;var T=d[0].width*p;c=[{text:d[0].word,width:T,height:_*p,x:0,y:0}];for(var P=1;P<d.length;P++){var S=d[P],L=(S.width+y)*p;if(T+L<f)c[c.length-1].text+=" "+S.word,c[c.length-1].width+=L,T+=L;else{if(!this.multiline)continue t;c[c.length-1].width=T,T=S.width*p,c.push({text:S.word,width:T,height:_*p,x:0,y:c[c.length-1].height+c[c.length-1].y})}}if(c.length*_*p<=m){this.invalid=!1;break}}if(0==this.invalid)break}}catch(t){a=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(a)throw s}}if(0==this.invalid){var C=c.map(function(t){return Math.ceil(t.width)}).reduce(function(t,e){return Math.max(t,e)}),I=!0,O=!1,R=void 0;try{for(var N,B=c[Symbol.iterator]();!(I=(N=B.next()).done);I=!0){var D=N.value;D.x=(C-D.width)/2}}catch(t){O=!0,R=t}finally{try{!I&&B.return&&B.return()}finally{if(O)throw R}}this.label=this.atlas.addLabel(this.map,c,this.font,56*p,this,e)}this.map.textObjects.push(this)}},{key:"flipIfNeeded",value:function(t){}},{key:"removeSelf",value:function(t){null!=this.label&&(this.label.layer.remove(this.label),this.label=null)}},{key:"setColor",value:function(t){this.color=new n.k(t),void 0!=this.label&&void 0!=this.label.layer&&(this.label.color=this.color,this.label.layout(this.map.mapClass,this.label.layer.origin,this.label.layer.size,this.label.layer.rotation,this.label.layer.uv,this.label.layer.color))}},{key:"clearColor",value:function(){this.setColor(this.baseColor)}},{key:"hide",value:function(){this.label?this.label.layer.zero(this.label.index):this.hideOnCreate=!0}},{key:"show",value:function(){if(this.label){var t=this.label.layer,e=this.map;this.label.layout(e.mapClass,t.origin,t.size,t.rotation,t.uv,t.color)}else this.hideOnCreate=!1}},{key:"toString",value:function(){return this.hoverLabelText}}]),t}(),x=new Map,b=function(t){var e=x[t];if(void 0!=e)return e;var i=document.createElement("span");i.textContent="Hg",i.style.font=t;var n=document.createElement("div");n.style.cssText="display: inline-block; width: 1px; height: 0px;";var r=document.createElement("div");r.append(i,n),document.body.append(r);try{var o=i.getBoundingClientRect()}finally{r.remove()}return void 0!=o.height&&(x[t]=o.height,e=o.height),e}},function(t,e){t.exports="precision mediump float;\n\nuniform sampler2D textureLabel;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tgl_FragColor = texture2D(textureLabel, vUV);\n\tgl_FragColor.rgb = vColor;\n}"},function(t,e){t.exports="attribute vec2 position;\nattribute vec3 origin;\nattribute vec2 size;\nattribute float rotation;\nattribute vec4 uv;\nattribute vec3 color;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tvec4 mapDirectionVector = vec4(0, 1, 0, 0) * viewMatrix * modelMatrix;\n\tfloat mapDirection = atan(mapDirectionVector.y, mapDirectionVector.x);\n\n\tfloat cosRotation = cos(rotation);\n\tfloat sinRotation = sin(rotation);\n\n\tmat4 rotationMatrix = mat4(\n\t\tvec4(cosRotation, -sinRotation, 0.0, 0.0),\n\t\tvec4(sinRotation, cosRotation, 0.0, 0.0),\n\t\tvec4(0.0, 0.0, 1.0, 0.0),\n\t\tvec4(0.0, 0.0, 0.0, 1.0)\n\t);\n\n\tmat4 translate = mat4(\n\t\tvec4(1, 0, 0, 0),\n\t\tvec4(0, 1, 0, 0),\n\t\tvec4(0, 0, 1, 0),\n\t\tvec4(origin, 1)\n\t);\n\n\tgl_Position = projectionMatrix *\n\t              viewMatrix *\n\t              modelMatrix *\n\t              translate *\n\t              rotationMatrix *\n\t              (vec4(position * size - vec2(0, size.y / 2.0), 0, 1));\n\n\n\tvec2 uvStart = uv.xy;\n\tvec2 uvSize = uv.zw;\n\n\tif (sin(mapDirection + rotation) > 0.0) {\n\t\tvUV = position * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\n\t} else {\n\t\tvUV = (vec2(1, 1) - position) * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\t\t\n\t}\n\n\tvColor = color;\n} "},function(t,e,i){"use strict";var n=i(3),r=i(120),o=i(16),a=i(239),s=i(5),l=i(119),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function c(t){return t.sort(function(t,e){return e.mapClass.elevation-t.mapClass.elevation})}var u=function(t,e){var i=t.min,r=t.max,o=t.margin;o||(o=1);var a=e.boundingBox;a||(a=(new n.b).setFromObject(e.object),e.boundingBox=a);var s={min:{},max:{},margin:o};s.min.x=Math.min(i.x,a.min.x*o),s.max.x=Math.max(r.x,a.max.x*o),s.min.y=Math.min(i.y,a.min.y*o),s.max.y=Math.max(r.y,a.max.y*o);var l=(s.max.x+s.min.x)/2,h=(s.max.y+s.min.y)/2,c=Math.sqrt(Math.pow(s.max.x-l,2)+Math.pow(s.max.y-h,2));if(s.radius=c,"function"==typeof t.getCenter){var u=new n._1;s.center=t.getCenter(u)}else s.center=t.center;return s.margin=o,s},p=function(){function t(e,i,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mapObjects=new Map,this.currentMap=void 0,this.object=new n.L,this._showCount=0,this._mapObjectsSortedByElevationDirty=!1,this.expanded=!1,Object.assign(this,o.a.prototype),this.polygonMeshesById=e,this.markerWorld=i,this.mapView=a,this.renderer=r,this._loadMode=s.mode,this.addMap=this.addMap.bind(this),this.setMap=this.setMap.bind(this),this.removeMap=this.removeMap.bind(this),this.removeAllMaps=this.removeAllMaps.bind(this),this.loadMaps=this.loadMaps.bind(this),this.expandMaps=this.expandMaps.bind(this),this.contractMaps=this.contractMaps.bind(this),this.expandPanBounds=this.expandPanBounds.bind(this)}return h(t,[{key:"expandPanBounds",value:function(t){this.mapView.controls.panBounds=u(t,this.currentMap)}},{key:"addMap",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._mapObjectsSortedByElevationDirty=!0;var n=new r.b(t,this.polygonMeshesById,this.markerWorld,this._showCount,this.mapView,this._loadMode);return n.on("flippablesNeedUpdating",function(t){return e.publish("flippablesNeedUpdating",t)}),n.on("render",function(t){return e.publish("render",t)}),n.on("updateMarkerPosition",function(t){return e.publish("updateMarkerPosition",t)}),this.mapObjects.set(t.id,n),null==this.currentMap?(this.setMap(t),n.load().then(i)):Promise.resolve().then(i)}},{key:"setMap",value:function(t,e){var i=this;return this.setMapCallbacks||(this.setMapCallbacks=[]),e&&this.setMapCallbacks.push(e),new Promise(function(e,n){var r=Object(s.m)(t);if(i.mapObjects.has(r)){null!=i.currentMap&&(i.currentMap.textObjects.forEach(function(t){t instanceof l.a&&t.hide()}),i.currentMap.removeMarkers(),i.object.remove(i.currentMap.object)),i.currentMap=i.mapObjects.get(r),i.currentMap.mapLoaded=function(){e(),i.setMapCallbacks.forEach(function(t){return t()}),i.setMapCallbacks=[]};var o=i.currentMap.mapClass.id;i.mapView.controls.zoomFactor=i.mapView.getMapScale()/7.9,i.currentMap.load().then(function(t){if(!i.currentMap||i.currentMap.mapClass.id===t.mapClass.id){t.seenByCamera||(t.seenByCamera=!0,t._popinChildObjects());var e=u(i.mapView.controls.panBounds,i.currentMap);i.mapView.controls.panBounds=e;var n=i.mapView.getZoomLevelForCurrentMap();i.mapView.controls.expandZoomLimits(n),i.object.add(i.currentMap.object),i.currentMap.addMarkers(),i.currentMap.textObjects.forEach(function(t){return t.show()}),i.publish("flippablesNeedUpdating",!0),i.publish("render")}}).catch(function(t){console.error("Error loading map ",o,t)})}else{var a={error:"Map does not exist"};console.error(a.error),i.setMapCallbacks.forEach(function(t){return t(a)}),i.setMapCallbacks=[],n(a)}})}},{key:"loadMaps",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},l=Object(s.m)(e),h=0;h<t.length;h++){var c=t[h],u=new r.b(c,this.polygonMeshesById,this.markerWorld,this._showCount,this.mapView,this._loadMode);u.on("flippablesNeedUpdating",function(t){return n.publish("flippablesNeedUpdating",t)}),u.on("render",function(t){return n.publish("render",t)}),u.on("updateMarkerPosition",function(t){return n.publish("updateMarkerPosition",t)}),this.mapObjects.set(c.id,u),c.id===l&&(u.load().then(function(){n.mapView.resetCamera(),o()}).catch(a),this.setMap(c,i))}}},{key:"removeMap",value:function(t){this._mapObjectsSortedByElevationDirty=!0;var e=Object(s.m)(t);if(this.mapObjects.has(e)){var i=this.mapObjects.get(e);this.currentMap===i&&(this.currentMap=null),i.off("flippablesNeedUpdating"),i.off("render"),i.destroy(),this.mapObjects.delete(e)}this.renderer.renderLists.dispose()}},{key:"removeAllMaps",value:function(){this._mapObjectsSortedByElevationDirty=!0;var t=!0,e=!1,i=void 0;try{for(var n,r=this.mapObjects.values()[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;o.destroy(),o=null}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}this.mapObjects.clear()}},{key:"getCompoundBoundingBoxPoints",value:function(t){this.mapView.controls.orbit.updateMatrixWorld();var e=this.mapView.controls.camera.matrixWorld,i=this.mapView.controls.camera.matrixWorldInverse,r=new n._1(1/0,1/0,1/0),o=new n._1(-1/0,-1/0,-1/0);t.forEach(function(t){t.applyMatrix(i);var n=Object(s.g)(t);Object(s.t)(n).forEach(function(t){r.min(t),o.max(t)}),t.applyMatrix(e)});var a=Object(s.t)({min:r,max:o});return a.forEach(function(t){return t.applyMatrix4(e)}),a}},{key:"expandMaps",value:function(t,e){var i=this,r=Object.assign({focus:!1,debug:!1,rotation:0,duration:600},e);if(this.expanded||!Array.isArray(t))return Promise.reject("Already expanded");var o=void 0,s=t.map(function(t){var r="string"!=typeof t&&null!=t.id?t.id:t;if("string"!=typeof t&&!0===t.connection&&Array.isArray(t.maps)){var a=t.maps.map(function(t){var e="string"!=typeof t?t.id:t;return i.mapObjects.has(e)||(console.error("Expand maps: > Map "+e+" does not exist"),o="Expand maps: > Map "+e+" does not exist"),i.mapObjects.get(e)});a=c(a);var s=new n.O(1,1,1);!0===e.debug&&(s=new n.O(500,500,10));var l=new n.H({color:11184810});return{connection:!0,object:new n.G(s,l),connectionNodes:t.connectionNodes,mapClass:{elevation:a[0].mapClass.elevation},maps:a}}if(i.mapObjects.has(r))return i.mapObjects.get(r);console.error("Expand maps: > Map "+r+" does not exist"),o="Expand maps: Map "+r+" does not exist"});if(null!=o)return Promise.reject(o);var l=(s=c(s)).map(function(t){return t.connection&&Array.isArray(t.maps)?Promise.all(t.maps.map(function(t){return t.load()})):t.load()});return Promise.all(l).then(function(){return i.expanded=!0,i.multiFloorView=new a.a(i.mapView,i.object,s,r),i.multiFloorView.focusOnMaps(r)}).then(function(){return i.renderedMaps=s,i.projections=i.multiFloorView.projections,Promise.resolve({maps:s,projections:i.projections})})}},{key:"contractMaps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focus:!1,debug:!1,duration:300};if(!this.expanded)return Promise.resolve();this.expanded=!1,this.multiFloorView.destroy(),this.object.add(this.currentMap.object),this.publish("render");var i=u(this.mapView.controls.panBounds,this);this.mapView.controls.panBounds=i;var n=this.mapView.getZoomLevelForObject(this.object);return this.mapView.controls.expandZoomLimits(n),new Promise(function(i){e.focus?t.mapView.focusOn({boundingBox:Object(s.g)(t.object),padding:t.mapView.cachedPadding,debug:e.debug,duration:e.duration,focusZoomFactor:1,callback:i,tilt:.3}):i()})}},{key:"tiltMaps",value:function(t){this.multiFloorView&&(this.multiFloorView.mapTiltDegrees=t)}},{key:"resize",value:function(){null!=this.multiFloorView&&this.multiFloorView.resize()}},{key:"destroy",value:function(){this.removeAllMaps(),this.object.destroy()}},{key:"mapObjectsSortedByElevation",get:function(){return!this._mapObjectsSortedByElevationDirty&&Array.isArray(this._mapObjectsSortedByElevation)?this._mapObjectsSortedByElevation:(this._mapObjectsSortedByElevation=Array.from(this.mapObjects.values()).sort(function(t,e){return e.mapClass.elevation-t.mapClass.elevation}),this._mapObjectsSortedByElevationDirty=!1,this._mapObjectsSortedByElevation)}},{key:"visibleMaps",get:function(){return this.mapObjectsSortedByElevation.filter(function(t){return t.visible})}}]),t}();e.a=p},function(t,e,i){"use strict";var n=i(118);e.a=function(t){var e=t.image,i=t.rotation||0,r=e.position.clone(),o=e.rotation.z,a=i;this.flipIfNeeded=function(t){var r,o=(i-t)%n.c;(o>n.a&&o<n.b||o<-n.a&&o>-n.b)&&((r=e.geometry).boundingBox||r.computeBoundingBox(),i=(i+Math.PI)%n.c,e.rotation.z=e.rotation.z+Math.PI,e.translateX(-2*(r.boundingBox.min.x+(r.boundingBox.max.x-r.boundingBox.min.x)/2)),e.translateY(-2*(r.boundingBox.min.y+(r.boundingBox.max.y-r.boundingBox.min.y)/2)))},this.reset=function(){e.position.x=r.x,e.position.y=r.y,e.rotation.z=o,i=a}}},function(t,e,i){"use strict";var n=i(3),r=i(232),o=i(233),a=/^https?:\/\/.*\//;var s={load:function(t,e,i){return new Promise(function(s,l){var h=new o.a,c=a.exec(e);if(null!=c){var u=c[0];h.setBaseUrl(u),h.setCrossOrigin("*")}h.load(e,function(e){void 0!==i&&e.setLoader(i),e.preload();var o=new r.a;o.setMaterials(e),o.load(t,function(t){t.children.forEach(function(t){null!=t.material&&(t.name.includes("_image")&&null!=t.material.map&&(t.material.map.wrapS=n.i,t.material.map.wrapT=n.i),t.material.side=n.n)}),s(t)},void 0,l)},void 0,l)})}};e.a=s},function(t,e,i){"use strict";var n=i(3),r=function(t){this.manager=void 0!==t?t:n.l,this.materials=null};r.prototype={constructor:r,load:function(t,e,i,r){var o=this,a=new n.s(o.manager);a.setPath(this.path),a.load(t,function(t){e(o.parse(t))},i,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},parse:function(t){console.time("OBJLoader");var e,i=[],r=!1,o=[],a=[],s=[];function l(t){e={name:t,geometry:{vertices:[],normals:[],uvs:[]},material:{name:"",smooth:!0}},i.push(e)}function h(t){var e=parseInt(t);return 3*(e>=0?e-1:e+o.length/3)}function c(t){var e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function u(t){var e=parseInt(t);return 2*(e>=0?e-1:e+s.length/2)}function p(t,i,n){e.geometry.vertices.push(o[t],o[t+1],o[t+2],o[i],o[i+1],o[i+2],o[n],o[n+1],o[n+2])}function d(t,i,n){e.geometry.normals.push(a[t],a[t+1],a[t+2],a[i],a[i+1],a[i+2],a[n],a[n+1],a[n+2])}function f(t,i,n){e.geometry.uvs.push(s[t],s[t+1],s[i],s[i+1],s[n],s[n+1])}function m(t,e,i,n,r,o,a,s,l,m,v,g){var y,_=h(t),x=h(e),b=h(i);void 0===n?p(_,x,b):(p(_,x,y=h(n)),p(x,b,y)),void 0!==r&&(_=u(r),x=u(o),b=u(a),void 0===n?f(_,x,b):(f(_,x,y=u(s)),f(x,b,y))),void 0!==l&&(_=c(l),x=c(m),b=c(v),void 0===n?d(_,x,b):(d(_,x,y=c(g)),d(x,b,y)))}l("");for(var v=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,y=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,_=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,x=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,b=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,w=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,E=/^[og]\s+(.+)/,M=/^s\s+(\d+|on|off)/,q=t.split("\n"),A=0;A<q.length;A++){var T,P=q[A];if(0!==(P=P.trim()).length&&"#"!==P.charAt(0))if(null!==(T=v.exec(P)))o.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=g.exec(P)))a.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=y.exec(P)))s.push(parseFloat(T[1]),parseFloat(T[2]));else if(null!==(T=_.exec(P)))m(T[1],T[2],T[3],T[4]);else if(null!==(T=x.exec(P)))m(T[2],T[5],T[8],T[11],T[3],T[6],T[9],T[12]);else if(null!==(T=b.exec(P)))m(T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15],T[4],T[8],T[12],T[16]);else if(null!==(T=w.exec(P)))m(T[2],T[5],T[8],T[11],void 0,void 0,void 0,void 0,T[3],T[6],T[9],T[12]);else if(null!==(T=E.exec(P))){var S=T[1].trim();!1===r?(r=!0,e.name=S):l(S)}else if(/^usemtl /.test(P))e.material.name=P.substring(7).trim();else if(/^mtllib /.test(P));else{if(null===(T=M.exec(P)))throw new Error("Unexpected line: "+P);e.material.smooth="1"===T[1]||"on"===T[1]}}for(var L=new n.x,C=(A=0,i.length);A<C;A++){var I,O=(e=i[A]).geometry,R=new n.f;R.addAttribute("position",new n.e(new Float32Array(O.vertices),3)),O.normals.length>0?R.addAttribute("normal",new n.e(new Float32Array(O.normals),3)):R.computeVertexNormals(),O.uvs.length>0&&R.addAttribute("uv",new n.e(new Float32Array(O.uvs),2)),null!==this.materials&&(I=this.materials.create(e.material.name)),I||((I=new n.K).name=e.material.name),I.flatShading=!e.material.smooth;var N=new n.G(R,I);N.name=e.name,L.add(N)}return console.timeEnd("OBJLoader"),L}},e.a=r},function(t,e,i){"use strict";var n=i(3),r=function(t){Object.assign(this,n.p.prototype),this.baseUrl="",this.manager=void 0!==t?t:n.l};r.prototype={constructor:r,load:function(t,e,i,r){var o=this,a=new n.s(this.manager);a.setPath(this.path),a.load(t,function(t){e(o.parse(t))},i,r)},setPath:function(t){this.path=t},setBaseUrl:function(t){this.baseUrl=t},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),i={},n=/\s+/,o={},a=0;a<e.length;a++){var s=e[a];if(0!==(s=s.trim()).length&&"#"!==s.charAt(0)){var l=s.indexOf(" "),h=l>=0?s.substring(0,l):s;h=h.toLowerCase();var c=l>=0?s.substring(l+1):"";if(c=c.trim(),"newmtl"===h)i={name:c},o[c]=i;else if(i)if("ka"===h||"kd"===h||"ks"===h){var u=c.split(n,3);i[h]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else i[h]=c}}var p=new r.MaterialCreator(this.baseUrl,this.materialOptions);return p.setCrossOrigin(this.crossOrigin),p.setManager(this.manager),p.setMaterials(o),p}},(r.MaterialCreator=function(t,e){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.loader=void 0,this.side=this.options&&this.options.side?this.options.side:n.v,this.wrap=this.options&&this.options.wrap?this.options.wrap:n.S}).prototype={constructor:r.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setLoader:function(t){this.loader=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var i in t){var n=t[i],r={};e[i]=r;for(var o in n){var a=!0,s=n[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1)}a&&(r[l]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this.materialsInfo[t],i={name:t,side:this.side};for(var r in e){var o=e[r];if(""!==o)switch(r.toLowerCase()){case"kd":i.color=(new n.k).fromArray(o);break;case"ks":i.specular=(new n.k).fromArray(o);break;case"map_kd":i.map=this.loadTexture(this.baseUrl+o),i.map.wrapS=this.wrap,i.map.wrapT=this.wrap;break;case"ns":i.shininess=parseFloat(o);break;case"d":(o<1||t.indexOf("_image")>0)&&(i.opacity=o,i.transparent=!0,i.alphaTest=.1);break;case"Tr":o>0&&(i.opacity=1-o,i.transparent=!0);break;case"map_bump":case"bump":if(i.bumpMap)break;i.bumpMap=this.loadTexture(this.baseUrl+o),i.bumpMap.wrapS=this.wrap,i.bumpMap.wrapT=this.wrap}}return this.materials[t]=new n.K(i),this.materials[t]},loadTexture:function(t,e,i,r,o){var a,s=n.D.Handlers.get(t),l=void 0!==this.manager?this.manager:n.l;return null===s&&(s=void 0!==this.loader?this.loader:new n.Y(l)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(t,i,r,o),void 0!==e&&(a.mapping=e),null!=a&&(a.anisotropy=16),a}},e.a=r},function(t,e,i){"use strict";var n=i(3),r=i(235),o=i.n(r),a=i(236),s=i(121),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultMaterial=new n.J({color:0}),this.defaultExtrudeSettings={amount:10,bevelEnabled:!1},this.materials={},this.load=this.load.bind(this),this.scale=100,this.overlayHeight=.15,this.textureLoader=new n.Y}return l(t,[{key:"load",value:function(t,e){var i=this;if("string"==typeof t)return fetch(t).then(function(t){return t.json()}).then(function(t){return i._build(t,e)});try{return this._build(t,e)}catch(t){return Promise.reject()}}},{key:"_build",value:function(e,i){var r=this;this.container=new n.x;var o=new Set;return i.layers.forEach(function(t){!1!==t.visible&&o.add(t.id)}),e.forEach(function(e){if(o.has(e.layer)){var n=!1!==e.geometry.visible,a=e.image&&!1!==e.image.visible&&(e.image.url||e.image.original),s=e.label&&!1!==e.label.visible;(n||a||s)&&t._setPolygonDefaults(e),n&&r._addPolygon(e,i),a&&r._addImage(e,i),s&&r._addLabel(e,i)}}),Promise.resolve(this.container)}},{key:"_clip",value:function(t,e){e/=2;for(var i=this.scale,n=t.map(function(t){return{X:t.x*i,Y:t.y*i}}),r=8;0!==r;r--){var o=new a.a.ClipperOffset;o.AddPath(n,a.a.JoinType.jtMiter,a.a.EndType.etClosedPolygon);var s=new a.a.Paths;try{if(o.Execute(s,e*i),s.length)return s[0].map(function(t){return{x:t.X/i,y:t.Y/i}});e/=2}catch(t){e/=2}}return n}},{key:"_getMaterial",value:function(t){var e=t.slice(1);3===e.length&&(e=""+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var i=void 0;return this.materials[e]?i=this.materials[e]:(this.materials[e]=new n.J({color:parseInt(e,16)}),i=this.materials[e]),i}},{key:"_addLabel",value:function(e,i){if(e.label.text){var r=Math.max(i.width,i.height)/1e3,o=t.getWeightedCenter(e.vertexes),a=e.label.position,l=e.label.rotation.z,h=e.label.text.split("\n"),c={font:s.a,size:e.label.fontSize*r,height:this.overlayHeight,bevelEnabled:!1},u="";h.forEach(function(t){t.length>u.length&&(u=t)});var p=new n.W(u,c),d=new n.G(p),f=(new n.b).setFromObject(d).size().x,m=this._getMaterial(e.label.color),v=0,g=new n.w;h.reverse().forEach(function(t){var e=new n.W(t,c),i=new n.G(e,m),r=(new n.b).setFromObject(i),o=void 0;o="left"===c.align?0:"right"===c.align?f-r.size().x:(f-r.size().x)/2,i.position.set(o,v,0),i.updateMatrix(),g.merge(i.geometry,i.matrix),v+=1.25*c.size});var y=new n.G(g,m);g.computeBoundingBox();var _=g.boundingBox,x=_.max.x-_.min.x,b=_.max.y-_.min.y,w=e.geometry.position.z+e.geometry.scale.z;y.translateX(o.x-i.width/2+a.x-x/2),y.translateY(-o.y+i.height/2+a.y-b/2),y.rotation.set(0,0,l*Math.PI/180),y.translateZ((this.overlayHeight+w)*r),this.container.add(y)}}},{key:"_addImage",value:function(e,i){var r=this,o=this.textureLoader.load(e.image.url||e.image.original,function(){var a=t.getBoundingBox(e,i),h=o.image.width,c=o.image.height,u={x:e.image.viewBox.width,y:e.image.viewBox.height},p=void 0;p=!1===e.image.useLocalScaling?l:Math.min(a.max.x-a.min.x,a.max.y-a.min.y)/Math.max(u.x,u.y),e.image.fitToBounds?s.scale.set(a.max.x-a.min.x,a.max.y-a.min.y,1):e.image.scale&&s.scale.set(e.image.scale.x*p*e.image.viewBox.width,e.image.scale.y*p*e.image.viewBox.height,1),s.translateZ(r.overlayHeight*l),o.repeat=new n._0(e.image.viewBox.width/h,e.image.viewBox.height/c),o.offset=new n._0(0,(o.image.height-e.image.viewBox.height)/o.image.height)}),a=new n.J({transparent:!0,depthWrite:!1,side:n.n,map:o});o.anisotropy=16;var s=new n.G(new n.O(1,1),a);s.name=e.id+"_image",this.container.add(s);var l=Math.max(i.width,i.height)/1e3,h=this._clip(e.vertexes,e.geometry.offset),c=t.getWeightedCenter(h);if(e.image.position){s.translateX(c.x-i.width/2+e.image.position.x),s.translateY(-c.y+i.height/2+e.image.position.y);var u=e.geometry.position.z+e.geometry.scale.z;s.translateZ((u+e.image.position.z)*l)}e.image.rotation&&s.rotation.set(e.image.rotation.x*Math.PI/180,e.image.rotation.y*Math.PI/180,e.image.rotation.z*Math.PI/180)}},{key:"_addPolygon",value:function(e,i){var r=e.vertexes,o=Math.max(i.width,i.height)/1e3;r=this._clip(r,e.geometry.offset);var a=t._makeFromCoords(n.V,r,i);e.holes&&(a.holes=e.holes.map(function(e){return t._makeFromCoords(n.M,e,i)}));var s=void 0;s=e.geometry.bevel?{bevelEnabled:!0,amount:e.geometry.scale.z*o,bevelThickness:e.geometry.bevel.thickness*e.geometry.scale.z*o,bevelSize:e.geometry.bevel.size*o,bevelSegments:e.geometry.bevel.segments||1}:{bevelEnabled:!1,amount:e.geometry.scale.z*o};var l=this._getMaterial(e.material.color),h=new n.q(a,s),c=new n.G(h,l);c.name=e.id,this.container.add(c),c.translateZ(e.geometry.position.z*o)}}],[{key:"getWeightedCenter",value:function(t){var e=t.reduce(function(t,e){return{x:t.x+e.x,y:t.y+e.y}},{x:0,y:0});return e.x/=t.length,e.y/=t.length,e}},{key:"getBoundingBox",value:function(t,e){var i=1/0,n=1/0,r=-1/0,o=-1/0,a=-e.width/2,s=e.height/2;return t.vertexes.forEach(function(t){t.x+a>r&&(r=t.x+a),t.x+a<i&&(i=t.x+a),-t.y+s>o&&(o=-t.y+s),-t.y+s<n&&(n=-t.y+s)}),{min:{x:i,y:n},max:{x:r,y:o}}}},{key:"_makeFromCoords",value:function(t,e,i){var n=new t;return n.moveTo(e[0].x-i.width/2,-e[0].y+i.height/2),e.slice(1).forEach(function(t){return n.lineTo(t.x-i.width/2,-t.y+i.height/2)}),n.lineTo(e[0].x-i.width/2,-e[0].y+i.height/2),n}},{key:"_setPolygonDefaults",value:function(t){var e={visible:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:5},bevel:{size:0,thickness:0,segments:1},offset:0};return t.layer||(t.layer="Polygon"),t.geometry=o()(t.geometry,e),t.geometry.bevel=o()(t.geometry.bevel,e.bevel),t.image&&(t.image.position=o()(t.image.position,e.position),t.image.rotation=o()(t.image.rotation,e.rotation),t.image.scale=o()(t.image.scale,e.scale)),t.label&&(t.label.position=o()(t.label.position,e.position),t.label.rotation=o()(t.label.rotation,e.rotation),t.label.scale=o()(t.label.scale,e.scale),t.label.color=t.label.color||"#000000"),t}}]),t}();e.a=new h},function(t,e){var i=9007199254740991,n="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",a=/^(?:0|[1-9]\d*)$/;function s(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var l=Object.prototype,h=l.hasOwnProperty,c=l.toString,u=l.propertyIsEnumerable,p=Math.max;function d(t,e){var i,r,o,a=_(t)||(o=r=i=t)&&"object"==typeof o&&x(r)&&h.call(i,"callee")&&(!u.call(i,"callee")||c.call(i)==n)?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],s=a.length,l=!!s;for(var p in t)!e&&!h.call(t,p)||l&&("length"==p||g(p,s))||a.push(p);return a}function f(t,e,i,n){return void 0===t||y(t,l[i])&&!h.call(n,i)?e:t}function m(t){if(!b(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e,i,n,r=(i=(e=t)&&e.constructor,n="function"==typeof i&&i.prototype||l,e===n),o=[];for(var a in t)("constructor"!=a||!r&&h.call(t,a))&&o.push(a);return o}function v(t,e){return e=p(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,r=p(i.length-e,0),o=Array(r);++n<r;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=o,s(t,this,a)}}function g(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}function y(t,e){return t===e||t!=t&&e!=e}var _=Array.isArray;function x(t){return null!=t&&("number"==typeof(a=t.length)&&a>-1&&a%1==0&&a<=i)&&!((n=b(e=t)?c.call(e):"")==r||n==o);var e,n,a}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var w,E=(w=function(t,e,i,n){var r;!function(t,e,i,n){i||(i={});for(var r,o,a,s,l=-1,c=e.length;++l<c;){var u=e[l],p=n?n(i[u],t[u],u,i,t):void 0;r=i,o=u,a=void 0===p?t[u]:p,s=r[o],h.call(r,o)&&y(s,a)&&(void 0!==a||o in r)||(r[o]=a)}}(e,(r=e,x(r)?d(r,!0):m(r)),t,n)},v(function(t,e){var i=-1,n=e.length,r=n>1?e[n-1]:void 0,o=n>2?e[2]:void 0;for(r=w.length>3&&"function"==typeof r?(n--,r):void 0,o&&function(t,e,i){if(!b(i))return!1;var n=typeof e;return!!("number"==n?x(i)&&g(e,i.length):"string"==n&&e in i)&&y(i[e],t)}(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++i<n;){var a=e[i];a&&w(t,a,i,r)}return t})),M=v(function(t){return t.push(void 0,f),s(E,void 0,t)});t.exports=M},function(t,e,i){"use strict";var n=i(237),r=i.n(n);function o(t){this.name="JSClipperError",this.message=t,this.stack=(new Error).stack}o.prototype=Error.prototype,r.a.Error=function(t){throw new o(t)},e.a=r.a},function(t,e,i){"use strict";var n,r={},o=!1;if(void 0!==t&&t.exports?(t.exports=r,o=!0):"undefined"!=typeof document?window.ClipperLib=r:self.ClipperLib=r,o){a="chrome";n="Netscape"}else{var a=navigator.userAgent.toString().toLowerCase();n=navigator.appName}var s,l={};-1!=a.indexOf("chrome")&&-1==a.indexOf("chromium")?l.chrome=1:l.chrome=0,-1!=a.indexOf("chromium")?l.chromium=1:l.chromium=0,-1!=a.indexOf("safari")&&-1==a.indexOf("chrome")&&-1==a.indexOf("chromium")?l.safari=1:l.safari=0,-1!=a.indexOf("firefox")?l.firefox=1:l.firefox=0,-1!=a.indexOf("firefox/17")?l.firefox17=1:l.firefox17=0,-1!=a.indexOf("firefox/15")?l.firefox15=1:l.firefox15=0,-1!=a.indexOf("firefox/3")?l.firefox3=1:l.firefox3=0,-1!=a.indexOf("opera")?l.opera=1:l.opera=0,-1!=a.indexOf("msie 10")?l.msie10=1:l.msie10=0,-1!=a.indexOf("msie 9")?l.msie9=1:l.msie9=0,-1!=a.indexOf("msie 8")?l.msie8=1:l.msie8=0,-1!=a.indexOf("msie 7")?l.msie7=1:l.msie7=0,-1!=a.indexOf("msie ")?l.msie=1:l.msie=0,r.biginteger_used=null;function h(t,e,i){r.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function c(){return new h(null)}"Microsoft Internet Explorer"==n?(h.prototype.am=function(t,e,i,n,r,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],h=this[t++]>>15,c=s*l+h*a;r=((l=a*l+((32767&c)<<15)+i[n]+(1073741823&r))>>>30)+(c>>>15)+s*h+(r>>>30),i[n++]=1073741823&l}return r},s=30):"Netscape"!=n?(h.prototype.am=function(t,e,i,n,r,o){for(;--o>=0;){var a=e*this[t++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=67108863&a}return r},s=26):(h.prototype.am=function(t,e,i,n,r,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],h=this[t++]>>14,c=s*l+h*a;r=((l=a*l+((16383&c)<<14)+i[n]+r)>>28)+(c>>14)+s*h,i[n++]=268435455&l}return r},s=28),h.prototype.DB=s,h.prototype.DM=(1<<s)-1,h.prototype.DV=1<<s;h.prototype.FV=Math.pow(2,52),h.prototype.F1=52-s,h.prototype.F2=2*s-52;var u,p,d="0123456789abcdefghijklmnopqrstuvwxyz",f=new Array;for(u="0".charCodeAt(0),p=0;p<=9;++p)f[u++]=p;for(u="a".charCodeAt(0),p=10;p<36;++p)f[u++]=p;for(u="A".charCodeAt(0),p=10;p<36;++p)f[u++]=p;function m(t){return d.charAt(t)}function v(t,e){var i=f[t.charCodeAt(e)];return null==i?-1:i}function g(t){var e=c();return e.fromInt(t),e}function y(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function _(t){this.m=t}function x(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function b(t,e){return t&e}function w(t,e){return t|e}function E(t,e){return t^e}function M(t,e){return t&~e}function q(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function A(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function T(){}function P(t){return t}function S(t){this.r2=c(),this.q3=c(),h.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}_.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},_.prototype.revert=function(t){return t},_.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},_.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},_.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},x.prototype.convert=function(t){var e=c();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(h.ZERO)>0&&this.m.subTo(e,e),e},x.prototype.revert=function(t){var e=c();return t.copyTo(e),this.reduce(e),e},x.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},h.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},h.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},h.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,r=!1,o=0;--n>=0;){var a=8==i?255&t[n]:v(t,n);a<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==o?this[this.t++]=a:o+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&h.ZERO.subTo(this,this)},h.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},h.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},h.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},h.prototype.lShiftTo=function(t,e){var i,n=t%this.DB,r=this.DB-n,o=(1<<r)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+a+1]=this[i]>>r|s,s=(this[i]&o)<<n;for(i=a-1;i>=0;--i)e[i]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},h.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&o)<<r,e[a-i]=this[a]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<r),e.t=this.t-i,e.clamp()}},h.prototype.subTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()},h.prototype.multiplyTo=function(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&h.ZERO.subTo(e,e)},h.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},h.prototype.divRemTo=function(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=c());var o=c(),a=this.s,s=t.s,l=this.DB-y(n[n.t-1]);l>0?(n.lShiftTo(l,o),r.lShiftTo(l,i)):(n.copyTo(o),r.copyTo(i));var u=o.t,p=o[u-1];if(0!=p){var d=p*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),f=this.FV/d,m=(1<<this.F1)/d,v=1<<this.F2,g=i.t,_=g-u,x=null==e?c():e;for(o.dlShiftTo(_,x),i.compareTo(x)>=0&&(i[i.t++]=1,i.subTo(x,i)),h.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--_>=0;){var b=i[--g]==p?this.DM:Math.floor(i[g]*f+(i[g-1]+v)*m);if((i[g]+=o.am(0,b,i,_,0,u))<b)for(o.dlShiftTo(_,x),i.subTo(x,i);i[g]<--b;)i.subTo(x,i)}null!=e&&(i.drShiftTo(u,e),a!=s&&h.ZERO.subTo(e,e)),i.t=u,i.clamp(),l>0&&i.rShiftTo(l,i),a<0&&h.ZERO.subTo(i,i)}}},h.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},h.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},h.prototype.exp=function(t,e){if(t>4294967295||t<1)return h.ONE;var i=c(),n=c(),r=e.convert(this),o=y(t)-1;for(r.copyTo(i);--o>=0;)if(e.sqrTo(i,n),(t&1<<o)>0)e.mulTo(n,r,i);else{var a=i;i=n,n=a}return e.revert(i)},h.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(i=this[a]>>s)>0&&(r=!0,o=m(i));a>=0;)s<e?(i=(this[a]&(1<<s)-1)<<e-s,i|=this[--a]>>(s+=this.DB-e)):(i=this[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),i>0&&(r=!0),r&&(o+=m(i));return r?o:"0"},h.prototype.negate=function(){var t=c();return h.ZERO.subTo(this,t),t},h.prototype.abs=function(){return this.s<0?this.negate():this},h.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},h.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)},h.prototype.mod=function(t){var e=c();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(h.ZERO)>0&&t.subTo(e,e),e},h.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new _(e):new x(e),this.exp(t,i)},h.ZERO=g(0),h.ONE=g(1),T.prototype.convert=P,T.prototype.revert=P,T.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},T.prototype.sqrTo=function(t,e){t.squareTo(e)},S.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=c();return t.copyTo(e),this.reduce(e),e},S.prototype.revert=function(t){return t},S.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},S.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},S.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var L=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/L[L.length-1];h.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},h.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=g(i),r=c(),o=c(),a="";for(this.divRemTo(n,r,o);r.signum()>0;)a=(i+o.intValue()).toString(t).substr(1)+a,r.divRemTo(n,r,o);return o.intValue().toString(t)+a},h.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,o=0,a=0,s=0;s<t.length;++s){var l=v(t,s);l<0?"-"==t.charAt(s)&&0==this.signum()&&(r=!0):(a=e*a+l,++o>=i&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),r&&h.ZERO.subTo(this,this)},h.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(h.ONE.shiftLeft(t-1),w,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(h.ONE.shiftLeft(t-1),this);else{var n=new Array,r=7&t;n.length=1+(t>>3),e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},h.prototype.bitwiseTo=function(t,e,i){var n,r,o=Math.min(t.t,this.t);for(n=0;n<o;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},h.prototype.changeBit=function(t,e){var i=h.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i},h.prototype.addTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()},h.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},h.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},h.prototype.multiplyLowerTo=function(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},h.prototype.multiplyUpperTo=function(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)},h.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i},h.prototype.millerRabin=function(t){var e=this.subtract(h.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>L.length&&(t=L.length);for(var r=c(),o=0;o<t;++o){r.fromInt(L[Math.floor(Math.random()*L.length)]);var a=r.modPow(n,this);if(0!=a.compareTo(h.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<i&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(h.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},h.prototype.clone=function(){var t=c();return this.copyTo(t),t},h.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},h.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},h.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},h.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},h.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(e[r++]=i);return e},h.prototype.equals=function(t){return 0==this.compareTo(t)},h.prototype.min=function(t){return this.compareTo(t)<0?this:t},h.prototype.max=function(t){return this.compareTo(t)>0?this:t},h.prototype.and=function(t){var e=c();return this.bitwiseTo(t,b,e),e},h.prototype.or=function(t){var e=c();return this.bitwiseTo(t,w,e),e},h.prototype.xor=function(t){var e=c();return this.bitwiseTo(t,E,e),e},h.prototype.andNot=function(t){var e=c();return this.bitwiseTo(t,M,e),e},h.prototype.not=function(){for(var t=c(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},h.prototype.shiftLeft=function(t){var e=c();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},h.prototype.shiftRight=function(t){var e=c();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},h.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+q(this[t]);return this.s<0?this.t*this.DB:-1},h.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=A(this[i]^e);return t},h.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},h.prototype.setBit=function(t){return this.changeBit(t,w)},h.prototype.clearBit=function(t){return this.changeBit(t,M)},h.prototype.flipBit=function(t){return this.changeBit(t,E)},h.prototype.add=function(t){var e=c();return this.addTo(t,e),e},h.prototype.subtract=function(t){var e=c();return this.subTo(t,e),e},h.prototype.multiply=function(t){var e=c();return this.multiplyTo(t,e),e},h.prototype.divide=function(t){var e=c();return this.divRemTo(t,e,null),e},h.prototype.remainder=function(t){var e=c();return this.divRemTo(t,null,e),e},h.prototype.divideAndRemainder=function(t){var e=c(),i=c();return this.divRemTo(t,e,i),new Array(e,i)},h.prototype.modPow=function(t,e){var i,n,r=t.bitLength(),o=g(1);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new _(e):e.isEven()?new S(e):new x(e);var a=new Array,s=3,l=i-1,h=(1<<i)-1;if(a[1]=n.convert(this),i>1){var u=c();for(n.sqrTo(a[1],u);s<=h;)a[s]=c(),n.mulTo(u,a[s-2],a[s]),s+=2}var p,d,f=t.t-1,m=!0,v=c();for(r=y(t[f])-1;f>=0;){for(r>=l?p=t[f]>>r-l&h:(p=(t[f]&(1<<r+1)-1)<<l-r,f>0&&(p|=t[f-1]>>this.DB+r-l)),s=i;0==(1&p);)p>>=1,--s;if((r-=s)<0&&(r+=this.DB,--f),m)a[p].copyTo(o),m=!1;else{for(;s>1;)n.sqrTo(o,v),n.sqrTo(v,o),s-=2;s>0?n.sqrTo(o,v):(d=o,o=v,v=d),n.mulTo(v,a[p],o)}for(;f>=0&&0==(t[f]&1<<r);)n.sqrTo(o,v),d=o,o=v,v=d,--r<0&&(r=this.DB-1,--f)}return n.revert(o)},h.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return h.ZERO;for(var i=t.clone(),n=this.clone(),r=g(1),o=g(0),a=g(0),s=g(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(r.isEven()&&o.isEven()||(r.addTo(this,r),o.subTo(t,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(a,r),o.subTo(s,o)):(n.subTo(i,n),e&&a.subTo(r,a),s.subTo(o,s))}return 0!=n.compareTo(h.ONE)?h.ZERO:s.compareTo(t)>=0?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s},h.prototype.pow=function(t){return this.exp(t,new T)},h.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(r<o&&(o=r),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i},h.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=L[L.length-1]){for(e=0;e<L.length;++e)if(i[0]==L[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<L.length;){for(var n=L[e],r=e+1;r<L.length&&n<C;)n*=L[r++];for(n=i.modInt(n);e<r;)if(n%L[e++]==0)return!1}return i.millerRabin(t)},h.prototype.square=function(){var t=c();return this.squareTo(t),t};var I=h;if(I.prototype.IsNegative=function(){return-1==this.compareTo(I.ZERO)},I.op_Equality=function(t,e){return 0==t.compareTo(e)},I.op_Inequality=function(t,e){return 0!=t.compareTo(e)},I.op_GreaterThan=function(t,e){return t.compareTo(e)>0},I.op_LessThan=function(t,e){return t.compareTo(e)<0},I.op_Addition=function(t,e){return new I(t).add(new I(e))},I.op_Subtraction=function(t,e){return new I(t).subtract(new I(e))},I.Int128Mul=function(t,e){return new I(t).multiply(new I(e))},I.op_Division=function(t,e){return t.divide(e)},I.prototype.ToDouble=function(){return parseFloat(this.toString())},void 0===O)var O=function(t,e){var i;if(void 0===Object.getOwnPropertyNames){for(i in e.prototype)void 0!==t.prototype[i]&&t.prototype[i]!=Object.prototype[i]||(t.prototype[i]=e.prototype[i]);for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)void 0===Object.getOwnPropertyDescriptor(t.prototype,n[r])&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}};r.Path=function(){return[]},r.Paths=function(){return[]},r.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},r.DoublePoint0=function(){this.X=0,this.Y=0},r.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},r.DoublePoint2=function(t,e){this.X=t,this.Y=e},r.PolyNode=function(){this.m_Parent=null,this.m_polygon=new r.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},r.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},r.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},r.PolyNode.prototype.Contour=function(){return this.m_polygon},r.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},r.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},r.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},r.PolyNode.prototype.Childs=function(){return this.m_Childs},r.PolyNode.prototype.Parent=function(){return this.m_Parent},r.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},r.PolyTree=function(){this.m_AllPolys=[],r.PolyNode.call(this)},r.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},r.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},r.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},O(r.PolyTree,r.PolyNode),r.Math_Abs_Int64=r.Math_Abs_Int32=r.Math_Abs_Double=function(t){return Math.abs(t)},r.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},l.msie||l.opera||l.safari?r.Cast_Int32=function(t){return 0|t}:r.Cast_Int32=function(t){return~~t},l.chrome?r.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:l.firefox&&"function"==typeof Number.toInteger?r.Cast_Int64=function(t){return Number.toInteger(t)}:l.msie7||l.msie8?r.Cast_Int64=function(t){return parseInt(t,10)}:l.msie?r.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:r.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.Clear=function(t){t.length=0},r.PI=3.141592653589793,r.PI2=6.283185307179586,r.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof r.DoublePoint){var i=t[0];this.X=r.Clipper.Round(i.X),this.Y=r.Clipper.Round(i.Y)}else{var n=t[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0},r.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},r.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},r.IntPoint0=function(){this.X=0,this.Y=0},r.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},r.IntPoint1dp=function(t){this.X=r.Clipper.Round(t.X),this.Y=r.Clipper.Round(t.Y)},r.IntPoint2=function(t,e){this.X=t,this.Y=e},r.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},r.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},r.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},r.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},r.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},r.PolyType={ptSubject:0,ptClip:1},r.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},r.JoinType={jtSquare:0,jtRound:1,jtMiter:2},r.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},r.EdgeSide={esLeft:0,esRight:1},r.Direction={dRightToLeft:0,dLeftToRight:1},r.TEdge=function(){this.Bot=new r.IntPoint,this.Curr=new r.IntPoint,this.Top=new r.IntPoint,this.Delta=new r.IntPoint,this.Dx=0,this.PolyTyp=r.PolyType.ptSubject,this.Side=r.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},r.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new r.IntPoint},r.MyIntersectNodeSort=function(){},r.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},r.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},r.Scanbeam=function(){this.Y=0,this.Next=null},r.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},r.OutPt=function(){this.Idx=0,this.Pt=new r.IntPoint,this.Next=null,this.Prev=null},r.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new r.IntPoint},r.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.horizontal=-9007199254740992,r.ClipperBase.Skip=-2,r.ClipperBase.Unassigned=-1,r.ClipperBase.tolerance=1e-20,r.ClipperBase.loRange=47453132,r.ClipperBase.hiRange=0xfffffffffffff,r.ClipperBase.near_zero=function(t){return t>-r.ClipperBase.tolerance&&t<r.ClipperBase.tolerance},r.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},r.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(r.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},r.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,n){return n?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&I.op_Equality(I.Int128Mul(t.X-e.X,i.Y-e.Y),I.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},r.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if((n=n.Next)==e)break}return!1},r.ClipperBase.prototype.SlopesEqual=r.ClipperBase.SlopesEqual=function(){var t,e,i,n,o,a,s=arguments,l=s.length;return 3==l?(t=s[0],e=s[1],s[2]?I.op_Equality(I.Int128Mul(t.Delta.Y,e.Delta.X),I.Int128Mul(t.Delta.X,e.Delta.Y)):r.Cast_Int64(t.Delta.Y*e.Delta.X)==r.Cast_Int64(t.Delta.X*e.Delta.Y)):4==l?(i=s[0],n=s[1],o=s[2],s[3]?I.op_Equality(I.Int128Mul(i.Y-n.Y,n.X-o.X),I.Int128Mul(i.X-n.X,n.Y-o.Y)):r.Cast_Int64((i.Y-n.Y)*(n.X-o.X))-r.Cast_Int64((i.X-n.X)*(n.Y-o.Y))==0):(i=s[0],n=s[1],o=s[2],a=s[3],s[4]?I.op_Equality(I.Int128Mul(i.Y-n.Y,o.X-a.X),I.Int128Mul(i.X-n.X,o.Y-a.Y)):r.Cast_Int64((i.Y-n.Y)*(o.X-a.X))-r.Cast_Int64((i.X-n.X)*(o.Y-a.Y))==0)},r.ClipperBase.SlopesEqual3=function(t,e,i){return i?I.op_Equality(I.Int128Mul(t.Delta.Y,e.Delta.X),I.Int128Mul(t.Delta.X,e.Delta.Y)):r.Cast_Int64(t.Delta.Y*e.Delta.X)==r.Cast_Int64(t.Delta.X*e.Delta.Y)},r.ClipperBase.SlopesEqual4=function(t,e,i,n){return n?I.op_Equality(I.Int128Mul(t.Y-e.Y,e.X-i.X),I.Int128Mul(t.X-e.X,e.Y-i.Y)):r.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-r.Cast_Int64((t.X-e.X)*(e.Y-i.Y))==0},r.ClipperBase.SlopesEqual5=function(t,e,i,n,o){return o?I.op_Equality(I.Int128Mul(t.Y-e.Y,i.X-n.X),I.Int128Mul(t.X-e.X,i.Y-n.Y)):r.Cast_Int64((t.Y-e.Y)*(i.X-n.X))-r.Cast_Int64((t.X-e.X)*(i.Y-n.Y))==0},r.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,n=this.m_edges[t].length;i<n;++i)this.m_edges[t][i]=null;r.Clear(this.m_edges[t])}r.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},r.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>r.ClipperBase.hiRange||t.Y>r.ClipperBase.hiRange||-t.X>r.ClipperBase.hiRange||-t.Y>r.ClipperBase.hiRange)&&r.Error("Coordinate outside allowed range in RangeTest()."):(t.X>r.ClipperBase.loRange||t.Y>r.ClipperBase.loRange||-t.X>r.ClipperBase.loRange||-t.Y>r.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},r.ClipperBase.prototype.InitEdge=function(t,e,i,n){t.Next=e,t.Prev=i,t.Curr.X=n.X,t.Curr.Y=n.Y,t.OutIdx=-1},r.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},r.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;r.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||r.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=r.ClipperBase.horizontal&&t.Prev.Dx!=r.ClipperBase.horizontal)break;for(;t.Prev.Dx==r.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==r.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},r.ClipperBase.prototype.ProcessBound=function(t,e){var i,n,o=t,a=t;if(t.Dx==r.ClipperBase.horizontal&&(n=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=n&&this.ReverseHorizontal(t)),a.OutIdx!=r.ClipperBase.Skip)if(e){for(;a.Top.Y==a.Next.Bot.Y&&a.Next.OutIdx!=r.ClipperBase.Skip;)a=a.Next;if(a.Dx==r.ClipperBase.horizontal&&a.Next.OutIdx!=r.ClipperBase.Skip){for(i=a;i.Prev.Dx==r.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==a.Next.Top.X?e||(a=i.Prev):i.Prev.Top.X>a.Next.Top.X&&(a=i.Prev)}for(;t!=a;)t.NextInLML=t.Next,t.Dx==r.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==r.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),a=a.Next}else{for(;a.Top.Y==a.Prev.Bot.Y&&a.Prev.OutIdx!=r.ClipperBase.Skip;)a=a.Prev;if(a.Dx==r.ClipperBase.horizontal&&a.Prev.OutIdx!=r.ClipperBase.Skip){for(i=a;i.Next.Dx==r.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==a.Prev.Top.X?e||(a=i.Next):i.Next.Top.X>a.Prev.Top.X&&(a=i.Next)}for(;t!=a;)t.NextInLML=t.Prev,t.Dx==r.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==r.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),a=a.Prev}if(a.OutIdx==r.ClipperBase.Skip){if(t=a,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=a&&t.Dx==r.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=a&&t.Dx==r.ClipperBase.horizontal;)t=t.Next}if(t==a)a=e?t.Next:t.Prev;else{t=e?a.Next:a.Prev;var s=new r.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,s.RightBound.WindDelta=0,a=this.ProcessBound(s.RightBound,e),this.InsertLocalMinima(s)}}return a},r.ClipperBase.prototype.AddPath=function(t,e,i){i||e!=r.PolyType.ptClip||r.Error("AddPath: Open paths must be subject.");var n=t.length-1;if(i)for(;n>0&&r.IntPoint.op_Equality(t[n],t[0]);)--n;for(;n>0&&r.IntPoint.op_Equality(t[n],t[n-1]);)--n;if(i&&n<2||!i&&n<1)return!1;for(var o=new Array,a=0;a<=n;a++)o.push(new r.TEdge);var s=!0;o[1].Curr.X=t[1].X,o[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[n],l),this.m_UseFullRange=l.Value,this.InitEdge(o[0],o[1],o[n],t[0]),this.InitEdge(o[n],o[0],o[n-1],t[n]);for(a=n-1;a>=1;--a)l.Value=this.m_UseFullRange,this.RangeTest(t[a],l),this.m_UseFullRange=l.Value,this.InitEdge(o[a],o[a+1],o[a-1],t[a]);for(var h=o[0],c=h,u=h;;)if(r.IntPoint.op_Equality(c.Curr,c.Next.Curr)){if(c==c.Next)break;c==h&&(h=c.Next),u=c=this.RemoveEdge(c)}else{if(c.Prev==c.Next)break;if(!i||!r.ClipperBase.SlopesEqual(c.Prev.Curr,c.Curr,c.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(c.Prev.Curr,c.Curr,c.Next.Curr)){if((c=c.Next)==u)break}else c==h&&(h=c.Next),u=c=(c=this.RemoveEdge(c)).Prev}if(!i&&c==c.Next||i&&c.Prev==c.Next)return!1;i||(this.m_HasOpenPaths=!0,h.Prev.OutIdx=r.ClipperBase.Skip);var p;c=h;do{this.InitEdge2(c,e),c=c.Next,s&&c.Curr.Y!=h.Curr.Y&&(s=!1)}while(c!=h);if(s){if(i)return!1;for(c.Prev.OutIdx=r.ClipperBase.Skip,c.Prev.Bot.X<c.Prev.Top.X&&this.ReverseHorizontal(c.Prev),(f=new r.LocalMinima).Next=null,f.Y=c.Bot.Y,f.LeftBound=null,f.RightBound=c,f.RightBound.Side=r.EdgeSide.esRight,f.RightBound.WindDelta=0;c.Next.OutIdx!=r.ClipperBase.Skip;)c.NextInLML=c.Next,c.Bot.X!=c.Prev.Top.X&&this.ReverseHorizontal(c),c=c.Next;return this.InsertLocalMinima(f),this.m_edges.push(o),!0}this.m_edges.push(o);for(var d=null;(c=this.FindNextLocMin(c))!=d;){var f;null==d&&(d=c),(f=new r.LocalMinima).Next=null,f.Y=c.Bot.Y,c.Dx<c.Prev.Dx?(f.LeftBound=c.Prev,f.RightBound=c,p=!1):(f.LeftBound=c,f.RightBound=c.Prev,p=!0),f.LeftBound.Side=r.EdgeSide.esLeft,f.RightBound.Side=r.EdgeSide.esRight,i?f.LeftBound.Next==f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,c=this.ProcessBound(f.LeftBound,p);var m=this.ProcessBound(f.RightBound,!p);f.LeftBound.OutIdx==r.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx==r.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),p||(c=m)}return!0},r.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},r.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(r.IntPoint.op_Equality(t,i)||r.IntPoint.op_Equality(t,e)||r.IntPoint.op_Equality(i,e))&&(t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},r.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},r.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=r.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},r.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},r.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},r.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},r.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=r.EdgeSide.esLeft,e.OutIdx=r.ClipperBase.Unassigned),null!=(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=r.EdgeSide.esRight,e.OutIdx=r.ClipperBase.Unassigned),t=t.Next}},r.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=r.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=r.PolyFillType.pftEvenOdd,this.m_SubjFillType=r.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,r.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=r.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t)},r.Clipper.ioReverseSolution=1,r.Clipper.ioStrictlySimple=2,r.Clipper.ioPreserveCollinear=4,r.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),r.ClipperBase.prototype.Clear.call(this))},r.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},r.Clipper.prototype.Reset=function(){r.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},r.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new r.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){(i=new r.Scanbeam).Y=t,i.Next=this.m_Scanbeam,this.m_Scanbeam=i}else{for(var e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t==e.Y)return;var i;(i=new r.Scanbeam).Y=t,i.Next=e.Next,e.Next=i}},r.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof r.PolyTree;if(4==e&&!i){var n=t[0],o=t[1],a=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&r.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,r.Clear(o),this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{(h=this.ExecuteInternal())&&this.BuildResult(o)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(4==e&&i){n=t[0];var l=t[1];a=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var h;(h=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(2==e&&!i){n=t[0],o=t[1];return this.Execute(n,o,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}if(2==e&&i){n=t[0],l=t[1];return this.Execute(n,l,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}},r.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},r.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),r.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,n=this.m_PolyOuts.length;i<n;i++){null===(o=this.m_PolyOuts[i]).Pts||o.IsOpen||(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)}this.JoinCommonEdges();for(i=0,n=this.m_PolyOuts.length;i<n;i++){var o;null===(o=this.m_PolyOuts[i]).Pts||o.IsOpen||this.FixupOutPolygon(o)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{r.Clear(this.m_Joins),r.Clear(this.m_GhostJoins)}},r.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,null,t},r.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);r.Clear(this.m_PolyOuts)},r.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},r.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){for(t.Prev.Next=null;null!==t;)t,t=t.Next,null}},r.Clipper.prototype.AddJoin=function(t,e,i){var n=new r.Join;n.OutPt1=t,n.OutPt2=e,n.OffPt.X=i.X,n.OffPt.Y=i.Y,this.m_Joins.push(n)},r.Clipper.prototype.AddGhostJoin=function(t,e){var i=new r.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,this.m_GhostJoins.push(i)},r.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var n=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(n=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(n=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(n=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(r.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==n&&r.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var o=0,a=this.m_GhostJoins.length;o<a;o++){var s=this.m_GhostJoins[o];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,i.Bot,i.Top)&&this.AddJoin(s.OutPt1,n,s.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(n,l,e.Top)}if(e.NextInAEL!=i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(n,l,i.Top)}var h=e.NextInAEL;if(null!==h)for(;h!=i;)this.IntersectEdges(i,h,e.Curr,!1),h=h.NextInAEL}}}},r.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},r.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<r.Clipper.TopX(t,e.Top.Y):t.Top.X>r.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},r.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==r.PolyType.ptSubject?this.m_SubjFillType==r.PolyFillType.pftEvenOdd:this.m_ClipFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==r.PolyType.ptSubject?this.m_ClipFillType==r.PolyFillType.pftEvenOdd:this.m_SubjFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==r.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case r.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case r.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case r.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case r.ClipType.ctIntersection:switch(i){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case r.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case r.ClipType.ctUnion:switch(i){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===t.WindCnt2;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case r.ClipType.ctDifference:if(t.PolyTyp==r.PolyType.ptSubject)switch(i){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===t.WindCnt2;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case r.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case r.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===t.WindCnt2;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},r.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=r.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,n=e.PrevInAEL;null!==n;)n.PolyTyp==e.PolyTyp&&0!==n.WindDelta&&(i=!i),n=n.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},r.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},r.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},r.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(i=e.NextInAEL)&&(i.PrevInAEL=t),null!==(n=t.PrevInAEL)&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i;else if(e.NextInAEL==t){null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},r.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL==t){null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},r.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},r.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var n,o,a;if(r.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(n=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=r.EdgeSide.esLeft,e.Side=r.EdgeSide.esRight,a=(o=t).PrevInAEL==e?e.PrevInAEL:o.PrevInAEL):(n=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=r.EdgeSide.esRight,e.Side=r.EdgeSide.esLeft,a=(o=e).PrevInAEL==t?t.PrevInAEL:o.PrevInAEL),null!==a&&a.OutIdx>=0&&r.Clipper.TopX(a,i.Y)==r.Clipper.TopX(o,i.Y)&&r.ClipperBase.SlopesEqual(o,a,this.m_UseFullRange)&&0!==o.WindDelta&&0!==a.WindDelta){var s=this.AddOutPt(a,i);this.AddJoin(n,s,o.Top)}return n},r.Clipper.prototype.CreateOutRec=function(){var t=new r.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},r.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==r.EdgeSide.esLeft;if(t.OutIdx<0){(o=this.CreateOutRec()).IsOpen=0===t.WindDelta;var n=new r.OutPt;return o.Pts=n,n.Idx=o.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=n,n.Prev=n,o.IsOpen||this.SetHoleState(t,o),t.OutIdx=o.Idx,n}var o,a=(o=this.m_PolyOuts[t.OutIdx]).Pts;return i&&r.IntPoint.op_Equality(e,a.Pt)?a:!i&&r.IntPoint.op_Equality(e,a.Prev.Pt)?a.Prev:((n=new r.OutPt).Idx=o.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=a,n.Prev=a.Prev,n.Prev.Next=n,a.Prev=n,i&&(o.Pts=n),n)},r.Clipper.prototype.SwapPoints=function(t,e){var i=new r.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=i.X,e.Value.Y=i.Y},r.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){return t.X>i.X==t.X<n.X||(e.X>i.X==e.X<n.X||(i.X>t.X==i.X<e.X||(n.X>t.X==n.X<e.X||(t.X==i.X&&e.X==n.X||t.X==n.X&&e.X==i.X))))},r.Clipper.prototype.InsertPolyPtBetween=function(t,e,i){var n=new r.OutPt;return n.Pt.X=i.X,n.Pt.Y=i.Y,e==t.Next?(t.Next=n,e.Prev=n,n.Next=e,n.Prev=t):(e.Next=n,t.Prev=n,n.Next=t,n.Prev=e),n},r.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,n=t.PrevInAEL;null!==n;)n.OutIdx>=0&&0!=n.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;i&&(e.IsHole=!0)},r.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?r.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},r.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;r.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;r.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var o=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;r.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var a=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;r.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var s=Math.abs(this.GetDx(e.Pt,i.Pt));return n>=a&&n>=s||o>=a&&o>=s},r.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;r.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},r.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X?e:i.Next==i?e:n.Next==n?t:this.FirstIsBottomPt(i,n)?t:e},r.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},r.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},r.Clipper.prototype.AppendPolygon=function(t,e){var i,n=this.m_PolyOuts[t.OutIdx],o=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(n,o)?o:this.Param1RightOfParam2(o,n)?n:this.GetLowermostRec(n,o);var a,s=n.Pts,l=s.Prev,h=o.Pts,c=h.Prev;t.Side==r.EdgeSide.esLeft?(e.Side==r.EdgeSide.esLeft?(this.ReversePolyPtLinks(h),h.Next=s,s.Prev=h,l.Next=c,c.Prev=l,n.Pts=c):(c.Next=s,s.Prev=c,h.Prev=l,l.Next=h,n.Pts=h),a=r.EdgeSide.esLeft):(e.Side==r.EdgeSide.esRight?(this.ReversePolyPtLinks(h),l.Next=c,c.Prev=l,h.Next=s,s.Prev=h):(l.Next=h,h.Prev=l,s.Prev=c,c.Next=s),a=r.EdgeSide.esRight),n.BottomPt=null,i==o&&(o.FirstLeft!=n&&(n.FirstLeft=o.FirstLeft),n.IsHole=o.IsHole),o.Pts=null,o.BottomPt=null,o.FirstLeft=n;var u=t.OutIdx,p=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==p){d.OutIdx=u,d.Side=a;break}d=d.NextInAEL}o.Idx=n.Idx},r.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!=t)}},r.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},r.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},r.Clipper.prototype.IntersectEdges=function(t,e,i,n){var o,a,s,l,h,c,u=!n&&null===t.NextInLML&&t.Top.X==i.X&&t.Top.Y==i.Y,p=!n&&null===e.NextInLML&&e.Top.X==i.X&&e.Top.Y==i.Y,d=t.OutIdx>=0,f=e.OutIdx>=0;if(0===t.WindDelta||0===e.WindDelta)return 0===t.WindDelta&&0===e.WindDelta?(u||p)&&d&&f&&this.AddLocalMaxPoly(t,e,i):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==r.ClipType.ctUnion?0===t.WindDelta?f&&(this.AddOutPt(t,i),d&&(t.OutIdx=-1)):d&&(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==r.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==r.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):(this.AddOutPt(t,i),d&&(t.OutIdx=-1))),u&&(t.OutIdx<0?this.DeleteFromAEL(t):r.Error("Error intersecting polylines")),void(p&&(e.OutIdx<0?this.DeleteFromAEL(e):r.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var m=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=m}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;switch(t.PolyTyp==r.PolyType.ptSubject?(o=this.m_SubjFillType,s=this.m_ClipFillType):(o=this.m_ClipFillType,s=this.m_SubjFillType),e.PolyTyp==r.PolyType.ptSubject?(a=this.m_SubjFillType,l=this.m_ClipFillType):(a=this.m_ClipFillType,l=this.m_SubjFillType),o){case r.PolyFillType.pftPositive:h=t.WindCnt;break;case r.PolyFillType.pftNegative:h=-t.WindCnt;break;default:h=Math.abs(t.WindCnt)}switch(a){case r.PolyFillType.pftPositive:c=e.WindCnt;break;case r.PolyFillType.pftNegative:c=-e.WindCnt;break;default:c=Math.abs(e.WindCnt)}if(d&&f)u||p||0!==h&&1!=h||0!==c&&1!=c||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=r.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if(d)0!==c&&1!=c||(this.AddOutPt(t,i),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if(f)0!==h&&1!=h||(this.AddOutPt(e,i),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if(!(0!==h&&1!=h||0!==c&&1!=c||u||p)){var v,g;switch(s){case r.PolyFillType.pftPositive:v=t.WindCnt2;break;case r.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2)}switch(l){case r.PolyFillType.pftPositive:g=e.WindCnt2;break;case r.PolyFillType.pftNegative:g=-e.WindCnt2;break;default:g=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==h&&1==c)switch(this.m_ClipType){case r.ClipType.ctIntersection:v>0&&g>0&&this.AddLocalMinPoly(t,e,i);break;case r.ClipType.ctUnion:v<=0&&g<=0&&this.AddLocalMinPoly(t,e,i);break;case r.ClipType.ctDifference:(t.PolyTyp==r.PolyType.ptClip&&v>0&&g>0||t.PolyTyp==r.PolyType.ptSubject&&v<=0&&g<=0)&&this.AddLocalMinPoly(t,e,i);break;case r.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else r.Clipper.SwapSides(t,e)}u!=p&&(u&&t.OutIdx>=0||p&&e.OutIdx>=0)&&(r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e)),u&&this.DeleteFromAEL(t),p&&this.DeleteFromAEL(e)},r.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},r.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},r.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&r.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,r.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},r.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},r.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=r.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=r.Direction.dRightToLeft)},r.Clipper.prototype.PrepareHorzJoins=function(t,e){var i=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=r.EdgeSide.esLeft&&(i=i.Prev),e&&(r.IntPoint.op_Equality(i.Pt,t.Top)?this.AddGhostJoin(i,t.Bot):this.AddGhostJoin(i,t.Top))},r.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var n=i.Dir,o=i.Left,a=i.Right,s=t,l=null;null!==s.NextInLML&&r.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(l=this.GetMaximaPair(s));;){for(var h=t==s,c=this.GetNextInAEL(t,n);null!==c&&!(c.Curr.X==t.Top.X&&null!==t.NextInLML&&c.Dx<t.NextInLML.Dx);){var u=this.GetNextInAEL(c,n);if(n==r.Direction.dLeftToRight&&c.Curr.X<=a||n==r.Direction.dRightToLeft&&c.Curr.X>=o){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),c==l&&h)return n==r.Direction.dLeftToRight?this.IntersectEdges(t,c,c.Top,!1):this.IntersectEdges(c,t,c.Top,!1),void(l.OutIdx>=0&&r.Error("ProcessHorizontal error"));if(n==r.Direction.dLeftToRight){var p=new r.IntPoint(c.Curr.X,t.Curr.Y);this.IntersectEdges(t,c,p,!0)}else{p=new r.IntPoint(c.Curr.X,t.Curr.Y);this.IntersectEdges(c,t,p,!0)}this.SwapPositionsInAEL(t,c)}else if(n==r.Direction.dLeftToRight&&c.Curr.X>=a||n==r.Direction.dRightToLeft&&c.Curr.X<=o)break;c=u}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!r.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot);i={Dir:n,Left:o,Right:a};this.GetHorzDirection(t,i),n=i.Dir,o=i.Left,a=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var d=this.AddOutPt(t,t.Top);if(0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var f=t.PrevInAEL;u=t.NextInAEL;if(null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&r.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var m=this.AddOutPt(f,t.Bot);this.AddJoin(d,m,t.Top)}else if(null!==u&&u.Curr.X==t.Bot.X&&u.Curr.Y==t.Bot.Y&&0!==u.WindDelta&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&r.ClipperBase.SlopesEqual(t,u,this.m_UseFullRange)){m=this.AddOutPt(u,t.Bot);this.AddJoin(d,m,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(n==r.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&r.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},r.Clipper.prototype.GetNextInAEL=function(t,e){return e==r.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},r.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},r.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},r.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},r.Clipper.prototype.GetMaximaPair=function(t){var e=null;return r.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:r.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||r.ClipperBase.IsHorizontal(e))?e:null},r.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,r.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},r.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=r.Clipper.TopX(i,e),i=i.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var o=i.NextInSEL,a=new r.IntPoint;if(i.Curr.X>o.Curr.X){!this.IntersectPoint(i,o,a)&&i.Curr.X>o.Curr.X+1&&r.Error("Intersection error"),a.Y>t&&(a.Y=t,Math.abs(i.Dx)>Math.abs(o.Dx)?a.X=r.Clipper.TopX(o,t):a.X=r.Clipper.TopX(i,t));var s=new r.IntersectNode;s.Edge1=i,s.Edge2=o,s.Pt.X=a.X,s.Pt.Y=a.Y,this.m_IntersectList.push(s),this.SwapPositionsInSEL(i,o),n=!0}else i=o}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},r.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},r.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},r.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},r.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt,!0),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};l.msie?r.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.round(t)}:l.chromium?r.Clipper.Round=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}:l.safari?r.Clipper.Round=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t}:r.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},r.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+r.Clipper.Round(t.Dx*(e-t.Bot.Y))},r.Clipper.prototype.IntersectPoint=function(t,e,i){var n,o;if(i.X=0,i.Y=0,r.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(i.X=e.Bot.X,i.Y=e.Bot.Y):(i.X=t.Bot.X,i.Y=t.Bot.Y),!1;if(0===t.Delta.X)i.X=t.Bot.X,r.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(o=e.Bot.Y-e.Bot.X/e.Dx,i.Y=r.Clipper.Round(i.X/e.Dx+o));else if(0===e.Delta.X)i.X=e.Bot.X,r.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(n=t.Bot.Y-t.Bot.X/t.Dx,i.Y=r.Clipper.Round(i.X/t.Dx+n));else{n=t.Bot.X-t.Bot.Y*t.Dx;var a=((o=e.Bot.X-e.Bot.Y*e.Dx)-n)/(t.Dx-e.Dx);i.Y=r.Clipper.Round(a),Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=r.Clipper.Round(t.Dx*a+n):i.X=r.Clipper.Round(e.Dx*a+o)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=r.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=r.Clipper.TopX(t,i.Y):i.X=r.Clipper.TopX(e,i.Y)}return!0},r.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var n=this.GetMaximaPair(e);i=null===n||!r.ClipperBase.IsHorizontal(n)}if(i){var o=e.PrevInAEL;this.DoMaxima(e),e=null===o?this.m_ActiveEdges:o.NextInAEL}else{if(this.IsIntermediate(e,t)&&r.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=r.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){o=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==o&&o.OutIdx>=0&&o.Curr.X==e.Curr.X&&0!==o.WindDelta){var a=this.AddOutPt(o,e.Curr),s=this.AddOutPt(e,e.Curr);this.AddJoin(a,s,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){a=null;e.OutIdx>=0&&(a=this.AddOutPt(e,e.Top));o=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var l=e.NextInAEL;if(null!==o&&o.Curr.X==e.Bot.X&&o.Curr.Y==e.Bot.Y&&null!==a&&o.OutIdx>=0&&o.Curr.Y>o.Top.Y&&r.ClipperBase.SlopesEqual(e,o,this.m_UseFullRange)&&0!==e.WindDelta&&0!==o.WindDelta){s=this.AddOutPt(o,e.Bot);this.AddJoin(a,s,e.Top)}else if(null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==a&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&r.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta){s=this.AddOutPt(l,e.Bot);this.AddJoin(a,s,e.Top)}}e=e.NextInAEL}},r.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top,!0),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):r.Error("DoMaxima error")},r.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},r.Clipper.Orientation=function(t){return r.Clipper.Area(t)>=0},r.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!=t);return e},r.Clipper.prototype.BuildResult=function(t){r.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e];if(null!==n.Pts){var o=n.Pts.Prev,a=this.PointCount(o);if(!(a<2)){for(var s=new Array(a),l=0;l<a;l++)s[l]=o.Pt,o=o.Prev;t.push(s)}}}},r.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e],o=this.PointCount(n.Pts);if(!(n.IsOpen&&o<2||!n.IsOpen&&o<3)){this.FixHoleLinkage(n);var a=new r.PolyNode;t.m_AllPolys.push(a),n.PolyNode=a,a.m_polygon.length=o;for(var s=n.Pts.Prev,l=0;l<o;l++)a.m_polygon[l]=s.Pt,s=s.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++){null!==(n=this.m_PolyOuts[e]).PolyNode&&(n.IsOpen?(n.PolyNode.IsOpen=!0,t.AddChild(n.PolyNode)):null!==n.FirstLeft&&null!=n.FirstLeft.PolyNode?n.FirstLeft.PolyNode.AddChild(n.PolyNode):t.AddChild(n.PolyNode))}},r.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return this.DisposeOutPts(i),void(t.Pts=null);if(r.IntPoint.op_Equality(i.Pt,i.Next.Pt)||r.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||r.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt))){e=null;i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev,null}else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},r.Clipper.prototype.DupOutPt=function(t,e){var i=new r.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},r.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},r.Clipper.prototype.JoinHorz=function(t,e,i,n,o,a){var s=t.Pt.X>e.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight,l=i.Pt.X>n.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight;if(s==l)return!1;if(s==r.Direction.dLeftToRight){for(;t.Next.Pt.X<=o.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;a&&t.Pt.X!=o.X&&(t=t.Next),e=this.DupOutPt(t,!a),r.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,!a))}else{for(;t.Next.Pt.X>=o.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;a||t.Pt.X==o.X||(t=t.Next),e=this.DupOutPt(t,a),r.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,a))}if(l==r.Direction.dLeftToRight){for(;i.Next.Pt.X<=o.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==o.Y;)i=i.Next;a&&i.Pt.X!=o.X&&(i=i.Next),n=this.DupOutPt(i,!a),r.IntPoint.op_Inequality(n.Pt,o)&&((i=n).Pt.X=o.X,i.Pt.Y=o.Y,n=this.DupOutPt(i,!a))}else{for(;i.Next.Pt.X>=o.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==o.Y;)i=i.Next;a||i.Pt.X==o.X||(i=i.Next),n=this.DupOutPt(i,a),r.IntPoint.op_Inequality(n.Pt,o)&&((i=n).Pt.X=o.X,i.Pt.Y=o.Y,n=this.DupOutPt(i,a))}return s==r.Direction.dLeftToRight==a?(t.Prev=i,i.Next=t,e.Next=n,n.Prev=e):(t.Next=i,i.Prev=t,e.Prev=n,n.Next=e),!0},r.Clipper.prototype.JoinPoints=function(t,e,i){var n=t.OutPt1,o=new r.OutPt,a=t.OutPt2,s=new r.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&r.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&r.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(o=t.OutPt1.Next;o!=n&&r.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;var h=o.Pt.Y>t.OffPt.Y;for(s=t.OutPt2.Next;s!=a&&r.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;return h!=s.Pt.Y>t.OffPt.Y&&(h?(o=this.DupOutPt(n,!1),s=this.DupOutPt(a,!0),n.Prev=a,a.Next=n,o.Next=s,s.Prev=o,t.OutPt1=n,t.OutPt2=o,!0):(o=this.DupOutPt(n,!0),s=this.DupOutPt(a,!1),n.Next=a,a.Prev=n,o.Prev=s,s.Next=o,t.OutPt1=n,t.OutPt2=o,!0))}if(l){for(o=n;n.Prev.Pt.Y==n.Pt.Y&&n.Prev!=o&&n.Prev!=a;)n=n.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=n&&o.Next!=a;)o=o.Next;if(o.Next==n||o.Next==a)return!1;for(s=a;a.Prev.Pt.Y==a.Pt.Y&&a.Prev!=s&&a.Prev!=o;)a=a.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=a&&s.Next!=n;)s=s.Next;if(s.Next==a||s.Next==n)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,o.Pt.X,a.Pt.X,s.Pt.X,c))return!1;var u,p=c.Left,d=c.Right,f=new r.IntPoint;return n.Pt.X>=p&&n.Pt.X<=d?(f.X=n.Pt.X,f.Y=n.Pt.Y,u=n.Pt.X>o.Pt.X):a.Pt.X>=p&&a.Pt.X<=d?(f.X=a.Pt.X,f.Y=a.Pt.Y,u=a.Pt.X>s.Pt.X):o.Pt.X>=p&&o.Pt.X<=d?(f.X=o.Pt.X,f.Y=o.Pt.Y,u=o.Pt.X>n.Pt.X):(f.X=s.Pt.X,f.Y=s.Pt.Y,u=s.Pt.X>a.Pt.X),t.OutPt1=n,t.OutPt2=a,this.JoinHorz(n,o,a,s,f,u)}for(o=n.Next;r.IntPoint.op_Equality(o.Pt,n.Pt)&&o!=n;)o=o.Next;var m=o.Pt.Y>n.Pt.Y||!r.ClipperBase.SlopesEqual(n.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(m){for(o=n.Prev;r.IntPoint.op_Equality(o.Pt,n.Pt)&&o!=n;)o=o.Prev;if(o.Pt.Y>n.Pt.Y||!r.ClipperBase.SlopesEqual(n.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=a.Next;r.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Next;var v=s.Pt.Y>a.Pt.Y||!r.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(v){for(s=a.Prev;r.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Prev;if(s.Pt.Y>a.Pt.Y||!r.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return o!=n&&s!=a&&o!=s&&(e!=i||m!=v)&&(m?(o=this.DupOutPt(n,!1),s=this.DupOutPt(a,!0),n.Prev=a,a.Next=n,o.Next=s,s.Prev=o,t.OutPt1=n,t.OutPt2=o,!0):(o=this.DupOutPt(n,!0),s=this.DupOutPt(a,!1),n.Next=a,a.Prev=n,o.Prev=s,s.Next=o,t.OutPt1=n,t.OutPt2=o,!0))},r.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0==t[e].length;)e++;if(e==i)return new r.IntRect(0,0,0,0);var n=new r.IntRect;for(n.left=t[e][0].X,n.right=n.left,n.top=t[e][0].Y,n.bottom=n.top;e<i;e++)for(var o=0,a=t[e].length;o<a;o++)t[e][o].X<n.left?n.left=t[e][o].X:t[e][o].X>n.right&&(n.right=t[e][o].X),t[e][o].Y<n.top?n.top=t[e][o].Y:t[e][o].Y>n.bottom&&(n.bottom=t[e][o].Y);return n},r.Clipper.prototype.GetBounds2=function(t){var e=t,i=new r.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},r.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var r=e[0],o=1;o<=n;++o){var a=o==n?e[0]:e[o];if(a.Y==t.Y&&(a.X==t.X||r.Y==t.Y&&a.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=a.Y<t.Y)if(r.X>=t.X)if(a.X>t.X)i=1-i;else{if(0==(s=(r.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(r.Y-t.Y)))return-1;s>0==a.Y>r.Y&&(i=1-i)}else if(a.X>t.X){var s;if(0==(s=(r.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(r.Y-t.Y)))return-1;s>0==a.Y>r.Y&&(i=1-i)}r=a}return i},r.Clipper.prototype.PointInPolygon=function(t,e){for(var i=0,n=e;;){var r=e.Pt.X,o=e.Pt.Y,a=e.Next.Pt.X,s=e.Next.Pt.Y;if(s==t.Y&&(a==t.X||o==t.Y&&a>t.X==r<t.X))return-1;if(o<t.Y!=s<t.Y)if(r>=t.X)if(a>t.X)i=1-i;else{if(0==(l=(r-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;l>0==s>o&&(i=1-i)}else if(a>t.X){var l;if(0==(l=(r-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;l>0==s>o&&(i=1-i)}if(n==(e=e.Next))break}return i},r.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return 0!=n;i=i.Next}while(i!=t);return!0},r.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];null!==r.Pts&&r.FirstLeft==t&&this.Poly2ContainsPoly1(r.Pts,e.Pts)&&(r.FirstLeft=e)}},r.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,n=this.m_PolyOuts,r=n.length,o=n[i];i<r;o=n[++i])o.FirstLeft==t&&(o.FirstLeft=e)},r.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},r.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i,n=this.m_Joins[t],o=this.GetOutRec(n.OutPt1.Idx),a=this.GetOutRec(n.OutPt2.Idx);if(null!=o.Pts&&null!=a.Pts)if(i=o==a?o:this.Param1RightOfParam2(o,a)?a:this.Param1RightOfParam2(a,o)?o:this.GetLowermostRec(o,a),this.JoinPoints(n,o,a))if(o==a){if(o.Pts=n.OutPt1,o.BottomPt=null,(a=this.CreateOutRec()).Pts=n.OutPt2,this.UpdateOutPtIdxs(a),this.m_UsingPolyTree)for(var s=0,l=this.m_PolyOuts.length;s<l-1;s++){var h=this.m_PolyOuts[s];null!=h.Pts&&r.Clipper.ParseFirstLeft(h.FirstLeft)==o&&h.IsHole!=o.IsHole&&(this.Poly2ContainsPoly1(h.Pts,n.OutPt2)&&(h.FirstLeft=a))}this.Poly2ContainsPoly1(a.Pts,o.Pts)?(a.IsHole=!o.IsHole,a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o),(a.IsHole^this.ReverseSolution)==this.Area(a)>0&&this.ReversePolyPtLinks(a.Pts)):this.Poly2ContainsPoly1(o.Pts,a.Pts)?(a.IsHole=o.IsHole,o.IsHole=!a.IsHole,a.FirstLeft=o.FirstLeft,o.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,a),(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)):(a.IsHole=o.IsHole,a.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,a))}else a.Pts=null,a.BottomPt=null,a.Idx=o.Idx,o.IsHole=i.IsHole,i==a&&(o.FirstLeft=a.FirstLeft),a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o)}},r.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!=t.Pts)},r.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i)do{for(var n=i.Next;n!=e.Pts;){if(r.IntPoint.op_Equality(i.Pt,n.Pt)&&n.Next!=i&&n.Prev!=i){var o=i.Prev,a=n.Prev;i.Prev=a,a.Next=i,n.Prev=o,o.Next=n,e.Pts=i;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft),n=i}n=n.Next}i=i.Next}while(i!=e.Pts)}},r.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},r.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do{i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!=t.Pts);return.5*i},r.Clipper.SimplifyPolygon=function(t,e){var i=new Array,n=new r.Clipper(0);return n.StrictlySimple=!0,n.AddPath(t,r.PolyType.ptSubject,!0),n.Execute(r.ClipType.ctUnion,i,e,e),i},r.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=r.PolyFillType.pftEvenOdd);var i=new Array,n=new r.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(t,r.PolyType.ptSubject,!0),n.Execute(r.ClipType.ctUnion,i,e,e),i},r.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},r.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,r=i.X-e.X,o=n*e.X+r*e.Y;return(o=n*t.X+r*t.Y-o)*o/(n*n+r*r)},r.Clipper.SlopesNearCollinear=function(t,e,i,n){return r.Clipper.DistanceFromLineSqrd(e,t,i)<n},r.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r<=i},r.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},r.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var n=new Array(i),o=0;o<i;++o)n[o]=new r.OutPt;for(o=0;o<i;++o)n[o].Pt=t[o],n[o].Next=n[(o+1)%i],n[o].Next.Prev=n[o],n[o].Idx=0;for(var a=e*e,s=n[0];0==s.Idx&&s.Next!=s.Prev;)r.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,a)?(s=r.Clipper.ExcludeOp(s),i--):r.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,a)?(r.Clipper.ExcludeOp(s.Next),s=r.Clipper.ExcludeOp(s),i-=2):r.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,a)?(s=r.Clipper.ExcludeOp(s),i--):(s.Idx=1,s=s.Next);i<3&&(i=0);var l=new Array(i);for(o=0;o<i;++o)l[o]=new r.IntPoint(s.Pt),s=s.Next;return n=null,l},r.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),n=0,o=t.length;n<o;n++)i[n]=r.Clipper.CleanPolygon(t[n],e);return i},r.Clipper.Minkowski=function(t,e,i,n){var o=n?1:0,a=t.length,s=e.length,l=new Array;if(i)for(var h=0;h<s;h++){for(var c=new Array(a),u=0,p=t.length,d=t[u];u<p;d=t[++u])c[u]=new r.IntPoint(e[h].X+d.X,e[h].Y+d.Y);l.push(c)}else for(h=0;h<s;h++){for(c=new Array(a),u=0,p=t.length,d=t[u];u<p;d=t[++u])c[u]=new r.IntPoint(e[h].X-d.X,e[h].Y-d.Y);l.push(c)}var f=new Array;for(h=0;h<s-1+o;h++)for(u=0;u<a;u++){var m=new Array;m.push(l[h%s][u%a]),m.push(l[(h+1)%s][u%a]),m.push(l[(h+1)%s][(u+1)%a]),m.push(l[h%s][(u+1)%a]),r.Clipper.Orientation(m)||m.reverse(),f.push(m)}var v=new r.Clipper(0);return v.AddPaths(f,r.PolyType.ptSubject,!0),v.Execute(r.ClipType.ctUnion,l,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),l},r.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var i=t[0],n=t[1],o=t[2];return r.Clipper.Minkowski(i,n,!0,o)}if(4==e){i=t[0];for(var a=t[1],s=t[2],l=(o=t[3],new r.Clipper),h=0,c=a.length;h<c;++h){var u=r.Clipper.Minkowski(i,a[h],!0,o);l.AddPaths(u,r.PolyType.ptSubject,!0)}o&&l.AddPaths(a,r.PolyType.ptClip,!0);var p=new r.Paths;return l.Execute(r.ClipType.ctUnion,p,s,s),p}},r.Clipper.MinkowskiDiff=function(t,e,i){return r.Clipper.Minkowski(t,e,!1,i)},r.Clipper.PolyTreeToPaths=function(t){var e=new Array;return r.Clipper.AddPolyNodeToPaths(t,r.Clipper.NodeType.ntAny,e),e},r.Clipper.AddPolyNodeToPaths=function(t,e,i){var n=!0;switch(e){case r.Clipper.NodeType.ntOpen:return;case r.Clipper.NodeType.ntClosed:n=!t.IsOpen}t.m_polygon.length>0&&n&&i.push(t.m_polygon);for(var o=0,a=t.Childs(),s=a.length,l=a[o];o<s;l=a[++o])r.Clipper.AddPolyNodeToPaths(l,e,i)},r.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new r.Paths,i=0,n=t.ChildCount();i<n;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},r.Clipper.ClosedPathsFromPolyTree=function(t){var e=new r.Paths;return r.Clipper.AddPolyNodeToPaths(t,r.Clipper.NodeType.ntClosed,e),e},O(r.Clipper,r.ClipperBase),r.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},r.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=r.ClipperOffset.def_arc_tolerance),this.m_destPolys=new r.Paths,this.m_srcPoly=new r.Path,this.m_destPoly=new r.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new r.IntPoint,this.m_polyNodes=new r.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},r.ClipperOffset.two_pi=6.28318530717959,r.ClipperOffset.def_arc_tolerance=.25,r.ClipperOffset.prototype.Clear=function(){r.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},r.ClipperOffset.Round=r.Clipper.Round,r.ClipperOffset.prototype.AddPath=function(t,e,i){var n=t.length-1;if(!(n<0)){var o=new r.PolyNode;if(o.m_jointype=e,o.m_endtype=i,i==r.EndType.etClosedLine||i==r.EndType.etClosedPolygon)for(;n>0&&r.IntPoint.op_Equality(t[0],t[n]);)n--;o.m_polygon.push(t[0]);for(var a=0,s=0,l=1;l<=n;l++)r.IntPoint.op_Inequality(o.m_polygon[a],t[l])&&(a++,o.m_polygon.push(t[l]),(t[l].Y>o.m_polygon[s].Y||t[l].Y==o.m_polygon[s].Y&&t[l].X<o.m_polygon[s].X)&&(s=a));if(!(i==r.EndType.etClosedPolygon&&a<2||i!=r.EndType.etClosedPolygon&&a<0)&&(this.m_polyNodes.AddChild(o),i==r.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new r.IntPoint(0,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(o.m_polygon[s].Y>h.Y||o.m_polygon[s].Y==h.Y&&o.m_polygon[s].X<h.X)&&(this.m_lowest=new r.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},r.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},r.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!r.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((e=this.m_polyNodes.Childs()[t]).m_endtype==r.EndType.etClosedPolygon||e.m_endtype==r.EndType.etClosedLine&&r.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype!=r.EndType.etClosedLine||r.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},r.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,n=e.Y-t.Y;if(0==i&&0==n)return new r.DoublePoint(0,0);var o=1/Math.sqrt(i*i+n*n);return i*=o,n*=o,new r.DoublePoint(n,-i)},r.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,r.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){(o=this.m_polyNodes.Childs()[e]).m_endtype==r.EndType.etClosedPolygon&&this.m_destPolys.push(o.m_polygon)}else{var i;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,i=this.ArcTolerance<=0?r.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*r.ClipperOffset.def_arc_tolerance?Math.abs(t)*r.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var n=3.14159265358979/Math.acos(1-i/Math.abs(t));this.m_sin=Math.sin(r.ClipperOffset.two_pi/n),this.m_cos=Math.cos(r.ClipperOffset.two_pi/n),this.m_StepsPerRad=n/r.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(e=0;e<this.m_polyNodes.ChildCount();e++){var o=this.m_polyNodes.Childs()[e];this.m_srcPoly=o.m_polygon;var a=this.m_srcPoly.length;if(!(0==a||t<=0&&(a<3||o.m_endtype!=r.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=a){this.m_normals.length=0;for(p=0;p<a-1;p++)this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[p],this.m_srcPoly[p+1]));if(o.m_endtype==r.EndType.etClosedLine||o.m_endtype==r.EndType.etClosedPolygon?this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[a-1],this.m_srcPoly[0])):this.m_normals.push(new r.DoublePoint(this.m_normals[a-2])),o.m_endtype==r.EndType.etClosedPolygon){var s=a-1;for(p=0;p<a;p++)s=this.OffsetPoint(p,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(o.m_endtype==r.EndType.etClosedLine){for(s=a-1,p=0;p<a;p++)s=this.OffsetPoint(p,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var l=this.m_normals[a-1];for(p=a-1;p>0;p--)this.m_normals[p]=new r.DoublePoint(-this.m_normals[p-1].X,-this.m_normals[p-1].Y);this.m_normals[0]=new r.DoublePoint(-l.X,-l.Y),s=0;for(p=a-1;p>=0;p--)s=this.OffsetPoint(p,s,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var h;for(s=0,p=1;p<a-1;++p)s=this.OffsetPoint(p,s,o.m_jointype);if(o.m_endtype==r.EndType.etOpenButt){p=a-1;h=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[p].X+this.m_normals[p].X*t),r.ClipperOffset.Round(this.m_srcPoly[p].Y+this.m_normals[p].Y*t)),this.m_destPoly.push(h),h=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[p].X-this.m_normals[p].X*t),r.ClipperOffset.Round(this.m_srcPoly[p].Y-this.m_normals[p].Y*t)),this.m_destPoly.push(h)}else{p=a-1;s=a-2,this.m_sinA=0,this.m_normals[p]=new r.DoublePoint(-this.m_normals[p].X,-this.m_normals[p].Y),o.m_endtype==r.EndType.etOpenSquare?this.DoSquare(p,s):this.DoRound(p,s)}for(p=a-1;p>0;p--)this.m_normals[p]=new r.DoublePoint(-this.m_normals[p-1].X,-this.m_normals[p-1].Y);this.m_normals[0]=new r.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);for(p=(s=a-1)-1;p>0;--p)s=this.OffsetPoint(p,s,o.m_jointype);o.m_endtype==r.EndType.etOpenButt?(h=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(h),h=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(h)):(s=1,this.m_sinA=0,o.m_endtype==r.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(o.m_jointype==r.JoinType.jtRound)for(var c=1,u=0,p=1;p<=n;p++){this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+u*t)));var d=c;c=c*this.m_cos-this.m_sin*u,u=d*this.m_sin+u*this.m_cos}else{c=-1,u=-1;for(var p=0;p<4;++p)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+u*t))),c<0?c=1:u<0?u=1:c=-1}this.m_destPolys.push(this.m_destPoly)}}}},r.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof r.PolyTree){o=t[0],a=t[1];if(o.Clear(),this.FixOrientations(),this.DoOffset(a),(n=new r.Clipper(0)).AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),a>0)n.Execute(r.ClipType.ctUnion,o,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{l=r.Clipper.GetBounds(this.m_destPolys);if((s=new r.Path).push(new r.IntPoint(l.left-10,l.bottom+10)),s.push(new r.IntPoint(l.right+10,l.bottom+10)),s.push(new r.IntPoint(l.right+10,l.top-10)),s.push(new r.IntPoint(l.left-10,l.top-10)),n.AddPath(s,r.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(r.ClipType.ctUnion,o,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),1==o.ChildCount()&&o.Childs()[0].ChildCount()>0){var e=o.Childs()[0];o.Childs()[0]=e.Childs()[0];for(var i=1;i<e.ChildCount();i++)o.AddChild(e.Childs()[i])}else o.Clear()}}else{var n,o=t[0],a=t[1];if(r.Clear(o),this.FixOrientations(),this.DoOffset(a),(n=new r.Clipper(0)).AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),a>0)n.Execute(r.ClipType.ctUnion,o,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var s,l=r.Clipper.GetBounds(this.m_destPolys);(s=new r.Path).push(new r.IntPoint(l.left-10,l.bottom+10)),s.push(new r.IntPoint(l.right+10,l.bottom+10)),s.push(new r.IntPoint(l.right+10,l.top-10)),s.push(new r.IntPoint(l.left-10,l.top-10)),n.AddPath(s,r.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(r.ClipType.ctUnion,o,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),o.length>0&&o.splice(0,1)}}},r.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new r.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case r.JoinType.jtMiter:var n=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;n>=this.m_miterLim?this.DoMiter(t,e,n):this.DoSquare(t,e);break;case r.JoinType.jtSquare:this.DoSquare(t,e);break;case r.JoinType.jtRound:this.DoRound(t,e)}return e=t},r.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},r.ClipperOffset.prototype.DoMiter=function(t,e,i){var n=this.m_delta/i;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*n),r.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*n)))},r.ClipperOffset.prototype.DoRound=function(t,e){for(var i,n=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),o=r.Cast_Int32(r.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(n))),a=this.m_normals[e].X,s=this.m_normals[e].Y,l=0;l<o;++l)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+a*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+s*this.m_delta))),i=a,a=a*this.m_cos-this.m_sin*s,s=i*this.m_sin+s*this.m_cos;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},r.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},r.JS={},r.JS.AreaOfPolygon=function(t,e){return e||(e=1),r.Clipper.Area(t)/(e*e)},r.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,n=0;n<t.length;n++)i+=r.Clipper.Area(t[n]);return i/(e*e)},r.JS.BoundsOfPath=function(t,e){return r.JS.BoundsOfPaths([t],e)},r.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=r.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},r.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;t=r.JS.Clone(t);if("number"!=typeof e||null===e)return r.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;i||(t=[t]);for(var n,o,a,s,l,h,c,u=t.length,p=[],d=0;d<u;d++)if(0!==(n=(o=t[d]).length))if(n<3)a=o,p.push(a);else{for(a=o,s=e*e,l=o[0],h=1,c=1;c<n;c++)(o[c].X-l.X)*(o[c].X-l.X)+(o[c].Y-l.Y)*(o[c].Y-l.Y)<=s||(a[h]=o[c],l=o[c],h++);l=o[h-1],(o[0].X-l.X)*(o[0].X-l.X)+(o[0].Y-l.Y)*(o[0].Y-l.Y)<=s&&h--,h<n&&a.splice(h,n-h),a.length&&p.push(a)}return!i&&p.length?p=p[0]:i||0!==p.length?i&&0===p.length&&(p=[[]]):p=[],p},r.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r,o,a=t.length,s=new Array(a);for(n=0;n<a;n++){for(i=t[n].length,o=new Array(i),r=0;r<i;r++)o[r]={X:t[n][r].X,Y:t[n][r].Y};s[n]=o}return e||(s=s[0]),s},r.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return r.Error("Tolerance is not a number in Lighten()."),r.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return r.JS.Clone(t);var i,n,o,a,s,l,h,c,u,p,d,f,m,v,g,y;t[0]instanceof Array||(t=[t]);var _=t.length,x=e*e,b=[];for(i=0;i<_;i++)if(0!=(l=(o=t[i]).length)){for(a=0;a<1e6;a++){for(s=[],o[(l=o.length)-1].X!=o[0].X||o[l-1].Y!=o[0].Y?(d=1,o.push({X:o[0].X,Y:o[0].Y}),l=o.length):d=0,p=[],n=0;n<l-2;n++)h=o[n],u=o[n+1],c=o[n+2],g=h.X,y=h.Y,f=c.X-g,m=c.Y-y,0===f&&0===m||((v=((u.X-g)*f+(u.Y-y)*m)/(f*f+m*m))>1?(g=c.X,y=c.Y):v>0&&(g+=f*v,y+=m*v)),(f=u.X-g)*f+(m=u.Y-y)*m<=x&&(p[n+1]=1,n++);for(s.push({X:o[0].X,Y:o[0].Y}),n=1;n<l-1;n++)p[n]||s.push({X:o[n].X,Y:o[n].Y});if(s.push({X:o[l-1].X,Y:o[l-1].Y}),d&&o.pop(),!p.length)break;o=s}s[(l=s.length)-1].X==s[0].X&&s[l-1].Y==s[0].Y&&s.pop(),s.length>2&&b.push(s)}return!t[0]instanceof Array&&(b=b[0]),void 0===b&&(b=[[]]),b},r.JS.PerimeterOfPath=function(t,e,i){if(void 0===t)return 0;var n,r,o=Math.sqrt,a=0,s=0,l=0,h=0,c=0,u=t.length;if(u<2)return 0;for(e&&(t[u]=t[0],u++);--u;)s=(n=t[u]).X,l=n.Y,a+=o((s-(h=(r=t[u-1]).X))*(s-h)+(l-(c=r.Y))*(l-c));return e&&t.pop(),a/i},r.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var n=0,o=0;o<t.length;o++)n+=r.JS.PerimeterOfPath(t[o],e,i);return n},r.JS.ScaleDownPath=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=n.X/e,n.Y=n.Y/e},r.JS.ScaleDownPaths=function(t,e){var i,n,r;Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=r.X/e,r.Y=r.Y/e},r.JS.ScaleUpPath=function(t,e){var i,n,r=Math.round;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=r(n.X*e),n.Y=r(n.Y*e)},r.JS.ScaleUpPaths=function(t,e){var i,n,r,o=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=o(r.X*e),r.Y=o(r.Y*e)},r.ExPolygons=function(){return[]},r.ExPolygon=function(){this.outer=null,this.holes=null},r.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new r.ExPolygon;i.outer=t.Contour();var n,o,a,s,l,h,c=t.Childs(),u=c.length;for(i.holes=new Array(u),a=0;a<u;a++)for(n=c[a],i.holes[a]=n.Contour(),s=0,h=(l=n.Childs()).length;s<h;s++)o=l[s],r.JS.AddOuterPolyNodeToExPolygons(o,e);e.push(i)},r.JS.ExPolygonsToPaths=function(t){var e,i,n,o,a=new r.Paths;for(e=0,n=t.length;e<n;e++)for(a.push(t[e].outer),i=0,o=t[e].holes.length;i<o;i++)a.push(t[e].holes[i]);return a},r.JS.PolyTreeToExPolygons=function(t){var e,i,n,o,a=new r.ExPolygons;for(i=0,o=(n=t.Childs()).length;i<o;i++)e=n[i],r.JS.AddOuterPolyNodeToExPolygons(e,a);return a},t.exports=r},function(t,e){t.exports={glyphs:{0:{ha:765,x_min:66,x_max:700,o:"m 700 497 q 683 282 700 377 q 627 121 665 187 q 528 21 589 56 q 382 -14 468 -14 q 242 21 302 -14 q 144 121 183 56 q 86 282 105 187 q 66 497 66 377 q 84 712 66 617 q 139 872 101 807 q 236 972 176 938 q 382 1007 296 1007 q 522 973 463 1007 q 621 873 582 939 q 680 713 661 808 q 700 497 700 618 m 192 497 q 202 319 192 395 q 235 193 212 243 q 293 117 257 142 q 382 92 330 92 q 471 117 434 92 q 531 192 507 142 q 565 318 554 242 q 575 497 575 395 q 565 675 575 599 q 531 801 554 751 q 471 876 507 851 q 382 901 434 901 q 293 876 330 901 q 235 801 257 851 q 202 675 212 751 q 192 497 192 599 z "},1:{ha:765,x_min:121,x_max:482,o:"m 482 0 l 363 0 l 363 619 q 363 682 363 648 q 365 748 363 715 q 367 811 366 781 q 368 864 368 841 q 348 843 357 852 q 330 826 339 834 q 311 809 321 818 q 286 787 300 800 l 186 705 l 121 789 l 380 991 l 482 991 l 482 0 z "},2:{ha:765,x_min:65,x_max:684,o:"m 684 0 l 65 0 l 65 106 l 302 364 q 393 465 353 419 q 461 553 433 510 q 505 641 490 597 q 519 736 519 684 q 508 806 519 776 q 475 858 496 837 q 425 890 454 880 q 359 901 395 901 q 243 875 295 901 q 144 808 191 849 l 75 889 q 134 935 102 913 q 201 972 165 956 q 277 997 237 987 q 361 1006 317 1006 q 478 987 426 1006 q 568 935 531 969 q 624 851 604 901 q 644 741 644 802 q 626 631 644 683 q 577 528 608 578 q 502 427 545 477 q 407 321 458 376 l 216 118 l 216 113 l 684 113 l 684 0 z "},3:{ha:765,x_min:56,x_max:682,o:"m 652 760 q 636 669 652 710 q 592 599 621 629 q 525 550 564 569 q 437 522 486 530 l 437 518 q 620 442 557 503 q 682 282 682 380 q 660 163 682 217 q 593 69 638 109 q 480 8 549 30 q 318 -14 412 -14 q 179 -2 244 -14 q 56 40 113 9 l 56 155 q 183 107 115 124 q 315 90 252 90 q 423 104 378 90 q 498 142 469 117 q 542 204 528 168 q 555 286 555 241 q 537 365 555 332 q 486 419 519 398 q 405 451 453 441 q 297 461 357 461 l 207 461 l 207 564 l 297 564 q 395 577 352 564 q 466 616 437 591 q 510 675 495 641 q 525 751 525 710 q 513 814 525 787 q 478 862 500 842 q 425 891 456 881 q 355 901 393 901 q 228 879 283 901 q 122 819 172 856 l 60 904 q 117 943 85 925 q 186 976 149 962 q 266 998 223 989 q 355 1006 308 1006 q 484 987 429 1006 q 576 936 539 969 q 633 858 614 903 q 652 760 652 813 z "},4:{ha:765,x_min:16,x_max:737,o:"m 737 222 l 593 222 l 593 0 l 473 0 l 473 222 l 16 222 l 16 330 l 465 997 l 593 997 l 593 335 l 737 335 l 737 222 m 473 335 l 473 576 q 474 656 473 614 q 477 738 475 698 q 480 812 478 777 q 482 869 481 846 l 476 869 q 464 839 471 856 q 449 806 457 823 q 431 774 440 789 q 415 747 422 758 l 136 335 l 473 335 z "},5:{ha:765,x_min:89,x_max:688,o:"m 370 608 q 495 590 437 608 q 596 534 553 571 q 663 444 639 498 q 688 318 688 389 q 665 179 688 241 q 596 75 642 117 q 484 9 551 32 q 330 -14 417 -14 q 262 -10 296 -14 q 198 0 229 -7 q 139 16 167 6 q 89 40 111 26 l 89 157 q 141 129 111 141 q 205 109 172 117 q 272 96 238 100 q 334 92 305 92 q 429 104 387 92 q 500 143 471 117 q 545 210 530 170 q 561 304 561 250 q 501 453 561 401 q 328 504 441 504 q 288 502 309 504 q 245 498 267 500 q 204 492 224 495 q 171 486 185 489 l 110 525 l 147 991 l 615 991 l 615 879 l 254 879 l 228 595 q 285 604 250 599 q 370 608 321 608 z "},6:{ha:765,x_min:77,x_max:701,o:"m 77 424 q 84 566 77 495 q 109 701 91 636 q 158 821 127 766 q 237 918 189 877 q 353 982 286 959 q 510 1006 420 1006 q 538 1005 523 1006 q 570 1003 554 1004 q 601 999 586 1001 q 627 993 615 996 l 627 888 q 573 900 603 896 q 514 904 543 904 q 407 889 453 904 q 326 848 360 875 q 270 785 292 822 q 233 704 247 749 q 212 610 218 660 q 203 505 205 559 l 211 505 q 244 551 224 530 q 289 588 263 572 q 347 612 315 603 q 419 621 379 621 q 536 601 484 621 q 625 542 588 581 q 681 447 661 503 q 701 319 701 391 q 680 180 701 242 q 620 76 659 119 q 525 9 581 33 q 400 -14 469 -14 q 273 13 332 -14 q 170 94 214 39 q 102 230 127 148 q 77 424 77 312 m 399 90 q 473 104 439 90 q 531 146 507 118 q 569 217 555 174 q 582 319 582 260 q 571 405 582 367 q 537 469 559 442 q 481 509 515 495 q 403 524 448 524 q 320 508 357 524 q 256 466 282 492 q 215 408 229 441 q 200 343 200 376 q 213 253 200 298 q 250 172 225 208 q 312 113 275 136 q 399 90 349 90 z "},7:{ha:765,x_min:61,x_max:699,o:"m 191 0 l 572 879 l 61 879 l 61 991 l 699 991 l 699 893 l 322 0 l 191 0 z "},8:{ha:765,x_min:72,x_max:694,o:"m 383 1007 q 491 992 440 1007 q 579 947 541 977 q 640 873 618 918 q 663 768 663 828 q 649 686 663 723 q 612 620 635 650 q 555 567 588 591 q 485 525 523 544 q 562 478 524 504 q 629 420 600 452 q 676 348 659 388 q 694 258 694 308 q 672 145 694 196 q 608 60 649 95 q 510 5 567 24 q 383 -14 452 -14 q 251 5 309 -14 q 153 57 193 23 q 93 141 113 92 q 72 253 72 191 q 87 345 72 304 q 128 418 102 385 q 189 475 154 450 q 264 519 224 500 q 201 565 231 541 q 151 621 172 590 q 117 688 130 651 q 104 770 104 725 q 127 873 104 829 q 189 947 150 918 q 278 992 227 977 q 383 1007 328 1007 m 193 252 q 204 185 193 216 q 238 134 215 155 q 296 101 261 113 q 380 89 332 89 q 464 101 428 89 q 525 135 500 113 q 562 188 549 157 q 574 257 574 219 q 561 321 574 292 q 523 374 547 349 q 463 420 498 398 q 386 463 429 441 l 366 472 q 237 379 280 431 q 193 252 193 326 m 382 904 q 268 868 310 904 q 225 764 225 832 q 237 697 225 725 q 270 648 249 669 q 320 609 291 626 q 385 575 350 591 q 446 608 417 590 q 496 648 475 625 q 530 699 517 670 q 542 764 542 727 q 499 868 542 832 q 382 904 456 904 z "},9:{ha:765,x_min:72,x_max:697,o:"m 697 568 q 690 426 697 497 q 665 291 683 355 q 616 171 647 227 q 536 74 585 115 q 421 10 488 33 q 264 -14 354 -14 q 235 -13 251 -14 q 204 -11 220 -12 q 174 -7 189 -9 q 147 -1 159 -5 l 147 104 q 201 92 171 96 q 260 87 231 87 q 410 119 351 87 q 504 206 469 151 q 553 333 538 260 q 571 486 568 406 l 562 486 q 530 441 549 462 q 485 404 511 420 q 427 380 459 389 q 354 371 394 371 q 237 391 290 371 q 149 450 185 411 q 92 544 112 488 q 72 672 72 600 q 93 811 72 749 q 154 917 115 873 q 249 983 193 960 q 374 1006 304 1006 q 501 979 442 1006 q 604 899 560 953 q 672 762 647 844 q 697 568 697 680 m 375 901 q 301 888 334 901 q 243 846 267 874 q 205 774 218 817 q 192 672 192 731 q 203 587 192 625 q 237 523 214 549 q 293 482 259 496 q 371 468 326 468 q 454 484 417 468 q 518 525 492 500 q 559 583 545 551 q 574 648 574 616 q 561 739 574 694 q 524 820 549 784 q 462 879 499 857 q 375 901 425 901 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:374,x_min:100,x_max:272,o:"m 228 281 l 146 281 l 111 991 l 262 991 l 228 281 m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},'"':{ha:558,x_min:90,x_max:468,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 m 468 991 l 440 633 l 363 633 l 335 991 l 468 991 z "},"#":{ha:897,x_min:35,x_max:863,o:"m 667 606 l 624 383 l 814 383 l 814 290 l 606 290 l 550 0 l 450 0 l 507 290 l 310 290 l 254 0 l 157 0 l 210 290 l 35 290 l 35 383 l 228 383 l 272 606 l 86 606 l 86 699 l 289 699 l 345 991 l 444 991 l 389 699 l 587 699 l 644 991 l 742 991 l 685 699 l 863 699 l 863 606 l 667 606 m 328 383 l 525 383 l 568 606 l 371 606 l 328 383 z "},$:{ha:765,x_min:83,x_max:668,o:"m 668 302 q 651 216 668 255 q 603 149 634 178 q 526 102 571 121 q 424 75 481 83 l 424 -81 l 330 -81 l 330 69 q 262 72 296 69 q 195 81 227 75 q 134 96 162 87 q 83 117 105 105 l 83 233 q 135 211 106 222 q 197 191 165 200 q 264 177 230 182 q 330 171 298 171 l 330 465 q 225 508 270 486 q 152 559 181 530 q 109 625 123 588 q 94 713 94 663 q 111 796 94 758 q 158 862 127 833 q 233 908 189 890 q 330 932 277 926 l 330 1054 l 424 1054 l 424 935 q 549 917 492 931 q 652 882 606 903 l 607 783 q 522 814 569 800 q 424 832 474 828 l 424 546 q 529 503 484 525 q 606 452 575 480 q 652 388 637 424 q 668 302 668 351 m 549 302 q 542 343 549 325 q 520 377 535 362 q 482 406 506 393 q 424 431 458 418 l 424 178 q 518 220 487 187 q 549 302 549 254 m 214 711 q 219 668 214 687 q 239 632 225 648 q 275 604 252 616 q 330 579 297 591 l 330 829 q 242 788 270 819 q 214 711 214 758 z "},"%":{ha:1146,x_min:69,x_max:1076,o:"m 170 696 q 194 528 170 584 q 272 472 218 472 q 378 696 378 472 q 272 918 378 918 q 194 863 218 918 q 170 696 170 808 m 478 696 q 466 564 478 623 q 429 466 454 506 q 365 405 404 426 q 272 383 326 383 q 184 405 222 383 q 121 466 146 426 q 82 564 95 506 q 69 696 69 623 q 81 827 69 769 q 118 924 93 884 q 181 985 142 964 q 272 1006 219 1006 q 361 985 323 1006 q 426 924 399 964 q 465 827 452 884 q 478 696 478 769 m 768 298 q 792 131 768 186 q 871 75 817 75 q 977 298 977 75 q 871 521 977 521 q 792 466 817 521 q 768 298 768 410 m 1076 298 q 1064 167 1076 225 q 1027 69 1053 109 q 963 8 1002 29 q 871 -14 924 -14 q 783 8 821 -14 q 719 69 745 29 q 681 167 694 109 q 668 298 668 225 q 680 429 668 372 q 716 527 692 487 q 780 587 741 566 q 871 608 818 608 q 960 587 922 608 q 1024 527 998 566 q 1063 429 1050 487 q 1076 298 1076 372 m 903 991 l 353 0 l 245 0 l 796 991 l 903 991 z "},"&":{ha:975,x_min:74,x_max:953,o:"m 286 790 q 292 745 286 767 q 308 701 297 723 q 337 656 319 679 q 379 608 355 633 q 448 653 419 632 q 496 696 477 674 q 525 741 515 718 q 534 793 534 765 q 526 838 534 817 q 502 873 517 859 q 463 897 486 888 q 412 905 441 905 q 320 875 354 905 q 286 790 286 845 m 378 96 q 450 103 417 96 q 512 125 484 111 q 565 157 541 138 q 611 196 589 175 l 349 472 q 286 428 313 450 q 240 382 259 407 q 212 329 222 358 q 203 262 203 300 q 215 195 203 226 q 249 142 227 164 q 304 108 271 120 q 378 96 336 96 m 74 258 q 87 353 74 311 q 127 428 101 394 q 191 491 153 462 q 277 549 229 520 q 235 599 256 573 q 200 655 215 625 q 175 718 184 684 q 165 790 165 751 q 182 881 165 841 q 231 950 199 922 q 310 992 263 978 q 416 1007 357 1007 q 517 992 473 1007 q 592 950 562 978 q 640 881 623 922 q 656 790 656 841 q 639 710 656 747 q 593 641 622 673 q 528 583 565 610 q 450 532 491 556 l 689 279 q 722 319 707 299 q 748 363 736 340 q 769 412 760 386 q 785 471 778 439 l 909 471 q 885 388 899 426 q 853 317 871 351 q 813 255 836 284 q 765 199 791 227 l 953 0 l 800 0 l 686 117 q 621 62 653 86 q 551 21 588 38 q 473 -4 515 5 q 378 -14 431 -14 q 250 4 307 -14 q 154 57 193 22 q 95 143 115 92 q 74 258 74 193 z "},"'":{ha:314,x_min:90,x_max:224,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 z "},"(":{ha:418,x_min:56,x_max:376,o:"m 56 380 q 68 548 56 465 q 105 708 80 630 q 169 857 130 785 q 260 991 207 928 l 376 991 q 232 704 281 861 q 183 382 183 547 q 196 221 183 301 q 232 64 208 141 q 292 -84 256 -12 q 375 -220 328 -156 l 260 -220 q 169 -89 207 -159 q 105 57 130 -19 q 68 215 80 134 q 56 380 56 296 z "},")":{ha:418,x_min:41,x_max:363,o:"m 363 380 q 351 215 363 296 q 313 57 338 134 q 249 -89 288 -19 q 158 -220 211 -159 l 43 -220 q 125 -84 90 -156 q 186 64 161 -12 q 222 221 210 141 q 235 382 235 301 q 186 704 235 547 q 41 991 137 861 l 158 991 q 249 857 211 928 q 313 708 288 785 q 351 548 338 630 q 363 380 363 465 z "},"*":{ha:765,x_min:56,x_max:708,o:"m 450 1055 l 421 789 l 690 864 l 708 733 l 452 714 l 618 493 l 497 428 l 378 671 l 271 428 l 146 493 l 310 714 l 56 733 l 75 864 l 340 789 l 311 1055 l 450 1055 z "},"+":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 z "},",":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"-":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},".":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},"/":{ha:518,x_min:14,x_max:504,o:"m 504 991 l 135 0 l 14 0 l 383 991 l 504 991 z "},":":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},";":{ha:372,x_min:43,x_max:272,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},"<":{ha:765,x_min:69,x_max:696,o:"m 696 161 l 69 449 l 69 518 l 696 844 l 696 736 l 197 489 l 696 271 l 696 161 z "},"=":{ha:765,x_min:69,x_max:696,o:"m 69 578 l 69 679 l 696 679 l 696 578 l 69 578 m 69 300 l 69 401 l 696 401 l 696 300 l 69 300 z "},">":{ha:765,x_min:69,x_max:696,o:"m 69 271 l 568 489 l 69 736 l 69 844 l 696 518 l 696 449 l 69 161 l 69 271 z "},"?":{ha:591,x_min:25,x_max:546,o:"m 191 281 l 191 306 q 196 376 191 345 q 214 434 201 407 q 250 487 227 461 q 306 542 272 513 q 361 592 338 570 q 399 638 385 615 q 421 689 414 662 q 428 751 428 715 q 418 811 428 784 q 388 857 408 838 q 340 887 369 876 q 273 897 311 897 q 166 880 217 897 q 68 839 115 862 l 25 937 q 144 986 80 966 q 273 1006 208 1006 q 387 988 336 1006 q 473 939 437 971 q 527 859 508 906 q 546 753 546 812 q 537 672 546 707 q 509 606 528 636 q 464 547 491 575 q 400 486 437 518 q 342 433 365 456 q 307 389 320 410 q 290 345 294 368 q 285 293 285 323 l 285 281 l 191 281 m 158 75 q 165 119 158 101 q 183 148 172 137 q 210 164 195 159 q 244 170 226 170 q 278 164 262 170 q 305 148 294 159 q 323 119 317 137 q 330 75 330 101 q 323 32 330 50 q 305 3 317 14 q 278 -14 294 -9 q 244 -20 262 -20 q 210 -14 226 -20 q 183 3 195 -9 q 165 32 172 14 q 158 75 158 50 z "},"@":{ha:1203,x_min:74,x_max:1129,o:"m 1129 496 q 1123 411 1129 454 q 1104 331 1116 369 q 1072 259 1091 292 q 1027 202 1053 227 q 968 164 1001 178 q 896 150 935 150 q 841 160 865 150 q 798 187 816 170 q 769 226 781 204 q 754 272 758 248 l 751 272 q 721 224 739 247 q 679 185 703 202 q 624 159 654 169 q 558 150 594 150 q 466 169 506 150 q 397 222 425 188 q 355 304 370 256 q 340 411 340 353 q 360 536 340 479 q 418 635 380 593 q 509 699 456 676 q 629 722 563 722 q 690 720 660 722 q 749 712 721 717 q 800 702 777 707 q 839 690 823 696 l 823 408 q 822 384 823 393 q 822 370 822 375 q 822 361 822 364 q 822 357 822 359 q 829 298 822 321 q 848 261 836 275 q 874 242 859 248 q 904 237 888 237 q 959 258 935 237 q 999 314 983 279 q 1023 397 1015 349 q 1031 497 1031 444 q 1002 668 1031 593 q 921 795 972 743 q 799 873 869 846 q 644 900 728 900 q 442 862 530 900 q 295 757 355 825 q 205 597 236 690 q 175 395 175 505 q 202 213 175 292 q 280 79 229 134 q 409 -3 332 25 q 586 -31 486 -31 q 668 -26 627 -31 q 746 -13 708 -21 q 817 6 783 -5 q 880 28 851 16 l 880 -68 q 749 -109 822 -94 q 587 -123 675 -123 q 371 -89 466 -123 q 209 12 275 -54 q 109 173 143 78 q 74 390 74 269 q 114 628 74 517 q 228 819 154 738 q 408 945 302 899 q 644 991 513 991 q 839 957 750 991 q 992 859 928 923 q 1093 703 1057 795 q 1129 496 1129 611 m 449 408 q 483 278 449 318 q 575 237 517 237 q 639 253 612 237 q 682 296 665 268 q 708 363 699 324 q 720 449 717 402 l 729 621 q 684 630 710 626 q 629 635 658 635 q 545 615 579 635 q 489 564 511 595 q 458 491 468 532 q 449 408 449 450 z "},A:{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 z "},B:{ha:863,x_min:135,x_max:786,o:"m 135 991 l 406 991 q 558 978 492 991 q 669 936 625 965 q 736 858 713 906 q 758 741 758 810 q 745 662 758 699 q 707 597 732 625 q 645 551 682 570 q 561 526 608 532 l 561 519 q 649 496 608 511 q 720 454 690 481 q 768 387 751 427 q 786 288 786 346 q 764 166 786 220 q 700 76 742 113 q 599 20 659 39 q 464 0 539 0 l 135 0 l 135 991 m 261 571 l 427 571 q 522 581 484 571 q 585 611 561 591 q 619 662 608 631 q 629 732 629 692 q 577 848 629 813 q 412 884 525 884 l 261 884 l 261 571 m 261 465 l 261 107 l 441 107 q 542 121 501 107 q 607 159 582 134 q 642 217 631 183 q 653 293 653 252 q 642 363 653 331 q 605 417 631 395 q 538 453 580 440 q 433 465 496 465 l 261 465 z "},C:{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 z "},D:{ha:950,x_min:135,x_max:865,o:"m 865 505 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},E:{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 z "},F:{ha:682,x_min:135,x_max:650,o:"m 261 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 530 l 624 530 l 624 419 l 261 419 l 261 0 z "},G:{ha:958,x_min:85,x_max:859,o:"m 530 524 l 859 524 l 859 37 q 783 16 821 25 q 705 0 745 6 q 621 -10 665 -7 q 526 -14 577 -14 q 338 22 420 -14 q 199 124 256 58 q 114 284 143 190 q 85 497 85 379 q 117 708 85 614 q 211 868 149 802 q 363 970 273 935 q 570 1006 454 1006 q 714 991 645 1006 q 843 947 783 976 l 794 838 q 742 859 770 849 q 684 877 713 869 q 622 890 654 885 q 559 895 591 895 q 413 867 477 895 q 306 788 349 840 q 241 663 263 736 q 218 496 218 589 q 237 334 218 408 q 296 208 256 261 q 401 126 337 155 q 557 97 466 97 q 611 99 587 97 q 657 103 636 100 q 697 110 678 106 q 733 117 715 113 l 733 412 l 530 412 l 530 524 z "},H:{ha:974,x_min:135,x_max:839,o:"m 839 0 l 713 0 l 713 463 l 261 463 l 261 0 l 135 0 l 135 991 l 261 991 l 261 574 l 713 574 l 713 991 l 839 991 l 839 0 z "},I:{ha:471,x_min:56,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 z "},J:{ha:376,x_min:-125,x_max:252,o:"m -20 -264 q -80 -259 -54 -264 q -125 -248 -106 -255 l -125 -139 q -75 -149 -102 -145 q -18 -153 -49 -153 q 32 -146 7 -153 q 78 -123 58 -140 q 112 -76 99 -106 q 125 0 125 -46 l 125 991 l 252 991 l 252 14 q 232 -110 252 -58 q 176 -196 212 -162 q 91 -247 140 -231 q -20 -264 41 -264 z "},K:{ha:804,x_min:135,x_max:804,o:"m 804 0 l 661 0 l 355 473 l 261 396 l 261 0 l 135 0 l 135 991 l 261 991 l 261 496 l 343 610 l 650 991 l 791 991 l 439 559 l 804 0 z "},L:{ha:682,x_min:135,x_max:650,o:"m 135 0 l 135 991 l 261 991 l 261 113 l 650 113 l 650 0 l 135 0 z "},M:{ha:1208,x_min:135,x_max:1074,o:"m 545 0 l 244 868 l 239 868 q 245 768 243 818 q 250 679 248 726 q 252 593 252 631 l 252 0 l 135 0 l 135 991 l 322 991 l 602 183 l 606 183 l 886 991 l 1074 991 l 1074 0 l 947 0 l 947 602 q 949 682 947 637 q 952 769 950 728 q 957 867 955 817 l 951 867 l 648 0 l 545 0 z "},N:{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 z "},O:{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},P:{ha:800,x_min:135,x_max:729,o:"m 729 701 q 710 583 729 640 q 649 482 692 526 q 536 412 606 438 q 363 386 466 386 l 261 386 l 261 0 l 135 0 l 135 991 l 380 991 q 537 972 471 991 q 646 916 603 953 q 709 825 688 879 q 729 701 729 770 m 261 493 l 349 493 q 459 504 412 493 q 537 539 506 515 q 583 601 568 563 q 599 694 599 640 q 543 837 599 791 q 370 884 488 884 l 261 884 l 261 493 z "},Q:{ha:1029,x_min:85,x_max:945,o:"m 945 497 q 928 332 945 408 q 879 194 911 255 q 799 87 847 132 q 688 17 751 43 q 763 -95 717 -47 q 871 -184 810 -144 l 789 -281 q 660 -164 719 -231 q 567 -11 602 -97 q 542 -13 555 -12 q 515 -14 528 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},R:{ha:819,x_min:135,x_max:803,o:"m 261 410 l 261 0 l 135 0 l 135 991 l 376 991 q 643 922 557 991 q 729 710 729 852 q 712 607 729 651 q 668 531 696 563 q 606 479 641 500 q 533 444 570 458 l 803 0 l 654 0 l 416 410 l 261 410 m 261 517 l 372 517 q 476 529 433 517 q 546 564 519 541 q 586 622 574 587 q 599 704 599 657 q 585 787 599 753 q 543 842 571 821 q 472 874 515 864 q 370 884 429 884 l 261 884 l 261 517 z "},S:{ha:721,x_min:71,x_max:657,o:"m 657 265 q 634 148 657 199 q 567 60 610 96 q 461 5 524 24 q 321 -14 399 -14 q 180 -2 245 -14 q 71 33 115 10 l 71 154 q 123 133 94 143 q 185 114 153 122 q 252 101 218 106 q 321 96 287 96 q 481 136 429 96 q 533 253 533 177 q 523 317 533 290 q 489 367 513 344 q 422 411 464 389 q 318 457 381 432 q 213 509 258 481 q 140 572 169 537 q 97 652 111 608 q 83 754 83 697 q 105 861 83 814 q 166 940 127 907 q 260 989 205 972 q 380 1006 315 1006 q 526 990 461 1006 q 640 951 590 975 l 595 846 q 495 880 551 865 q 379 895 439 895 q 251 856 296 895 q 205 753 205 818 q 216 686 205 714 q 250 635 226 658 q 312 592 273 612 q 408 550 351 572 q 516 500 470 526 q 594 441 563 474 q 641 366 625 409 q 657 265 657 323 z "},T:{ha:721,x_min:14,x_max:707,o:"m 424 0 l 297 0 l 297 880 l 14 880 l 14 991 l 707 991 l 707 880 l 424 880 l 424 0 z "},U:{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 z "},V:{ha:789,x_min:0,x_max:789,o:"m 654 991 l 789 991 l 457 0 l 330 0 l 0 991 l 134 991 l 334 363 q 368 244 353 301 q 393 136 382 186 q 419 244 404 186 q 456 367 435 301 l 654 991 z "},W:{ha:1227,x_min:14,x_max:1214,o:"m 549 991 l 682 991 l 838 411 q 858 335 848 373 q 876 261 867 297 q 891 194 884 226 q 901 136 897 162 q 908 193 904 162 q 918 257 912 223 q 929 325 923 290 q 943 393 936 360 l 1079 991 l 1214 991 l 965 0 l 838 0 l 665 636 q 647 707 656 671 q 631 776 638 744 q 615 848 623 813 q 600 777 608 814 q 585 707 593 745 q 567 632 576 669 l 403 0 l 275 0 l 14 991 l 147 991 l 298 389 q 313 324 307 357 q 326 257 320 290 q 336 193 332 224 q 345 136 341 162 q 353 195 348 161 q 365 264 358 228 q 379 339 372 301 q 396 410 387 376 l 549 991 z "},X:{ha:760,x_min:0,x_max:760,o:"m 760 0 l 616 0 l 376 431 l 127 0 l 0 0 l 307 518 l 21 991 l 155 991 l 380 612 l 607 991 l 736 991 l 450 522 l 760 0 z "},Y:{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 z "},Z:{ha:749,x_min:56,x_max:693,o:"m 693 0 l 56 0 l 56 98 l 538 879 l 69 879 l 69 991 l 679 991 l 679 893 l 197 113 l 693 113 l 693 0 z "},"[":{ha:421,x_min:111,x_max:386,o:"m 386 -220 l 111 -220 l 111 991 l 386 991 l 386 890 l 235 890 l 235 -118 l 386 -118 l 386 -220 z "},"\\":{ha:518,x_min:16,x_max:505,o:"m 136 991 l 505 0 l 385 0 l 16 991 l 136 991 z "},"]":{ha:421,x_min:35,x_max:310,o:"m 35 -118 l 186 -118 l 186 890 l 35 890 l 35 991 l 310 991 l 310 -220 l 35 -220 l 35 -118 z "},"^":{ha:739,x_min:28,x_max:711,o:"m 28 372 l 339 999 l 408 999 l 711 372 l 602 372 l 374 871 l 137 372 l 28 372 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:802,x_min:267,x_max:533,o:"m 533 842 l 452 842 q 400 889 428 861 q 346 947 372 917 q 299 1004 320 977 q 267 1050 277 1031 l 267 1064 l 415 1064 q 440 1014 426 1041 q 471 959 455 986 q 503 905 486 931 q 533 860 519 880 l 533 842 z "},a:{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 z "},b:{ha:814,x_min:118,x_max:737,o:"m 454 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 l 208 0 l 118 0 l 118 1055 l 241 1055 l 241 800 q 241 750 241 777 q 239 700 240 723 q 236 647 237 673 l 241 647 q 277 691 257 671 q 322 726 296 711 q 381 750 349 741 q 454 758 414 758 m 431 656 q 340 638 376 656 q 282 586 304 621 q 251 498 260 551 q 241 374 241 445 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},c:{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 z "},d:{ha:814,x_min:77,x_max:696,o:"m 578 100 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 491 726 465 741 q 537 691 517 711 q 572 650 557 671 l 581 650 q 576 694 578 673 q 574 730 575 711 q 572 760 572 749 l 572 1055 l 696 1055 l 696 0 l 596 0 l 578 100 m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 z "},e:{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 z "},f:{ha:457,x_min:20,x_max:510,o:"m 441 652 l 275 652 l 275 0 l 151 0 l 151 652 l 20 652 l 20 703 l 151 749 l 151 814 q 166 934 151 886 q 211 1010 182 982 q 281 1051 239 1039 q 376 1063 323 1063 q 450 1055 416 1063 q 510 1038 484 1047 l 478 942 q 432 955 457 949 q 380 961 408 961 q 334 955 353 961 q 301 932 314 948 q 282 887 288 916 q 275 815 275 859 l 275 745 l 441 745 l 441 652 z "},g:{ha:720,x_min:25,x_max:692,o:"m 692 745 l 692 668 l 558 650 q 590 589 577 626 q 603 505 603 552 q 587 410 603 454 q 539 334 571 366 q 459 284 507 302 q 349 267 412 267 q 319 267 334 267 q 294 269 304 267 q 272 254 283 262 q 251 235 260 245 q 236 210 242 224 q 231 180 231 197 q 239 151 231 162 q 261 134 247 140 q 294 125 275 127 q 334 123 313 123 l 453 123 q 559 107 516 123 q 630 64 603 92 q 670 0 658 37 q 682 -78 682 -37 q 660 -185 682 -138 q 593 -266 638 -233 q 478 -316 547 -298 q 314 -334 408 -334 q 187 -319 241 -334 q 97 -278 133 -305 q 43 -213 61 -251 q 25 -126 25 -174 q 38 -55 25 -85 q 74 -1 52 -24 q 126 35 96 21 q 187 57 155 50 q 140 98 159 70 q 122 161 122 125 q 144 233 122 203 q 212 292 165 263 q 159 325 183 304 q 118 374 135 347 q 93 434 102 401 q 83 501 83 467 q 100 609 83 562 q 151 690 117 656 q 233 741 184 723 q 349 758 283 758 q 400 754 374 758 q 446 745 427 751 l 692 745 m 142 -122 q 151 -169 142 -147 q 179 -206 159 -191 q 232 -231 199 -222 q 314 -240 265 -240 q 503 -201 440 -240 q 566 -89 566 -162 q 557 -38 566 -58 q 531 -7 549 -18 q 481 8 512 4 q 407 12 451 12 l 288 12 q 238 7 264 12 q 191 -14 212 1 q 156 -55 170 -28 q 142 -122 142 -81 m 204 505 q 241 389 204 427 q 345 351 277 351 q 447 389 412 351 q 482 507 482 427 q 447 630 482 591 q 343 669 411 669 q 240 629 276 669 q 204 505 204 588 z "},h:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 1055 l 241 1055 l 241 742 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},i:{ha:359,x_min:109,x_max:253,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},j:{ha:359,x_min:-46,x_max:253,o:"m 45 -334 q -9 -329 12 -334 q -46 -317 -31 -324 l -46 -216 q -10 -227 -28 -223 q 32 -231 8 -231 q 66 -225 50 -231 q 93 -207 81 -220 q 112 -172 105 -194 q 118 -115 118 -150 l 118 745 l 241 745 l 241 -107 q 230 -201 241 -159 q 194 -272 218 -243 q 133 -318 170 -302 q 45 -334 96 -334 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},k:{ha:689,x_min:118,x_max:684,o:"m 232 385 l 323 500 l 522 745 l 665 745 l 393 422 l 684 0 l 542 0 l 314 342 l 240 286 l 240 0 l 118 0 l 118 1055 l 240 1055 l 240 571 l 229 385 l 232 385 z "},l:{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 1055 l 241 1055 l 241 0 z "},m:{ha:1244,x_min:118,x_max:1133,o:"m 1010 0 l 1010 479 q 976 612 1010 568 q 871 656 942 656 q 787 640 821 656 q 730 593 752 624 q 698 516 708 562 q 688 411 688 471 l 688 0 l 564 0 l 564 479 q 530 612 564 568 q 425 656 496 656 q 338 638 373 656 q 281 586 302 621 q 251 501 260 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 281 695 259 673 q 331 730 304 716 q 388 751 357 745 q 449 758 418 758 q 584 728 530 758 q 664 635 638 699 l 669 635 q 712 690 687 667 q 766 728 736 713 q 828 751 795 743 q 895 758 861 758 q 1073 693 1013 758 q 1133 486 1133 629 l 1133 0 l 1010 0 z "},n:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},o:{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 z "},p:{ha:814,x_min:118,x_max:737,o:"m 454 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 745 l 218 745 l 236 644 l 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},q:{ha:814,x_min:77,x_max:696,o:"m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 m 359 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 490 725 465 740 q 536 689 516 709 q 572 644 557 668 l 578 644 l 596 745 l 696 745 l 696 -334 l 572 -334 l 572 -16 q 574 17 572 -3 q 576 55 575 37 q 581 100 578 77 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 z "},r:{ha:554,x_min:118,x_max:526,o:"m 440 758 q 484 756 460 758 q 526 751 509 755 l 510 637 q 471 643 491 641 q 433 646 451 646 q 355 628 391 646 q 295 579 320 611 q 255 502 269 547 q 241 401 241 456 l 241 0 l 118 0 l 118 745 l 218 745 l 233 608 l 239 608 q 275 665 256 637 q 318 712 294 692 q 372 746 342 733 q 440 758 402 758 z "},s:{ha:627,x_min:61,x_max:564,o:"m 564 204 q 544 109 564 150 q 487 41 524 68 q 398 0 450 14 q 281 -14 346 -14 q 154 -2 207 -14 q 61 33 101 10 l 61 146 q 108 124 82 135 q 162 106 134 114 q 221 93 191 98 q 281 87 251 87 q 356 95 325 87 q 406 116 387 102 q 434 150 425 130 q 443 195 443 170 q 436 233 443 216 q 411 266 429 250 q 362 300 393 283 q 282 338 331 317 q 194 379 233 359 q 128 425 155 399 q 86 483 101 450 q 72 561 72 515 q 91 645 72 608 q 143 707 109 682 q 224 745 177 732 q 330 758 272 758 q 451 744 396 758 q 554 707 505 730 l 511 607 q 421 641 467 627 q 326 656 374 656 q 224 633 257 656 q 191 568 191 610 q 198 527 191 545 q 225 494 206 509 q 276 462 244 478 q 355 427 308 446 q 443 386 404 406 q 508 340 481 366 q 549 282 535 315 q 564 204 564 250 z "},t:{ha:471,x_min:22,x_max:444,o:"m 343 87 q 371 89 355 87 q 400 92 386 90 q 426 97 414 94 q 444 102 438 100 l 444 8 q 422 0 435 4 q 392 -7 408 -4 q 358 -12 376 -10 q 323 -14 340 -14 q 245 -3 281 -14 q 183 35 210 8 q 142 106 157 61 q 127 220 127 151 l 127 652 l 22 652 l 22 707 l 127 760 l 180 916 l 252 916 l 252 745 l 439 745 l 439 652 l 252 652 l 252 220 q 273 121 252 154 q 343 87 294 87 z "},u:{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 z "},v:{ha:665,x_min:0,x_max:665,o:"m 254 0 l 0 745 l 127 745 l 262 330 q 280 273 270 308 q 300 201 290 237 q 319 132 311 164 q 330 82 328 99 l 335 82 q 347 132 338 99 q 365 201 355 164 q 385 273 375 237 q 403 330 395 308 l 538 745 l 665 745 l 411 0 l 254 0 z "},w:{ha:1036,x_min:14,x_max:1022,o:"m 684 0 l 570 418 q 563 445 567 430 q 555 477 559 460 q 546 512 551 494 q 538 547 542 530 q 518 628 528 586 l 514 628 q 496 546 505 585 q 480 476 488 512 q 464 415 471 440 l 347 0 l 204 0 l 14 745 l 143 745 l 232 349 q 245 282 239 318 q 258 212 252 247 q 269 146 264 177 q 277 96 274 115 l 281 96 q 290 143 284 113 q 303 205 296 172 q 317 270 310 238 q 332 325 325 302 l 453 745 l 586 745 l 703 325 q 716 271 709 302 q 732 207 724 239 q 745 145 739 175 q 754 96 751 115 l 758 96 q 765 143 760 113 q 775 208 769 172 q 788 280 781 243 q 803 349 795 317 l 896 745 l 1022 745 l 829 0 l 684 0 z "},x:{ha:694,x_min:24,x_max:669,o:"m 277 382 l 37 745 l 178 745 l 347 467 l 517 745 l 657 745 l 416 382 l 669 0 l 529 0 l 347 296 l 164 0 l 24 0 l 277 382 z "},y:{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 z "},z:{ha:612,x_min:56,x_max:557,o:"m 557 0 l 56 0 l 56 85 l 419 652 l 78 652 l 78 745 l 545 745 l 545 646 l 189 93 l 557 93 l 557 0 z "},"{":{ha:492,x_min:41,x_max:457,o:"m 339 -11 q 347 -64 339 -43 q 371 -97 355 -85 q 408 -113 386 -109 q 457 -118 430 -117 l 457 -220 q 360 -208 405 -219 q 284 -173 316 -197 q 233 -111 252 -149 q 215 -21 215 -74 l 215 205 q 171 304 215 275 q 41 334 126 334 l 41 439 q 171 468 126 439 q 215 567 215 497 l 215 793 q 233 883 215 846 q 284 944 252 920 q 360 980 316 968 q 457 991 405 991 l 457 890 q 408 885 430 890 q 371 869 386 881 q 347 837 355 857 q 339 783 339 816 l 339 558 q 299 445 339 487 q 180 390 258 404 l 180 382 q 299 327 258 368 q 339 214 339 286 l 339 -11 z "},"|":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 -334 l 332 -334 l 332 1055 z "},"}":{ha:492,x_min:35,x_max:450,o:"m 153 214 q 193 327 153 286 q 311 382 233 368 l 311 390 q 193 445 233 404 q 153 558 153 487 l 153 783 q 144 837 153 816 q 121 869 136 857 q 84 885 106 881 q 35 890 62 890 l 35 991 q 131 980 87 991 q 208 944 176 968 q 258 883 240 920 q 277 793 277 846 l 277 567 q 288 507 277 532 q 321 468 299 483 q 376 446 343 452 q 450 439 408 439 l 450 334 q 321 304 366 334 q 277 205 277 275 l 277 -21 q 258 -111 277 -74 q 208 -173 240 -149 q 131 -208 176 -197 q 35 -220 87 -219 l 35 -118 q 84 -113 62 -117 q 121 -97 106 -109 q 144 -64 136 -85 q 153 -11 153 -43 l 153 214 z "},"~":{ha:765,x_min:69,x_max:696,o:"m 359 441 q 316 460 334 452 q 282 472 297 467 q 253 478 267 476 q 224 479 239 479 q 184 473 205 479 q 144 455 164 467 q 105 429 124 444 q 69 397 86 414 l 69 507 q 237 581 137 581 q 274 579 257 581 q 310 573 291 577 q 351 560 328 568 q 406 538 374 551 q 449 519 431 527 q 484 508 468 512 q 513 502 500 503 q 542 500 527 500 q 581 506 561 500 q 622 524 602 513 q 661 550 642 535 q 696 582 680 565 l 696 472 q 528 399 629 399 q 491 400 508 399 q 455 407 474 402 q 414 419 437 411 q 359 441 391 428 z "},"Â¡":{ha:374,x_min:100,x_max:272,o:"m 144 458 l 227 458 l 261 -253 l 110 -253 l 144 458 m 272 664 q 266 620 272 638 q 247 591 259 602 q 220 575 235 580 q 186 570 204 570 q 153 575 168 570 q 125 591 137 580 q 106 620 113 602 q 100 664 100 638 q 106 707 100 689 q 125 736 113 724 q 153 753 137 747 q 186 758 168 758 q 220 753 204 758 q 247 736 235 747 q 266 707 259 724 q 272 664 272 689 z "},"Â¢":{ha:765,x_min:127,x_max:647,o:"m 635 163 q 564 134 601 144 q 475 122 526 123 l 475 -14 l 382 -14 l 382 126 q 276 160 323 135 q 196 231 229 186 q 145 343 163 276 q 127 504 127 411 q 145 668 127 600 q 196 783 163 737 q 276 855 229 829 q 382 889 323 880 l 382 1006 l 475 1006 l 475 895 q 570 881 524 892 q 647 854 616 870 l 611 750 q 576 763 595 757 q 537 775 557 770 q 497 783 517 780 q 460 786 477 786 q 304 718 353 786 q 256 505 256 649 q 305 297 256 363 q 454 231 354 231 q 554 243 509 231 q 635 272 598 256 l 635 163 z "},"Â£":{ha:765,x_min:46,x_max:718,o:"m 452 1004 q 583 989 524 1004 q 686 950 642 974 l 642 852 q 556 887 604 872 q 457 901 508 901 q 397 892 425 901 q 349 863 369 883 q 317 811 328 843 q 306 734 306 779 l 306 534 l 561 534 l 561 441 l 306 441 l 306 298 q 298 226 306 256 q 277 174 290 196 q 247 138 264 153 q 211 113 229 123 l 718 113 l 718 0 l 46 0 l 46 104 q 101 126 76 112 q 143 163 125 140 q 172 219 161 186 q 182 297 182 252 l 182 441 l 47 441 l 47 534 l 182 534 l 182 754 q 202 860 182 813 q 257 938 222 906 q 342 987 293 970 q 452 1004 392 1004 z "},"Â¤":{ha:765,x_min:83,x_max:681,o:"m 126 490 q 138 567 126 530 q 171 635 150 603 l 83 722 l 150 789 l 236 701 q 304 735 268 723 q 382 747 341 747 q 459 735 422 747 q 526 701 495 723 l 614 789 l 681 724 l 593 636 q 626 568 614 605 q 639 490 639 531 q 627 412 639 450 q 593 345 615 375 l 679 258 l 614 193 l 526 279 q 459 247 495 258 q 382 235 422 235 q 304 247 341 235 q 236 281 267 259 l 150 195 l 85 260 l 171 346 q 138 413 150 376 q 126 490 126 450 m 220 490 q 232 427 220 456 q 267 375 245 397 q 318 340 289 353 q 382 328 348 328 q 447 340 416 328 q 499 375 477 353 q 534 427 522 397 q 547 490 547 456 q 534 555 547 525 q 499 608 522 585 q 447 643 477 630 q 382 656 416 656 q 318 643 348 656 q 267 608 289 630 q 232 555 245 585 q 220 490 220 525 z "},"Â¥":{ha:765,x_min:20,x_max:746,o:"m 382 490 l 616 991 l 746 991 l 485 471 l 647 471 l 647 378 l 443 378 l 443 271 l 647 271 l 647 178 l 443 178 l 443 0 l 322 0 l 322 178 l 118 178 l 118 271 l 322 271 l 322 378 l 118 378 l 118 471 l 277 471 l 20 991 l 150 991 l 382 490 z "},"Â¦":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 526 l 332 526 l 332 1055 m 332 196 l 433 196 l 433 -334 l 332 -334 l 332 196 z "},"Â§":{ha:675,x_min:82,x_max:585,o:"m 93 549 q 102 611 93 583 q 126 661 111 640 q 161 698 141 683 q 201 724 180 713 q 122 788 151 749 q 93 884 93 827 q 112 958 93 925 q 164 1015 130 991 q 245 1050 198 1038 q 351 1063 293 1063 q 470 1049 417 1063 q 572 1014 524 1036 l 534 920 q 443 952 490 939 q 347 965 395 965 q 245 945 280 965 q 211 886 211 925 q 219 852 211 868 q 247 822 227 837 q 298 791 266 807 q 378 755 330 775 q 465 714 427 736 q 530 666 503 692 q 570 607 556 640 q 585 532 585 574 q 576 468 585 496 q 554 416 568 439 q 523 376 541 393 q 486 349 505 359 q 559 286 533 323 q 585 196 585 249 q 565 110 585 148 q 508 46 545 73 q 419 7 471 20 q 301 -7 366 -7 q 175 4 228 -7 q 82 37 122 16 l 82 144 q 129 124 103 134 q 183 106 155 114 q 242 94 212 98 q 301 89 272 89 q 379 97 348 89 q 430 118 411 105 q 456 149 448 132 q 464 184 464 166 q 458 219 464 204 q 435 250 452 235 q 386 282 418 265 q 302 319 354 298 q 214 361 253 340 q 148 409 175 382 q 107 469 121 435 q 93 549 93 503 m 197 564 q 207 517 197 538 q 238 476 216 496 q 293 438 259 456 q 376 399 328 419 l 400 389 q 428 410 414 397 q 453 437 441 422 q 471 472 464 453 q 478 514 478 491 q 469 562 478 540 q 438 603 460 583 q 380 643 416 623 q 288 682 343 662 q 255 666 271 677 q 226 641 239 656 q 205 606 213 625 q 197 564 197 586 z "},"Â¨":{ha:802,x_min:208,x_max:593,o:"m 208 946 q 227 999 208 983 q 273 1015 246 1015 q 319 999 300 1015 q 339 946 339 982 q 319 893 339 910 q 273 876 300 876 q 227 893 246 876 q 208 946 208 910 m 463 946 q 481 999 463 983 q 528 1015 500 1015 q 552 1011 541 1015 q 573 999 564 1007 q 587 977 582 990 q 593 946 593 964 q 573 893 593 910 q 528 876 553 876 q 481 893 500 876 q 463 946 463 910 z "},"Â©":{ha:1156,x_min:68,x_max:1088,o:"m 604 714 q 531 699 563 714 q 477 656 499 684 q 445 587 456 628 q 433 496 433 547 q 443 402 433 443 q 474 334 453 361 q 527 291 494 306 q 604 277 559 277 q 638 279 620 277 q 676 286 656 281 q 714 295 695 290 q 750 307 733 301 l 750 218 q 717 205 734 211 q 683 194 701 199 q 644 187 665 189 q 600 184 624 184 q 479 207 531 184 q 394 271 428 229 q 342 370 359 312 q 325 497 325 427 q 343 622 325 566 q 397 720 361 679 q 485 783 433 760 q 604 806 536 806 q 692 794 647 806 q 777 764 736 783 l 734 677 q 666 705 699 695 q 604 714 633 714 m 68 496 q 86 631 68 566 q 137 753 104 696 q 217 857 170 810 q 320 936 264 903 q 442 987 377 969 q 578 1006 507 1006 q 713 987 648 1006 q 835 936 779 969 q 939 857 892 903 q 1018 753 985 810 q 1069 631 1051 696 q 1088 496 1088 566 q 1069 360 1088 425 q 1018 238 1051 295 q 939 135 985 182 q 835 56 892 89 q 713 4 779 22 q 578 -14 648 -14 q 442 4 507 -14 q 320 56 377 22 q 217 135 264 89 q 137 238 170 182 q 86 360 104 295 q 68 496 68 425 m 142 496 q 176 326 142 406 q 270 188 210 247 q 408 94 329 128 q 578 60 488 60 q 747 94 668 60 q 886 188 827 128 q 980 326 945 247 q 1014 496 1014 406 q 980 665 1014 586 q 886 804 945 745 q 747 898 827 863 q 578 932 668 932 q 408 898 488 932 q 270 804 329 863 q 176 665 210 745 q 142 496 142 586 z "},"Âª":{ha:460,x_min:46,x_max:392,o:"m 330 541 l 311 596 q 286 569 299 581 q 257 549 273 557 q 222 536 241 541 q 179 532 203 532 q 125 541 150 532 q 83 567 101 549 q 56 610 66 584 q 46 671 46 636 q 94 777 46 740 q 239 817 142 813 l 306 819 l 306 840 q 285 908 306 889 q 227 928 264 928 q 163 918 194 928 q 104 893 133 908 l 72 961 q 146 991 106 979 q 227 1003 186 1003 q 352 967 311 1003 q 392 848 392 931 l 392 541 l 330 541 m 256 753 q 198 745 221 751 q 161 728 175 739 q 141 704 147 718 q 135 669 135 689 q 152 620 135 635 q 197 604 169 604 q 240 611 220 604 q 274 633 260 618 q 297 670 289 648 q 306 722 306 692 l 306 755 l 256 753 z "},"Â«":{ha:676,x_min:56,x_max:621,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 m 332 375 l 542 656 l 621 603 l 460 367 l 621 131 l 542 78 l 332 357 l 332 375 z "},"Â¬":{ha:765,x_min:69,x_max:696,o:"m 696 541 l 696 178 l 595 178 l 595 439 l 69 439 l 69 541 l 696 541 z "},"Â­":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},"Â®":{ha:1092,x_min:61,x_max:1023,o:"m 61 494 q 124 749 61 631 q 300 933 188 866 q 543 1001 412 1001 q 785 933 673 1001 q 960 749 897 866 q 1023 494 1023 631 q 962 244 1023 361 q 789 57 901 127 q 543 -14 677 -14 q 297 56 409 -14 q 123 243 184 126 q 61 494 61 359 m 139 494 q 193 278 139 378 q 341 123 248 179 q 543 66 434 66 q 745 124 652 66 q 892 279 839 181 q 945 494 945 378 q 892 708 945 610 q 745 863 839 806 q 543 920 652 920 q 340 864 434 920 q 193 709 247 808 q 139 494 139 610 m 443 444 l 443 214 l 347 214 l 347 790 l 534 790 q 695 746 638 790 q 753 616 753 701 q 666 489 753 533 q 749 351 749 455 l 749 309 q 761 225 749 251 l 761 214 l 663 214 q 653 301 653 239 q 651 376 653 364 q 562 444 640 441 l 443 444 m 443 530 l 549 530 q 627 554 597 532 q 657 613 657 576 q 631 683 657 663 q 536 704 604 704 l 443 704 l 443 530 z "},"Â¯":{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1150 l 699 1150 l 699 1055 z "},"Â°":{ha:595,x_min:83,x_max:511,o:"m 83 791 q 100 874 83 836 q 146 943 117 913 q 214 989 175 972 q 297 1006 253 1006 q 380 989 341 1006 q 448 943 419 972 q 494 874 477 913 q 511 791 511 836 q 494 709 511 747 q 448 641 477 670 q 380 596 419 612 q 297 579 341 579 q 214 596 253 579 q 146 641 175 612 q 100 709 117 670 q 83 791 83 747 m 167 791 q 177 742 167 765 q 205 701 187 718 q 246 673 222 683 q 297 663 270 663 q 348 673 324 663 q 390 701 372 683 q 418 742 408 718 q 428 791 428 765 q 418 843 428 819 q 390 885 408 867 q 348 913 372 903 q 297 924 324 924 q 246 913 270 924 q 205 885 222 903 q 177 843 187 867 q 167 791 167 819 z "},"Â±":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 m 69 0 l 69 102 l 696 102 l 696 0 l 69 0 z "},"Â²":{ha:460,x_min:33,x_max:421,o:"m 421 397 l 33 397 l 33 473 l 175 628 q 238 699 214 670 q 276 750 262 728 q 295 793 290 773 q 300 836 300 813 q 277 902 300 880 q 218 924 255 924 q 152 907 184 924 q 90 864 121 890 l 37 928 q 119 982 74 960 q 220 1004 164 1004 q 293 993 260 1004 q 349 961 326 982 q 385 908 372 939 q 397 839 397 878 q 388 776 397 805 q 359 718 378 747 q 314 658 341 689 q 253 590 288 627 l 153 484 l 421 484 l 421 397 z "},"Â³":{ha:460,x_min:21,x_max:418,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 z "},"Â´":{ha:802,x_min:267,x_max:533,o:"m 267 860 q 297 905 281 880 q 329 959 313 931 q 359 1014 345 986 q 385 1064 374 1041 l 533 1064 l 533 1050 q 501 1004 522 1031 q 453 947 479 977 q 400 889 427 917 q 349 842 372 861 l 267 842 l 267 860 z "},"Âµ":{ha:825,x_min:118,x_max:707,o:"m 241 265 q 277 133 241 177 q 389 89 313 89 q 481 106 444 89 q 542 158 519 124 q 574 243 564 193 q 583 358 583 293 l 583 745 l 707 745 l 707 0 l 607 0 l 589 100 l 582 100 q 500 15 549 43 q 382 -14 452 -14 q 297 2 333 -14 q 237 46 261 18 q 239 -7 238 20 q 241 -59 241 -31 q 241 -117 241 -88 l 241 -334 l 118 -334 l 118 745 l 241 745 l 241 265 z "},"Â¶":{ha:909,x_min:77,x_max:764,o:"m 764 -176 l 682 -176 l 682 947 l 542 947 l 542 -176 l 460 -176 l 460 379 q 361 367 418 367 q 244 384 296 367 q 154 441 191 401 q 97 547 117 481 q 77 707 77 612 q 99 873 77 806 q 161 981 121 940 q 258 1038 201 1021 q 382 1055 314 1055 l 764 1055 l 764 -176 z "},"Â·":{ha:372,x_min:100,x_max:272,o:"m 100 490 q 106 534 100 516 q 125 563 113 552 q 152 579 136 574 q 186 585 168 585 q 219 579 203 585 q 247 563 235 574 q 265 534 258 552 q 272 490 272 516 q 265 448 272 465 q 247 418 258 430 q 219 401 235 407 q 186 396 203 396 q 152 401 168 396 q 125 418 136 407 q 106 448 113 430 q 100 490 100 465 z "},"Â¸":{ha:285,x_min:24,x_max:277,o:"m 277 -195 q 229 -297 277 -260 q 79 -334 181 -334 q 49 -332 64 -334 q 24 -328 34 -330 l 24 -254 q 51 -257 34 -256 q 78 -258 67 -258 q 153 -244 126 -258 q 180 -196 180 -229 q 172 -168 180 -180 q 147 -147 163 -156 q 110 -132 132 -138 q 64 -119 89 -125 l 125 0 l 207 0 l 168 -78 q 211 -92 191 -83 q 245 -115 231 -101 q 268 -149 260 -129 q 277 -195 277 -168 z "},"Â¹":{ha:460,x_min:43,x_max:300,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 z "},"Âº":{ha:486,x_min:45,x_max:441,o:"m 441 768 q 428 668 441 712 q 388 594 414 624 q 325 548 361 564 q 241 532 288 532 q 163 548 199 532 q 100 594 127 564 q 59 668 74 624 q 45 768 45 712 q 59 868 45 825 q 98 942 73 912 q 161 987 124 972 q 244 1003 198 1003 q 322 987 286 1003 q 385 942 359 972 q 427 868 412 912 q 441 768 441 825 m 134 768 q 159 647 134 688 q 243 606 184 606 q 326 647 300 606 q 351 768 351 688 q 326 889 351 850 q 243 928 300 928 q 159 889 184 928 q 134 768 134 850 z "},"Â»":{ha:676,x_min:57,x_max:623,o:"m 623 357 l 412 78 l 334 131 l 494 367 l 334 603 l 412 656 l 623 375 l 623 357 m 346 357 l 136 78 l 57 131 l 218 367 l 57 603 l 136 656 l 346 375 l 346 357 z "},"Â¼":{ha:1023,x_min:43,x_max:962,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 m 815 991 l 265 0 l 159 0 l 709 991 l 815 991 m 962 131 l 878 131 l 878 1 l 781 1 l 781 131 l 526 131 l 526 206 l 782 599 l 878 599 l 878 217 l 962 217 l 962 131 m 781 217 l 781 349 q 782 411 781 378 q 785 478 783 445 q 774 458 781 471 q 760 431 768 446 q 745 404 753 417 q 730 380 736 390 l 625 217 l 781 217 z "},"Â½":{ha:1023,x_min:30,x_max:977,o:"m 195 991 l 287 991 l 287 397 l 189 397 l 189 747 q 189 785 189 764 q 190 825 189 805 q 192 865 191 846 q 194 899 193 884 q 172 873 184 887 q 144 848 159 860 l 80 799 l 30 864 l 195 991 m 801 991 l 251 0 l 144 0 l 694 991 l 801 991 m 977 1 l 589 1 l 589 77 l 730 231 q 793 302 769 273 q 831 354 818 331 q 850 396 845 376 q 855 439 855 416 q 833 505 855 484 q 774 527 810 527 q 708 510 739 527 q 646 467 676 493 l 593 531 q 674 586 629 564 q 775 608 720 608 q 849 596 816 608 q 905 564 882 585 q 940 512 928 543 q 953 442 953 481 q 943 379 953 408 q 915 321 933 350 q 870 261 897 292 q 808 193 843 231 l 708 87 l 977 87 l 977 1 z "},"Â¾":{ha:1023,x_min:21,x_max:1008,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 m 879 991 l 329 0 l 222 0 l 772 991 l 879 991 m 1008 131 l 923 131 l 923 1 l 826 1 l 826 131 l 572 131 l 572 206 l 827 599 l 923 599 l 923 217 l 1008 217 l 1008 131 m 826 217 l 826 349 q 827 411 826 378 q 830 478 828 445 q 820 458 827 471 q 806 431 813 446 q 790 404 798 417 q 776 380 782 390 l 671 217 l 826 217 z "},"Â¿":{ha:591,x_min:46,x_max:567,o:"m 401 458 l 401 433 q 396 363 401 394 q 377 305 391 332 q 342 252 364 277 q 286 197 320 226 q 231 147 254 170 q 193 101 208 124 q 171 51 178 77 q 164 -12 164 24 q 174 -72 164 -45 q 204 -118 184 -98 q 252 -148 223 -137 q 318 -158 281 -158 q 426 -141 375 -158 q 524 -100 477 -123 l 567 -199 q 448 -247 511 -227 q 318 -267 384 -267 q 204 -249 255 -267 q 119 -199 154 -232 q 65 -120 84 -167 q 46 -14 46 -73 q 55 68 46 33 q 82 134 64 103 q 128 193 100 164 q 192 253 155 221 q 250 306 227 283 q 285 350 272 329 q 302 394 298 371 q 307 446 307 416 l 307 458 l 401 458 m 433 664 q 427 620 433 638 q 409 591 420 602 q 381 575 397 580 q 347 570 366 570 q 314 575 330 570 q 287 591 298 580 q 268 620 275 602 q 261 664 261 638 q 268 707 261 689 q 287 736 275 724 q 314 753 298 747 q 347 758 330 758 q 381 753 366 758 q 409 736 397 747 q 427 707 420 724 q 433 664 433 689 z "},"Ã€":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 488 1071 l 406 1071 q 355 1118 382 1090 q 301 1176 327 1146 q 253 1233 275 1206 q 221 1279 232 1261 l 221 1293 l 370 1293 q 395 1243 380 1270 q 425 1188 410 1215 q 457 1135 441 1160 q 488 1089 473 1109 l 488 1071 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 362 1089 q 393 1135 377 1109 q 425 1188 409 1160 q 455 1243 441 1215 q 480 1293 469 1270 l 629 1293 l 629 1279 q 596 1233 618 1261 q 549 1176 575 1206 q 495 1118 523 1146 q 444 1071 468 1090 l 362 1071 l 362 1089 z "},"Ã‚":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 646 1071 l 564 1071 q 493 1127 530 1094 q 421 1197 456 1160 q 349 1127 385 1160 q 278 1071 313 1094 l 196 1071 l 196 1089 q 237 1135 214 1109 q 282 1188 260 1160 q 325 1243 305 1215 q 356 1293 345 1270 l 486 1293 q 517 1243 497 1270 q 560 1188 537 1215 q 606 1135 583 1160 q 646 1089 629 1109 l 646 1071 z "},"Ãƒ":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 524 1072 q 470 1084 496 1072 q 417 1111 443 1096 q 368 1137 391 1125 q 322 1149 344 1149 q 275 1131 292 1149 q 250 1071 259 1113 l 179 1071 q 194 1145 182 1112 q 223 1201 205 1178 q 266 1237 241 1225 q 322 1250 291 1250 q 378 1238 351 1250 q 431 1212 406 1226 q 480 1186 457 1198 q 524 1174 504 1174 q 570 1192 554 1174 q 595 1251 585 1209 l 667 1251 q 652 1178 663 1211 q 623 1121 641 1145 q 580 1085 605 1098 q 524 1072 555 1072 z "},"Ã„":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 231 1175 q 250 1228 231 1212 q 296 1244 269 1244 q 342 1228 322 1244 q 361 1175 361 1211 q 342 1122 361 1139 q 296 1105 322 1105 q 250 1122 269 1105 q 231 1175 231 1139 m 485 1175 q 504 1228 485 1212 q 550 1244 523 1244 q 575 1240 563 1244 q 595 1228 587 1236 q 610 1206 604 1219 q 615 1175 615 1194 q 595 1122 615 1139 q 550 1105 576 1105 q 504 1122 523 1105 q 485 1175 485 1139 z "},"Ã…":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 575 1074 q 563 1011 575 1039 q 531 965 551 984 q 481 936 510 946 q 420 926 453 926 q 358 936 386 926 q 310 965 330 946 q 279 1011 290 984 q 269 1072 269 1038 q 279 1134 269 1107 q 310 1179 290 1160 q 358 1208 330 1198 q 420 1218 386 1218 q 481 1208 452 1218 q 530 1180 509 1198 q 563 1134 551 1161 q 575 1074 575 1107 m 496 1072 q 474 1128 496 1108 q 420 1149 453 1149 q 365 1128 386 1149 q 343 1072 343 1108 q 362 1016 343 1036 q 420 996 382 996 q 474 1016 453 996 q 496 1072 496 1036 z "},"Ã†":{ha:1183,x_min:-1,x_max:1100,o:"m 1100 0 l 585 0 l 585 307 l 262 307 l 125 0 l -1 0 l 443 991 l 1100 991 l 1100 880 l 711 880 l 711 574 l 1074 574 l 1074 464 l 711 464 l 711 111 l 1100 111 l 1100 0 m 311 419 l 585 419 l 585 880 l 511 880 l 311 419 z "},"Ã‡":{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 m 621 -195 q 573 -297 621 -260 q 424 -334 526 -334 q 394 -332 409 -334 q 368 -328 378 -330 l 368 -254 q 395 -257 378 -256 q 422 -258 412 -258 q 498 -244 471 -258 q 525 -196 525 -229 q 516 -168 525 -180 q 492 -147 507 -156 q 455 -132 476 -138 q 408 -119 433 -125 l 469 0 l 551 0 l 513 -78 q 555 -92 536 -83 q 590 -115 575 -101 q 613 -149 604 -129 q 621 -195 621 -168 z "},"Ãˆ":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 484 1071 l 402 1071 q 351 1118 378 1090 q 297 1176 323 1146 q 249 1233 271 1206 q 217 1279 228 1261 l 217 1293 l 366 1293 q 391 1243 376 1270 q 421 1188 406 1215 q 453 1135 437 1160 q 484 1089 469 1109 l 484 1071 z "},"Ã‰":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 309 1089 q 340 1135 324 1109 q 372 1188 356 1160 q 402 1243 388 1215 q 427 1293 416 1270 l 576 1293 l 576 1279 q 544 1233 565 1261 q 496 1176 522 1206 q 443 1118 470 1146 q 391 1071 415 1090 l 309 1071 l 309 1089 z "},"ÃŠ":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 615 1071 l 533 1071 q 462 1127 498 1094 q 390 1197 425 1160 q 317 1127 353 1160 q 247 1071 281 1094 l 165 1071 l 165 1089 q 205 1135 182 1109 q 251 1188 229 1160 q 294 1243 274 1215 q 325 1293 314 1270 l 455 1293 q 486 1243 466 1270 q 529 1188 506 1215 q 575 1135 551 1160 q 615 1089 598 1109 l 615 1071 z "},"Ã‹":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 201 1175 q 220 1228 201 1212 q 266 1244 239 1244 q 312 1228 292 1244 q 332 1175 332 1211 q 312 1122 332 1139 q 266 1105 292 1105 q 220 1122 239 1105 q 201 1175 201 1139 m 455 1175 q 474 1228 455 1212 q 520 1244 493 1244 q 545 1240 533 1244 q 566 1228 557 1236 q 580 1206 574 1219 q 585 1175 585 1194 q 566 1122 585 1139 q 520 1105 546 1105 q 474 1122 493 1105 q 455 1175 455 1139 z "},"ÃŒ":{ha:471,x_min:42,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 309 1071 l 227 1071 q 176 1118 203 1090 q 122 1176 148 1146 q 74 1233 96 1206 q 42 1279 53 1261 l 42 1293 l 191 1293 q 216 1243 201 1270 q 246 1188 231 1215 q 278 1135 262 1160 q 309 1089 294 1109 l 309 1071 z "},"Ã":{ha:471,x_min:56,x_max:441,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 174 1089 q 205 1135 189 1109 q 237 1188 221 1160 q 267 1243 253 1215 q 292 1293 281 1270 l 441 1293 l 441 1279 q 409 1233 430 1261 q 361 1176 387 1206 q 308 1118 335 1146 q 256 1071 280 1090 l 174 1071 l 174 1089 z "},"ÃŽ":{ha:471,x_min:12,x_max:462,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 462 1071 l 380 1071 q 309 1127 345 1094 q 237 1197 272 1160 q 164 1127 200 1160 q 94 1071 128 1094 l 12 1071 l 12 1089 q 52 1135 29 1109 q 98 1188 75 1160 q 141 1243 121 1215 q 172 1293 161 1270 l 302 1293 q 333 1243 313 1270 q 375 1188 353 1215 q 421 1135 398 1160 q 462 1089 445 1109 l 462 1071 z "},"Ã":{ha:471,x_min:43,x_max:428,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 43 1175 q 62 1228 43 1212 q 109 1244 81 1244 q 155 1228 135 1244 q 174 1175 174 1211 q 155 1122 174 1139 q 109 1105 135 1105 q 62 1122 81 1105 q 43 1175 43 1139 m 298 1175 q 317 1228 298 1212 q 363 1244 336 1244 q 388 1240 376 1244 q 408 1228 399 1236 q 422 1206 417 1219 q 428 1175 428 1194 q 408 1122 428 1139 q 363 1105 389 1105 q 317 1122 336 1105 q 298 1175 298 1139 z "},"Ã":{ha:950,x_min:32,x_max:865,o:"m 32 546 l 135 546 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 436 l 32 436 l 32 546 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 546 l 489 546 l 489 436 l 261 436 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},"Ã‘":{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 m 614 1072 q 560 1084 587 1072 q 507 1111 533 1096 q 458 1137 481 1125 q 412 1149 434 1149 q 366 1131 382 1149 q 340 1071 349 1113 l 269 1071 q 284 1145 273 1112 q 313 1201 295 1178 q 356 1237 331 1225 q 412 1250 381 1250 q 468 1238 441 1250 q 522 1212 496 1226 q 571 1186 547 1198 q 614 1174 594 1174 q 660 1192 644 1174 q 686 1251 675 1209 l 757 1251 q 742 1178 753 1211 q 713 1121 731 1145 q 670 1085 695 1098 q 614 1072 645 1072 z "},"Ã’":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 590 1071 l 509 1071 q 457 1118 485 1090 q 403 1176 429 1146 q 356 1233 377 1206 q 323 1279 334 1261 l 323 1293 l 472 1293 q 497 1243 483 1270 q 528 1188 512 1215 q 559 1135 543 1160 q 590 1089 576 1109 l 590 1071 z "},"Ã“":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 441 1089 q 472 1135 456 1109 q 504 1188 488 1160 q 534 1243 520 1215 q 559 1293 549 1270 l 708 1293 l 708 1279 q 676 1233 697 1261 q 628 1176 654 1206 q 575 1118 602 1146 q 524 1071 547 1090 l 441 1071 l 441 1089 z "},"Ã”":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 743 1071 l 661 1071 q 590 1127 627 1094 q 518 1197 553 1160 q 446 1127 481 1160 q 375 1071 410 1094 l 293 1071 l 293 1089 q 334 1135 311 1109 q 379 1188 357 1160 q 422 1243 402 1215 q 453 1293 442 1270 l 583 1293 q 614 1243 594 1270 q 657 1188 634 1215 q 703 1135 680 1160 q 743 1089 726 1109 l 743 1071 z "},"Ã•":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 604 1072 q 550 1084 577 1072 q 498 1111 524 1096 q 448 1137 472 1125 q 403 1149 425 1149 q 356 1131 372 1149 q 330 1071 340 1113 l 260 1071 q 274 1145 263 1112 q 303 1201 286 1178 q 347 1237 321 1225 q 403 1250 372 1250 q 459 1238 431 1250 q 512 1212 486 1226 q 561 1186 538 1198 q 604 1174 585 1174 q 650 1192 635 1174 q 676 1251 666 1209 l 747 1251 q 733 1178 744 1211 q 704 1121 722 1145 q 661 1085 686 1098 q 604 1072 635 1072 z "},"Ã–":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 323 1175 q 342 1228 323 1212 q 389 1244 361 1244 q 435 1228 415 1244 q 454 1175 454 1211 q 435 1122 454 1139 q 389 1105 415 1105 q 342 1122 361 1105 q 323 1175 323 1139 m 578 1175 q 597 1228 578 1212 q 643 1244 616 1244 q 668 1240 656 1244 q 688 1228 680 1236 q 703 1206 697 1219 q 708 1175 708 1194 q 688 1122 708 1139 q 643 1105 669 1105 q 597 1122 616 1105 q 578 1175 578 1139 z "},"Ã—":{ha:765,x_min:96,x_max:671,o:"m 311 490 l 96 707 l 167 778 l 382 562 l 600 778 l 671 708 l 453 490 l 669 273 l 600 204 l 382 419 l 167 205 l 97 275 l 311 490 z "},"Ã˜":{ha:1031,x_min:85,x_max:945,o:"m 882 986 l 819 885 q 913 720 881 818 q 945 497 945 621 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 297 35 387 -14 l 244 -52 l 151 1 l 212 100 q 116 269 146 168 q 85 498 85 370 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 635 993 581 1007 q 734 953 690 979 l 789 1039 l 882 986 m 218 497 q 234 337 218 408 q 282 214 250 267 l 675 854 q 604 885 642 874 q 517 896 565 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 811 497 q 751 774 811 671 l 359 136 q 430 107 391 117 q 515 97 469 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 z "},"Ã™":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 574 1071 l 493 1071 q 441 1118 469 1090 q 388 1176 414 1146 q 340 1233 361 1206 q 308 1279 319 1261 l 308 1293 l 456 1293 q 482 1243 467 1270 q 512 1188 496 1215 q 544 1135 528 1160 q 574 1089 560 1109 l 574 1071 z "},"Ãš":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 400 1089 q 431 1135 415 1109 q 463 1188 447 1160 q 493 1243 479 1215 q 518 1293 507 1270 l 667 1293 l 667 1279 q 634 1233 656 1261 q 587 1176 613 1206 q 533 1118 561 1146 q 482 1071 506 1090 l 400 1071 l 400 1089 z "},"Ã›":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 707 1071 l 625 1071 q 554 1127 591 1094 q 482 1197 517 1160 q 410 1127 446 1160 q 339 1071 374 1094 l 257 1071 l 257 1089 q 298 1135 275 1109 q 343 1188 321 1160 q 386 1243 366 1215 q 417 1293 406 1270 l 547 1293 q 578 1243 558 1270 q 621 1188 598 1215 q 667 1135 644 1160 q 707 1089 690 1109 l 707 1071 z "},"Ãœ":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 293 1175 q 312 1228 293 1212 q 358 1244 331 1244 q 404 1228 385 1244 q 424 1175 424 1211 q 404 1122 424 1139 q 358 1105 385 1105 q 312 1122 331 1105 q 293 1175 293 1139 m 547 1175 q 566 1228 547 1212 q 612 1244 585 1244 q 637 1240 625 1244 q 658 1228 649 1236 q 672 1206 667 1219 q 677 1175 677 1194 q 658 1122 677 1139 q 612 1105 638 1105 q 566 1122 585 1105 q 547 1175 547 1139 z "},"Ã":{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 m 300 1089 q 331 1135 315 1109 q 362 1188 347 1160 q 393 1243 378 1215 q 418 1293 407 1270 l 566 1293 l 566 1279 q 534 1233 555 1261 q 487 1176 513 1206 q 433 1118 460 1146 q 382 1071 406 1090 l 300 1071 l 300 1089 z "},"Ãž":{ha:800,x_min:135,x_max:729,o:"m 729 530 q 710 412 729 469 q 649 311 692 355 q 536 241 606 267 q 363 215 466 215 l 261 215 l 261 0 l 135 0 l 135 991 l 261 991 l 261 821 l 380 821 q 537 801 471 821 q 646 745 603 782 q 709 654 688 708 q 729 530 729 600 m 261 322 l 349 322 q 459 333 412 322 q 537 368 506 344 q 583 430 568 392 q 599 524 599 469 q 543 667 599 621 q 370 713 488 713 l 261 713 l 261 322 z "},"ÃŸ":{ha:836,x_min:118,x_max:774,o:"m 685 854 q 670 786 685 816 q 634 731 656 755 q 588 686 613 706 q 541 647 562 665 q 505 610 519 628 q 490 571 490 591 q 495 546 490 557 q 513 521 500 534 q 550 491 526 508 q 612 449 574 475 q 680 399 650 424 q 731 347 710 375 q 763 287 751 319 q 774 212 774 254 q 755 111 774 153 q 702 40 736 68 q 620 0 667 13 q 514 -14 572 -14 q 401 -2 448 -14 q 318 33 354 10 l 318 146 q 358 124 336 135 q 404 106 380 114 q 454 93 429 98 q 505 87 480 87 q 571 96 543 87 q 616 120 598 104 q 642 157 633 135 q 650 205 650 178 q 644 250 650 230 q 624 289 638 270 q 585 328 609 308 q 522 371 560 347 q 451 421 479 398 q 404 467 422 444 q 378 513 386 490 q 371 566 371 537 q 385 629 371 602 q 420 677 399 656 q 465 717 441 699 q 511 755 490 735 q 546 797 532 774 q 559 850 559 820 q 548 899 559 878 q 517 934 537 920 q 468 955 496 948 q 406 961 440 961 q 342 955 372 961 q 290 932 313 948 q 255 887 268 916 q 241 815 241 859 l 241 0 l 118 0 l 118 814 q 139 932 118 884 q 199 1009 161 980 q 290 1050 237 1038 q 406 1063 343 1063 q 519 1050 468 1063 q 608 1011 571 1037 q 665 946 644 985 q 685 854 685 907 z "},"Ã ":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"Ã¡":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 302 860 q 333 905 317 880 q 365 959 349 931 q 395 1014 381 986 q 420 1064 410 1041 l 569 1064 l 569 1050 q 537 1004 558 1031 q 489 947 515 977 q 436 889 463 917 q 385 842 408 861 l 302 842 l 302 860 z "},"Ã¢":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 605 842 l 523 842 q 452 898 488 865 q 380 968 415 930 q 307 898 343 930 q 237 842 271 865 l 155 842 l 155 860 q 195 905 172 880 q 241 959 218 931 q 284 1014 264 986 q 315 1064 304 1041 l 445 1064 q 476 1014 456 1041 q 518 959 496 986 q 565 905 541 931 q 605 860 588 880 l 605 842 z "},"Ã£":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 474 843 q 420 855 447 843 q 368 881 393 867 q 318 908 342 896 q 273 920 294 920 q 226 902 242 920 q 200 842 210 884 l 130 842 q 144 916 133 882 q 173 972 155 949 q 216 1008 191 996 q 273 1021 241 1021 q 329 1009 301 1021 q 382 983 356 997 q 431 957 408 968 q 474 945 454 945 q 520 962 505 945 q 546 1022 536 980 l 617 1022 q 603 948 614 981 q 573 892 591 916 q 530 856 555 869 q 474 843 505 843 z "},"Ã¤":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 185 946 q 204 999 185 983 q 250 1015 223 1015 q 296 999 277 1015 q 316 946 316 982 q 296 893 316 910 q 250 876 277 876 q 204 893 223 876 q 185 946 185 910 m 439 946 q 458 999 439 983 q 505 1015 477 1015 q 529 1011 517 1015 q 550 999 541 1007 q 564 977 559 990 q 570 946 570 964 q 550 893 570 910 q 505 876 530 876 q 458 893 477 876 q 439 946 439 910 z "},"Ã¥":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 531 989 q 519 927 531 954 q 487 880 507 899 q 437 851 466 861 q 376 842 409 842 q 314 851 342 842 q 266 880 286 861 q 235 926 246 899 q 224 987 224 953 q 235 1049 224 1022 q 266 1095 246 1076 q 314 1123 286 1114 q 376 1133 342 1133 q 437 1123 408 1133 q 486 1095 465 1114 q 519 1049 507 1076 q 531 989 531 1023 m 452 987 q 430 1044 452 1023 q 376 1064 409 1064 q 320 1044 342 1064 q 299 987 299 1023 q 318 931 299 951 q 376 911 338 911 q 430 931 409 911 q 452 987 452 951 z "},"Ã¦":{ha:1157,x_min:64,x_max:1088,o:"m 64 208 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 503 729 447 758 q 589 637 559 701 q 680 727 623 695 q 806 758 736 758 q 924 734 871 758 q 1013 666 976 710 q 1068 561 1049 623 q 1088 425 1088 500 l 1088 349 l 632 349 q 685 156 635 218 q 835 94 735 94 q 897 98 868 94 q 952 107 926 101 q 1004 124 979 114 q 1054 146 1029 134 l 1054 36 q 1002 14 1027 23 q 950 -2 977 4 q 894 -11 923 -8 q 832 -14 865 -14 q 670 25 739 -14 q 559 142 602 64 q 511 76 536 105 q 453 27 485 47 q 381 -3 420 7 q 292 -14 342 -14 q 202 0 243 -14 q 130 40 160 13 q 81 110 99 68 q 64 208 64 151 m 192 207 q 225 115 192 144 q 311 86 258 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 m 803 656 q 685 603 728 656 q 635 449 642 550 l 954 449 q 945 533 954 495 q 918 599 937 572 q 871 641 899 626 q 803 656 842 656 z "},"Ã§":{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 m 495 -195 q 447 -297 495 -260 q 298 -334 399 -334 q 268 -332 283 -334 q 242 -328 252 -330 l 242 -254 q 269 -257 252 -256 q 296 -258 286 -258 q 372 -244 345 -258 q 399 -196 399 -229 q 390 -168 399 -180 q 366 -147 381 -156 q 329 -132 350 -138 q 282 -119 307 -125 l 343 0 l 425 0 l 387 -78 q 429 -92 410 -83 q 464 -115 449 -101 q 487 -149 478 -129 q 495 -195 495 -168 z "},"Ã¨":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"Ã©":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 322 860 q 353 905 337 880 q 385 959 369 931 q 415 1014 401 986 q 440 1064 429 1041 l 589 1064 l 589 1050 q 556 1004 578 1031 q 509 947 535 977 q 455 889 483 917 q 404 842 428 861 l 322 842 l 322 860 z "},"Ãª":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 602 842 l 520 842 q 449 898 486 865 q 377 968 412 930 q 304 898 340 930 q 234 842 269 865 l 152 842 l 152 860 q 193 905 170 880 q 238 959 216 931 q 281 1014 261 986 q 312 1064 301 1041 l 442 1064 q 473 1014 453 1041 q 516 959 493 986 q 562 905 538 931 q 602 860 585 880 l 602 842 z "},"Ã«":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 182 946 q 201 999 182 983 q 248 1015 220 1015 q 294 999 274 1015 q 313 946 313 982 q 294 893 313 910 q 248 876 274 876 q 201 893 220 876 q 182 946 182 910 m 437 946 q 456 999 437 983 q 502 1015 475 1015 q 527 1011 515 1015 q 547 999 538 1007 q 562 977 556 990 q 567 946 567 964 q 547 893 567 910 q 502 876 528 876 q 456 893 475 876 q 437 946 437 910 z "},"Ã¬":{ha:359,x_min:-23,x_max:243,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 243 842 l 162 842 q 111 889 138 861 q 57 947 83 917 q 9 1004 31 977 q -23 1050 -12 1031 l -23 1064 l 125 1064 q 151 1014 136 1041 q 181 959 165 986 q 213 905 197 931 q 243 860 229 880 l 243 842 z "},"Ã­":{ha:359,x_min:118,x_max:392,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 125 860 q 156 905 140 880 q 188 959 172 931 q 218 1014 204 986 q 243 1064 233 1041 l 392 1064 l 392 1050 q 360 1004 381 1031 q 312 947 338 977 q 259 889 286 917 q 208 842 231 861 l 125 842 l 125 860 z "},"Ã®":{ha:359,x_min:-45,x_max:405,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 405 842 l 323 842 q 252 898 288 865 q 180 968 215 930 q 107 898 143 930 q 37 842 71 865 l -45 842 l -45 860 q -5 905 -28 880 q 41 959 18 931 q 84 1014 64 986 q 115 1064 104 1041 l 245 1064 q 276 1014 256 1041 q 318 959 296 986 q 365 905 341 931 q 405 860 388 880 l 405 842 z "},"Ã¯":{ha:359,x_min:-12,x_max:372,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m -12 946 q 7 999 -12 983 q 53 1015 26 1015 q 99 999 79 1015 q 119 946 119 982 q 99 893 119 910 q 53 876 79 876 q 7 893 26 876 q -12 946 -12 910 m 242 946 q 261 999 242 983 q 307 1015 280 1015 q 332 1011 320 1015 q 353 999 344 1007 q 367 977 361 990 q 372 946 372 964 q 353 893 372 910 q 307 876 333 876 q 261 893 280 876 q 242 946 242 910 z "},"Ã°":{ha:802,x_min:75,x_max:725,o:"m 725 389 q 702 218 725 292 q 637 92 680 143 q 534 13 595 40 q 399 -14 474 -14 q 269 9 328 -14 q 166 74 210 31 q 99 180 123 117 q 75 323 75 243 q 97 467 75 404 q 158 572 118 529 q 255 636 198 614 q 383 659 312 659 q 505 638 452 659 q 586 578 557 618 l 591 581 q 530 726 570 661 q 428 846 489 791 l 254 742 l 204 819 l 351 908 q 295 946 324 927 q 235 982 267 964 l 282 1065 q 368 1019 326 1044 q 449 965 409 995 l 603 1059 l 653 982 l 521 903 q 604 806 566 859 q 668 689 642 753 q 710 551 695 626 q 725 389 725 476 m 597 357 q 586 431 597 395 q 551 495 574 467 q 490 540 527 523 q 401 557 452 557 q 312 541 349 557 q 252 496 275 526 q 217 421 228 466 q 205 319 205 377 q 217 225 205 268 q 252 153 228 183 q 313 105 276 122 q 401 89 350 89 q 552 156 506 89 q 597 357 597 224 z "},"Ã±":{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 m 515 843 q 461 855 488 843 q 408 881 434 867 q 359 908 382 896 q 313 920 335 920 q 267 902 283 920 q 241 842 250 884 l 170 842 q 185 916 174 882 q 214 972 196 949 q 257 1008 232 996 q 313 1021 282 1021 q 369 1009 342 1021 q 422 983 397 997 q 472 957 448 968 q 515 945 495 945 q 561 962 545 945 q 587 1022 576 980 l 658 1022 q 643 948 654 981 q 614 892 632 916 q 571 856 596 869 q 515 843 546 843 z "},"Ã²":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 506 842 l 425 842 q 373 889 401 861 q 319 947 345 917 q 272 1004 293 977 q 239 1050 250 1031 l 239 1064 l 388 1064 q 413 1014 399 1041 q 444 959 428 986 q 475 905 459 931 q 506 860 492 880 l 506 842 z "},"Ã³":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 321 860 q 352 905 336 880 q 384 959 368 931 q 414 1014 399 986 q 439 1064 428 1041 l 587 1064 l 587 1050 q 555 1004 576 1031 q 508 947 534 977 q 454 889 481 917 q 403 842 427 861 l 321 842 l 321 860 z "},"Ã´":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 622 842 l 540 842 q 469 898 505 865 q 397 968 432 930 q 324 898 360 930 q 254 842 288 865 l 172 842 l 172 860 q 212 905 189 880 q 258 959 235 931 q 301 1014 281 986 q 332 1064 321 1041 l 462 1064 q 493 1014 473 1041 q 535 959 513 986 q 582 905 558 931 q 622 860 605 880 l 622 842 z "},"Ãµ":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 499 843 q 445 855 472 843 q 393 881 418 867 q 343 908 367 896 q 298 920 319 920 q 251 902 267 920 q 225 842 235 884 l 155 842 q 169 916 158 882 q 198 972 180 949 q 241 1008 216 996 q 298 1021 267 1021 q 354 1009 326 1021 q 407 983 381 997 q 456 957 433 968 q 499 945 479 945 q 545 962 530 945 q 571 1022 561 980 l 642 1022 q 628 948 639 981 q 598 892 616 916 q 555 856 581 869 q 499 843 530 843 z "},"Ã¶":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 203 946 q 222 999 203 983 q 269 1015 241 1015 q 315 999 295 1015 q 334 946 334 982 q 315 893 334 910 q 269 876 295 876 q 222 893 241 876 q 203 946 203 910 m 458 946 q 477 999 458 983 q 523 1015 496 1015 q 548 1011 536 1015 q 568 999 559 1007 q 583 977 577 990 q 588 946 588 964 q 568 893 588 910 q 523 876 549 876 q 477 893 496 876 q 458 946 458 910 z "},"Ã·":{ha:765,x_min:69,x_max:696,o:"m 69 439 l 69 541 l 696 541 l 696 439 l 69 439 m 304 253 q 311 293 304 277 q 327 319 317 309 q 352 333 338 329 q 382 338 366 338 q 412 333 397 338 q 437 319 426 329 q 454 293 448 309 q 460 253 460 277 q 454 215 460 231 q 437 188 448 199 q 412 173 426 178 q 382 168 397 168 q 352 173 366 168 q 327 188 338 178 q 311 215 317 199 q 304 253 304 231 m 304 726 q 311 766 304 750 q 327 792 317 782 q 352 807 338 802 q 382 811 366 811 q 412 807 397 811 q 437 792 426 802 q 454 766 448 782 q 460 726 460 750 q 454 688 460 704 q 437 662 448 672 q 412 646 426 651 q 382 642 397 642 q 352 646 366 642 q 327 662 338 651 q 311 688 317 672 q 304 726 304 704 z "},"Ã¸":{ha:802,x_min:78,x_max:726,o:"m 726 374 q 704 209 726 281 q 638 87 681 136 q 536 12 596 38 q 400 -14 475 -14 q 249 22 315 -14 l 203 -52 l 114 -1 l 168 87 q 102 209 125 136 q 78 374 78 281 q 101 537 78 466 q 165 658 123 609 q 268 733 208 707 q 404 758 329 758 q 485 748 447 758 q 557 720 524 739 l 603 793 l 692 743 l 637 656 q 703 535 680 606 q 726 374 726 465 m 205 374 q 212 272 205 317 q 233 193 218 228 l 503 632 q 457 650 483 644 q 401 656 432 656 q 251 586 297 656 q 205 374 205 515 m 599 374 q 572 549 599 481 l 302 111 q 348 94 323 100 q 403 89 372 89 q 553 160 507 89 q 599 374 599 232 z "},"Ã¹":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 470 842 l 389 842 q 337 889 365 861 q 283 947 309 917 q 236 1004 257 977 q 203 1050 214 1031 l 203 1064 l 352 1064 q 377 1014 363 1041 q 408 959 392 986 q 439 905 423 931 q 470 860 456 880 l 470 842 z "},"Ãº":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 332 860 q 362 905 347 880 q 394 959 378 931 q 425 1014 410 986 q 450 1064 439 1041 l 598 1064 l 598 1050 q 566 1004 587 1031 q 518 947 545 977 q 465 889 492 917 q 414 842 437 861 l 332 842 l 332 860 z "},"Ã»":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 631 842 l 549 842 q 477 898 514 865 q 406 968 441 930 q 333 898 369 930 q 262 842 297 865 l 180 842 l 180 860 q 221 905 198 880 q 267 959 244 931 q 310 1014 290 986 q 340 1064 330 1041 l 471 1064 q 502 1014 481 1041 q 544 959 522 986 q 590 905 567 931 q 631 860 614 880 l 631 842 z "},"Ã¼":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 210 946 q 229 999 210 983 q 275 1015 248 1015 q 321 999 301 1015 q 340 946 340 982 q 321 893 340 910 q 275 876 301 876 q 229 893 248 876 q 210 946 210 910 m 464 946 q 483 999 464 983 q 529 1015 502 1015 q 554 1011 542 1015 q 574 999 566 1007 q 589 977 583 990 q 594 946 594 964 q 574 893 594 910 q 529 876 555 876 q 483 893 502 876 q 464 946 464 910 z "},"Ã½":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 276 860 q 307 905 291 880 q 339 959 323 931 q 369 1014 355 986 q 394 1064 383 1041 l 543 1064 l 543 1050 q 510 1004 532 1031 q 463 947 489 977 q 409 889 437 917 q 358 842 382 861 l 276 842 l 276 860 z "},"Ã¾":{ha:814,x_min:118,x_max:737,o:"m 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 1055 l 241 1055 l 241 745 l 236 644 l 241 644 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},"Ã¿":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 155 946 q 174 999 155 983 q 220 1015 193 1015 q 266 999 246 1015 q 286 946 286 982 q 266 893 286 910 q 220 876 246 876 q 174 893 193 876 q 155 946 155 910 m 409 946 q 428 999 409 983 q 474 1015 447 1015 q 499 1011 487 1015 q 519 999 511 1007 q 534 977 528 990 q 539 946 539 964 q 519 893 539 910 q 474 876 500 876 q 428 893 447 876 q 409 946 409 910 z "},"Ä±":{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 z "},"Ë†":{ha:802,x_min:175,x_max:625,o:"m 625 842 l 543 842 q 472 898 509 865 q 400 968 435 930 q 328 898 363 930 q 257 842 292 865 l 175 842 l 175 860 q 216 905 193 880 q 261 959 239 931 q 304 1014 284 986 q 335 1064 324 1041 l 465 1064 q 496 1014 476 1041 q 539 959 516 986 q 585 905 562 931 q 625 860 608 880 l 625 842 z "},"Ëš":{ha:802,x_min:248,x_max:554,o:"m 554 989 q 542 927 554 954 q 510 880 530 899 q 460 851 489 861 q 399 842 432 842 q 337 851 365 842 q 289 880 309 861 q 258 926 269 899 q 248 987 248 953 q 258 1049 248 1022 q 289 1095 269 1076 q 337 1123 309 1114 q 399 1133 365 1133 q 460 1123 431 1133 q 509 1095 488 1114 q 542 1049 530 1076 q 554 989 554 1023 m 475 987 q 453 1044 475 1023 q 399 1064 432 1064 q 343 1044 365 1064 q 322 987 322 1023 q 341 931 322 951 q 399 911 361 911 q 453 931 432 911 q 475 987 475 951 z "},"Ëœ":{ha:802,x_min:175,x_max:663,o:"m 519 843 q 466 855 492 843 q 413 881 439 867 q 363 908 387 896 q 318 920 340 920 q 271 902 288 920 q 245 842 255 884 l 175 842 q 190 916 178 882 q 219 972 201 949 q 262 1008 237 996 q 318 1021 287 1021 q 374 1009 347 1021 q 427 983 401 997 q 476 957 453 968 q 519 945 500 945 q 566 962 550 945 q 591 1022 581 980 l 663 1022 q 648 948 659 981 q 619 892 637 916 q 576 856 601 869 q 519 843 551 843 z "},"â€“":{ha:694,x_min:56,x_max:639,o:"m 56 315 l 56 429 l 639 429 l 639 315 l 56 315 z "},"â€”":{ha:1389,x_min:56,x_max:1333,o:"m 56 315 l 56 429 l 1333 429 l 1333 315 l 56 315 z "},"â€˜":{ha:243,x_min:16,x_max:228,o:"m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"â€™":{ha:243,x_min:16,x_max:228,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 z "},"â€š":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"â€œ":{ha:504,x_min:16,x_max:489,o:"m 286 652 l 277 667 q 299 745 286 703 q 328 828 313 786 q 361 912 344 870 q 396 991 379 954 l 489 991 q 469 905 479 950 q 450 816 459 861 q 434 730 441 772 q 421 652 427 688 l 286 652 m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"â€":{ha:504,x_min:16,x_max:489,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 m 479 991 l 489 977 q 466 898 479 939 q 437 815 453 857 q 404 731 421 772 q 370 652 387 690 l 277 652 q 296 737 286 692 q 315 827 306 782 q 332 913 324 871 q 345 991 339 956 l 479 991 z "},"â€ž":{ha:608,x_min:43,x_max:517,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 507 161 l 517 146 q 494 68 507 109 q 465 -16 481 26 q 432 -99 449 -58 q 397 -179 414 -141 l 304 -179 q 324 -93 314 -138 q 343 -4 334 -48 q 359 83 352 41 q 372 161 367 125 l 507 161 z "},"â€¢":{ha:522,x_min:102,x_max:421,o:"m 102 507 q 114 589 102 555 q 148 645 126 623 q 198 675 169 666 q 261 685 227 685 q 323 675 294 685 q 374 645 353 666 q 409 589 396 623 q 421 507 421 555 q 409 426 421 460 q 374 371 396 392 q 323 339 353 349 q 261 329 294 329 q 198 339 227 329 q 148 371 169 349 q 114 426 126 392 q 102 507 102 460 z "},"â€¹":{ha:400,x_min:56,x_max:345,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 z "},"â€º":{ha:400,x_min:56,x_max:345,o:"m 345 357 l 135 78 l 56 131 l 216 367 l 56 603 l 135 656 l 345 375 l 345 357 z "},"â„":{ha:180,x_min:-239,x_max:418,o:"m 418 991 l -132 0 l -239 0 l 311 991 l 418 991 z "}},familyName:"Droid Sans",ascender:1293,descender:-334,underlinePosition:-154,underlineThickness:102,boundingBox:{yMin:-492,xMin:-352,yMax:1907,xMax:1966},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright Â© 2007, Google Corporation.",fontFamily:"Droid Sans",fontSubfamily:"Regular",uniqueID:"Ascender - Droid Sans",fullName:"Droid Sans",version:"Version 1.00 build 113",postScriptName:"DroidSans",trademark:"Droid is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",description:"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://Â®www.apache.org/licenses/LICENSE-2.0",compatibleFullName:"Droid Sans"},cssFontWeight:"normal",cssFontStyle:"normal"}},function(t,e,i){"use strict";var n=i(3),r=i(27),o=i.n(r),a=i(5),s=i(69),l=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var c=Math.PI/2,u=1e3,p=0,d=30,f=3,m=900,v=o.a.Easing.Quadratic.InOut,g={TOP:"top",BOTTOM:"bottom"},y={DOWN:"down",UP:"up"},_=function(){function t(e,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._focusMapsStart=g.TOP,this._focusMapsDir=y.DOWN,this._focusMapsLen=f,this._focusAnimCurve=v,this._focusAnimDuration=m,this.rotationAxis=new n._1(1,0,0),this.mapBoundingBoxes=[],this.mapAxesHelpers=[],this.mapView=e,this.object=i,this.options=o,this.padding=null==o.padding?e.cachedPadding:o.padding,this.rotation=null==o.rotation?p:o.rotation,this.maps=r,this.debug=o.debug,this.mapSpacing=null==o.mapSpacing?u:parseInt(o.mapSpacing,10),this.mapView.setViewState(s.a.MULTI_FLOOR),this.object.children.forEach(function(t){return t.parent.remove(t)}),this.mapTilt=(null==o.mapTilt?d:o.mapTilt)*Math.PI/180,this.mapView.controls.setTilt(c),this.positionMaps(r),this.addMaps(this.maps),this.resize=Object(a.c)(this.resize.bind(this),300),this.focusOnMaps=this.focusOnMaps.bind(this),this.debug&&(this.addMapBoundingBoxes(),this.addAxesHelpers())}return h(t,[{key:"positionMaps",value:function(){var t=this,e=this.maps.map(function(e,i){var r=e.object;r.rotation.z=t.rotation*Math.PI/180;var o=new n.b;return o.setFromObject(r),r.rotation.z=0,o}),i=0;this.maps.forEach(function(n,r){var o=n.object;o.setRotationFromAxisAngle(t.rotationAxis,t.mapTilt);var a=e[r].min.y*Math.sin(t.mapTilt),s=e[r].max.y*Math.sin(t.mapTilt);i-=Math.abs(s),o.position.z=i,i-=Math.abs(a),i-=t.mapSpacing});var r=Object(a.j)(this.maps),o=(r.max.z-r.min.z)/2;this.maps.forEach(function(e,i){var n=e.object;n.position.z+=o,n.rotation.z=t.rotation*Math.PI/180}),this.maps.forEach(function(e,i){if(!0===e.connection){var r=l(e.connectionNodes,2),o=r[0],a=r[1],s=t.mapView.convertTo3DMapPosition(o),h=t.mapView.convertTo3DMapPosition(a),c=e.object,u=t.maps[i-1].object,p=t.maps[i+1].object;u.updateMatrixWorld(),p.updateMatrixWorld(),s.applyMatrix4((new n.F).extractRotation(u.matrix)),h.applyMatrix4((new n.F).extractRotation(p.matrix)),s.z+=u.position.z,h.z+=p.position.z;var d=h.clone().sub(s),f=d.length();d=d.normalize().multiplyScalar(.5*f);var m=s.clone().add(d);c.rotation.z=0,c.position.set(m.x,m.y,m.z),c.renderOrder=1}})}},{key:"addMaps",value:function(t){var e=this;t.forEach(function(t){e.object.add(t.object)})}},{key:"removeMaps",value:function(){this.maps.forEach(function(t){t.object.position.set(0,0,0),t.object.rotation.set(0,0,0),t.object.parent&&t.object.parent.remove(t.object)})}},{key:"addMapBoundingBoxes",value:function(){var t=this,e=[16711680,65280,255,16711935,16776960,65535];this.maps.forEach(function(i,r){var o=i.object,a=(new n.b).setFromObject(o),s=new n.c(a,e[r]);t.object.add(s),t.mapBoundingBoxes.push(s)})}},{key:"removeMapBoundingBoxes",value:function(){this.mapBoundingBoxes.forEach(function(t,e){t.parent&&t.parent.remove(t)})}},{key:"addAxesHelpers",value:function(){var t=this,e=new n.a(5e3);this.object.add(e),this.maps.forEach(function(e,i){var r=e.object,o=new n.a(1e3);r.add(o),t.mapAxesHelpers.push(o)})}},{key:"removeAxesHelpers",value:function(){this.mapAxesHelpers.forEach(function(t,e){t.parent&&t.parent.remove(t)})}},{key:"tiltMaps",value:function(t){var e=this;this.maps.forEach(function(i,n){i.object.setRotationFromAxisAngle(e.rotationAxis,t)})}},{key:"focusOnMaps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.start,r=void 0===i?this._focusMapsStart:i,o=e.len,s=void 0===o?this._focusMapsLen:o,l=e.dir,h=void 0===l?this._focusMapsDir:l,c=e.duration,u=void 0===c?this._focusAnimDuration:c,p=e.curve,d=void 0===p?this._focusAnimCurve:p;return this._focusMapsStart=r,this._focusMapsLen=s,this._focusMapsDir=h,this._focusAnimDuration=u,this._focusAnimCurve=d,new Promise(function(e){var i=t.maps.slice(0);s<t.maps.length&&(r===g.TOP?i=i.slice(0,s):r===g.BOTTOM?i=i.slice(-s):"number"==typeof r&&(h===y.DOWN?i=i.slice(r,r+s):h===y.UP&&(i=i.slice(Math.max(r-s,0),r+1))));var o=Object(a.j)(t.maps,t.mapSpacing),l=o.max.z-o.min.z,c=Object(a.j)(i,t.mapSpacing);c.min.setX(o.min.x),c.max.setX(o.max.x);var p=c.max.x-c.min.x,f=c.max.z-c.min.z,m=-l/2+f/2,v=+l/2-f/2,_=c.clone(),x=t.mapView.canvasWidth,b=t.mapView.canvasHeight;if(t.padding.top+t.padding.bottom<b){var w=b/(b-t.padding.top);_.max.z=c.min.z+f*w;var E=f/2*w-f/2;v+=E,m+=E;var M=b/(b-t.padding.bottom);_.min.z=c.max.z-f*M;var q=f/2*M-f/2;v-=q,m-=q}else console.warn("top + bottom padding cannot exceed canvas height, ignoring");if(t.padding.left+t.padding.right<x){var A=x/(x-t.padding.left);_.min.x=c.max.x-p*A;var T=x/(x-t.padding.right);_.max.x=c.min.x+p*T}else console.warn("left + right padding cannot exceed canvas width, ignoring");var P=_.max.x-_.min.x,S=_.max.z-_.min.z,L=_.min.x+P/2,C=_.min.z+S/2,I=t.mapView.controls.camera.fov;if(t.debug){var O=new n.c(c,16711680);t.object.add(O);var R=new n.c(_,16776960);t.object.add(R)}t.mapView.controls.minPedestal=m,t.mapView.controls.maxPedestal=v;var N=Object(a.p)(_,S,I),B=t.mapView.controls.camera.aspect,D=Object(a.p)(_,P,I*B),z=Math.max(D,N);t.mapView.controls.expandZoomLimits(z);var k={zoom:z,rotation:0,position:{x:L,y:0,z:C}},F=t.mapView.controls.animateCamera(k,u,d,function(){t.tween=F,e(t.tween)})})}},{key:"resize",value:function(){this.focusOnMaps()}},{key:"destroy",value:function(){this.removeMaps(),this.mapView.setViewState(s.a.SINGLE_FLOOR),this.mapView.controls.setPosition(0,0),this.mapView.controls.setAltitude(0)}},{key:"viewPortHeight",get:function(){return this.mapView.canvasHeight-this.padding.top-this.padding.bottom}},{key:"viewPortWidth",get:function(){return this.mapView.canvasWidth-this.padding.left-this.padding.right}},{key:"mapTiltDegrees",get:function(){return 180*this.mapTilt/Math.PI},set:function(t){this.mapTilt=t*Math.PI/180,this.positionMaps(),this.debug&&(this.removeMapBoundingBoxes(),this.addMapBoundingBoxes())}},{key:"projections",get:function(){return Object(a.b)({maps:this.maps,width:this.mapView.canvasWidth,height:this.mapView.canvasHeight,camera:this.mapView.controls.camera})}}]),t}();e.a=_},function(t,e,i){"use strict";(function(t){var n=i(16),r=i(5),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.h+t.y>e.y}var l=void 0,h=void 0,c=void 0,u=20,p=150;"test"===t.env.NODE_ENV&&(h=i(241).subClass({imageMagick:!0}),c=i(78),l=i(18));var d=function(){function t(e,i,n,r){a(this,t),this.rows=[],this.boundingBox={x:0,y:0,w:1/0,h:1/0},this.screenBuffer=r,this.width=e,this.height=i,this.steps=n,this.build(e,i,n),this.clear=this.clear.bind(this),this.insert=this.insert.bind(this),this.getCollisions=this.getCollisions.bind(this)}return o(t,[{key:"insert",value:function(t){for(var e in t.hitAreas){var i=t.hitAreas[e];i.cells.clear();for(var n=0;n<this.rows.length;n++)for(var r=this.rows[n],o=0;o<r.cols.length;o++){var a=r.cols[o];s(a,i)&&(a.collisions.add(i),i.cells.add({row:n,col:o}))}}}},{key:"clear",value:function(){for(var t=0;t<this.rows.length;t++)for(var e=this.rows[t],i=0;i<e.cols.length;i++){e.cols[i].collisions.clear()}}},{key:"build",value:function(){for(var t=this.width,e=this.height,i=this.steps,n=Math.abs(Math.max(e,t)/i),r=Math.abs(e/n),o=Math.abs(t/n),a=0;a<r;a++){var s={w:t,h:n,x:0,y:a*n,cols:[]};this.rows.push(s);for(var l=0;l<o;l++)s.cols.push({w:n,h:n,x:l*n,y:s.y,collisions:new Set})}this.boundingBox={x:-this.screenBuffer,y:-this.screenBuffer,w:this.width+2*this.screenBuffer,h:this.height+2*this.screenBuffer}}},{key:"destroy",value:function(){this.clear(),this.rows=[]}},{key:"getCollisions",value:function(t){var e={};for(var i in t.hitAreas){var n=t.hitAreas[i];if(e[i]=[],!1!==n.enabled){var r=!0,o=!1,a=void 0;try{for(var l,h=n.cells[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){var c=l.value,u=c.row,p=c.col,d=this.rows[u].cols[p].collisions;if(d.size>0){var f=!0,m=!1,v=void 0;try{for(var g,y=d[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var _=g.value;_.collider!=t&&!0===_.collider.enabled&&s(_,n)&&-1===e[i].indexOf(_.collider)&&e[i].push(_.collider)}}catch(t){m=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(m)throw v}}}}}catch(t){o=!0,a=t}finally{try{!r&&h.return&&h.return()}finally{if(o)throw a}}}}return e}}]),t}(),f=function(t){function e(t){var i=t.hitAreas,n=void 0===i?{}:i,r=t.rank,o=void 0===r?999:r,s=t.id,l=t.debug,h=void 0!==l&&l,c=t.userData,u=void 0===c?{}:c;a(this,e);var p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return p.hitAreas={},p.collisions={},p.userData={},p.enabled=!0,p._debug=!1,p.x=0,p.y=0,p.rank=o,p.userData=u,p.id=s,p._debug=h,p.update=p.update.bind(p),p.enable=p.enable.bind(p),p.disable=p.disable.bind(p),p.reset=p.reset.bind(p),p.updateHitAreas=p.updateHitAreas.bind(p),p.updateHitAreas(n),p}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n["a"]),o(e,[{key:"reset",value:function(){for(var t in this.hitAreas)this.hitAreas[t].cells.clear()}},{key:"calculateBoundingBox",value:function(){var t={x:1/0,y:1/0,x1:-1/0,y1:-1/0,w:0,h:0};for(var e in this.hitAreas)t.x=Math.min(t.x,this.hitAreas[e].x),t.y=Math.min(t.y,this.hitAreas[e].y),t.x1=Math.max(t.x1,this.hitAreas[e].x+this.hitAreas[e].w),t.y1=Math.max(t.y1,this.hitAreas[e].y+this.hitAreas[e].h);return t.w=t.x1-t.x,t.h=t.y1-t.y,this.boundingBox=t,this.boundingBox}},{key:"updateHitAreas",value:function(t){for(var e in this.hitAreas){var i=this.hitAreas[e];i.el&&document.body.contains(i.el)&&this._debug&&document.body.removeChild(i.el)}this.hitAreas=t;for(var n in this.hitAreas){var r=this.hitAreas[n];r._x=r.x,r._y=r.y,r.cells=new Set,this._debug&&(r.el=r.el||document.createElement("div"),document.body.appendChild(r.el))}this.update()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y;this.x=t,this.y=e;for(var i in this.hitAreas){var n=this.hitAreas[i];n.collider=this,n.x=n._x+this.x,n.y=n._y+this.y,this._debug&&Object.assign(n.el.style,{left:n.x+"px",top:n.y+"px",width:n.w+"px",height:n.h+"px",background:"rgba(0, 0, 0, 0.25)",border:"1px solid white",position:"absolute","pointer-events":"none"})}return this.calculateBoundingBox(),this}},{key:"insideGrid",get:function(){for(var t in this.hitAreas)if(this.hitAreas[t].cells.size>0)return!0;return!1}}]),e}(),m=function(){function e(t){var i=t.width,n=t.height,o=t.gridSteps,s=void 0===o?u:o,l=t.screenBuffer,h=void 0===l?p:l;a(this,e),this.colliders=new Set,this.maxColliders=100,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.destroy=this.destroy.bind(this),this.step=Object(r.r)(this.step,16).bind(this),this.gridSteps=s,this.screenBuffer=h,this.grid=new d(i,n,this.gridSteps,h)}return o(e,[{key:"resize",value:function(t){var e=t.width,i=t.height;this.grid.destroy(),this.grid=new d(e,i,this.gridSteps,this.screenBuffer)}},{key:"add",value:function(t){var i=new f(Object.assign({},t,{debug:null!=e.DEBUG}));return this.colliders.add(i),i}},{key:"remove",value:function(t){this.colliders.delete(t)}},{key:"step",value:function(){var i=void 0,n=void 0;this.grid.clear();var r=this.rankedColliders,o=!0,a=!1,s=void 0;try{for(var u,p=this.colliders[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){var d=u.value;d.reset(),-1===r.indexOf(d)?d.publish("hide"):(d.publish("show"),this.grid.insert(d))}}catch(t){a=!0,s=t}finally{try{!o&&p.return&&p.return()}finally{if(a)throw s}}"test"===t.env.NODE_ENV&&null!=e.DEBUG&&null!=e.DEBUG&&(n=c.resolve(e.DEBUG),(i=h(1024,1024,"white")).fill("transparent"),i.stroke("#AAAAAA",1),l.existsSync(n)&&l.unlinkSync(n),this.grid.rows.forEach(function(t){i.fill("transparent"),t.cols.forEach(function(t){t.collisions.size>0?i.stroke("#FF6C68",1):i.stroke("#AAAAAA",1),i.drawRectangle(t.x,t.y,t.x+t.w,t.y+t.h)})}));for(var f=0;f<r.length;f++){var m=r[f],v=this.grid.getCollisions(m);if("test"===t.env.NODE_ENV&&null!=e.DEBUG)for(var g in m.hitAreas){var y=m.hitAreas[g],_=y.x,x=y.y,b=y.w,w=y.h;v[g].length>0?i.stroke("#00ff00",1):i.stroke("#000000",1),i.drawRectangle(_,x,_+b,x+w)}null!=v&&m.publish("collision",v)}var E=!0,M=!1,q=void 0;try{for(var A,T=this.colliders[Symbol.iterator]();!(E=(A=T.next()).done);E=!0){A.value.publish("update")}}catch(t){M=!0,q=t}finally{try{!E&&T.return&&T.return()}finally{if(M)throw q}}"test"===t.env.NODE_ENV&&null!=e.DEBUG&&i.write(n,function(t){if(t)throw t})}},{key:"destroy",value:function(){this.grid.destroy(),this.clear()}},{key:"clear",value:function(){this.colliders.clear(),this.grid.clear()}},{key:"rankedColliders",get:function(){var t=this;return Array.from(this.colliders).filter(function(e){return i=e,n=t.grid,a=n.boundingBox,r=a,o=i.boundingBox,r.x<o.x&&r.x+r.w>o.x+o.w&&r.y<o.y&&r.h+r.y>o.y+o.h&&e.enabled;var i,n,r,o,a}).sort(function(t,e){return e.rank-t.rank}).slice(0,this.maxColliders)}}]),e}();m.DEBUG=void 0,e.a=m}).call(e,i(1))},function(t,e,i){(function(n){var r=i(123).Stream,o=i(46).EventEmitter;function a(t,e,i){var s;if(!(this instanceof a))return new a(t,e,i);if(o.call(this),this._options={},this.options(this.__proto__._options),this.data={},this._in=[],this._out=[],this._outputFormat=null,this._subCommand="convert",t instanceof r?(this.sourceStream=t,t=e||"unknown.jpg"):n.isBuffer(t)?(this.sourceBuffer=t,t=e||"unknown.jpg"):e&&(s=t,t="",this.in("-size",s+"x"+e),i&&this.in("xc:"+i)),"string"==typeof t){var l=t.match(/(\[.+\])$/);l&&(this.sourceFrames=t.substr(l.index,l[0].length),t=t.substr(0,l.index))}this.source=t,this.addSrcFormatter(function(t){var e=this.sourceStream||this.sourceBuffer?"-":this.source;e&&this.sourceFrames&&(e+=this.sourceFrames),t.length=0,t[0]=e})}i(129).inherits(a,o);var s=a;a.subClass=function(t){function e(t,i,n){if(!(this instanceof s))return new e(t,i,n);s.call(this,t,i,n)}return e.prototype.__proto__=s.prototype,e.prototype._options={},e.prototype.options(t),e},i(256)(a.prototype),i(257)(a),i(258)(a.prototype),i(259)(a.prototype),i(260)(a.prototype),i(266)(a.prototype),i(133)(a.prototype),i(281)(a.prototype),i(282)(a.prototype),t.exports=e=a,t.exports.utils=i(33),t.exports.compare=i(133)(),t.exports.version=i(283).version}).call(e,i(31).Buffer)},function(t,e,i){"use strict";e.byteLength=function(t){var e=h(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){for(var e,i=h(t),n=i[0],a=i[1],s=new o((p=n,d=a,3*(p+d)/4-d)),l=0,c=a>0?n-4:n,u=0;u<c;u+=4)e=r[t.charCodeAt(u)]<<18|r[t.charCodeAt(u+1)]<<12|r[t.charCodeAt(u+2)]<<6|r[t.charCodeAt(u+3)],s[l++]=e>>16&255,s[l++]=e>>8&255,s[l++]=255&e;var p,d;2===a&&(e=r[t.charCodeAt(u)]<<2|r[t.charCodeAt(u+1)]>>4,s[l++]=255&e);1===a&&(e=r[t.charCodeAt(u)]<<10|r[t.charCodeAt(u+1)]<<4|r[t.charCodeAt(u+2)]>>2,s[l++]=e>>8&255,s[l++]=255&e);return s},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o=[],a=0,s=i-r;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){for(var r,o,a=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,h=l>>1,c=-7,u=i?r-1:0,p=i?-1:1,d=t[e+u];for(u+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+u],u+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+u],u+=p,c-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=h}return(d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var a,s,l,h=8*o-r-1,c=(1<<h)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(e*l-1)*Math.pow(2,r),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,h+=r;h>0;t[i+d]=255&a,d+=f,a/=256,h-=8);t[i+d-f]|=128*m}},function(t,e){},function(t,e,i){"use strict";var n=i(48).Buffer;t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,o=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,i=o,r=s,e.copy(i,r),s+=a.data.length,a=a.next;return o},t}()},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(247),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,i(10))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,o,a,s,l=1,h={},c=!1,u=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){f(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){o.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(f,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return h[l]=r,n(l),l++},p.clearImmediate=d}function d(t){delete h[t]}function f(t){if(c)setTimeout(f,0,t);else{var e=h[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,i(10),i(1))},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(e,i(10))},function(t,e,i){"use strict";t.exports=o;var n=i(128),r=i(32);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}r.inherits=i(22),r.inherits(o,n),o.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){t.exports=i(77)},function(t,e,i){t.exports=i(17)},function(t,e,i){t.exports=i(76).Transform},function(t,e,i){t.exports=i(76).PassThrough},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){t.exports=function(t){t._options={},t.options=function(t){for(var e,i=Object.keys(t),n=i.length;n--;)e=i[n],this._options[e]=t[e];return this}}},function(t,e){t.exports=function(t){var e=t.prototype;var i={format:{key:"format",format:"%m ",helper:"Format"},depth:{key:"depth",format:"%q"},filesize:{key:"Filesize",format:"%b"},size:{key:"size",format:"%wx%h ",helper:"Geometry"},color:{key:"color",format:"%k",helper:"Colors"},orientation:{key:"Orientation",format:"%[EXIF:Orientation]",helper:"Orientation"},res:{key:"Resolution",verbose:!0}};function n(t,e){var i=["identify","-ping"];return e.format&&i.push("-format",e.format),e.verbose&&i.push("-verbose"),i=i.concat(t.src())}Object.keys(i).forEach(function(t){e[t]=function(e,r){if(r||(r=e,e={}),!r)return this;var a=i[t],s=a.key,l=this;if(l.data[s])return r.call(l,null,l.data[s]),l;if(l.on(t,r),l.bufferStream=!!e.bufferStream,a.verbose)return l.identify(e,function(e,i,n,r){e?l.emit(t,e,l.data[s],i,n,r):l.emit(t,e,l.data[s])}),l;var h=n(l,a);return l._exec(h,function(e,i,n,r){if(e)l.emit(t,e,l.data[s],i,n,r);else{var h=(i||"").trim();a.helper in o?o[a.helper](l.data,h):l.data[s]=h,l.emit(t,e,l.data[s])}}),l}}),e.identify=function(t,e){if("string"==typeof t&&(t={format:t}),e||(e=t,t={}),!e)return this;if(t&&t.format)return function(t,e){var i=this;i.bufferStream=!!t.bufferStream;var r=n(i,t);return i._exec(r,function(t,n,r,o){if(t)return e.call(i,t,void 0,n,r,o);e.call(i,t,(n||"").trim())}),i}.call(this,t,e);var i=this;if(2===i._identifyState)return e.call(i,null,i.data),i;if(i.on("identify",e),1===i._identifyState)return i;i._identifyState=1,i.bufferStream=!!t.bufferStream;var r=n(i,{verbose:!0});return i._exec(r,function(t,e,n,r){t?i.emit("identify",t,i.data,e,n,r):(t=function(t,e){var i=(t||"").trim().replace(/\r\n|\r/g,"\n").split("\n");i.shift();try{for(var n,r,a,s=i.length,l=/^( *)(.+?): (.*)$/,h=/^( *)(.+?):$/,c={indent:{}},u=null,p=0;p<s;++p)if(r=l.exec(i[p])||h.exec(i[p])){var d=r[1].length,f=r[2]?r[2].trim():"";if("Image"!=f&&"Warning"!=f){var m=r[3]?r[3].trim():null;if(null===u)u=d,a=c.root=c.indent[u]=e.data;else if(d<u){if(!(d in c.indent))continue;a=c.indent[d]}else d>u&&(c.indent[u]=a,a=a[n]={});if(u=d,m){if(a.hasOwnProperty(f)){if(!Array.isArray(a[f])){var v=a[f];a[f]=[v]}a[f].push(m)}else a[f]=m;f in o&&o[f](a,m)}n=f}}}catch(e){return e.message=e.message+"\n\n  Identify stdout:\n  "+t,e}}(e,i))?i.emit("identify",t,i.data,e,n,r):(i.data.path=i.source,i.emit("identify",null,i.data),i._identifyState=2)}),i};var r={1:"TopLeft",2:"TopRight",3:"BottomRight",4:"BottomLeft",5:"LeftTop",6:"RightTop",7:"RightBottom",8:"LeftBottom"},o=t.identifyHelpers={};o.Geometry=function(t,e){var i=e.split(" ").shift().split("x"),n=parseInt(i[0],10),r=parseInt(i[1],10);t.size&&t.size.width&&t.size.height?(n>t.size.width&&(t.size.width=n),r>t.size.height&&(t.size.height=r)):t.size={width:n,height:r}},o.Format=function(t,e){t.format=e.split(" ")[0]},o.Depth=function(t,e){t.depth=parseInt(e,10)},o.Colors=function(t,e){t.color=parseInt(e,10)},o.Orientation=function(t,e){e in r?(t["Profile-EXIF"]||(t["Profile-EXIF"]={}),t["Profile-EXIF"].Orientation=e,t.Orientation=r[e]):t.Orientation=e||"Unknown"}}},function(t,e,i){var n=i(33).argsToArray,r=i(33).isUtil;function o(t){return function(e){return e="@"==(e=String(e)).charAt(0)?e.substring(1):e,this.out(t,'"'+e+'"')}}t.exports=function(t){t.selectFrame=function(t){return"number"==typeof t&&(this.sourceFrames="["+t+"]"),this},t.command=t.subCommand=function(t){return this._subCommand=t,this},t.adjoin=function(){return this.out("-adjoin")},t.affine=function(t){return this.out("-affine",t)},t.alpha=function(t){return this._options.imageMagick?this.out("-alpha",t):new Error("Method -alpha is not supported by GraphicsMagick")},t.append=function(t,e){if(this._append||(this._append=[],this.addSrcFormatter(function(t){this.out(this._append.ltr?"+append":"-append"),t.push.apply(t,this._append)})),0===arguments.length)return this._append.ltr=!1,this;for(var i=0;i<arguments.length;++i){var n=arguments[i];switch(r(n)){case"Boolean":this._append.ltr=n;break;case"String":this._append.push(n);break;case"Array":for(var o=0,a=n.length;o<a;o++)"String"==r(n[o])&&this._append.push(n[o])}}return this},t.authenticate=function(t){return this.out("-authenticate",t)},t.average=function(){return this.out("-average")},t.backdrop=function(){return this.out("-backdrop")},t.blackThreshold=function(t,e,i,r){return this.out("-black-threshold",n(t,e,i,r).join(","))},t.bluePrimary=function(t,e){return this.out("-blue-primary",n(t,e).join(","))},t.border=function(t,e){return this.out("-border",t+"x"+e)},t.borderColor=function(t){return this.out("-bordercolor",t)},t.box=function(t){return this.out("-box",t)},t.channel=function(t){return this.out("-channel",t)},t.chop=function(t,e,i,n){return this.in("-chop",t+"x"+e+"+"+(i||0)+"+"+(n||0))},t.clip=function(){return this.out("-clip")},t.coalesce=function(){return this.out("-coalesce")},t.colorize=function(t,e,i){return this.out("-colorize",[t,e,i].join(","))},t.colorMap=function(t){return this.out("-colormap",t)},t.compose=function(t){return this.out("-compose",t)},t.compress=function(t){return this.out("-compress",t)},t.convolve=function(t){return this.out("-convolve",t)},t.createDirectories=function(){return this.out("-create-directories")},t.deconstruct=function(){return this.out("-deconstruct")},t.define=function(t){return this.out("-define",t)},t.delay=function(t){return this.out("-delay",t)},t.displace=function(t,e){return this.out("-displace",t+"x"+e)},t.display=function(t){return this.out("-display",t)},t.dispose=function(t){return this.out("-dispose",t)},t.dissolve=function(t){return this.out("-dissolve",t+"%")},t.encoding=function(t){return this.out("-encoding",t)},t.endian=function(t){return this.out("-endian",t)},t.file=function(t){return this.out("-file",t)},t.flatten=function(){return this.out("-flatten")},t.foreground=function(t){return this.out("-foreground",t)},t.frame=function(t,e,i,n){return 0==arguments.length?this.out("-frame"):this.out("-frame",t+"x"+e+"+"+i+"+"+n)},t.fuzz=function(t,e){return this.out("-fuzz",t+(e?"%":""))},t.gaussian=function(t,e){return this.out("-gaussian",n(t,e).join("x"))},t.geometry=function(t,e,i){return 1==arguments.length&&"string"==typeof arguments[0]?this.out("-geometry",arguments[0]):this.out("-geometry",t+"x"+e+(i||""))},t.greenPrimary=function(t,e){return this.out("-green-primary",t+","+e)},t.highlightColor=function(t){return this.out("-highlight-color",t)},t.highlightStyle=function(t){return this.out("-highlight-style",t)},t.iconGeometry=function(t){return this.out("-iconGeometry",t)},t.intent=function(t){return this.out("-intent",t)},t.lat=function(t,e,i,n){return this.out("-lat",t+"x"+e+i+(n?"%":""))},t.level=function(t,e,i,r){return this.out("-level",n(t,e,i).join(",")+(r?"%":""))},t.list=function(t){return this.out("-list",t)},t.log=function(t){return this.out("-log",t)},t.loop=function(t){return this.out("-loop",t)},t.map=function(t){return this.out("-map",t)},t.mask=function(t){return this.out("-mask",t)},t.matte=function(){return this.out("-matte")},t.matteColor=function(t){return this.out("-mattecolor",t)},t.maximumError=function(t){return this.out("-maximum-error",t)},t.mode=function(t){return this.out("-mode",t)},t.monitor=function(){return this.out("-monitor")},t.mosaic=function(){return this.out("-mosaic")},t.motionBlur=function(t,e,i){var n=t;return void 0!==e&&(n+="x"+e),void 0!==i&&(n+="+"+i),this.out("-motion-blur",n)},t.name=function(){return this.out("-name")},t.noop=function(){return this.out("-noop")},t.normalize=function(){return this.out("-normalize")},t.opaque=function(t){return this.out("-opaque",t)},t.operator=function(t,e,i,n){return this.out("-operator",t,e,i+(n?"%":""))},t.orderedDither=function(t,e){return this.out("-ordered-dither",t,e)},t.outputDirectory=function(t){return this.out("-output-directory",t)},t.page=function(t,e,i){return this.out("-page",t+"x"+e+(i||""))},t.pause=function(t){return this.out("-pause",t)},t.pen=function(t){return this.out("-pen",t)},t.ping=function(){return this.out("-ping")},t.pointSize=function(t){return this.out("-pointsize",t)},t.preview=function(t){return this.out("-preview",t)},t.process=function(t){return this.out("-process",t)},t.profile=function(t){return this.out("-profile",t)},t.progress=function(){return this.out("+progress")},t.randomThreshold=function(t,e){return this.out("-random-threshold",t,e)},t.recolor=function(t){return this.out("-recolor",t)},t.redPrimary=function(t,e){return this.out("-red-primary",t,e)},t.remote=function(){return this.out("-remote")},t.render=function(){return this.out("-render")},t.repage=function(t,e,i,n,r){return"+"===arguments[0]?this.out("+repage"):this.out("-repage",t+"x"+e+"+"+i+"+"+n+(r||""))},t.sample=function(t){return this.out("-sample",t)},t.samplingFactor=function(t,e){return this.out("-sampling-factor",t+"x"+e)},t.scene=function(t){return this.out("-scene",t)},t.scenes=function(t,e){return this.out("-scenes",t+"-"+e)},t.screen=function(){return this.out("-screen")},t.set=function(t,e){return this.out("-set",t,e)},t.segment=function(t,e){return this.out("-segment",t+"x"+e)},t.shade=function(t,e){return this.out("-shade",t+"x"+e)},t.shadow=function(t,e){return this.out("-shadow",n(t,e).join("x"))},t.sharedMemory=function(){return this.out("-shared-memory")},t.shave=function(t,e,i){return this.out("-shave",t+"x"+e+(i?"%":""))},t.shear=function(t,e){return this.out("-shear",t+"x"+e)},t.silent=function(t){return this.out("-silent")},t.rawSize=function(t,e,i){var n=void 0!==i?"+"+i:"";return this.out("-size",t+"x"+e+n)},t.snaps=function(t){return this.out("-snaps",t)},t.stegano=function(t){return this.out("-stegano",t)},t.stereo=function(){return this.out("-stereo")},t.textFont=function(t){return this.out("-text-font",t)},t.texture=function(t){return this.out("-texture",t)},t.threshold=function(t,e){return this.out("-threshold",t+(e?"%":""))},t.thumbnail=function(t,e,i){i=i||"";var n,r=Boolean(t||0===t),o=Boolean(e||0===e);if(r&&o)n=t+"x"+e+i;else if(r)n=this._options.imageMagick?t+i:t+"x"+i;else{if(!o)return this;n="x"+e+i}return this.out("-thumbnail",n)},t.tile=function(t){return this.out("-tile",t)},t.title=function(t){return this.out("-title",t)},t.transform=function(t){return this.out("-transform",t)},t.transparent=function(t){return this.out("-transparent",t)},t.treeDepth=function(t){return this.out("-treedepth",t)},t.update=function(t){return this.out("-update",t)},t.units=function(t){return this.out("-units",t)},t.unsharp=function(t,e,i,n){var r=t;return void 0!==e&&(r+="x"+e),void 0!==i&&(r+="+"+i),void 0!==n&&(r+="+"+n),this.out("-unsharp",r)},t.usePixmap=function(){return this.out("-use-pixmap")},t.view=function(t){return this.out("-view",t)},t.virtualPixel=function(t){return this.out("-virtual-pixel",t)},t.visual=function(t){return this.out("-visual",t)},t.watermark=function(t,e){return this.out("-watermark",t+"x"+e)},t.wave=function(t,e){return this.out("-wave",t+"x"+e)},t.whitePoint=function(t,e){return this.out("-white-point",t+"x"+e)},t.whiteThreshold=function(t,e,i,r){return this.out("-white-threshold",n(t,e,i,r).join(","))},t.window=function(t){return this.out("-window",t)},t.windowGroup=function(){return this.out("-window-group")},t.strip=function(){return this._options.imageMagick?this.out("-strip"):this.noProfile().out("+comment")},t.interlace=function(t){return this.out("-interlace",t||"None")},t.setFormat=function(t){return t&&(this._outputFormat=t),this},t.resize=function(t,e,i){i=i||"";var n,r=Boolean(t||0===t),o=Boolean(e||0===e);if(r&&o)n=t+"x"+e+i;else if(r)n=this._options.imageMagick?t+i:t+"x"+i;else{if(!o)return this;n="x"+e+i}return this.out("-resize",n)},t.resizeExact=function(e,i){return t.resize.apply(this,[e,i,"!"])},t.scale=function(t,e,i){var n;return i=i||"",t&&e?n=t+"x"+e+i:t&&!e?n=this._options.imageMagick?t+i:t+"x"+i:!t&&e&&(n="x"+e+i),this.out("-scale",n)},t.filter=function(t){return this.out("-filter",t)},t.density=function(t,e){return t&&!e&&this._options.imageMagick?this.in("-density",t):this.in("-density",t+"x"+e)},t.noProfile=function(){return this.out("+profile",'"*"'),this},t.resample=function(t,e){return this.out("-resample",t+"x"+e)},t.rotate=function(t,e){return this.out("-background",t,"-rotate",String(e||0))},t.flip=function(){return this.out("-flip")},t.flop=function(){return this.out("-flop")},t.crop=function(t,e,i,n,r){if(this.inputIs("jpg")){var o=this._in.indexOf("-size");~o&&this._in.splice(o,2)}return this.out("-crop",t+"x"+e+"+"+(i||0)+"+"+(n||0)+(r?"%":""))},t.magnify=function(t){return this.in("-magnify")},t.minify=function(){return this.in("-minify")},t.quality=function(t){return this.in("-quality",t||75)},t.blur=function(t,e){return this.out("-blur",t+(e?"x"+e:""))},t.charcoal=function(t){return this.out("-charcoal",t||2)},t.modulate=function(t,e,i){return this.out("-modulate",[t,e,i].join(","))},t.antialias=function(t){return!1===t?this.out("+antialias"):this},t.bitdepth=function(t){return this.out("-depth",t)},t.colors=function(t){return this.out("-colors",t||128)},t.colorspace=function(t){return this.out("-colorspace",t)},t.comment=o("-comment"),t.contrast=function(t){var e=(parseInt(t,10)||0)>0?"+contrast":"-contrast";for(t=Math.abs(t)||1;t--;)this.out(e);return this},t.cycle=function(t){return this.out("-cycle",t||2)},t.despeckle=function(){return this.out("-despeckle")},t.dither=function(t){var e=!1===t?"+":"-";return this.out(e+"dither")},t.monochrome=function(){return this.out("-monochrome")},t.edge=function(t){return this.out("-edge",t||1)},t.emboss=function(t){return this.out("-emboss",t||1)},t.enhance=function(){return this.out("-enhance")},t.equalize=function(){return this.out("-equalize")},t.gamma=function(t,e,i){return this.out("-gamma",[t,e,i].join())},t.implode=function(t){return this.out("-implode",t||1)},t.label=o("-label");var e=["disk","file","map","memory","pixels","threads"];t.limit=function(t,i){return t=t.toLowerCase(),~e.indexOf(t)?this.out("-limit",t,i):this},t.median=function(t){return this.out("-median",t||1)},t.negative=function(t){var e=t?"+":"-";return this.out(e+"negate")};var i=["uniform","gaussian","multiplicative","impulse","laplacian","poisson"];t.noise=function(t){t=String(t).toLowerCase();var e=~i.indexOf(t)?"+":"-";return this.out(e+"noise",t)},t.paint=function(t){return this.out("-paint",t)},t.raise=function(t,e){return this.out("-raise",(t||0)+"x"+(e||0))},t.lower=function(t,e){return this.out("+raise",(t||0)+"x"+(e||0))},t.region=function(t,e,i,n){return t=t||0,e=e||0,i=i||0,n=n||0,this.out("-region",t+"x"+e+"+"+i+"+"+n)},t.roll=function(t,e){return t=((t=parseInt(t,10)||0)>=0?"+":"")+t,e=((e=parseInt(e,10)||0)>=0?"+":"")+e,this.out("-roll",t+e)},t.sharpen=function(t,e){return e=e?"x"+e:"",this.out("-sharpen",t+e)},t.solarize=function(t){return this.out("-solarize",(t||1)+"%")},t.spread=function(t){return this.out("-spread",t||5)},t.swirl=function(t){return this.out("-swirl",t||180)},t.type=function(t){return this.in("-type",t)},t.trim=function(){return this.out("-trim")},t.extent=function(t,e,i){var n;return i=i||"",t&&e?n=t+"x"+e+i:t&&!e?n=this._options.imageMagick?t+i:t+"x"+i:!t&&e&&(n="x"+e+i),this.out("-extent",n)},t.gravity=function t(e){return e&&~t.types.indexOf(e)||(e="NorthWest"),this.out("-gravity",e)},t.gravity.types=["NorthWest","North","NorthEast","West","Center","East","SouthWest","South","SouthEast"],t.flatten=function(){return this.out("-flatten")},t.background=function(t){return this.in("-background",t)}}},function(t,e,i){var n=i(33).escape;function r(t){for(var e=t.length,i=[],n=0;n<e;++n)i.push(t[n].join(","));return i}t.exports=function(t){t.fill=function(t){return this.out("-fill",t||"none")},t.stroke=function(t,e){return e&&this.strokeWidth(e),this.out("-stroke",t||"none")},t.strokeWidth=function(t){return this.out("-strokewidth",t)},t.font=function(t,e){return e&&this.fontSize(e),this.out("-font",t)},t.fontSize=function(t){return this.out("-pointsize",t)},t.draw=function(t){return this.out("-draw",[].slice.call(arguments).join(" "))},t.drawPoint=function(t,e){return this.draw("point",t+","+e)},t.drawLine=function(t,e,i,n){return this.draw("line",t+","+e,i+","+n)},t.drawRectangle=function(t,e,i,n,r,o){var a,s="rectangle";return void 0!==r&&(s="roundRectangle",void 0===o&&(o=r),a=r+","+o),this.draw(s,t+","+e,i+","+n,a)},t.drawArc=function(t,e,i,n,r,o){return this.draw("arc",t+","+e,i+","+n,r+","+o)},t.drawEllipse=function(t,e,i,n,r,o){return void 0==r&&(r=0),void 0==o&&(o=360),this.draw("ellipse",t+","+e,i+","+n,r+","+o)},t.drawCircle=function(t,e,i,n){return this.draw("circle",t+","+e,i+","+n)},t.drawPolyline=function(){return this.draw("polyline",r(arguments))},t.drawPolygon=function(){return this.draw("polygon",r(arguments))},t.drawBezier=function(){return this.draw("bezier",r(arguments))},t._gravities=["northwest","north","northeast","west","center","east","southwest","south","southeast"],t.drawText=function(t,e,i,r){r=String(r||"").toLowerCase();var o=["text "+t+","+e+" "+n(i)];return~this._gravities.indexOf(r)&&o.unshift("gravity",r),this.draw.apply(this,o)},t._drawProps=["color","matte"],t.setDraw=function(t,e,i,n){return t=String(t||"").toLowerCase(),~this._drawProps.indexOf(t)?this.draw(t,e+","+i,n):this}}},function(t,e,i){t.exports=function(t){i(261)(t),i(262)(t),i(264)(t),i(265)(t)}},function(t,e){t.exports=function(t){t.thumb=function(t,e,i,n,r,o,a,s){var l=this,h=Array.prototype.slice.call(arguments);"function"==typeof(s=h.pop())?(a=s,s=""):a=h.pop(),t=h.shift(),e=h.shift(),i=h.shift(),n=h.shift()||63,r=h.shift()||"topleft";var c=h.shift()?"Line":"None";return l.size(function(o,h){if(o)return a.apply(l,arguments);var u,p;t=parseInt(t,10),e=parseInt(e,10);var d=0,f=0;if(h.width<h.height)u=t,(p=Math.floor(h.height*(t/h.width)))<e&&(u=Math.floor(u*((e-p)/e+1)),p=e);else if(h.width>h.height)p=e,(u=Math.floor(h.width*(e/h.height)))<t&&(p=Math.floor(p*((t-u)/t+1)),u=t);else if(h.width==h.height){var m=t>e?t:e;u=m,p=m}"center"==r&&(t<u&&(d=(u-t)/2),e<p&&(f=(p-e)/2)),l.quality(n).in("-size",u+"x"+p).scale(u,p,s).crop(t,e,d,f).interlace(c).noProfile().write(i,function(){a.apply(l,arguments)})}),l},t.thumbExact=function(){var t=Array.prototype.slice.call(arguments);t.push("!"),this.thumb.apply(this,t)}}},function(t,e,i){var n=i(18),r=i(263);t.exports=function(t){t.morph=function(t,e,i){if(!e)throw new Error("an output filename is required");i=(i||function(){}).bind(this);var o=this;return Array.isArray(t)?(t.forEach(function(t){o.out(t)}),o.out("-morph",t.length)):o.out(t,"-morph",1),o.write(e,function(t,o,a,s){if(t)return i(t,o,a,s);n.exists(e,function(t){if(t)return i(null,o,a,s);r([n.unlink.bind(n,e+".0"),n.unlink.bind(n,e+".2"),n.rename.bind(n,e+".1",e)],function(t){i(t,o,a,s)})})}),o}}},function(t,e){function i(){}t.exports=function(t,e,n){n||("function"==typeof e?(n=e,e=null):n=i);var r=t&&t.length;if(!r)return n(null,[]);var o=!1,a=new Array(r);function s(t){return function(e,i){if(!o){if(e)return n(e,a),void(o=!0);a[t]=i,--r||n(null,a)}}}t.forEach(e?function(t,i){t.call(e,s(i))}:function(t,e){t(s(e))})}},function(t,e){t.exports=function(t){t.sepia=function(){return this.modulate(115,0,100).colorize(7,21,50)}}},function(t,e){t.exports=function(t){var e={topleft:"",topright:["-flop"],bottomright:["-rotate",180],bottomleft:["-flip"],lefttop:["-flip","-rotate",90],righttop:["-rotate",90],rightbottom:["-flop","-rotate",90],leftbottom:["-rotate",270]};t.autoOrient=function(){return this._options.nativeAutoOrient||this._options.imageMagick?(this.out("-auto-orient"),this.strip(),this):(this.preprocessor(function(t){this.orientation({bufferStream:!0},function(i,n){if(i)return t(i);var r=e[n.toLowerCase()];if(r){var o=this._out.indexOf(r[0]);~o&&this._out.splice(o,r.length),this._out.unshift.apply(this._out,r.concat("-page","+0+0"))}this.strip(),t()})}),this)}}},function(t,e,i){(function(e){var n=i(130),r=i(33),o=i(277)("gm"),a=i(280),s=i(123).PassThrough;t.exports=function(t){function i(t){return function(){for(var e=arguments.length,i=[],n=0;n<e;++n)i.push(arguments[n]);return this[t]=this[t].concat(i),this}}function l(t,i){var n=!1,r=[];t.on("data",function(t){r.push(t)}),t.on("end",function(){var t,o;n||(n=!0,t=e.concat(r),r=null,0==t.length?(o=new Error("Stream yields empty buffer"),i(o,null)):i(null,t))}),t.on("error",function(t){n=!0,r=null,i(t)})}t.in=i("_in"),t.out=i("_out"),t._preprocessor=[],t.preprocessor=i("_preprocessor"),t.write=function(t,e){if(e||(e=t,t=null),"function"!=typeof e)throw new TypeError("gm().write() expects a callback function");if(!t)return e(TypeError("gm().write() expects a filename when writing new files"));this.outname=t;var i=this;this._preprocess(function(t){if(t)return e(t);i._spawn(i.args(),!0,e)})},t.stream=function(t,e){var i;e||"function"!=typeof t||(e=t,t=null),"function"!=typeof e&&(i=new s,e=function(t,e,n){t?i.emit("error",t):e.pipe(i)}),t&&(t=t.split(".").pop(),this.outname=t+":-");var n=this;return this._preprocess(function(t){return t?e(t):n._spawn(n.args(),!1,e)}),i||this},t.toBuffer=function(t,e){if(e||(e=t,t=null),"function"!=typeof e)throw new Error("gm().toBuffer() expects a callback.");return this.stream(t,function(t,i){if(t)return e(t);l(i,e)})},t._preprocess=function(t){a(this._preprocessor,this,t)},t._exec=function(t,e){return this._spawn(t,!0,e)},t._spawn=function(t,i,a){var s,h,c,u=this._options.appPath||"",p=this._options.imageMagick?u+t.shift():u+"gm",d=p+" "+t.map(r.escape).join(" "),f=this,m=parseInt(this._options.timeout),v=this._options.disposers;if(o(d),t.indexOf("-minify")>-1&&this._options.imageMagick)return _(h=new Error("imageMagick does not support minify, use -scale or -sample. Alternatively, use graphicsMagick"));try{s=n(p,t)}catch(t){return _(t)}if(s.stdin.once("error",_),s.on("error",function(t){"ENOENT"===t.code?_(new Error("Could not execute GraphicsMagick/ImageMagick: "+d+" this most likely means the gm/convert binaries can't be found")):_(t)}),m&&(c=setTimeout(function(){x("gm() resulted in a timeout.")},m)),v&&v.forEach(function(t){t.events.forEach(function(e){t.emitter.on(e,x)})}),f.sourceBuffer)s.stdin.write(this.sourceBuffer),s.stdin.end();else if(f.sourceStream){if(!f.sourceStream.readable)return _(h=new Error("gm().stream() or gm().write() with a non-readable stream."));if(f.sourceStream.pipe(s.stdin),f.bufferStream&&!this._buffering){if(!e.concat)throw new Error("gm v1.9.0+ required node v0.8+. Please update your version of node, downgrade gm < 1.9, or do not use `bufferStream`.");f._buffering=!0,l(f.sourceStream,function(t,e){f.sourceBuffer=e,f.sourceStream=null})}}if(i){var g="",y="";s.stdout.on("data",function(t){g+=t}),s.stderr.on("data",function(t){y+=t}),s.on("close",function(t,e){0===t&&null===e||((h=new Error("Command failed: "+y)).code=t,h.signal=e),_(h,g,y,d),g=y=null})}else _(null,s.stdout,s.stderr,d);return f;function _(e,i,n,r){_.called||(c&&clearTimeout(c),_.called=1,"identify"!==t[0]&&"identify"!==p&&(f._in=[],f._out=[]),a.call(f,e,i,n,r))}function x(t){_(h=new Error(t||"gm() was disposed")),null===s.exitCode&&(s.stdin.pause(),s.kill())}},t.args=function(){var t=this.outname||"-";return this._outputFormat&&(t=this._outputFormat+":"+t),[].concat(this._subCommand,this._in,this.src(),this._out,t).filter(Boolean)},t.addSrcFormatter=function(t){if("function"!=typeof t)throw new TypeError("sourceFormatter must be a function");return this._sourceFormatters||(this._sourceFormatters=[]),this._sourceFormatters.push(t),this},t.src=function(){for(var t=[],e=0;e<this._sourceFormatters.length;++e)this._sourceFormatters[e].call(this,t);return t};var h={jpg:/\.jpe?g$/i,png:/\.png$/i,gif:/\.gif$/i,tiff:/\.tif?f$/i,bmp:/(?:\.bmp|\.dib)$/i,webp:/\.webp$/i};h.jpeg=h.jpg,h.tif=h.tiff,h.dib=h.bmp,t.inputIs=function(t){if(!t)return!1;var e=h[t];return e||("."!==t[0]&&(t="."+t),e=new RegExp("\\"+t+"$","i")),e.test(this.source)},t.addDisposer=function(t,e){return this._options.disposers||(this._options.disposers=[]),this._options.disposers.push({emitter:t,events:e}),this}}}).call(e,i(31).Buffer)},function(t,e,i){"use strict";(function(e,n){var r=i(18),o=i(131),a=i(132),s=i(275),l="win32"===e.platform,h=new o({max:50,maxAge:3e4});function c(t,e){return t=""+t,t=e?'"'+(t=(t=t.replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1"))+'"':t.replace(/([\(\)%!\^<>&|;,"'\s])/g,"^$1")}function u(t){return!/\.(?:com|exe)$/i.test(t)}t.exports=function(t,i,o){var p,d,f,m,v,g;return i&&!Array.isArray(i)&&(o=i,i=null),i=i?i.slice(0):[],o=o||{},m=t,l&&(p=(f=(f=a(t))||a(t,!0))&&function(t){var e,i,o,a;if(h.has(t))return h.get(t);e=new n(150);try{i=r.openSync(t,"r"),r.readSync(i,e,0,150,0),r.closeSync(i)}catch(t){}return(o=e.toString().trim().match(/#!(.+)/i))&&(a=o[1].replace(/\/usr\/bin\/env\s+/i,"")),h.set(t,a),a}(f),v=o.shell||s,p?(i.unshift(f),t=p,v=v||u(a(p)||a(p,!0))):v=v||u(f),v&&(d="echo"!==t,i=["/s","/c",'"'+(t=/^[a-z0-9_-]+$/i.test(g=t)?g:c(g,!0))+((i=i.map(function(t){return c(t,d)})).length?" "+i.join(" "):"")+'"'],t=e.env.comspec||"cmd.exe",o.windowsVerbatimArguments=!0)),{command:t,args:i,options:o,file:f,original:m}}}).call(e,i(1),i(31).Buffer)},function(t,e,i){(function(e){"pseudomap"===e.env.npm_package_name&&"test"===e.env.npm_lifecycle_script&&(e.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||e.env.TEST_PSEUDOMAP?t.exports=i(269):t.exports=Map}).call(e,i(1))},function(t,e){var i=Object.prototype.hasOwnProperty;function n(t){if(!(this instanceof n))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof n||"function"==typeof Map&&t instanceof Map)t.forEach(function(t,e){this.set(e,t)},this);else{if(!Array.isArray(t))throw new TypeError("invalid argument");t.forEach(function(t){this.set(t[0],t[1])},this)}}function r(t,e){return t===e||t!=t&&e!=e}function o(t,e){for(var n=0,o="_"+e,a=o;i.call(t,a);a=o+n++)if(r(t[a].key,e))return t[a]}t.exports=n,n.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach(function(i){"size"!==i&&t.call(e,this._data[i].value,this._data[i].key)},this)},n.prototype.has=function(t){return!!o(this._data,t)},n.prototype.get=function(t){var e=o(this._data,t);return e&&e.value},n.prototype.set=function(t,e){!function(t,e,n){for(var o=0,a="_"+e,s=a;i.call(t,s);s=a+o++)if(r(t[s].key,e))return void(t[s].value=n);t.size++,t[s]=new function(t,e,i){this.key=t,this.value=e,this._index=i}(e,n,s)}(this._data,t,e)},n.prototype.delete=function(t){var e=o(this._data,t);e&&(delete this._data[e._index],this._data.size--)},n.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(n.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.values=n.prototype.keys=n.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(t,e){function i(t){var e=this;if(e instanceof i||(e=new i),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function n(t,e){t.tail=new o(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function r(t,e){t.head=new o(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function o(t,e,i,n){if(!(this instanceof o))return new o(t,e,i,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}t.exports=i,i.Node=o,i.create=i,i.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null},i.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},i.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},i.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)n(this,arguments[t]);return this.length},i.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)r(this,arguments[t]);return this.length},i.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},i.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},i.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,n=0;null!==i;n++)t.call(e,i.value,n,this),i=i.next},i.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,n=this.length-1;null!==i;n--)t.call(e,i.value,n,this),i=i.prev},i.prototype.get=function(t){for(var e=0,i=this.head;null!==i&&e<t;e++)i=i.next;if(e===t&&null!==i)return i.value},i.prototype.getReverse=function(t){for(var e=0,i=this.tail;null!==i&&e<t;e++)i=i.prev;if(e===t&&null!==i)return i.value},i.prototype.map=function(t,e){e=e||this;for(var n=new i,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},i.prototype.mapReverse=function(t,e){e=e||this;for(var n=new i,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},i.prototype.reduce=function(t,e){var i,n=this.head;if(arguments.length>1)i=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,i=this.head.value}for(var r=0;null!==n;r++)i=t(i,n.value,r),n=n.next;return i},i.prototype.reduceReverse=function(t,e){var i,n=this.tail;if(arguments.length>1)i=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,i=this.tail.value}for(var r=this.length-1;null!==n;r--)i=t(i,n.value,r),n=n.prev;return i},i.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;null!==i;e++)t[e]=i.value,i=i.next;return t},i.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;null!==i;e++)t[e]=i.value,i=i.prev;return t},i.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new i;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;for(;null!==o&&r<e;r++,o=o.next)n.push(o.value);return n},i.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new i;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;null!==o&&r>e;r--)o=o.prev;for(;null!==o&&r>t;r--,o=o.prev)n.push(o.value);return n},i.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;null!==i;i=i.prev){var n=i.prev;i.prev=i.next,i.next=n}return this.head=e,this.tail=t,this}},function(t,e,i){(function(e){t.exports=h,h.sync=function(t,e){for(var i=l(t,e=e||{}),n=i.env,o=i.ext,h=i.extExe,c=[],u=0,p=n.length;u<p;u++){var d=n[u];'"'===d.charAt(0)&&'"'===d.slice(-1)&&(d=d.slice(1,-1));var f=r.join(d,t);!d&&/^\.[\\\/]/.test(t)&&(f=t.slice(0,2)+f);for(var m=0,v=o.length;m<v;m++){var g=f+o[m];try{if(a.sync(g,{pathExt:h})){if(!e.all)return g;c.push(g)}}catch(t){}}}if(e.all&&c.length)return c;if(e.nothrow)return null;throw s(t)};var n="win32"===e.platform||"cygwin"===e.env.OSTYPE||"msys"===e.env.OSTYPE,r=i(78),o=n?";":":",a=i(272);function s(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function l(t,i){var r=i.colon||o,a=i.path||e.env.PATH||"",s=[""];a=a.split(r);var l="";return n&&(a.unshift(e.cwd()),s=(l=i.pathExt||e.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(r),-1!==t.indexOf(".")&&""!==s[0]&&s.unshift("")),(t.match(/\//)||n&&t.match(/\\/))&&(a=[""]),{env:a,ext:s,extExe:l}}function h(t,e,i){"function"==typeof e&&(i=e,e={});var n=l(t,e),o=n.env,h=n.ext,c=n.extExe,u=[];!function n(l,p){if(l===p)return e.all&&u.length?i(null,u):i(s(t));var d=o[l];'"'===d.charAt(0)&&'"'===d.slice(-1)&&(d=d.slice(1,-1));var f=r.join(d,t);!d&&/^\.[\\\/]/.test(t)&&(f=t.slice(0,2)+f),function t(r,o){if(r===o)return n(l+1,p);var s=h[r];a(f+s,{pathExt:c},function(n,a){if(!n&&a){if(!e.all)return i(null,f+s);u.push(f+s)}return t(r+1,o)})}(0,h.length)}(0,o.length)}}).call(e,i(1))},function(t,e,i){(function(e,n){var r;i(18);function o(t,e,i){if("function"==typeof e&&(i=e,e={}),!i){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(i,n){o(t,e||{},function(t,e){t?n(t):i(e)})})}r(t,e||{},function(t,n){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,n=!1),i(t,n)})}r="win32"===e.platform||n.TESTING_WINDOWS?i(273):i(274),t.exports=o,o.sync=function(t,e){try{return r.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}}}).call(e,i(1),i(10))},function(t,e,i){(function(e){t.exports=o,o.sync=function(t,e){return r(n.statSync(t),t,e)};var n=i(18);function r(t,i,n){return!(!t.isSymbolicLink()&&!t.isFile())&&function(t,i){var n=void 0!==i.pathExt?i.pathExt:e.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}(i,n)}function o(t,e,i){n.stat(t,function(n,o){i(n,!n&&r(o,t,e))})}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=r,r.sync=function(t,e){return o(n.statSync(t),e)};var n=i(18);function r(t,e,i){n.stat(t,function(t,n){i(t,!t&&o(n,e))})}function o(t,i){return t.isFile()&&(r=i,o=(n=t).mode,a=n.uid,s=n.gid,l=void 0!==r.uid?r.uid:e.getuid&&e.getuid(),h=void 0!==r.gid?r.gid:e.getgid&&e.getgid(),c=parseInt("100",8),u=parseInt("010",8),p=parseInt("001",8),o&p||o&u&&s===h||o&c&&a===l||o&(c|u)&&0===l);var n,r,o,a,s,l,h,c,u,p}}).call(e,i(1))},function(t,e,i){"use strict";(function(e){t.exports=function(){if("win32"!==e.platform)return!1;var t=e.version.substr(1).split(".").map(function(t){return parseInt(t,10)});return 0===t[0]&&t[1]<12}()}).call(e,i(1))},function(t,e,i){"use strict";(function(e){var n="win32"===e.platform,r=i(132),o=0===e.version.indexOf("v0.10.");function a(t,e){var i;return(i=new Error(e+" "+t+" ENOENT")).code=i.errno="ENOENT",i.syscall=e+" "+t,i}function s(t,e){return n&&1===t&&!e.file?a(e.original,"spawn"):null}t.exports.hookChildProcess=function(t,e){var i;n&&(i=t.emit,t.emit=function(n,r){var o;return"exit"===n&&(o=s(r,e))?i.call(t,"error",o):i.apply(t,arguments)})},t.exports.verifyENOENT=s,t.exports.verifyENOENTSync=function(t,e){return n&&1===t&&!e.file?a(e.original,"spawnSync"):o&&-1===t&&(e.file=n?e.file:r(e.original),!e.file)?a(e.original,"spawnSync"):null},t.exports.notFoundError=a}).call(e,i(1))},function(t,e,i){"use strict";(function(n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.log=function(){var t;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(r=++n)}),e.splice(r,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=i(278)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(e,i(1))},function(t,e,i){"use strict";t.exports=function(t){function e(t){for(var e=0,i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){var i;function a(){if(a.enabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=a,s=Number(new Date),l=s-(i||s);o.diff=l,o.prev=i,o.curr=s,i=s,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var h=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(t,i){if("%%"===t)return t;h++;var r=n.formatters[i];if("function"==typeof r){var a=e[h];t=r.call(o,a),e.splice(h,1),h--}return t}),n.formatArgs.call(o,e),(o.log||n.log).apply(o,e)}}return a.namespace=t,a.enabled=n.enabled(t),a.useColors=n.useColors(),a.color=e(t),a.destroy=r,a.extend=o,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){return n(this.namespace+(void 0===e?":":e)+t)}return n.debug=n,n.default=n,n.coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){var e;n.save(t),n.names=[],n.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(e=0;e<r;e++)i[e]&&("-"===(t=i[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){var o=n.instances[e];o.enabled=n.enabled(o.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;var e,i;for(e=0,i=n.skips.length;e<i;e++)if(n.skips[e].test(t))return!1;for(e=0,i=n.names.length;e<i;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=i(279),Object.keys(t).forEach(function(e){n[e]=t[e]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n}},function(t,e){var i=1e3,n=60*i,r=60*n,o=24*r,a=7*o,s=365.25*o;function l(t,e,i,n){var r=e>=1.5*i;return Math.round(t/i)+" "+n+(r?"s":"")}t.exports=function(t,e){e=e||{};var h=typeof t;if("string"===h&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var l=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(t);if("number"===h&&!1===isNaN(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return l(t,e,o,"day");if(e>=r)return l(t,e,r,"hour");if(e>=n)return l(t,e,n,"minute");if(e>=i)return l(t,e,i,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=i)return Math.round(t/i)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){function i(){}t.exports=function(t,e,n){if(n||("function"==typeof e?(n=e,e=null):n=i),!t||!t.length)return n();t=t.slice(0);var r=e?function(){t.length?t.shift().call(e,o):n()}:function(){t.length?t.shift()(o):n()};function o(t){t?n(t):r()}r()}},function(t,e){t.exports=function(t){t.composite=function(t,e){return this.in(t),void 0!==e&&this.out(e),this.subCommand("composite"),this}}},function(t,e){t.exports=function(t){t.montage=function(t){return this.in(t),this.subCommand("montage"),this}}},function(t,e){t.exports={_args:[[{raw:"gm@1.23.1",scope:null,escapedName:"gm",name:"gm",rawSpec:"1.23.1",spec:"1.23.1",type:"version"},"/var/lib/jenkins/workspace/websdk-production"]],_from:"gm@1.23.1",_id:"gm@1.23.1",_inCache:!0,_location:"/gm",_nodeVersion:"6.12.2",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/gm-1.23.1.tgz_1514436565904_0.7165352762676775"},_npmUser:{name:"aaron",email:"aaron.heckmann+github@gmail.com"},_npmVersion:"3.10.10",_phantomChildren:{"lru-cache":"4.1.1",which:"1.3.0"},_requested:{raw:"gm@1.23.1",scope:null,escapedName:"gm",name:"gm",rawSpec:"1.23.1",spec:"1.23.1",type:"version"},_requiredBy:["#DEV:/","#USER"],_resolved:"https://registry.npmjs.org/gm/-/gm-1.23.1.tgz",_shasum:"2edeeb958084d0f8ea7988e5d995b1c7dfc14777",_shrinkwrap:null,_spec:"gm@1.23.1",_where:"/var/lib/jenkins/workspace/websdk-production",author:{name:"Aaron Heckmann",email:"aaron.heckmann+github@gmail.com"},bugs:{url:"http://github.com/aheckmann/gm/issues"},dependencies:{"array-parallel":"~0.1.3","array-series":"~0.1.5","cross-spawn":"^4.0.0",debug:"^3.1.0"},description:"GraphicsMagick and ImageMagick for node.js",devDependencies:{async:"~0.9.0",nsp:"^3"},directories:{},dist:{shasum:"2edeeb958084d0f8ea7988e5d995b1c7dfc14777",tarball:"https://registry.npmjs.org/gm/-/gm-1.23.1.tgz"},engines:{node:">= 0.10.0"},gitHead:"0286f47b1d5c1479c136616a73bced0ee0d2835c",homepage:"https://github.com/aheckmann/gm#readme",keywords:["graphics","magick","image","graphicsmagick","imagemagick","gm","convert","identify","compare"],license:"MIT",licenses:[{type:"MIT",url:"http://www.opensource.org/licenses/mit-license.php"}],main:"./index",maintainers:[{name:"jongleberry",email:"jonathanrichardong@gmail.com"},{name:"rwky",email:"admin@rwky.net"},{name:"fragphace",email:"fragphace@gmail.com"},{name:"aaron",email:"aaron.heckmann+github@gmail.com"}],name:"gm",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/aheckmann/gm.git"},scripts:{test:"make test;"},version:"1.23.1"}},function(t,e,i){"use strict";var n=i(285),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e){var i=e.collisionEngine,n=e.cameraObject;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pathSegments=new Map,this.collisionEngine=i,this.cameraObject=n,this.add=this.add.bind(this),this.update=this.update.bind(this),this.remove=this.remove.bind(this),this.clear=this.clear.bind(this)}return r(t,[{key:"add",value:function(t,e,i){var r=this,o=this.collisionEngine.add({rank:9999,userData:{type:"path"}}),a=i.mapObject,s=i.canvasWidth,l=i.canvasHeight,h=e.map(function(t,e){return new n.a({vector:t,cameraObject:r.cameraObject,mapObject:a,canvasWidth:s,canvasHeight:l,collider:o})});this.pathSegments.set(t.id,{collider:o,points:h})}},{key:"remove",value:function(t){var e=this.pathSegments.get(t.id);null!=e&&(this.collisionEngine.remove(e.collider),this.pathSegments.delete(t.id))}},{key:"clear",value:function(){var t=this;Array.from(this.pathSegments.values()).forEach(function(e){return t.collisionEngine.remove(e.collider)}),this.pathSegments.clear()}},{key:"update",value:function(){Array.from(this.pathSegments.values()).forEach(function(t){var e=t.collider,i={};t.points.forEach(function(t,e){t.update(),i[e]={collider:t.collider,x:t.x,y:t.y,h:t.height,w:t.width}}),e.updateHitAreas(i)})}}]),t}();e.a=o},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e){var i=e.vector,n=e.mapObject,r=e.canvasWidth,o=e.canvasHeight,a=e.cameraObject,s=e.collider;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=25,this.height=25,this.x=0,this.y=0,this.cameraObject=a,this.vector=i,this.mapObject=n,this.canvasHeight=o,this.canvasWidth=r,this.collider=s,this.update=this.update.bind(this)}return n(t,[{key:"update",value:function(){var t=this.vector.clone().applyMatrix4(this.mapObject.object.matrix).project(this.cameraObject),e=(t.x+1)/2*this.canvasWidth-this.width/2,i=(1-t.y)/2*this.canvasHeight-this.height/2;this.x=e,this.y=i}}]),t}();e.a=r},function(t,e,i){"use strict";var n=i(5),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function a(t){if(null==t||null==t.path)throw new Error("Navigator requires directions to be set");return!0}var s=function(){function t(e,i,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._virtualLayers=new Set,this.overviewVisible=!1,this.mapView=e,this.mapManager=i,this.venue=n,this.canvasWidth=r,this.canvasHeight=o,this.camera=a,this.showOverview=this.showOverview.bind(this),this.hideOverview=this.hideOverview.bind(this),this.zoomIn=this.zoomIn.bind(this),this.zoomOut=this.zoomOut.bind(this),this.setDirections=this.setDirections.bind(this),this._drawVirtualLayer=this._drawVirtualLayer.bind(this),this.setScale()}return r(t,[{key:"_drawVirtualLayer",value:function(t){var e=this;if(!0!==t.connection)return null;var i="";t.maps.map(function(t,r){var o=Object(n.s)({"margin-top":5*r+"px",width:100*e.scale+"px",height:100*e.scale+"px"});i+='<div class="map-connection-layer" style="'+o+'"></div>'});var r=t.maps.map(function(t){return e.venue.maps.find(function(e){return e.id===t.id})}),o=r.length>1?r[0].shortName+" - "+r[r.length-1].shortName:r[0].shortName,a='<div class="map-connection-labels" style="'+Object(n.s)({width:100*this.scale+"px",height:100*this.scale+"px","font-size":30*this.scale+"px"})+'">'+o+"</div>";t.maps[0].object.updateMatrixWorld();var s=this.mapView.createMarker(i+a,t.object.position,"map-connection-layer-container",t.maps[0]);return s.show(),s}},{key:"setDirections",value:function(t){this._directions=t}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.scale=t}},{key:"showOverview",value:function(t,e){var i=this;if(this._options=Object.assign({},{hideLabels:!1,debug:!1,connectionsThreshold:100,combineSimilarConnections:!0,expandOptions:{},pathOptions:{connectionPathOptions:{}}},this._options,e),null!=t&&this.setDirections(t),a(this._directions)){var r=this._directions.path,s=this._directions.path[0].map,l=function(){return Promise.resolve()};return this.mapView.removeAllPaths(),(this.overviewVisible||this.mapManager.expanded)&&(l=this.hideOverview),l().then(function(){return i.mapView.setMap(s)}).then(function(){if(Object(n.a)(i._directions)){i._options.hideLabels&&i.mapView.hideAllLabels();var t=Object(n.d)(r),e=Object(n.d)(r);if(t.length>2){var a=(e=Object(n.f)(i._directions,i.mapManager.mapObjects,i._options.connectionsThreshold,i._options.combineSimilarConnections)).reduce(function(t,e){return e.connection&&t.push.apply(t,o(e.maps)),t},[]).map(function(t){return"string"==typeof t?t:t.id});r=r.filter(function(t){return-1===a.indexOf(t.map)})}var s=e.map(function(t){return!0===t.connection?t:i.mapManager.mapObjects.get(t)}),l=s[0].mapClass.elevation>s[s.length-1].mapClass.elevation?"top":"bottom";return i.mapManager.expandMaps(e,Object.assign({focus:!0,debug:i._options.debug,duration:i._options.animationDuration,start:l},i._options.expandOptions)).then(function(t){var e=t.maps;i.overviewVisible=!0,i.renderedMaps=e;var n,a=i.renderedMaps.map(i._drawVirtualLayer).filter(function(t){return t});a.length>0&&(n=i._virtualLayers).add.apply(n,o(a));return i.mapView.drawPath(r,i._options.pathOptions),Promise.resolve()})}return i.mapView.drawPath(r,i._options.pathOptions),i.mapView.focusOnPath(r,[],!0),Promise.resolve()})}}},{key:"hideOverview",value:function(){var t=this;return this.mapView.removeAllPaths(),this._removeVirtualLayers(),this.mapManager.contractMaps({focus:!0}).then(function(){return t.overviewVisible=!1,Promise.resolve()})}},{key:"zoomIn",value:function(t){var e=this,i=Object(n.m)(t);if(a(this._directions))return this.overviewVisible=!1,this.mapView.removeAllPaths(),this._removeVirtualLayers(),this.mapView.setMap(i).then(function(){return e.mapManager.contractMaps({focus:!0})}).then(function(){return e.mapView.drawPath(e._directions.path,Object.assign({},e._options.pathOptions,{drawConnectionSegments:!1})),e.mapView.focusOnPath(e._directions.path.filter(function(t){return t.map===i}),[],!0),Promise.resolve()})}},{key:"reset",value:function(){this._options={}}},{key:"zoomOut",value:function(){if(a(this._directions))return this.mapView.removeAllPaths(),this.overviewVisible=!0,this.showOverview()}},{key:"_removeVirtualLayers",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,r=this._virtualLayers[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;this.mapView.removeMarker(o)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}this._virtualLayers.clear()}},{key:"projections",get:function(){return this.mapManager.projections}}]),t}();e.a=s},function(t,e,i){"use strict";var n=i(27),r=i.n(n),o=i(134),a=i.n(o),s=i(66),l=(i.n(s),i(117)),h=i(45),c=i(288),u=i(16),p=i(290),d=(i.n(p),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),f={};f.MapView=l.a,f.HoverLabel=h.a;var m=function t(e,i,n){var o,l=this;Object.assign(this,u.a.prototype),f.MapView.call(this,e,i,n),this.type="MapView2D",this.polygonStyles={invisible:{fillOpacity:0,stroke:!1},hover:{fillOpacity:.5,fillColor:"white",stroke:!0,color:"white",opacity:1,lineJoin:"miter",weight:0},highlight:{fillOpacity:.5,stroke:!0,color:"white",opacity:1,lineJoin:"miter",weight:0}},e.style.transform="translateZ(0px)";var h={INVISIBLE:0,HOVER:1,COLOURED:2},c={},p=3,m=[0,0],v=[],g=!0,y={},_=[],x={},b={},w=new f.HoverLabel(e);w.setZIndex(1e3),this.userMightPan=!0;var E=function(t){var e=t.id;this.mapClass=t,this.id=e,this.polygons={},this.markers={};var i=null,n=t.tiles;this.url=n+("/"!==n.substr(n.length-1,1)?"/":"")+"{z}/{x}_{y}.png",this.getNorth=function(){if(null==i)try{var e=t._data.georeference[0],n=t._data.georeference[1],r=new s.LatLonSpherical(e.target.x,e.target.y),o=new s.LatLonSpherical(n.target.x,n.target.y),a=(r.bearingTo(o)+0)*Math.PI/180,l=Math.atan2(n.control.y-e.control.y,n.control.x-e.control.x);i=-(a-l-Math.PI/2)}catch(e){i=0,console.warn(e),console.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return i}};this.controls=new function(){this.pan=function(t,e){w.hide(),c.pan([t,e])},this.setPosition=function(t,e){w.hide(),c.panTo(c.unproject([t,e]))},this.setRotation=function(t){},this.setTilt=function(t){},this.setZoom=function(t){U(),c.setZoom(t)},this.zoom=function(t){t>0?(c.zoomIn(),U()):t<0&&(c.zoomOut(),U())},this.zoomIn=function(t,e,i){U(),c.zoomIn(),i&&(void 0===i?"undefined":d(i))===("undefined"==typeof Function?"undefined":d(Function))&&i()},this.zoomOut=function(t,e,i){U(),c.zoomOut(),i&&(void 0===i?"undefined":d(i))===("undefined"==typeof Function?"undefined":d(Function))&&i()},this.getPosition=function(){return c.getCenter()},this.getRotation=function(){return 0},this.getTilt=function(){return 0},this.getZoom=function(){return c.getZoom()},this.isCameraMoving=function(){return!1},this.animateCamera=function(t,e,i,n){return w.hide(),window.setTimeout(n,1),new r.a.Tween},this.setMulti=function(t,e,i,n){}};var M,q,A,T,P=(M=function(){l.userMightPan=!0,l.publish("user-zoom")},q=750,function(){var t=this,e=arguments,i=A&&!T;clearTimeout(T),T=setTimeout(function(){T=null,A||M.apply(t,e)},q),i&&M.apply(t,e)});this.setMap=function(t,e){var i,n,r,s=L(t),h=I(t),u=x[s];if(s!=l.currentMap)if(u){l.currentMap&&(p=c.getZoom(),m=c.getCenter(),c.eachLayer(function(t){c.removeLayer(t)}),c.remove()),l.currentMap=s;var f=Math.ceil(Math.log(Math.max(h.height,h.width))/Math.log(2))-8;(c=a.a.map(this.container.id,{crs:a.a.CRS.Simple,zoom:p,minZoom:0,maxZoom:f,center:m,attributionControl:!1,zoomSnap:.1,zoomControl:!1})).on("click",k),c.on("mousemove",F),c.on("zoomstart",function(){l.userMightInteract&&(l.userMightPan=!1)}),c.on("movestart",function(){l.userMightInteract&&l.userMightPan&&U()}),c.on("zoomend",function(){l.userMightInteract&&P()}),c.on("moveend",function(){l.userMightInteract&&l.userMightPan&&(l.publish("user-pan"),U())});var y=(i=h,n=c.unproject([1,i.height-1],c.getMaxZoom()),r=c.unproject([i.width-1,1],c.getMaxZoom()),new a.a.LatLngBounds(n,r));c.setMaxBounds(y);var b=new a.a.tileLayer(u.url,{zoomOffset:8,zoom:p,minZoom:0,maxZoom:f,noWrap:!0,continuousWorld:!0,bounds:y});o=y,g&&(l.resetCamera(),g=!1),c.addLayer(b);for(var w=Object.keys(u.polygons),E=0,M=w.length;E<M;E++){var q=u.polygons[w[E]];R(q),c.addLayer(q)}_.map(function(t){t._mMap==l.currentMap&&c.addLayer(t)}),(w=Object.keys(u.markers)).map(function(t){var e=u.markers[t]._mLeafletMarker;e&&(c.addLayer(e),u.markers[t].events&&u.markers[t].events.map(function(t){e.addEventListener(t[0],t[1])}))});var A=l.getNorth()+l.controls.getRotation();for(E=0,M=v.length;E<M;++E)j(v[E],A);e&&(void 0===e?"undefined":d(e))==("undefined"==typeof Function?"undefined":d(Function))&&e()}else console.error("No map object for "+s)};var S=function(t,e){return"string"==typeof t?e.find(function(e){return e.id==t}):t},L=function(t){return t.id||t},C=function(t){return S(t,i.polygons)},I=function(t){return S(t,i.maps)};function O(t){var e=t.vertexes.map(function(t){return c.unproject([t.x,t.y],c.getMaxZoom())}),i=a.a.polygon(e,l.polygonStyles.invisible);return x[t.map].polygons[t.id]=i,i._mId=t.id,i._mHighlightState=h.INVISIBLE,i.on("mouseover",N),i.on("mouseout",B),i.on("click",z),i}var R=function(t){t._mHighlightState==h.HOVER&&(t.setStyle(l.polygonStyles.invisible),t._mHighlightState=h.INVISIBLE),b[t._mId]&&w.hide()},N=function(t){!function(t){t._mHighlightState==h.INVISIBLE&&(l.polygonStyles.hover.fillColor="#"+l.colors.hover.toString(16),l.polygonStyles.hover.color=l.polygonStyles.hover.fillColor,t.setStyle(l.polygonStyles.hover),t._mHighlightState=h.HOVER);var e=b[t._mId];e&&w.show(e)}(t.target)},B=function(t){var e=t.target;R(e)},D=!0,z=function(t){D=l.onPolygonClicked(t.target._mId)},k=function(t){D&&l.onNothingClicked(),D=!0};var F=function(t){var i,n,r=(i=t.originalEvent,n=e.getBoundingClientRect(),{x:i.clientX-n.left,y:i.clientY-n.top});w.setPosition(r.x,r.y)};function U(){l.userMightInteract=!1,setTimeout(function(){l.userMightInteract=!0},300)}this.focusOnPolygon=function(t,e,i,n){return l.focusOn({polygons:[t],changeZoom:e,durtaion:i,curve:n})},this.focusOnPath=function(t,e,i,n,r){return l.focusOn({nodes:t,polygons:e,changeZoom:i,duration:n,curve:r})},this.focusOn=function(t){var e=null;if(t.nodes)for(var i=t.nodes,n=0;n<i.length;++n){var r=i[n];if(void 0===r.map||r.map===l.currentMap){var o=c.unproject([r.x,r.y],c.getMaxZoom());null==e?e=a.a.latLngBounds(o,o):e.extend(o)}}if(t.polygons){var s=t.polygons;for(n=0;n<s.length;++n){var h=L(s[n]),u=y[h];if(null!=u){var p=u.getBounds();null==e?e=a.a.latLngBounds(p.getSouthWest(),p.getNorthEast()):e.extend(p)}}}if(null!=e){w.hide();var d=1/t.horizontalFovFactor||1,f=1/t.verticalFovFactor||1,m=e.getCenter(),v=e.getNorthWest(),g=e.getSouthEast(),_=new a.a.LatLng(m.lat-(m.lat-v.lat)*f,m.lng-(m.lng-v.lng)*d),x=new a.a.LatLng(m.lat-(m.lat-g.lat)*f,m.lng-(m.lng-g.lng)*d),b=new a.a.LatLngBounds(x,_);U(),c.fitBounds(b,{animate:!1})}},this.showEntireMap=function(t){var e=Object.keys(y);this.focusOn({polygons:e,changeZoom:!0})},this.getZoomLevelForPolygon=function(t){return c.getZoom()},this.getZoomLevelForCurrentMap=function(){return c.getZoom()},this.resetCamera=function(){w.hide(),c.setView(o.getCenter(),p),c.fitBounds(o)},this.getNorth=function(){return x[l.currentMap].getNorth()};var j=function(t,e){t.style.transform="rotate("+(e+t._mRotationOffset)+"rad)"};this.lockNorth=function(t,e){v.push(t),t._mRotationOffset=e||0,j(t,l.getNorth()+l.controls.getRotation())},this.unlockNorth=function(t){delete t._mRotationOffset,v=v.filter(function(e){return e!=t})},this.setPolygonColor=function(t,e){var i=L(t),n=y[i],r={};Object.assign(r,l.polygonStyles.highlight),r.color="#"+e.toString(16),r.fillColor=r.color,n.setStyle(r),n._mHighlightState=h.COLOURED},this.clearPolygonColor=function(t){var e=L(t),i=y[e];i.setStyle(l.polygonStyles.invisible),i._mHighlightState=h.INVISIBLE},this.clearAllPolygonColors=function(){for(var t=Object.keys(y),e=0,i=t.length;e<i;++e){var n=t[e];l.clearPolygonColor(n)}},this.addInteractivePolygon=function(t){var e=C(t),i=e.id,n=O(e);y[i]=n,e.map==l.currentMap&&c.addLayer(n)},this.removeInteractivePolygon=function(t){var e=C(t),i=e.id;c.removeLayer(y[i]),delete x[e.map][i],delete y[i]},this.createMarker=function(e,i,n,r,o){var a=L(r||l.currentMap),s=new t.Marker(l,Object.assign({html:e,position:i,className:n,map:a},o));return l.addMarker(s),s},this.addMarker=function(t){x[t._mMapId].markers[t._mId]=t,t._mMapId==l.currentMap&&(t._mLeafletMarker?c.addLayer(t._mLeafletMarker):(t.div.style.transform="rotate("+t._mIntitialRotation+"rad)",e.appendChild(t.div)))},this.removeMarker=function(t){delete x[t._mMapId].markers[t._mId],t._mMapId==l.currentMap&&c.removeLayer(t._mLeafletMarker)},this.removeAllMarkers=function(){Object.keys(x[l.currentMap].markers).map(function(t){c.removeLayer(x[l.currentMap].markers[t]._mLeafletMarker)});for(var t=Object.keys(x),e=0,i=t.length;e<i;e++)x[t[e]].markers={}},this.convertTo3DMapPosition=function(t){return c.unproject([t.x,t.y],c.getMaxZoom())},this.getPositionPolygon=function(t){var e=L(t);return(y[e]||O(C(t))).getCenter()},this.getPositionNode=function(t){var e=S(t,i.nodes);return l.convertTo3DMapPosition(e)};var V;this.labelPolygon=function(t){return new function(t){var e=t.text,i=t.color||l.colors.text||0;this.hoverLabelClass=t.hoverLabel2D||t.hoverLabelClass||"mMapviewHoverLabel",this.invalid=!1,this.message="",this.create=function(){},this.flipIfNeeded=function(t){},this.removeSelf=function(t){t||Object.keys(b).forEach(function(t){b[t]==self&&delete b[t]})},this.setColor=function(t){},this.clearColor=function(){this.setColor(i)},this.toString=function(){return e}}(t)},this.labelAllLocations=function(t){t||(t={});var e=t.excludeTypes||[],i=t.sortFunction,n=(t.locations||l.venue.locations.slice()).filter(function(t){return-1===e.indexOf(t.type)}),r=n;void 0!=i&&(r=n.sort(i));for(var o={},a=0,s=r.length;a<s;++a)for(var h=r[a],c=h.polygons,u=0,p=c.length;u<p;++u){var d=c[u];if(!o[d.id]&&(o[d.id]={text:h.name,shortText:h.shortName},void 0==i)){var f=l.getPrimaryLocationForPolygon(d),m=f.name,v=f.shortName;o[d.id]={text:m,shortText:v}}}for(var g=Object.keys(o),y=0,_=g.length;y<_;++y){var x=g[y];t.polygon=x,t.text=o[x].text,t.shortText=o[x].shortText,b[x]=l.labelPolygon(t)}},this.removeAllLabels=function(){},this.enableImageFlippingForAllLocations=function(t){},this.enableImageFlippingForPolygon=function(t){},this.drawPath=function(t,e){for(var i=0,n=t[i].map,r=[],o=0,a=t.length;o<a;++o){var s,h=t[o];h.map!=n&&(s=l.drawPathSegment(t.slice(i,o),n,e),i=o,n=h.map,r.push(s))}return s=l.drawPathSegment(t.slice(i),n,e),r.push(s),r},this.drawPathSegment=function(t,e,i){var n="#"+((i=i||{}).color||l.colors.path||16745292).toString(16),r=(i.radius||10)/2,o=t.map(function(t){return c.unproject([t.x,t.y],c.getMaxZoom())}),s=new a.a.polyline(o,{color:n,weight:r});return e==l.currentMap&&c.addLayer(s),s._mMap=e,_.push(s),s},this.removePathSegment=function(t){_.splice(_.indexOf(t),1),c.removeLayer(t)},this.removeAllPaths=function(){_.map(function(t){c.removeLayer(t)}),_=[]},this.setBackgroundColor=function(t,i){if((i=(i=void 0!==i?+i:1)>=0&&i<=1?i:1)<1){var n=t>>16&255,r=t>>8&255,o=t>>0&255;e.style.background="rgba("+n+","+r+","+o+","+i+")"}else e.style.background="#"+t.toString(16)},this.tryRendering=function(){},n&&this.setBackgroundColor(n.backgroundColor||16777215,n.backgroundAlpha),function(){var t=i.maps,e=i.venue.defaultMap;if(n&&n.firstMap&&(e=L(n.firstMap)),e)for(var r=0,o=t.length;r<o;++r)if(t[r].id===e){V=t[r].id;break}V||(V=t[0].id)}();for(var G=this.venue.maps,H=0,W=G.length;H<W;++H){var X=G[H],Y=X.id,Z=new E(X);x[Y]=Z}l.setMap(V,n.onFirstMapLoaded),window.setTimeout(function(){n.onDataLoaded&&d(n.onDataLoaded)===("undefined"==typeof Function?"undefined":d(Function))&&n.onDataLoaded()})};m.Marker=c.a,e.a=m},function(t,e,i){"use strict";var n=i(134),r=i.n(n),o=i(289),a=(i.n(o),0);e.a=function(t,e){var i=this;i._mId=a++;var n={html:e.html,className:e.className,iconSize:[24,24]},o=r.a.divIcon(n);if(e.position)i._mLeafletMarker=r.a.marker(e.position,{icon:o,riseOnHover:!0,rotationAngle:e.rotation?e.rotation:0,rotationOrigin:"center"}),i._mMapId=e.map?e.map.id||e.map:t.currentMap;else{var s=document.createElement("div");i.div=s,i._mMapId=e.map?e.map.id||e.map:t.currentMap,i._mDoPhysics=1==e.physics,i._mDoCollisions=1==e.collisions,i._mKinematic=1==e.kinematic,i._mRotateWithCamera=1==e.rotateWithCamera,i._mIntitialRotation=e.rotation?e.rotation:0,s.className=e.className||e.class,s.innerHTML=e.html,e.position&&(s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.opacity=0),i._oldOpacity=s.style.opacity,i._oldPointerEvents=s.style.pointerEvents,i._mPosition=e.position,i._mProjectedPosition=[0,0]}this.destroy=function(){},this.isColliding=function(){return i._mDoPhysics&&i._mShadowElement._mNumCollisions>0},this.show=function(){1==i._mHidden&&(i._mHidden=!1,s.style.opacity=i._oldOpacity,s.style.pointerEvents=i._oldPointerEvents)},this.hide=function(){1!=i._mHidden&&(i._mHidden=!0,i._oldOpacity=s.style.opacity,s.style.opacity=0,i._oldPointerEvents=s.style.pointerEvents,s.style.pointerEvents="none")},this.addEventListener=function(t,e){i.events||(i.events=[]),i.events.push([t,e]),i._mLeafletMarker._icon&&i._mLeafletMarker._icon.addEventListener(t,e)}}},function(t,e){var i,n,r;i=L.Marker.prototype._initIcon,n=L.Marker.prototype._setPos,r="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook(function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(t){t.target._applyRotation()})}),L.Marker.include({_initIcon:function(){i.call(this)},_setPos:function(t){n.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,r?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})},function(t,e,i){var n=i(291);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0};i(65)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,i){var n=i(292);(t.exports=i(64)(!1)).push([t.i,"/* required styles */\r\n\r\n.leaflet-pane,\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-tile-container,\r\n.leaflet-pane > svg,\r\n.leaflet-pane > canvas,\r\n.leaflet-zoom-box,\r\n.leaflet-image-layer,\r\n.leaflet-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\t}\r\n.leaflet-container {\r\n\toverflow: hidden;\r\n\t}\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t        user-select: none;\r\n\t  -webkit-user-drag: none;\r\n\t}\r\n/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r\n.leaflet-safari .leaflet-tile {\r\n\timage-rendering: -webkit-optimize-contrast;\r\n\t}\r\n/* hack that prevents hw layers \"stretching\" when loading new tiles */\r\n.leaflet-safari .leaflet-tile-container {\r\n\twidth: 1600px;\r\n\theight: 1600px;\r\n\t-webkit-transform-origin: 0 0;\r\n\t}\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\tdisplay: block;\r\n\t}\r\n/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r\n/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r\n.leaflet-container .leaflet-overlay-pane svg,\r\n.leaflet-container .leaflet-marker-pane img,\r\n.leaflet-container .leaflet-shadow-pane img,\r\n.leaflet-container .leaflet-tile-pane img,\r\n.leaflet-container img.leaflet-image-layer,\r\n.leaflet-container .leaflet-tile {\r\n\tmax-width: none !important;\r\n\tmax-height: none !important;\r\n\t}\r\n\r\n.leaflet-container.leaflet-touch-zoom {\r\n\t-ms-touch-action: pan-x pan-y;\r\n\ttouch-action: pan-x pan-y;\r\n\t}\r\n.leaflet-container.leaflet-touch-drag {\r\n\t-ms-touch-action: pinch-zoom;\r\n\t/* Fallback for FF which doesn't support pinch-zoom */\r\n\ttouch-action: none;\r\n\ttouch-action: pinch-zoom;\r\n}\r\n.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r\n\t-ms-touch-action: none;\r\n\ttouch-action: none;\r\n}\r\n.leaflet-container {\r\n\t-webkit-tap-highlight-color: transparent;\r\n}\r\n.leaflet-container a {\r\n\t-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r\n}\r\n.leaflet-tile {\r\n\tfilter: inherit;\r\n\tvisibility: hidden;\r\n\t}\r\n.leaflet-tile-loaded {\r\n\tvisibility: inherit;\r\n\t}\r\n.leaflet-zoom-box {\r\n\twidth: 0;\r\n\theight: 0;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\tz-index: 800;\r\n\t}\r\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r\n.leaflet-overlay-pane svg {\r\n\t-moz-user-select: none;\r\n\t}\r\n\r\n.leaflet-pane         { z-index: 400; }\r\n\r\n.leaflet-tile-pane    { z-index: 200; }\r\n.leaflet-overlay-pane { z-index: 400; }\r\n.leaflet-shadow-pane  { z-index: 500; }\r\n.leaflet-marker-pane  { z-index: 600; }\r\n.leaflet-tooltip-pane   { z-index: 650; }\r\n.leaflet-popup-pane   { z-index: 700; }\r\n\r\n.leaflet-map-pane canvas { z-index: 100; }\r\n.leaflet-map-pane svg    { z-index: 200; }\r\n\r\n.leaflet-vml-shape {\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\t}\r\n.lvml {\r\n\tbehavior: url(#default#VML);\r\n\tdisplay: inline-block;\r\n\tposition: absolute;\r\n\t}\r\n\r\n\r\n/* control positioning */\r\n\r\n.leaflet-control {\r\n\tposition: relative;\r\n\tz-index: 800;\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-top,\r\n.leaflet-bottom {\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-top {\r\n\ttop: 0;\r\n\t}\r\n.leaflet-right {\r\n\tright: 0;\r\n\t}\r\n.leaflet-bottom {\r\n\tbottom: 0;\r\n\t}\r\n.leaflet-left {\r\n\tleft: 0;\r\n\t}\r\n.leaflet-control {\r\n\tfloat: left;\r\n\tclear: both;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tfloat: right;\r\n\t}\r\n.leaflet-top .leaflet-control {\r\n\tmargin-top: 10px;\r\n\t}\r\n.leaflet-bottom .leaflet-control {\r\n\tmargin-bottom: 10px;\r\n\t}\r\n.leaflet-left .leaflet-control {\r\n\tmargin-left: 10px;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tmargin-right: 10px;\r\n\t}\r\n\r\n\r\n/* zoom and fade animations */\r\n\r\n.leaflet-fade-anim .leaflet-tile {\r\n\twill-change: opacity;\r\n\t}\r\n.leaflet-fade-anim .leaflet-popup {\r\n\topacity: 0;\r\n\t-webkit-transition: opacity 0.2s linear;\r\n\t   -moz-transition: opacity 0.2s linear;\r\n\t        transition: opacity 0.2s linear;\r\n\t}\r\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r\n\topacity: 1;\r\n\t}\r\n.leaflet-zoom-animated {\r\n\t-webkit-transform-origin: 0 0;\r\n\t    -ms-transform-origin: 0 0;\r\n\t        transform-origin: 0 0;\r\n\t}\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\twill-change: transform;\r\n\t}\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\t-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t}\r\n.leaflet-zoom-anim .leaflet-tile,\r\n.leaflet-pan-anim .leaflet-tile {\r\n\t-webkit-transition: none;\r\n\t   -moz-transition: none;\r\n\t        transition: none;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-hide {\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n\r\n/* cursors */\r\n\r\n.leaflet-interactive {\r\n\tcursor: pointer;\r\n\t}\r\n.leaflet-grab {\r\n\tcursor: -webkit-grab;\r\n\tcursor:    -moz-grab;\r\n\tcursor:         grab;\r\n\t}\r\n.leaflet-crosshair,\r\n.leaflet-crosshair .leaflet-interactive {\r\n\tcursor: crosshair;\r\n\t}\r\n.leaflet-popup-pane,\r\n.leaflet-control {\r\n\tcursor: auto;\r\n\t}\r\n.leaflet-dragging .leaflet-grab,\r\n.leaflet-dragging .leaflet-grab .leaflet-interactive,\r\n.leaflet-dragging .leaflet-marker-draggable {\r\n\tcursor: move;\r\n\tcursor: -webkit-grabbing;\r\n\tcursor:    -moz-grabbing;\r\n\tcursor:         grabbing;\r\n\t}\r\n\r\n/* marker & overlays interactivity */\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-image-layer,\r\n.leaflet-pane > svg path,\r\n.leaflet-tile-container {\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-marker-icon.leaflet-interactive,\r\n.leaflet-image-layer.leaflet-interactive,\r\n.leaflet-pane > svg path.leaflet-interactive {\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n/* visual tweaks */\r\n\r\n.leaflet-container {\r\n\tbackground: #ddd;\r\n\toutline: 0;\r\n\t}\r\n.leaflet-container a {\r\n\tcolor: #0078A8;\r\n\t}\r\n.leaflet-container a.leaflet-active {\r\n\toutline: 2px solid orange;\r\n\t}\r\n.leaflet-zoom-box {\r\n\tborder: 2px dotted #38f;\r\n\tbackground: rgba(255,255,255,0.5);\r\n\t}\r\n\r\n\r\n/* general typography */\r\n.leaflet-container {\r\n\tfont: 12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif;\r\n\t}\r\n\r\n\r\n/* general toolbar styles */\r\n\r\n.leaflet-bar {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n\tborder-radius: 4px;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #fff;\r\n\tborder-bottom: 1px solid #ccc;\r\n\twidth: 26px;\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n\tcolor: black;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-control-layers-toggle {\r\n\tbackground-position: 50% 50%;\r\n\tbackground-repeat: no-repeat;\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #f4f4f4;\r\n\t}\r\n.leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 4px;\r\n\tborder-top-right-radius: 4px;\r\n\t}\r\n.leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\tborder-bottom: none;\r\n\t}\r\n.leaflet-bar a.leaflet-disabled {\r\n\tcursor: default;\r\n\tbackground-color: #f4f4f4;\r\n\tcolor: #bbb;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 2px;\r\n\tborder-bottom-right-radius: 2px;\r\n\t}\r\n\r\n/* zoom control */\r\n\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out {\r\n\tfont: bold 18px 'Lucida Console', Monaco, monospace;\r\n\ttext-indent: 1px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r\n\tfont-size: 22px;\r\n\t}\r\n\r\n\r\n/* layers control */\r\n\r\n.leaflet-control-layers {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\r\n\tbackground: #fff;\r\n\tborder-radius: 5px;\r\n\t}\r\n.leaflet-control-layers-toggle {\r\n\tbackground-image: url("+n(i(293))+");\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\t}\r\n.leaflet-retina .leaflet-control-layers-toggle {\r\n\tbackground-image: url("+n(i(294))+");\r\n\tbackground-size: 26px 26px;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers-toggle {\r\n\twidth: 44px;\r\n\theight: 44px;\r\n\t}\r\n.leaflet-control-layers .leaflet-control-layers-list,\r\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r\n\tdisplay: none;\r\n\t}\r\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\r\n\tdisplay: block;\r\n\tposition: relative;\r\n\t}\r\n.leaflet-control-layers-expanded {\r\n\tpadding: 6px 10px 6px 6px;\r\n\tcolor: #333;\r\n\tbackground: #fff;\r\n\t}\r\n.leaflet-control-layers-scrollbar {\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n\tpadding-right: 5px;\r\n\t}\r\n.leaflet-control-layers-selector {\r\n\tmargin-top: 2px;\r\n\tposition: relative;\r\n\ttop: 1px;\r\n\t}\r\n.leaflet-control-layers label {\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-control-layers-separator {\r\n\theight: 0;\r\n\tborder-top: 1px solid #ddd;\r\n\tmargin: 5px -10px 5px -6px;\r\n\t}\r\n\r\n/* Default icon URLs */\r\n.leaflet-default-icon-path {\r\n\tbackground-image: url("+n(i(295))+');\r\n\t}\r\n\r\n\r\n/* attribution and scale controls */\r\n\r\n.leaflet-container .leaflet-control-attribution {\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.7);\r\n\tmargin: 0;\r\n\t}\r\n.leaflet-control-attribution,\r\n.leaflet-control-scale-line {\r\n\tpadding: 0 5px;\r\n\tcolor: #333;\r\n\t}\r\n.leaflet-control-attribution a {\r\n\ttext-decoration: none;\r\n\t}\r\n.leaflet-control-attribution a:hover {\r\n\ttext-decoration: underline;\r\n\t}\r\n.leaflet-container .leaflet-control-attribution,\r\n.leaflet-container .leaflet-control-scale {\r\n\tfont-size: 11px;\r\n\t}\r\n.leaflet-left .leaflet-control-scale {\r\n\tmargin-left: 5px;\r\n\t}\r\n.leaflet-bottom .leaflet-control-scale {\r\n\tmargin-bottom: 5px;\r\n\t}\r\n.leaflet-control-scale-line {\r\n\tborder: 2px solid #777;\r\n\tborder-top: none;\r\n\tline-height: 1.1;\r\n\tpadding: 2px 5px 1px;\r\n\tfont-size: 11px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.5);\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child) {\r\n\tborder-top: 2px solid #777;\r\n\tborder-bottom: none;\r\n\tmargin-top: -2px;\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r\n\tborder-bottom: 2px solid #777;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-attribution,\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tbox-shadow: none;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tborder: 2px solid rgba(0,0,0,0.2);\r\n\tbackground-clip: padding-box;\r\n\t}\r\n\r\n\r\n/* popup */\r\n\r\n.leaflet-popup {\r\n\tposition: absolute;\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n\t}\r\n.leaflet-popup-content-wrapper {\r\n\tpadding: 1px;\r\n\ttext-align: left;\r\n\tborder-radius: 12px;\r\n\t}\r\n.leaflet-popup-content {\r\n\tmargin: 13px 19px;\r\n\tline-height: 1.4;\r\n\t}\r\n.leaflet-popup-content p {\r\n\tmargin: 18px 0;\r\n\t}\r\n.leaflet-popup-tip-container {\r\n\twidth: 40px;\r\n\theight: 20px;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tmargin-left: -20px;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-popup-tip {\r\n\twidth: 17px;\r\n\theight: 17px;\r\n\tpadding: 1px;\r\n\r\n\tmargin: -10px auto 0;\r\n\r\n\t-webkit-transform: rotate(45deg);\r\n\t   -moz-transform: rotate(45deg);\r\n\t    -ms-transform: rotate(45deg);\r\n\t        transform: rotate(45deg);\r\n\t}\r\n.leaflet-popup-content-wrapper,\r\n.leaflet-popup-tip {\r\n\tbackground: white;\r\n\tcolor: #333;\r\n\tbox-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tpadding: 4px 4px 0 0;\r\n\tborder: none;\r\n\ttext-align: center;\r\n\twidth: 18px;\r\n\theight: 14px;\r\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\r\n\tcolor: #c3c3c3;\r\n\ttext-decoration: none;\r\n\tfont-weight: bold;\r\n\tbackground: transparent;\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button:hover {\r\n\tcolor: #999;\r\n\t}\r\n.leaflet-popup-scrolled {\r\n\toverflow: auto;\r\n\tborder-bottom: 1px solid #ddd;\r\n\tborder-top: 1px solid #ddd;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-content-wrapper {\r\n\tzoom: 1;\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\twidth: 24px;\r\n\tmargin: 0 auto;\r\n\r\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";\r\n\tfilter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip-container {\r\n\tmargin-top: -1px;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-control-zoom,\r\n.leaflet-oldie .leaflet-control-layers,\r\n.leaflet-oldie .leaflet-popup-content-wrapper,\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\tborder: 1px solid #999;\r\n\t}\r\n\r\n\r\n/* div icon */\r\n\r\n.leaflet-div-icon {\r\n\tbackground: #fff;\r\n\tborder: 1px solid #666;\r\n\t}\r\n\r\n\r\n/* Tooltip */\r\n/* Base styles for the element that has a tooltip */\r\n.leaflet-tooltip {\r\n\tposition: absolute;\r\n\tpadding: 6px;\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #fff;\r\n\tborder-radius: 3px;\r\n\tcolor: #222;\r\n\twhite-space: nowrap;\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n\tpointer-events: none;\r\n\tbox-shadow: 0 1px 3px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-tooltip.leaflet-clickable {\r\n\tcursor: pointer;\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-tooltip-top:before,\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: "";\r\n\t}\r\n\r\n/* Directions */\r\n\r\n.leaflet-tooltip-bottom {\r\n\tmargin-top: 6px;\r\n}\r\n.leaflet-tooltip-top {\r\n\tmargin-top: -6px;\r\n}\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-top:before {\r\n\tleft: 50%;\r\n\tmargin-left: -6px;\r\n\t}\r\n.leaflet-tooltip-top:before {\r\n\tbottom: 0;\r\n\tmargin-bottom: -12px;\r\n\tborder-top-color: #fff;\r\n\t}\r\n.leaflet-tooltip-bottom:before {\r\n\ttop: 0;\r\n\tmargin-top: -12px;\r\n\tmargin-left: -6px;\r\n\tborder-bottom-color: #fff;\r\n\t}\r\n.leaflet-tooltip-left {\r\n\tmargin-left: -6px;\r\n}\r\n.leaflet-tooltip-right {\r\n\tmargin-left: 6px;\r\n}\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\ttop: 50%;\r\n\tmargin-top: -6px;\r\n\t}\r\n.leaflet-tooltip-left:before {\r\n\tright: 0;\r\n\tmargin-right: -12px;\r\n\tborder-left-color: #fff;\r\n\t}\r\n.leaflet-tooltip-right:before {\r\n\tleft: 0;\r\n\tmargin-left: -12px;\r\n\tborder-right-color: #fff;\r\n\t}\r\n',""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e,i){t.exports=i.p+"images/layers.png"},function(t,e,i){t.exports=i.p+"images/layers-2x.png"},function(t,e,i){t.exports=i.p+"images/marker-icon.png"},function(t,e,i){"use strict";i.d(e,"c",function(){return l}),e.d=function(t,e,i){try{var n=window.localStorage,r=n.getItem(s);if(null!=r)return i&&i("true"==r),e(null,"true"==r,null)}catch(t){}return h(t,e,i)},e.a=h,e.b=function(t,e,i){if(e==l.TEST)return void console.error("You need to run the 3D test, or call force3D or force2D first.");t.things.venue=t.things.venue||[],t.things.venue.push("slug","defaultMap"),t.things.nodes=t.things.nodes||[],t.things.nodes.push("x","y","paths","map"),t.things.polygons=t.things.polygons||[],t.things.locations=t.things.locations||[],t.things.locations.push("sortOrder,parent"),t.things.maps=t.things.maps||[],t.things.maps.push("height","width","georeference"),e==l["2D"]?(t.perspective=t.perspective2D||t.perspective||"Perspective",t.things.maps.push("tiles","perspectives"),t.things.polygons.push("vertexes"),t.do2D=!0):e==l["3D"]&&(t.perspective=t.perspective3D||t.perspective||void 0,t.things.maps.push("scene","layers"),t.things.polygons.push("canvasBounds","map","image","perspectives","material","holes","label"),a.a&&t.things.polygons.push("layer","geometry","vertexes"),t.do2D=!1);Object(r.a)(t,i)};var n=i(297),r=i(299),o=i(68),a=i(120),s="mappedin3DTestSuccess",l={TEST:"TEST","3D":"3D","2D":"2D",FORCE_TEST:"FORCE_TEST"};function h(t,e,i){Object(n.a)(t,function(t,n,r){if(1==n||t!==o.a.RESULT.FAILED_TOO_SLOW)try{window.localStorage.setItem(s,n)}catch(t){}i&&i(n),e(t,n,r)})}},function(t,e,i){"use strict";var n=i(3),r=i(68),o=i(298);e.a=function(t,e){function i(t){if(t instanceof n.G&&(t.geometry&&t.geometry.dispose(),t.material))if(t.material instanceof n.I)for(var e=0;e<t.material.materials.length;e++){var i=t.material.materials[e];i.map&&i.map.dispose(),i.lightMap&&i.lightMap.dispose(),i.bumpMap&&i.bumpMap.dispose(),i.normalMap&&i.normalMap.dispose(),i.specularMap&&i.specularMap.dispose(),i.envMap&&i.envMap.dispose(),i.dispose()}else t.material.map&&t.material.map.dispose(),t.material.lightMap&&t.material.lightMap.dispose(),t.material.bumpMap&&t.material.bumpMap.dispose(),t.material.normalMap&&t.material.normalMap.dispose(),t.material.specularMap&&t.material.specularMap.dispose(),t.material.envMap&&t.material.envMap.dispose(),t.material.dispose()}function a(){for(m.remove(g),c.render(m,f),c.dispose(),c=void 0,function t(e,i){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];t(r,i),i(r)}}(g,i);t.firstChild;)t.removeChild(t.firstChild)}var s,l=!1;try{var h=document.createElement("canvas");if(s=h.getContext("webgl",{antialias:!0})||h.getContext("experimental-webgl",{antialias:!0}),(l=!(!window.WebGLRenderingContext||!s))&&!s.getContextAttributes().antialias)return e(r.a.RESULT.FAILED_NO_AA,!1,r.a.NO_BENCHMARK);h=null}catch(t){l=!1}if(!l)return e(r.a.RESULT.FAILED_NO_WEB_GL,!1,r.a.NO_BENCHMARK);var c=new n._2;c.setSize(t.clientWidth,t.clientHeight),c.domElement.style.display="none",t.appendChild(c.domElement);var u=c.context.getParameter(c.context.MAX_TEXTURE_SIZE),p=c.context.getParameter(c.context.MAX_RENDERBUFFER_SIZE);if(u<4096||p<4096)return e(r.a.RESULT.FAILED_TEXTURE_SIZE,!1,r.a.NO_BENCHMARK);var d=c.domElement.width/c.domElement.height,f=new n.N(45,d,10,15e3),m=new n.T;f.position.z=1e3,m.add(f);var v=new n.P(16777215);v.position.x=10,v.position.y=50,v.position.z=130,m.add(v);var g=new n.L;m.add(g);var y=new Image;y.src=o;var _=new n.X;_.image=y,y.onload=function(){_.needsUpdate=!0,_.repeat.set(1,1),_.wrapS=n.S,_.wrapT=n.S;var t=new n.H({map:_}),i=new n.G(new n.O(c.domElement.width,c.domElement.height),t);i.position.x=0,i.rotation.x=-Math.PI/4,g.add(i);var o=new Date;c.render(m,f);var s=new Date-o;if(a(),s>500)return e(r.a.RESULT.FAILED_TOO_SLOW,!1,s);e(r.a.RESULT.SUCCESS,!0,s)}}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACAAAAAgAAQMAAACIaUFzAAAAA1BMVEX/JgDaPIoTAAACFElEQVR4Ae3BMQEAAADCIPun9l8GYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIeAABo+thggAAAABJRU5ErkJggg=="},function(t,e,i){"use strict";var n=i(5),r=i(300),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="https://web-proxy.mappedin.com/1/";function s(t,e){t.indexOf(e)<0&&t.push(e)}function l(t,e){for(var i=Object.keys(e),n=0,r=i.length;n<r;++n){var o=i[n];o in t||(t[o]=e[o])}}function h(t,e,i){Object.defineProperty(t.prototype,e,{configurable:!1,enumerable:!1,get:i,set:void 0})}function c(t,e,i){h(t,e,function(){var t=this._cache[e];return void 0===t&&(t=this._cache[e]=i.call(this)),t})}function u(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function p(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function d(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function f(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function m(t,e){this._mappedin=t,this._data=e,this._cache={},this._scale=Object(n.i)(this._data),l(this,e)}function v(t,e,i){this._mappedin=t,this._data=e,this._index=i,this._cache={},l(this,e)}function g(t,e,i,n,r,o){var a,s=r||{};null==t.venue.navigationGraph&&(t.venue.navigationGraph=new x(t.nodes,t.vortexes));var l,h,c=t.venue.navigationGraph,u=s.accessible||!1;n instanceof p?a=new b(c,c.aStar(e,n.nodes,u),i,n,t.nodes):n instanceof v?(h=n.locations.length>0?n.locations[0]:null,a=new b(c,c.aStar(e,[n],u),i,h,t.nodes)):n instanceof P?a=new b(c,c.aStar(e,n.entrances,u),i,h=n.locations.length>0?n.locations[0]:null,t.nodes):n instanceof Array&&n.length>0&&n[0]instanceof v?a=new b(c,c.aStar(e,n,u),i,null,t.nodes):l=new TypeError("destination must be a MappedinLocation, MappedinNode, MappedinPolygon or [MappedinNode]"),a&&0==a.path.length&&(l=new Error("could not find a path to destination")),o(l,a)}function y(t,e,i,n,r){var o,a,s=(n||{}).accessible||!1;i instanceof p?o=t.aStar(e,i.nodes,s):i instanceof v?o=t.aStar(e,[i],s):i instanceof P?o=t.aStar(e,i.entrances,s):i instanceof Array&&i.length>0&&i[0]instanceof v?o=t.aStar(e,i,s):a=new TypeError("destination must be a MappedinLocation, MappedinNode, MappedinPolygon or [MappedinNode]");var l=0,h=0;if(o&&o.length>0)for(var c=0;c<o.length;c++){var u=o[c];l+=u.getDistance(),h+=u.weight*u.getDistance()}else a=new Error("could not find a path to destination");r(a,{cost:h,distance:l})}function _(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.origin=t,this.destination=e,this.vortex=r,null!=r){var o=t._mappedin._mapsById[t.map].elevation,a=e._mappedin._mapsById[e.map].elevation,s=Math.abs(o-a);this.distance=0,i=void 0!==r.weight&&r.weight>=0?r.weight:"elevator"===r.type?2e3:1e3,n=r.multiplier&&r.multiplier>=1?r.multiplier:1,this.weight=s*n+i}else this.distance=this.origin.getDistance(this.destination),i=e.weight&&e.weight>=0?e.weight:0,n=e.multiplier&&e.multiplier>=1?e.multiplier:1,this.weight=this.distance*n+i}function x(t,e){var i=[];t.forEach(function(t){i[t._index]=[];for(var e=t.paths.length,n=t.paths,r=0;r<e;r++){var o=n[r];i[t._index].push(new _(t,o))}}),e.forEach(function(t){var e=t.nodes,n=0;if(void 0!=e)for(;n<e.length-1;){var r=t._mappedin._nodesById[e[n]];if(null!=r)for(var o=n+1;o<e.length;){var a=t._mappedin._nodesById[e[o]];null!=a&&(i[r._index].push(new _(r,a,t)),i[a._index].push(new _(a,r,t))),o++}n++}}),this.edges=i}function b(t,e,i,n,r){if(null!=e&&e.length>0){for(var o=0,a=e.length,s=new Array(a+1),l=0;l<a;l++)s[l]=e[l].origin;s[a]=e[a-1].destination;for(var h=[],c=null,u=null,p=0;p<a;p++){var d,f=e[p],m=f.origin,v=f.destination;if(o+=f.getDistance(),0==p&&(d=null!=i?"Depart from "+i.name:"Depart from current location",h.push(new q(m,{type:A.DEPARTURE},i,d))),null!=f.vortex){var g=m._mappedin._mapsById[m.map],y=m._mappedin._mapsById[v.map];d="Take "+f.vortex.name+" to "+y.name,h.push(new q(m,{type:A.TAKEVORTEX,fromMap:g,toMap:y},f.vortex,d))}else{var _=.1*Math.PI;if(null!=c&&null!=u){for(var x=t.edges[m._index],b=[],M=0;M<x.length;M++){var P=x[M];P.destination!=c&&P.destination!=f.destination&&b.push(P)}if(b.length>0){for(var S=-E(u.getAngle(),f.getAngle()),L=Math.PI,C=0;C<b.length;C++){var I=b[C],O=-E(f.getAngle(),I.getAngle());L=Math.min(L,Math.abs(O))}if(null!=u.vortex)d="Exit out of "+u.vortex.type,h.push(new q(m,{type:A.TURN,bearing:"Straight",referencePosition:"At"},u.vortex,d));else if(Math.abs(S)>=_||Math.abs(L)<=_){var R,N;S<=-Math.PI/4?(R=T.RIGHT,N="Turn right"):S<=-_?(R=T.SLIGHTRIGHT,N="Turn slightly right"):S<=_?(R=T.STRAIGHT,N="Head straight"):S<=Math.PI/4?(R=T.SLIGHTLEFT,N="Turn slightly left"):(R=T.LEFT,N="Turn left");var B=null;if(null!=(B=r.includes(m)&&null!=m.locations[0]?m.locations[0]:w(t,u,.5*Math.PI,10))){var D=N+" at "+B.name;(d=new q(m,{type:A.TURN,bearing:R,referencePosition:"At"},B,D)).type=R,h.push(d)}else d=new q(m,{type:A.TURN,bearing:R,referencePosition:"At"},null,N),h.push(d)}}}}p==a-1&&(d=null!=n?"Arrive at "+n.name:"Arrive at destination",h.push(new q(m,{type:A.ARRIVAL},n,d))),c=m,u=f}for(var z=[],k=null,F=h.length-1;F>=0;F--){var U=h[F];U.action.type==A.TAKEVORTEX?(k=U.node,z.unshift(U)):U.action.type==A.TURN&&null!=k?U.node.getDistance(k)>5&&z.unshift(U):z.unshift(U)}this.distance=o,this.path=s,this.instructions=z,this.directions=z}else this.distance=0,this.path=[],this.instructions=[],this.directions=z}function w(t,e,i,n){for(var r=0,o=0,a=e;Math.abs(r)<i&&o<n;){for(var s=t.edges[a.destination._index],l=null,h=0,c=0;c<s.length;c++){var u=s[c];if(u.getDistance()>0)if(null!=l){var p=-E(a.getAngle(),u.getAngle());Math.abs(p)<Math.abs(h)&&(l=u,h=p)}else l=u,h=-E(a.getAngle(),u.getAngle())}if(null==l)return null;if(Math.abs(h)>=i)return null;if(r+=h,o+=l.getDistance(),Math.abs(r)>=i||o>n)return null;if(null!=l.destination.locations[0])return l.destination.locations[0];a=l}return null}function E(t,e){return((e-t+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI}u._fetch=function(t,e){var i={fields:t._things.categories,venue:t._venue};t._getArray("category",i,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new u(t,n[r]);e(null,n)})},c(u,"locations",function(){for(var t=[],e=this._mappedin.locations,i=this._data.id,n=0,r=e.length;n<r;++n){var o=e[n],a=o._data.categories;if(Array.isArray(a))for(var s=0,l=a.length;s<l;++s)if(a[s]===i){t.push(o);break}}return t}),p._fetch=function(t,e){var i=t._things.locations.slice();t._things.categories&&s(i,"categories"),t._things.nodes&&s(i,"nodes"),t._things.polygons&&s(i,"polygons"),t._things.locationStates&&s(i,"states");var n={fields:i,venue:t._venue};t._getArray("location",n,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new p(t,n[r]);e(null,n)})},c(p,"polygons",function(){var t=[],e=this._data.polygons,i=this._mappedin._polygonsById;if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n){var o=i[e[n].id];null!=o&&t.push(o)}return t}),c(p,"nodes",function(){var t=[],e=this._data.nodes,i=this._mappedin._nodesById;if(e)for(var n=0,r=e.length;n<r;++n){var o=i[e[n].node];null!=o&&t.push(o)}return t}),c(p,"parent",function(){var t,e=this._mappedin._locationsById,i=this._data.parent;return void 0!==i&&(t=e[i]),t}),c(p,"state",function(){return Object(r.a)(this._data,this._mappedin.locationStates)}),p.prototype.directionsTo=function(t,e,i){var n=e||{};if((null!=n.directionsProvider?n.directionsProvider:M.ONLINE)==M.OFFLINE)g(this._mappedin,this.nodes,this,t,e,i);else{var r={originLocation:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:null!=e&&n.accessible||void 0};if(t instanceof p)r.location=t._data.id;else{if(!(t instanceof v))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");r.destination=t._data.id}this._mappedin._getObject("directions",r,i)}},p.prototype.distanceTo=function(t,e,i){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new x(this._mappedin.nodes,this._mappedin.vortexes)),y(this._mappedin.venue.navigationGraph,this.nodes,t,e,i)},d._fetch=function(t,e){var i=t._things.vortexes.slice();["name","type","accessible","weight","multiplier","nodes"].forEach(function(t){s(i,t)});var n={fields:i,venue:t._venue};t._getArray("vortex",n,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new d(t,n[r]);e(null,n)})},f._fetch=function(t,e){var i={fields:t._things.mapGroups.slice(),venue:t._venue};t._getArray("map-group",i,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new f(t,n[r]);e(null,n)})},c(f,"maps",function(){for(var t=[],e=this._mappedin.maps,i=this._data.id,n=0,r=e.length;n<r;++n){var o=e[n];o._data.group===i&&t.push(o)}return t}),m._fetch=function(t,e){var i=t._things.maps.slice();t._perspective&&s(i,"perspectives"),t._things.mapGroups&&s(i,"group"),s(i,"elevation");var n={fields:i,perspective:t._perspective||void 0,venue:t._venue};t._getArray("map",n,function(n,r){if(n)return e(n);for(var o=function(t){var e=l.layers.find(function(e){return e.id===t});e?e.visible=!0:l.layers.push({id:t,visible:!0})},a=0,s=r.length;a<s;++a){var l=r[a];if(t._perspective){var h=l.perspective;if(null!=h){l.perspectiveId=h.id;for(var c=0,u=i.length;c<u;++c){var p=i[c];if(t._do2D)switch(p){case"width":case"height":l[p]=h.size&&h.size[p]||h[p];break;case"tiles":case"original":l[p]=h[p]}else switch(p){case"scene":l[p]=h[p];break;case"layers":h[p]?(l.layers.forEach(function(t){t.visible=!1}),h[p].forEach(o)):l.layers.forEach(function(t){t.visible=!0})}}}delete l.perspective}r[a]=new m(t,l)}e(null,r)})},c(m,"polygons",function(){for(var t=[],e=this._mappedin.polygons,i=this._data.id,n=0,r=e.length;n<r;++n){var o=e[n];o.map===i&&t.push(o)}return t}),c(m,"mapGroup",function(){var t=this._data.group;return t&&this._mappedin._mapGroupsById[t]||null}),v._fetch=function(t,e){var i=t._things.nodes.slice();t._things.maps&&s(i,"map");["weight","multiplier","accessible"].forEach(function(t){s(i,t)});var n={fields:i,perspective:t._do2D&&t._perspective||void 0,venue:t._venue};t._getArray("node",n,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new v(t,n[r],r);e(null,n)})},c(v,"paths",function(){var t=[],e=this._mappedin._nodesById,i=this._data.paths;if(Array.isArray(i))for(var n=0,r=i.length;n<r;++n){var o=e[i[n].node];null!=o&&t.push(o)}return t}),c(v,"locations",function(){for(var t=[],e=this._mappedin.locations,i=this._data.id,n=0,r=e.length;n<r;++n){var o=e[n],a=o._data.nodes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;++s){if(a[s].node===i){t.push(o);break}}}return t}),v.prototype.getAngle=function(t){var e=this.x-t.x,i=this.y-t.y;return(Math.atan2(i,e)+2.5*Math.PI)%(2*Math.PI)},v.prototype.getDistance=function(t){var e,i=this.x-t.x,n=this.y-t.y,r=i*i+n*n;return e=null==this._mappedin._mapsById[this.map]?1:this._mappedin._mapsById[this.map]._scale,Math.sqrt(r)/e},v.prototype.getShortestEuclideanDistance=function(t){var e=this,i=Number.MAX_VALUE;return t.forEach(function(t){var n=e.getDistance(t);i>n&&(i=n)}),i},v.prototype.directionsTo=function(t,e,i){var n=e||{};if((null!=n.directionsProvider?n.directionsProvider:M.ONLINE)==M.OFFLINE){var r=this.locations.length>0?this.locations[0]:null;g(this._mappedin,[this],r,t,e,i)}else{var o={origin:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:null!=e&&n.accessible||void 0};if(t instanceof p)o.location=t._data.id;else{if(!(t instanceof v))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");o.destination=t._data.id}this._mappedin._getObject("directions",o,i)}},v.prototype.distanceTo=function(t,e,i){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new x(this._mappedin.nodes,this._mappedin.vortexes)),y(this._mappedin.venue.navigationGraph,[this],t,e,i)},_.prototype.getAngle=function(){return this.origin.getAngle(this.destination)},_.prototype.getDistance=function(){return this.distance},x.prototype.aStar=function(t,e,i){if(0==t.length||0==e.length)return null;var n=[],r={},o={};for(t.forEach(function(t){var i=t.getShortestEuclideanDistance(e);n.push({origin:t,priority:i});var a=t.id;r[a]=null,o[a]=0}),n.sort(function(t,e){return t.priority-e.priority});n.length>0;){var a=n[0];if(e.includes(a.origin)){for(var s=[],l=r[a.origin.id];null!=l;){s.push(l);var h=r[l.origin.id];l=null!=h?h:null}return s.reverse()}for(var c=0;c<this.edges[a.origin._index].length;c++){var u=this.edges[a.origin._index][c];if((!i||null==u.vortex||!1!==u.vortex.accessible)&&(!i||!1!==u.origin.accessible&&!1!==u.destination.accessible)){var p=o[a.origin.id]+u.weight;if(null==o[u.destination.id]||p<o[u.destination.id]){o[u.destination.id]=p;var d=p+u.destination.getShortestEuclideanDistance(e);n.push({origin:u.destination,priority:d}),r[u.destination.id]=u}}}n.splice(0,1),n.sort(function(t,e){return t.priority-e.priority})}return null};var M={ONLINE:"online",OFFLINE:"offline"};function q(t,e,i,n){this.node=t,this.action=e,this.atLocation=i,this.instruction=n}var A={DEPARTURE:"Departure",TAKEVORTEX:"TakeVortex",TURN:"Turn",ARRIVAL:"Arrival"},T={STRAIGHT:"Straight",RIGHT:"Right",SLIGHTRIGHT:"SlightRight",LEFT:"Left",SLIGHTLEFT:"SlightLeft"};function P(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function S(t,e){this._mappedin=t,this._data=e,this._cache={},this.navigationGraph=null,l(this,e)}function L(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function C(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}function I(t,e){this._mappedin=t,this._data=e,this._cache={},l(this,e)}P._fetch=function(t,e){var i=t._things.polygons.slice();t._things.maps&&s(i,"map"),t._things.nodes&&s(i,"entrances");var n={fields:i,perspective:t._do2D&&t._perspective||void 0,venue:t._venue};t._getArray("polygon",n,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new P(t,n[r]);e(null,n)})},c(P,"locations",function(){for(var t=[],e=this._mappedin.locations,i=this._data.id,n=0,r=e.length;n<r;++n){var o=e[n],a=o._data.polygons;if(Array.isArray(a))for(var s=0,l=a.length;s<l;++s){if(a[s].id===i){t.push(o);break}}}return t}),c(P,"entrances",function(){var t=[],e=this._data.entrances,i=this._mappedin._nodesById;if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n){var o=i[e[n].id];null!=o&&t.push(o)}return t}),P.prototype.directionsTo=function(t,e,i){var n=e||{};if((null!=n.directionsProvider?n.directionsProvider:M.ONLINE)==M.OFFLINE){var r=this.locations.length>0?this.locations[0]:null;g(this._mappedin,this.entrances,r,t,e,i)}else{var o={originLocation:this._data.id,destination:void 0,location:void 0,perspective:this._mappedin._do2D&&this._mappedin._perspective||void 0,accessible:n.accessible||void 0};if(t instanceof p)o.location=t._data.id;else{if(!(t instanceof v))throw new TypeError("destination must be a [MappedinLocation,MappedinNode]");o.destination=t._data.id}this._mappedin._getObject("directions",o,i)}},P.prototype.distanceTo=function(t,e,i){null==this._mappedin.venue.navigationGraph&&(this._mappedin.venue.navigationGraph=new x(this._mappedin.nodes,this._mappedin.vortexes)),y(this._mappedin.venue.navigationGraph,this.entrances,t,e,i)},S._fetch=function(t,e){var i={fields:t._things.venue,slug:t._venue,limit:1};t._getArray("venue",i,function(i,n){if(i)return e(i);if(n.length<1)e(new Error("venue not found"));else{var r=new S(t,n[0]);e(null,r)}})},L._fetch=function(t,e){var i={fields:t._things.themes.slice(),venue:t._venue};t._getArray("apollo-theme",i,function(i,n){if(i)return e(i);for(var r=0;r<n.length;++r)n[r]=new L(t,n[r]);e(null,n)})},C._fetch=function(t,e){var i=t._things.events.slice();t._things.locations&&s(i,"location");var n={fields:i,venue:t._venue,activeAtOrAfter:Date.now()};t._getArray("event",n,function(i,n){if(i)return e(i);for(var r=0;r<n.length;++r)n[r]=new C(t,n[r]);e(null,n)})},c(C,"location",function(){var t=null,e=this._mappedin._locationsById,i=this._data.location;if(null!=i){var n=e[i];null!=n&&(t=n)}return t}),I._fetch=function(t,e){var i={fields:t._things.locationStates.slice(),venue:t._venue};t._getArray("location-state",i,function(i,n){if(i)return e(i);for(var r=0,o=n.length;r<o;++r)n[r]=new I(t,n[r]);e(null,n)})};var O={categories:u,locations:p,vortexes:d,maps:m,nodes:v,polygons:P,venue:S,events:C,mapGroups:f,themes:L,locationStates:I};function R(t){this._accessToken=t.accessToken||null,this._baseUrl=t.baseUrl||a,this._clientId=t.clientId||null,this._clientSecret=t.clientSecret||null,this._perspective=t.perspective||null,this._language=t.language||null,this._things=t.things||{},this._venue=t.venue||null,this._do2D=t.do2D||!1,this._data={},this._cache={},this._authorization=null,this._accessToken?this._authorization="Bearer "+this._accessToken:this._clientId&&this._clientSecret&&(this._authorization="Basic "+btoa(this._clientId+":"+this._clientSecret))}function N(t){var e="";if(null!=t)for(var i="?",n=Object.keys(t),r=0,o=n.length;r<o;++r){var a=n[r],s=t[a];null!=s&&(e+=i+encodeURIComponent(a)+"="+encodeURIComponent(s),i="&")}return e}R.prototype._getJSON=function(t,e){this._language&&(t+="&lang="+encodeURIComponent(this._language));var i={Authorization:"Basic "+btoa(this._clientId+":"+this._clientSecret),"Content-Type":"text/json"};this._language&&(i["Accept-Language"]=this._language);var n={method:"GET",headers:i};new Promise(function(e,i){fetch(t,n).then(function(t){t.json().then(e).catch(i)}).catch(i)}).then(function(t){e(null,{data:t})}).catch(function(t){e(t,null)})},R.prototype._getObject=function(t,e,i){var n=this._baseUrl+t+N(e);this._getJSON(n,function(t,e){if(t)return i(t);var n=e.data;if(Array.isArray(n)){if(n.length<=0)return void i(new Error("invalid response (array with length <= 0)"));if(n.length>1)return void i(new Error("invalid response (array with length > 1)"));n=n[0]}i(null,n)})},R.prototype._getArray=function(t,e,i){var n,r=this._baseUrl+t+N(e);this._getJSON(r,function(t,e){if(t)return i(t);var r=e.data;if(Array.isArray(r)){if(n)for(var o=0,a=r.length;o<a;++o)n.push(r[o]);else n=r;i(null,n)}else i(new Error("invalid response"))})},Object.keys(O).forEach(function(t){h(R,t,function(){var e=this._data[t];if(void 0===e)throw new Error(t+" were not fetched");return e})}),Object.keys(O).forEach(function(t){c(R,"_"+t+"ById",function(){var e=this._data[t];if(void 0===e)throw new Error(t+": not fetched");if(!Array.isArray(e))throw new TypeError(t+": not an Array");for(var i=Object.create(null),n=0,r=e.length;n<r;++n){var o=e[n],a=o.id;null!=a&&(i[a]=o)}return i}),c(R,"_"+t+"ByExternalId",function(){var e=this._data[t];if(void 0===e)throw new Error(t+": not fetched");if(!Array.isArray(e))throw new TypeError(t+": not an Array");for(var i=Object.create(null),n=0,r=e.length;n<r;++n){var o=e[n],a=o.externalId;null!=a&&(i[a]=o)}return i})});var B={CATEGORY:"categories",EVENT:"events",LOCATION:"locations",MAPGROUP:"mapGroups",MAP:"maps",NODE:"nodes",POLYGON:"polygons",VORTEX:"vortexes"};function D(t){return"string"==typeof t&&t.length>0}Object.freeze(B),R.prototype.getCollectionItemById=function(t,e){var i=this["_"+B[t]+"ById"];return null!=i&&null!=i[e]?i[e]:null!=(i=this["_"+B[t]+"ByExternalId"])&&null!=i[e]?i[e]:null},R.prototype._fetchAll=function(t){var e=!1;"vortexes"in this._things||(this._things.vortexes=["name","type","accessible","weight","multiplier","nodes"]),"locationStates"in this._things||(this._things.locationStates=["name","id","value"]);var i=this._things,n=Object.keys(i),r=n.length,o=0;function a(i,n,a){if(!e){if(n)return e=!0,void t(n);this._data[i]=a,++o>=r&&(e=!0,t())}}for(var s=0,l=n.length;s<l;++s){var h=n[s];O[h]._fetch(this,a.bind(this,h))}r<=0&&setTimeout(t,0)},e.a=function(t,e){if(!t)throw new TypeError("options must be an Object");if(!(D(t.clientId)&&D(t.clientSecret)||D(t.accessToken)))throw new Error("{clientId,clientSecret} must be a String or accessToken must be a String");if(void 0!==t.perspective&&!D(t.perspective))throw new Error("perspective must be a String");if(void 0!==t.language&&!D(t.language))throw new Error("language must be a String");if(!function(t){if(null==t||"object"!==(void 0===t?"undefined":o(t)))return!1;for(var e=Object.keys(t),i=0,n=e.length;i<n;++i){var r=t[e[i]];if(!Array.isArray(r))return!1;for(var a=0,s=r.length;a<s;++a)if(!D(r[a]))return!1}return!0}(t.things))throw new Error("things must be an Object of [Array of String]");if(!D(t.venue))throw new Error("venue must be a String");var i=new R(t);i._fetchAll(function(t){if(t)return e(t);e(null,i)})}},function(t,e,i){"use strict";e.a=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(!t.states)return;var o=i||Date.now(),a=t.states.find(function(t){var e=new Date(t.start||n),i=new Date(t.end||r);return e<o&&i>o});if(!a)return;return e.find(function(t){return t.value===a.type})};var n=0,r="9999-12-31T00:00:00.000Z"}]).default});